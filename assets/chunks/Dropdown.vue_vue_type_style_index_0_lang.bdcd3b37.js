import{t as k,o as G,c as b}from"./index.2e3a5f72.js";import{p as W}from"./Button.43a77af2.js";import{d as D,l as v,U as S,_ as I,o as p,A as f,B as h,r as C,n as K,L as O,a as x,t as T,j as U,Y as X,w as V,V as R,D as g,c as Y,a2 as B,G as q,C as $,z as E,T as H,f as J,k as Q}from"./framework.6feb5f37.js";import{g as z}from"./commonjsHelpers.042e6b4d.js";import{u as A}from"./utils-6ba05f5b.b8bf33fb.js";import{u as Z}from"./use-focus.ae494a4f.js";import{z as ee,A as te,b as oe,L as ae,T as ne}from"./floating-ui.dom.browser.min.3a6ea315.js";import{u as se}from"./index.2813f4e2.js";import{I as le}from"./16.c3531f59.js";var re=A,P=re.createSVGComponent(P,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},[{elem:"path",attrs:{d:"M11 8L6 13 5.3 12.3 9.6 8 5.3 3.7 6 3z"}}]),ie=P;const ue=z(ie),L=Symbol("DROPDOWN_CONTEXT"),de=D({props:{text:{type:String,default:""},href:{type:String,default:void 0},active:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:s}){const n=S(L,void 0,!0);function o(e){s("click",e),(n!=null&&n.close&&!e.defaultPrevented||e.defaultPrevented&&t.href)&&n.close()}const r=v(()=>{const e=[""];return t.active&&e.push("dropdown__item--active"),e}),l=v(()=>{let e="button";return t.href&&(e="a"),e});return{handleOnClick:o,classNames:r,tagName:l}}});function ce(t,s,n,o,r,l){return p(),f(O(t.tagName),{"data-testid":"dropdown-item",class:K(["dropdown__item",t.classNames]),href:t.href,onClick:t.handleOnClick},{default:h(()=>[C(t.$slots,"default",{},()=>[x(T(t.text),1)])]),_:3},8,["class","href","onClick"])}const pe=I(de,[["render",ce]]);var fe=A,M=fe.createSVGComponent(M,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},[{elem:"path",attrs:{d:"M6.7 12.3L2.9 8.5 15 8.5 15 7.5 2.9 7.5 6.7 3.7 6 3 1 8 6 13z"}}]),ve=M;const me=z(ve),N=Symbol("DropdownTree"),_e=D({components:{DropdownItem:pe,IconNext:ue,IconBack:me},props:{text:{type:String,default:""},noCaret:{type:Boolean,default:!1}},emits:["click"],setup(t,{slots:s,emit:n}){var a;const o=S(N,void 0,!0),r=U("slide-left"),l=v(()=>o===void 0),e=(a=o==null?void 0:o.tree)!=null?a:X({_level:0,slots:s}),i=()=>{e.value={_level:e.value._level+1,prev:e.value,slots:s}},d=()=>{e.value.prev&&(e.value=e.value.prev)},_=v(()=>e.value.slots.default),w=v(()=>!!(l.value&&e.value.prev));V(e,(u,y)=>{r.value=u._level>y._level?"slide-left":"slide-right"}),l.value&&R(N,{tree:e,next:i,back:d});function m(){l.value&&(e.value={prev:void 0,_level:0,slots:s})}function c(){const u=new MouseEvent("click");n("click",u),u.defaultPrevented||i()}return{isRoot:l,tree:e,view:_,next:i,back:d,reset:m,canBack:w,transition:r,handleOnClick:c}}});const we=E("div",{class:"dropdown__group-content"},null,-1),be={class:"dropdown__subitem__content"};function he(t,s,n,o,r,l){const e=g("IconBack"),i=g("DropdownItem"),d=g("IconNext");return p(),f(H,{name:t.transition,mode:"out-in"},{default:h(()=>[(p(),Y("div",{key:t.tree._level,"data-testid":"dropdown-subitem",class:"dropdown__subitem"},[t.canBack?(p(),f(i,{key:"btn-back","data-testid":"dropdown-back",class:"dropdown__subitem__btn dropdown__subitem__btn--back",onClick:s[0]||(s[0]=B(_=>t.back(),["prevent"]))},{default:h(()=>[C(t.$slots,"button-back",{},()=>[q(e,{class:"dropdown__subitem__next"}),we])]),_:3})):$("",!0),t.isRoot?(p(),f(O(t.view),{key:2})):(p(),f(i,{key:"btn-next",class:"dropdown__subitem__btn",onClick:B(t.handleOnClick,["prevent"])},{default:h(()=>[E("div",be,[C(t.$slots,"button-content",{next:t.next,back:t.back},()=>[x(T(t.text),1)])]),t.noCaret?$("",!0):(p(),f(d,{key:0,"data-testid":"dropdown-subitem-next",class:"dropdown__subitem__next"}))]),_:3},8,["onClick"]))]))]),_:3},8,["name"])}const ye=I(_e,[["render",he]]),Oe=D({components:{Button:W,DropdownGroup:ye,IconArrow:le},props:{modelValue:{type:Boolean,default:!1},text:{type:String,default:""},placement:{type:String,default:"bottom-start"},variant:{type:String,default:"solid"},color:{type:String,default:"default"},size:{type:String,default:"md"},icon:{type:Boolean,default:!1},pill:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},noCaret:{type:Boolean,default:!1},divider:{type:Boolean,default:!1},menuClass:{type:[String,Array,Object],default:void 0}},models:{prop:"modelValue",event:"update:modelValue"},emits:["show","hide","update:modelValue"],setup(t,{emit:s}){const n=k("dropdown"),o=k("menu"),r=k("wizard"),l=J(t,"placement"),e=se(t),{next:i,prev:d}=Z(o),_=v(()=>{const a=[""];return t.divider&&a.push("dropdown--divider"),a});function w(){t.disabled||(e.value?c():m())}function m(){t.disabled||(e.value=!0,s("show"))}function c(){t.disabled||(e.value=!1,s("hide"))}return G(o,()=>{e.value&&setTimeout(()=>{c()})},{ignore:[n]}),b("Escape",a=>{const u=a.target;e.value&&(c(),typeof u.blur=="function"&&u.blur())}),b(["ArrowUp"],a=>{e.value&&(a.preventDefault(),d())}),b(["ArrowDown"],a=>{e.value&&(a.preventDefault(),i())}),b(["Tab"],a=>{e.value&&(a.preventDefault(),a.shiftKey?d():i())}),Q(a=>{if(n.value&&o.value){const u=ee(n.value,o.value,()=>{te(n.value,o.value,{strategy:"absolute",placement:l.value,middleware:[oe(),ae(),ne(8)]}).then(({x:y,y:j,placement:F})=>{o.value&&(o.value.dataset.popperPlacement=F,o.value.style.left=`${y||0}px`,o.value.style.top=`${j||0}px`)})});a(u)}},{flush:"post"}),V(e,a=>{!a&&r.value&&r.value.reset()},{immediate:!0}),R(L,{isOpen:e,toggle:w,open:m,close:c}),{isOpen:e,classNames:_,toggle:w,open:m,close:c}}});export{ue as I,Oe as _,ye as a,pe as p};
