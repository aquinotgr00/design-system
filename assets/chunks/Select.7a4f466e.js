import{D as N,a as O}from"./Dropdown.ad4eea7a.js";import{p as A}from"./Input.55490814.js";import{I as F}from"./16.ba0af3c7.js";import{u as T}from"./utils-6ba05f5b.5160683a.js";import{p as j}from"./SpinnerRing.0d961234.js";import{d as z,u as M}from"./adapter.d06e0de5.js";import{k as v,i as q,j as _,l as E,ab as U,ac as G,J,f as P,r as c,o as i,q as V,w,a as f,c as I,g as b,e as C,y as k,N as R,O as H,n as S,h as B,t as K}from"../app.98882f81.js";import{u as Q}from"./use-loading.fe494b10.js";import{i as D}from"./value.830bdabd.js";var W=T,$=W.createSVGComponent($,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},[{elem:"path",attrs:{d:"M8,1C4.1,1,1,4.1,1,8c0,3.9,3.1,7,7,7s7-3.1,7-7C15,4.1,11.9,1,8,1z M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z"}},{elem:"path",attrs:{d:"M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z","data-icon-path":"inner-path",opacity:"0"}}]),X=$;const Y=X,Z=z({setup({props:e,keyword:a}){const l=M(e);return v(()=>l.value.filter(n=>n.text.toLowerCase().includes(a.value.toLowerCase())))}}),x=q({components:{Dropdown:N,DropdownItem:O,Input:A,IconArrow:F,IconCheck:Y,IconLoading:j},props:{modelValue:{type:[String,Number,Boolean,Array,Object,Date],default:""},selected:{type:Object,default:()=>({text:"",value:void 0})},options:{type:Array,default:()=>[]},placeholder:{type:String,default:""},emptyText:{type:String,default:"No Data"},loadingText:{type:String,default:"Loading..."},adapter:{type:Object,default:()=>Z},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1}},models:{prop:"modelValue",event:"update:modelValue"},emits:["change","update:modelValue","update:selected","userInput"],setup(e,{emit:a}){const l=J(),r=_(),n=_(""),s=_(!1),u=Q({elapsed:!1}),h={props:e,keyword:n,isOpen:s,isLoading:u},p=e.adapter.setup(h),d=v({get(){return p.value.find(t=>D(t.value,e.modelValue))??{text:"",value:void 0}},set(t){a("change",t),a("update:modelValue",t.value),a("update:selected",t),s.value&&a("userInput",t)}}),y=v(()=>{const t=[];return s.value&&t.push("select--open"),e.disabled&&t.push("select--disabled"),e.readonly&&t.push("select--readonly"),e.error&&t.push("select--error","state--error"),t}),m=v({get(){var t;return s.value?n.value:(t=d.value)==null?void 0:t.text},set(t){t!==m.value&&(n.value=t)}});function o(t){d.value=t}function g(){!e.disabled&&!e.readonly&&(s.value=!0)}function L(t){return D(t.value,d.value.value)}return E(s,t=>{t||(n.value="")},{flush:"post"}),U(()=>{s.value&&r.value&&r.value!==document.activeElement&&r.value.focus()}),G(()=>{var t;(t=l==null?void 0:l.proxy)!=null&&t.$el&&(r.value=l.proxy.$el.querySelector(".select__search"))}),{classNames:y,model:d,isOpen:s,isLoading:u,search:m,items:p,select:o,onFocus:g,isSelected:L}}});const ee={key:0,"data-testid":"select-no-data",class:"select__empty"},te={class:"select__option"},ae={class:"select__option-text"},oe={key:2,"data-testid":"select-loading",class:"select__loading"};function se(e,a,l,r,n,s){const u=c("Input"),h=c("IconArrow"),p=c("IconCheck"),d=c("DropdownItem"),y=c("IconLoading"),m=c("Dropdown");return i(),V(m,{modelValue:e.isOpen,"onUpdate:modelValue":a[1]||(a[1]=o=>e.isOpen=o),class:S(["select",e.classNames]),"data-testid":"select","aria-label":"select",disabled:e.disabled},{activator:w(()=>[f(u,{modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=o=>e.search=o),"data-testid":"select-search",class:"select__search",placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,onFocus:e.onFocus},null,8,["modelValue","placeholder","disabled","readonly","onFocus"]),f(h,{class:"select__caret"})]),default:w(()=>[!e.isLoading&&e.items.length===0?(i(),I("div",ee,[b(e.$slots,"empty",{},()=>[C(k(e.emptyText),1)])])):(i(!0),I(R,{key:1},H(e.items,(o,g)=>(i(),V(d,{key:g,"data-testid":"select-item",class:S({selected:e.isSelected(o)}),onClick:L=>e.select(o)},{default:w(()=>[B("div",te,[B("div",ae,[b(e.$slots,"option",{isSelected:e.isSelected(o),item:o},()=>[C(k(o.text),1)])]),f(p,{class:"select__option-checked"})])]),_:2},1032,["class","onClick"]))),128)),e.isLoading?(i(),I("div",oe,[f(y,{width:"14",height:"14"}),b(e.$slots,"loading",{},()=>[C(k(e.loadingText),1)])])):K("",!0)]),_:3},8,["modelValue","disabled","class"])}const fe=P(x,[["render",se]]);export{fe as p};
