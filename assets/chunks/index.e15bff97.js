import{u as p}from"./use-singleton.e0088a57.js";import{t as V}from"./index.cf7dc2f1.js";import{u as C}from"./use-popper.4da7d2e2.js";import{u as B}from"./index.a4efde5d.js";import{i as y,C as h,k as I,l as M,f as L,d as T,D,o as d,c as m,g as P,n as U,h as b,j,a7 as N,r as R,U as q,Q as F,R as W,q as z,w as H,a3 as O}from"../app.b3e63b5e.js";import{p as Q}from"./index.9663a195.js";import{t as G}from"./toString.3146a8cb.js";var J=0;function K(t){var e=++J;return G(t)+e}const X=y({props:{modelValue:{type:Boolean,default:!1},color:{type:String,default:"black"},target:{type:Object,default:void 0},placement:{type:String,default:"top"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue","show","hide"],setup(t,{emit:e}){const o=B(t),l=h(t,"placement"),n=h(t,"target"),c=V("tooltip"),r=C(n,c,l),s=I(()=>{const a=[];return t.color&&a.push(`tooltip--${t.color}`),a});return M(o,a=>{var i;a?((i=r.value)==null||i.update(),e("show",n.value)):e("hide",n.value)}),{isShow:o,classNames:s}}});const Y=b("div",{class:"tooltip__arrow","data-popper-arrow":""},null,-1);function Z(t,e,o,l,n,c){return T((d(),m("div",{ref:"tooltip",class:U(["tooltip",t.classNames]),"data-testid":"tooltip"},[Y,P(t.$slots,"default")],2)),[[D,t.isShow]])}const tt=L(X,[["render",Z]]),et=y({components:{Tooltip:tt},directives:{pMd:Q},setup(){const t=j(new Map);function e(s){const a=K("tooltip_");return t.value.set(a,N({...s,isShow:!1})),a}function o(s,a){const i=t.value.get(s);i&&(i.target=a.target,i.text=a.text,i.placement=a.placement)}function l(s){t.value.get(s).isShow=!0}function n(s){t.value.get(s).isShow=!1}function c(s){const a=t.value.get(s);a.isShow=!a.isShow}function r(s){t.value.delete(s)}return{items:t,add:e,update:o,show:l,hide:n,toggle:c,remove:r}}}),ot={class:"tooltip-container","data-testid":"tooltip-container"};function at(t,e,o,l,n,c){const r=R("Tooltip"),s=q("p-md");return d(),m("div",ot,[(d(!0),m(F,null,W(t.items,([a,i])=>(d(),z(r,O({key:a,modelValue:i.isShow,"onUpdate:modelValue":A=>i.isShow=A},i),{default:H(()=>[T(b("span",null,null,512),[[s,i.text,void 0,{inline:!0}]])]),_:2},1040,["modelValue","onUpdate:modelValue"]))),128))])}const f=L(et,[["render",at]]);function u(t,e,o=!1){return async function(n){const c=await p(f),r=n.target,s=r.dataset.tooltipId,a=r.dataset.tooltipEnable!=="false",i=r.dataset.tooltipAction;a&&i.includes(t)&&(c[e](s),o&&n.preventDefault())}}function _(t,{modifiers:e}){let o;return e.top?o="top":e.bottom&&(o="bottom"),o?e.left?o=`${o}-start`:e.right&&(o=`${o}-end`):e.right?o="right":e.left&&(o="left"),o||(o="top"),e.start&&!o.endsWith("start")?o=`${o}-start`:e.end&&!o.endsWith("end")&&(o=`${o}-end`),o}function w(t,{modifiers:e}){const o=[];return e.focus&&o.push("focus"),e.hover&&o.push("hover"),e.click&&o.push("click"),o.join("-")||"focus-hover"}function v(t,e){var o;return typeof e.value=="string"?e.value:t.hasAttribute("title")?t.getAttribute("title"):(o=t.dataset.tooltipText)!=null?o:""}function g(t,{modifiers:e}){return e.white?"white":"black"}const $=u("click","toggle",!0),E=u("hover","show"),S=u("hover","hide"),k=u("focus","show"),x=u("focus","hide"),st={async mounted(t,e){const o=await p(f),l=w(t,e),n=g(t,e),c=v(t,e),r=_(t,e),s=e.value!==!1&&!!c,a=o.add({target:t,placement:r,text:c,color:n});t.dataset.tooltipId=a,t.dataset.tooltipAction=l,t.dataset.tooltipText=c,t.dataset.tooltipEnable=s?"true":"false",t.removeAttribute("title"),t.addEventListener("click",$),t.addEventListener("mouseenter",E,{passive:!0}),t.addEventListener("mouseleave",S,{passive:!0}),t.addEventListener("focus",k,{passive:!0}),t.addEventListener("blur",x,{passive:!0})},async updated(t,e){const o=await p(f),l=t.dataset.tooltipId,n=w(t,e),c=g(t,e),r=v(t,e),s=_(t,e),a=e.value!==!1&&!!r;t.dataset.tooltipAction=n,t.dataset.tooltipText=r,t.dataset.tooltipEnable=a?"true":"false",o.update(l,{target:t,placement:s,text:r,color:c}),a||o.hide(l),t.removeAttribute("title")},async beforeUnmount(t,e){const o=await p(f),l=t.dataset.tooltipId,n=v(t,e);o.remove(l),t.removeEventListener("click",$),t.removeEventListener("mouseenter",E),t.removeEventListener("mouseleave",S),t.removeEventListener("focus",k),t.removeEventListener("blur",x),t.setAttribute("title",n),delete t.dataset.tooltipId,delete t.dataset.tooltipAction,delete t.dataset.tooltipText,delete t.dataset.tooltipEnable}},dt=st;export{dt as v};
