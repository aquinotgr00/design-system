import{m as k,r as u,w,ad as p,T,am as A,$ as C,c as d,a0 as F,_ as x,K as V,x as N,p as _,M as b,I as E,q as y}from"./framework.d1aba3cb.js";import{f as P}from"./vnode.2d3c3048.js";import{u as O}from"./index.7ec55cbf.js";import{u as g}from"./index.9c163825.js";import{r as m}from"./hook.64405bb6.js";import{A as K,s as M}from"./theme.0ede34c8.js";function f(){}const X=k({props:{active:{type:Number,default:0},keepAlive:{type:Boolean,default:!1}},setup(e,{slots:s}){const a=u("slide-left");return w(()=>e.active,(n,t)=>{a.value=n>t?"slide-left":"slide-right"}),()=>{const n=P(s.default(),"Step").at(e.active),t=()=>e.keepAlive?p(A,()=>p(n,{key:e.active})):p(n,{key:e.active});return p(T,{name:a.value,mode:"out-in"},t)}}}),h=Symbol("STEPS_CONTEXT");function j(){const e=C(h,()=>(console.warn("<p-step> must be placed inside <p-steps>"),{next:f,prev:f,toStep:f,step:u(1),canPrev:u(!1),canNext:u(!1),onPrevHooks:u([]),onNextHooks:u([])}),!0),s=u([]),a=u([]);function n(o){s.value.unshift(o)}function t(o){a.value.unshift(o)}const r=async(...o)=>await m(s.value,...o),l=async(...o)=>await m(a.value,...o);return e.onPrevHooks.value.unshift(r),e.onNextHooks.value.unshift(l),K(()=>{const o=e.onPrevHooks.value.indexOf(r),i=e.onNextHooks.value.indexOf(l);o>-1&&e.onPrevHooks.value.splice(o,1),i>-1&&e.onNextHooks.value.splice(i,1)}),{...e,onBeforePrev:n,onBeforeNext:t}}const q=k({components:{StepSlider:X},props:{modelValue:{type:Number,default:1},keepAlive:{type:Boolean,default:!1},onBeforePrev:{type:Function,default:()=>!0},onBeforeNext:{type:Function,default:()=>!0},onFinished:{type:Function,default:f}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e,{slots:s}){const a=u([e.onBeforeNext]),n=u([e.onBeforePrev]),t=O(e),r=d(()=>P(s.default(),"Step").length),l=g(t,1,r),o=d(()=>t.value<=r.value),i=d(()=>t.value>1);async function B(){o.value&&await v(t.value+1)}async function H(){i.value&&await v(t.value-1)}async function v(c){const S=t.value,$=c>S?a.value:n.value;await m($,c,S)&&(c<=r.value?l.value=c:await e.onFinished())}return M(l,t),F(h,{step:l,next:B,prev:H,canNext:o,canPrev:i,toStep:v,onPrevHooks:n,onNextHooks:a}),{model:t}}});const I={class:"steps","data-testid":"steps"};function R(e,s,a,n,t,r){const l=V("StepSlider");return N(),_("div",I,[b(l,{active:e.model-1,"keep-alive":e.keepAlive},{default:E(()=>[y(e.$slots,"default")]),_:3},8,["active","keep-alive"])])}const Z=x(q,[["render",R]]),U=k({name:"Step",props:{onBeforePrev:{type:Function,default:()=>!0},onBeforeNext:{type:Function,default:()=>!0}},setup(e){const{canNext:s,canPrev:a,toStep:n,step:t,next:r,prev:l,onBeforeNext:o,onBeforePrev:i}=j();return o(e.onBeforeNext),i(e.onBeforePrev),{canNext:s,canPrev:a,toStep:n,prev:l,next:r,step:t}}}),z={class:"step","data-testid":"step"};function D(e,s,a,n,t,r){return N(),_("div",z,[y(e.$slots,"default",{step:e.step,next:e.next,prev:e.prev,canPrev:e.canPrev,canNext:e.canNext,toStep:e.toStep})])}const ee=x(U,[["render",D]]);export{Z as S,ee as a};
