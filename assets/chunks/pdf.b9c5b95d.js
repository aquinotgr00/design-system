var Ye=Object.defineProperty;var Ke=(dt,u,Y)=>u in dt?Ye(dt,u,{enumerable:!0,configurable:!0,writable:!0,value:Y}):dt[u]=Y;var It=(dt,u,Y)=>(Ke(dt,typeof u!="symbol"?u+"":u,Y),Y),re=(dt,u,Y)=>{if(!u.has(dt))throw TypeError("Cannot "+Y)};var b=(dt,u,Y)=>(re(dt,u,"read from private field"),Y?Y.call(dt):u.get(dt)),et=(dt,u,Y)=>{if(u.has(dt))throw TypeError("Cannot add the same private member more than once");u instanceof WeakSet?u.add(dt):u.set(dt,Y)},_t=(dt,u,Y,f)=>(re(dt,u,"write to private field"),f?f.call(dt,Y):u.set(dt,Y),Y);var ae=(dt,u,Y,f)=>({set _(k){_t(dt,u,k,Y)},get _(){return b(dt,u,f)}}),ht=(dt,u,Y)=>(re(dt,u,"access private method"),Y);import{g as getDefaultExportFromCjs}from"./commonjsHelpers.de833af9.js";import{r as require$$0}from"./vite-browser-external_commonjs-proxy.0726eb50.js";function _mergeNamespaces(dt,u){for(var Y=0;Y<u.length;Y++){const f=u[Y];if(typeof f!="string"&&!Array.isArray(f)){for(const k in f)if(k!=="default"&&!(k in dt)){const V=Object.getOwnPropertyDescriptor(f,k);V&&Object.defineProperty(dt,k,V.get?V:{enumerable:!0,get:()=>f[k]})}}}return Object.freeze(Object.defineProperty(dt,Symbol.toStringTag,{value:"Module"}))}function commonjsRequire(dt){throw new Error('Could not dynamically require "'+dt+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$2={exports:{}};(function(module,exports){(function(u,Y){module.exports=Y()})(globalThis,()=>(()=>{var __webpack_modules__=[,(dt,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.VerbosityLevel=u.Util=u.UnknownErrorException=u.UnexpectedResponseException=u.UNSUPPORTED_FEATURES=u.TextRenderingMode=u.StreamType=u.RenderingIntentFlag=u.PermissionFlag=u.PasswordResponses=u.PasswordException=u.PageActionEventType=u.OPS=u.MissingPDFException=u.LINE_FACTOR=u.LINE_DESCENT_FACTOR=u.InvalidPDFException=u.ImageKind=u.IDENTITY_MATRIX=u.FormatError=u.FontType=u.FeatureTest=u.FONT_IDENTITY_MATRIX=u.DocumentActionEventType=u.CMapCompressionType=u.BaseException=u.BASELINE_FACTOR=u.AnnotationType=u.AnnotationStateModelType=u.AnnotationReviewState=u.AnnotationReplyType=u.AnnotationMode=u.AnnotationMarkedState=u.AnnotationFlag=u.AnnotationFieldFlag=u.AnnotationEditorType=u.AnnotationEditorPrefix=u.AnnotationEditorParamsType=u.AnnotationBorderStyleType=u.AnnotationActionEventType=u.AbortException=void 0,u.arrayByteLength=p,u.arraysToBytes=P,u.assert=h,u.bytesToString=ut,u.createPromiseCapability=Et,u.createValidAbsoluteUrl=_,u.getModificationDate=Ft,u.getVerbosityLevel=nt,u.info=bt,u.isArrayBuffer=St,u.isArrayEqual=Rt,u.objectFromMap=H,u.objectSize=x,u.setVerbosityLevel=Z,u.shadow=F,u.string32=C,u.stringToBytes=i,u.stringToPDFString=L,u.stringToUTF8String=ft,u.unreachable=D,u.utf8StringToString=At,u.warn=yt;const Y=[1,0,0,1,0,0];u.IDENTITY_MATRIX=Y;const f=[.001,0,0,.001,0,0];u.FONT_IDENTITY_MATRIX=f;const k=1.35;u.LINE_FACTOR=k;const V=.35;u.LINE_DESCENT_FACTOR=V;const W=V/k;u.BASELINE_FACTOR=W;const q={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};u.RenderingIntentFlag=q;const N={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};u.AnnotationMode=N;const m="pdfjs_internal_editor_";u.AnnotationEditorPrefix=m;const A={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};u.AnnotationEditorType=A;const R={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};u.AnnotationEditorParamsType=R;const v={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};u.PermissionFlag=v;const y={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};u.TextRenderingMode=y;const d={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};u.ImageKind=d;const a={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};u.AnnotationType=a;const n={MARKED:"Marked",REVIEW:"Review"};u.AnnotationStateModelType=n;const e={MARKED:"Marked",UNMARKED:"Unmarked"};u.AnnotationMarkedState=e;const r={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};u.AnnotationReviewState=r;const o={GROUP:"Group",REPLY:"R"};u.AnnotationReplyType=o;const c={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};u.AnnotationFlag=c;const t={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};u.AnnotationFieldFlag=t;const s={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};u.AnnotationBorderStyleType=s;const g={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};u.AnnotationActionEventType=g;const T={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};u.DocumentActionEventType=T;const O={O:"PageOpen",C:"PageClose"};u.PageActionEventType=O;const E={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};u.StreamType=E;const w={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};u.FontType=w;const Q={ERRORS:0,WARNINGS:1,INFOS:5};u.VerbosityLevel=Q;const ct={NONE:0,BINARY:1};u.CMapCompressionType=ct;const it={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};u.OPS=it;const X={forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};u.UNSUPPORTED_FEATURES=X;const j={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};u.PasswordResponses=j;let $=Q.WARNINGS;function Z(at){Number.isInteger(at)&&($=at)}function nt(){return $}function bt(at){$>=Q.INFOS&&console.log(`Info: ${at}`)}function yt(at){$>=Q.WARNINGS&&console.log(`Warning: ${at}`)}function D(at){throw new Error(at)}function h(at,K){at||D(K)}function l(at){if(!at)return!1;switch(at.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function _(at,K=null,S=null){if(!at)return null;try{if(S&&typeof at=="string"){if(S.addDefaultProtocol&&at.startsWith("www.")){const pt=at.match(/\./g);pt&&pt.length>=2&&(at=`http://${at}`)}if(S.tryConvertEncoding)try{at=ft(at)}catch(pt){}}const J=K?new URL(at,K):new URL(at);if(l(J))return J}catch(J){}return null}function F(at,K,S,J=!1){return Object.defineProperty(at,K,{value:S,enumerable:!J,configurable:!0,writable:!1}),S}const M=function(){function K(S,J){this.constructor===K&&D("Cannot initialize BaseException."),this.message=S,this.name=J}return K.prototype=new Error,K.constructor=K,K}();u.BaseException=M;class I extends M{constructor(K,S){super(K,"PasswordException"),this.code=S}}u.PasswordException=I;class B extends M{constructor(K,S){super(K,"UnknownErrorException"),this.details=S}}u.UnknownErrorException=B;class G extends M{constructor(K){super(K,"InvalidPDFException")}}u.InvalidPDFException=G;class ot extends M{constructor(K){super(K,"MissingPDFException")}}u.MissingPDFException=ot;class z extends M{constructor(K,S){super(K,"UnexpectedResponseException"),this.status=S}}u.UnexpectedResponseException=z;class lt extends M{constructor(K){super(K,"FormatError")}}u.FormatError=lt;class tt extends M{constructor(K){super(K,"AbortException")}}u.AbortException=tt;function ut(at){(typeof at!="object"||at===null||at.length===void 0)&&D("Invalid argument for bytesToString");const K=at.length,S=8192;if(K<S)return String.fromCharCode.apply(null,at);const J=[];for(let pt=0;pt<K;pt+=S){const Ct=Math.min(pt+S,K),Tt=at.subarray(pt,Ct);J.push(String.fromCharCode.apply(null,Tt))}return J.join("")}function i(at){typeof at!="string"&&D("Invalid argument for stringToBytes");const K=at.length,S=new Uint8Array(K);for(let J=0;J<K;++J)S[J]=at.charCodeAt(J)&255;return S}function p(at){if(at.length!==void 0)return at.length;if(at.byteLength!==void 0)return at.byteLength;D("Invalid argument for arrayByteLength")}function P(at){const K=at.length;if(K===1&&at[0]instanceof Uint8Array)return at[0];let S=0;for(let Ct=0;Ct<K;Ct++)S+=p(at[Ct]);let J=0;const pt=new Uint8Array(S);for(let Ct=0;Ct<K;Ct++){let Tt=at[Ct];Tt instanceof Uint8Array||(typeof Tt=="string"?Tt=i(Tt):Tt=new Uint8Array(Tt));const Mt=Tt.byteLength;pt.set(Tt,J),J+=Mt}return pt}function C(at){return String.fromCharCode(at>>24&255,at>>16&255,at>>8&255,at&255)}function x(at){return Object.keys(at).length}function H(at){const K=Object.create(null);for(const[S,J]of at)K[S]=J;return K}function rt(){const at=new Uint8Array(4);return at[0]=1,new Uint32Array(at.buffer,0,1)[0]===1}function mt(){try{return new Function(""),!0}catch(at){return!1}}class U{static get isLittleEndian(){return F(this,"isLittleEndian",rt())}static get isEvalSupported(){return F(this,"isEvalSupported",mt())}static get isOffscreenCanvasSupported(){return F(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}u.FeatureTest=U;const vt=[...Array(256).keys()].map(at=>at.toString(16).padStart(2,"0"));class st{static makeHexColor(K,S,J){return`#${vt[K]}${vt[S]}${vt[J]}`}static scaleMinMax(K,S){let J;K[0]?(K[0]<0&&(J=S[0],S[0]=S[1],S[1]=J),S[0]*=K[0],S[1]*=K[0],K[3]<0&&(J=S[2],S[2]=S[3],S[3]=J),S[2]*=K[3],S[3]*=K[3]):(J=S[0],S[0]=S[2],S[2]=J,J=S[1],S[1]=S[3],S[3]=J,K[1]<0&&(J=S[2],S[2]=S[3],S[3]=J),S[2]*=K[1],S[3]*=K[1],K[2]<0&&(J=S[0],S[0]=S[1],S[1]=J),S[0]*=K[2],S[1]*=K[2]),S[0]+=K[4],S[1]+=K[4],S[2]+=K[5],S[3]+=K[5]}static transform(K,S){return[K[0]*S[0]+K[2]*S[1],K[1]*S[0]+K[3]*S[1],K[0]*S[2]+K[2]*S[3],K[1]*S[2]+K[3]*S[3],K[0]*S[4]+K[2]*S[5]+K[4],K[1]*S[4]+K[3]*S[5]+K[5]]}static applyTransform(K,S){const J=K[0]*S[0]+K[1]*S[2]+S[4],pt=K[0]*S[1]+K[1]*S[3]+S[5];return[J,pt]}static applyInverseTransform(K,S){const J=S[0]*S[3]-S[1]*S[2],pt=(K[0]*S[3]-K[1]*S[2]+S[2]*S[5]-S[4]*S[3])/J,Ct=(-K[0]*S[1]+K[1]*S[0]+S[4]*S[1]-S[5]*S[0])/J;return[pt,Ct]}static getAxialAlignedBoundingBox(K,S){const J=st.applyTransform(K,S),pt=st.applyTransform(K.slice(2,4),S),Ct=st.applyTransform([K[0],K[3]],S),Tt=st.applyTransform([K[2],K[1]],S);return[Math.min(J[0],pt[0],Ct[0],Tt[0]),Math.min(J[1],pt[1],Ct[1],Tt[1]),Math.max(J[0],pt[0],Ct[0],Tt[0]),Math.max(J[1],pt[1],Ct[1],Tt[1])]}static inverseTransform(K){const S=K[0]*K[3]-K[1]*K[2];return[K[3]/S,-K[1]/S,-K[2]/S,K[0]/S,(K[2]*K[5]-K[4]*K[3])/S,(K[4]*K[1]-K[5]*K[0])/S]}static singularValueDecompose2dScale(K){const S=[K[0],K[2],K[1],K[3]],J=K[0]*S[0]+K[1]*S[2],pt=K[0]*S[1]+K[1]*S[3],Ct=K[2]*S[0]+K[3]*S[2],Tt=K[2]*S[1]+K[3]*S[3],Mt=(J+Tt)/2,Pt=Math.sqrt((J+Tt)**2-4*(J*Tt-Ct*pt))/2,wt=Mt+Pt||1,kt=Mt-Pt||1;return[Math.sqrt(wt),Math.sqrt(kt)]}static normalizeRect(K){const S=K.slice(0);return K[0]>K[2]&&(S[0]=K[2],S[2]=K[0]),K[1]>K[3]&&(S[1]=K[3],S[3]=K[1]),S}static intersect(K,S){const J=Math.max(Math.min(K[0],K[2]),Math.min(S[0],S[2])),pt=Math.min(Math.max(K[0],K[2]),Math.max(S[0],S[2]));if(J>pt)return null;const Ct=Math.max(Math.min(K[1],K[3]),Math.min(S[1],S[3])),Tt=Math.min(Math.max(K[1],K[3]),Math.max(S[1],S[3]));return Ct>Tt?null:[J,Ct,pt,Tt]}static bezierBoundingBox(K,S,J,pt,Ct,Tt,Mt,Pt){const wt=[],kt=[[],[]];let Ot,Lt,Dt,xt,jt,Bt,Wt,qt;for(let zt=0;zt<2;++zt){if(zt===0?(Lt=6*K-12*J+6*Ct,Ot=-3*K+9*J-9*Ct+3*Mt,Dt=3*J-3*K):(Lt=6*S-12*pt+6*Tt,Ot=-3*S+9*pt-9*Tt+3*Pt,Dt=3*pt-3*S),Math.abs(Ot)<1e-12){if(Math.abs(Lt)<1e-12)continue;xt=-Dt/Lt,0<xt&&xt<1&&wt.push(xt);continue}Wt=Lt*Lt-4*Dt*Ot,qt=Math.sqrt(Wt),!(Wt<0)&&(jt=(-Lt+qt)/(2*Ot),0<jt&&jt<1&&wt.push(jt),Bt=(-Lt-qt)/(2*Ot),0<Bt&&Bt<1&&wt.push(Bt))}let Nt=wt.length,Ut;const Gt=Nt;for(;Nt--;)xt=wt[Nt],Ut=1-xt,kt[0][Nt]=Ut*Ut*Ut*K+3*Ut*Ut*xt*J+3*Ut*xt*xt*Ct+xt*xt*xt*Mt,kt[1][Nt]=Ut*Ut*Ut*S+3*Ut*Ut*xt*pt+3*Ut*xt*xt*Tt+xt*xt*xt*Pt;return kt[0][Gt]=K,kt[1][Gt]=S,kt[0][Gt+1]=Mt,kt[1][Gt+1]=Pt,kt[0].length=kt[1].length=Gt+2,[Math.min(...kt[0]),Math.min(...kt[1]),Math.max(...kt[0]),Math.max(...kt[1])]}}u.Util=st;const gt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function L(at){if(at[0]>="ï"){let S;if(at[0]==="þ"&&at[1]==="ÿ"?S="utf-16be":at[0]==="ÿ"&&at[1]==="þ"?S="utf-16le":at[0]==="ï"&&at[1]==="»"&&at[2]==="¿"&&(S="utf-8"),S)try{const J=new TextDecoder(S,{fatal:!0}),pt=i(at);return J.decode(pt)}catch(J){yt(`stringToPDFString: "${J}".`)}}const K=[];for(let S=0,J=at.length;S<J;S++){const pt=gt[at.charCodeAt(S)];K.push(pt?String.fromCharCode(pt):at.charAt(S))}return K.join("")}function ft(at){return decodeURIComponent(escape(at))}function At(at){return unescape(encodeURIComponent(at))}function St(at){return typeof at=="object"&&at!==null&&at.byteLength!==void 0}function Rt(at,K){if(at.length!==K.length)return!1;for(let S=0,J=at.length;S<J;S++)if(at[S]!==K[S])return!1;return!0}function Ft(at=new Date){return[at.getUTCFullYear().toString(),(at.getUTCMonth()+1).toString().padStart(2,"0"),at.getUTCDate().toString().padStart(2,"0"),at.getUTCHours().toString().padStart(2,"0"),at.getUTCMinutes().toString().padStart(2,"0"),at.getUTCSeconds().toString().padStart(2,"0")].join("")}function Et(){const at=Object.create(null);let K=!1;return Object.defineProperty(at,"settled",{get(){return K}}),at.promise=new Promise(function(S,J){at.resolve=function(pt){K=!0,S(pt)},at.reject=function(pt){K=!0,J(pt)}}),at}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var dt,Y,f,k,V,W,q,N,m,A,R,oe,y,d;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(12),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:n,NodeCMapReaderFactory:e,NodeStandardFontDataFactory:r}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=n,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=e,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=r}let createPDFNetworkStream;function setPDFNetworkStreamFactory(n){createPDFNetworkStream=n}function getDocument(n){const e=new PDFDocumentLoadingTask;let r;if(typeof n=="string"||n instanceof URL)r={url:n};else if((0,_util.isArrayBuffer)(n))r={data:n};else if(n instanceof PDFDataRangeTransport)r={range:n};else{if(typeof n!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!n.url&&!n.data&&!n.range)throw new Error("Invalid parameter object: need either .data, .range or .url");r=n}const o=Object.create(null);let c=null,t=null;for(const g in r){const T=r[g];switch(g){case"url":if(typeof window<"u")try{o[g]=new URL(T,window.location).href;continue}catch(O){(0,_util.warn)(`Cannot create valid URL: "${O}".`)}else if(typeof T=="string"||T instanceof URL){o[g]=T.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":c=T;continue;case"worker":t=T;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&T instanceof Buffer)o[g]=new Uint8Array(T);else{if(T instanceof Uint8Array)break;if(typeof T=="string")o[g]=(0,_util.stringToBytes)(T);else if(typeof T=="object"&&T!==null&&!isNaN(T.length))o[g]=new Uint8Array(T);else if((0,_util.isArrayBuffer)(T))o[g]=new Uint8Array(T);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}o[g]=T}if(o.CMapReaderFactory=o.CMapReaderFactory||DefaultCMapReaderFactory,o.StandardFontDataFactory=o.StandardFontDataFactory||DefaultStandardFontDataFactory,o.ignoreErrors=o.stopAtErrors!==!0,o.fontExtraProperties=o.fontExtraProperties===!0,o.pdfBug=o.pdfBug===!0,o.enableXfa=o.enableXfa===!0,(!Number.isInteger(o.rangeChunkSize)||o.rangeChunkSize<1)&&(o.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof o.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(o.docBaseUrl))&&(o.docBaseUrl=null),(!Number.isInteger(o.maxImageSize)||o.maxImageSize<-1)&&(o.maxImageSize=-1),typeof o.cMapUrl!="string"&&(o.cMapUrl=null),typeof o.standardFontDataUrl!="string"&&(o.standardFontDataUrl=null),typeof o.useWorkerFetch!="boolean"&&(o.useWorkerFetch=o.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&o.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof o.isEvalSupported!="boolean"&&(o.isEvalSupported=!0),typeof o.isOffscreenCanvasSupported!="boolean"&&(o.isOffscreenCanvasSupported=!_is_node.isNodeJS),typeof o.disableFontFace!="boolean"&&(o.disableFontFace=_is_node.isNodeJS),typeof o.useSystemFonts!="boolean"&&(o.useSystemFonts=!_is_node.isNodeJS&&!o.disableFontFace),(typeof o.ownerDocument!="object"||o.ownerDocument===null)&&(o.ownerDocument=globalThis.document),typeof o.disableRange!="boolean"&&(o.disableRange=!1),typeof o.disableStream!="boolean"&&(o.disableStream=!1),typeof o.disableAutoFetch!="boolean"&&(o.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(o.verbosity),!t){const g={verbosity:o.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};t=g.port?PDFWorker.fromPort(g):new PDFWorker(g),e._worker=t}const s=e.docId;return t.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const g=_fetchDocument(t,o,c,s),T=new Promise(function(O){let E;c?E=new _transport_stream.PDFDataTransportStream({length:o.length,initialData:o.initialData,progressiveDone:o.progressiveDone,contentDispositionFilename:o.contentDispositionFilename,disableRange:o.disableRange,disableStream:o.disableStream},c):o.data||(E=createPDFNetworkStream({url:o.url,length:o.length,httpHeaders:o.httpHeaders,withCredentials:o.withCredentials,rangeChunkSize:o.rangeChunkSize,disableRange:o.disableRange,disableStream:o.disableStream})),O(E)});return Promise.all([g,T]).then(function([O,E]){if(e.destroyed)throw new Error("Loading aborted");const w=new _message_handler.MessageHandler(s,O,t.port),Q=new WorkerTransport(w,e,E,o);e._transport=Q,w.send("Ready",null)})}).catch(e._capability.reject),e}async function _fetchDocument(n,e,r,o){if(n.destroyed)throw new Error("Worker was destroyed");r&&(e.length=r.length,e.initialData=r.initialData,e.progressiveDone=r.progressiveDone,e.contentDispositionFilename=r.contentDispositionFilename);const c=await n.messageHandler.sendWithPromise("GetDocRequest",{docId:o,apiVersion:"3.1.81",data:e.data,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length,docBaseUrl:e.docBaseUrl,enableXfa:e.enableXfa,evaluatorOptions:{maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,isOffscreenCanvasSupported:e.isOffscreenCanvasSupported,fontExtraProperties:e.fontExtraProperties,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null}});if(e.data&&(e.data=null),n.destroyed)throw new Error("Worker was destroyed");return c}const u=class u{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${ae(u,dt)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0,await((e=this._transport)==null?void 0:e.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};dt=new WeakMap,et(u,dt,0);let PDFDocumentLoadingTask=u;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,r,o=!1,c=null){this.length=e,this.initialData=r,this.progressiveDone=o,this.contentDispositionFilename=c,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,r){for(const o of this._rangeListeners)o(e,r)}onDataProgress(e,r){this._readyCapability.promise.then(()=>{for(const o of this._progressListeners)o(e,r)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const r of this._progressiveReadListeners)r(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,r){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,r){this._pdfInfo=e,this._transport=r}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,r,o,c,t=!1){this._pageIndex=e,this._pageInfo=r,this._ownerDocument=c,this._transport=o,this._stats=t?new _display_utils.StatTimer:null,this._pdfBug=t,this.commonObjs=o.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:r=this.rotate,offsetX:o=0,offsetY:c=0,dontFlip:t=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:r,offsetX:o,offsetY:c,dontFlip:t})}getAnnotations({intent:e="display"}={}){const r=this._transport.getRenderingIntent(e);let o=this._annotationPromises.get(r.cacheKey);return o||(o=this._transport.getAnnotations(this._pageIndex,r.renderingIntent),this._annotationPromises.set(r.cacheKey,o)),o}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:r,intent:o="display",annotationMode:c=_util.AnnotationMode.ENABLE,transform:t=null,canvasFactory:s=null,background:g=null,optionalContentConfigPromise:T=null,annotationCanvasMap:O=null,pageColors:E=null,printAnnotationStorage:w=null}){var nt,bt;(nt=this._stats)==null||nt.time("Overall");const Q=this._transport.getRenderingIntent(o,c,w);this.pendingCleanup=!1,T||(T=this._transport.getOptionalContentConfig());let ct=this._intentStates.get(Q.cacheKey);ct||(ct=Object.create(null),this._intentStates.set(Q.cacheKey,ct)),ct.streamReaderCancelTimeout&&(clearTimeout(ct.streamReaderCancelTimeout),ct.streamReaderCancelTimeout=null);const it=s||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),X=!!(Q.renderingIntent&_util.RenderingIntentFlag.PRINT);ct.displayReadyCapability||(ct.displayReadyCapability=(0,_util.createPromiseCapability)(),ct.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(bt=this._stats)==null||bt.time("Page Request"),this._pumpOperatorList(Q));const j=yt=>{var D,h;ct.renderTasks.delete($),(this.cleanupAfterRender||X)&&(this.pendingCleanup=!0),this._tryCleanup(),yt?($.capability.reject(yt),this._abortOperatorList({intentState:ct,reason:yt instanceof Error?yt:new Error(yt)})):$.capability.resolve(),(D=this._stats)==null||D.timeEnd("Rendering"),(h=this._stats)==null||h.timeEnd("Overall")},$=new InternalRenderTask({callback:j,params:{canvasContext:e,viewport:r,transform:t,background:g},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:O,operatorList:ct.operatorList,pageIndex:this._pageIndex,canvasFactory:it,useRequestAnimationFrame:!X,pdfBug:this._pdfBug,pageColors:E});(ct.renderTasks||(ct.renderTasks=new Set)).add($);const Z=$.task;return Promise.all([ct.displayReadyCapability.promise,T]).then(([yt,D])=>{var h;if(this.pendingCleanup){j();return}(h=this._stats)==null||h.time("Rendering"),$.initializeGraphics({transparency:yt,optionalContentConfig:D}),$.operatorListChanged()}).catch(j),Z}getOperatorList({intent:e="display",annotationMode:r=_util.AnnotationMode.ENABLE,printAnnotationStorage:o=null}={}){var T;function c(){s.operatorList.lastChunk&&(s.opListReadCapability.resolve(s.operatorList),s.renderTasks.delete(g))}const t=this._transport.getRenderingIntent(e,r,o,!0);let s=this._intentStates.get(t.cacheKey);s||(s=Object.create(null),this._intentStates.set(t.cacheKey,s));let g;return s.opListReadCapability||(g=Object.create(null),g.operatorListChanged=c,s.opListReadCapability=(0,_util.createPromiseCapability)(),(s.renderTasks||(s.renderTasks=new Set)).add(g),s.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(T=this._stats)==null||T.time("Page Request"),this._pumpOperatorList(t)),s.opListReadCapability.promise}streamTextContent({disableCombineTextItems:e=!1,includeMarkedContent:r=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:e!==!0,includeMarkedContent:r===!0},{highWaterMark:100,size(c){return c.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(o=>_xfa_text.XfaText.textContent(o));const r=this.streamTextContent(e);return new Promise(function(o,c){function t(){s.read().then(function({value:T,done:O}){if(O){o(g);return}Object.assign(g.styles,T.styles),g.items.push(...T.items),t()},c)}const s=r.getReader(),g={items:[],styles:Object.create(null)};t()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const e=[];for(const r of this._intentStates.values())if(this._abortOperatorList({intentState:r,reason:new Error("Page was destroyed."),force:!0}),!r.opListReadCapability)for(const o of r.renderTasks)e.push(o.completed),o.cancel();this.objs.clear();for(const r of this._bitmaps)r.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(e)}cleanup(e=!1){return this.pendingCleanup=!0,this._tryCleanup(e)}_tryCleanup(e=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:r,operatorList:o}of this._intentStates.values())if(r.size>0||!o.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const r of this._bitmaps)r.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(e,r){var c,t;const o=this._intentStates.get(r);o&&((c=this._stats)==null||c.timeEnd("Page Request"),(t=o.displayReadyCapability)==null||t.resolve(e))}_renderPageChunk(e,r){for(let o=0,c=e.length;o<c;o++)r.operatorList.fnArray.push(e.fnArray[o]),r.operatorList.argsArray.push(e.argsArray[o]);r.operatorList.lastChunk=e.lastChunk,r.operatorList.separateAnnots=e.separateAnnots;for(const o of r.renderTasks)o.operatorListChanged();e.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:e,cacheKey:r,annotationStorageMap:o}){const t=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:r,annotationStorage:o}).getReader(),s=this._intentStates.get(r);s.streamReader=t;const g=()=>{t.read().then(({value:T,done:O})=>{if(O){s.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(T,s),g())},T=>{if(s.streamReader=null,!this._transport.destroyed){if(s.operatorList){s.operatorList.lastChunk=!0;for(const O of s.renderTasks)O.operatorListChanged();this._tryCleanup()}if(s.displayReadyCapability)s.displayReadyCapability.reject(T);else if(s.opListReadCapability)s.opListReadCapability.reject(T);else throw T}})};g()}_abortOperatorList({intentState:e,reason:r,force:o=!1}){if(e.streamReader){if(!o){if(e.renderTasks.size>0)return;if(r instanceof _display_utils.RenderingCancelledException){e.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:e,reason:r,force:!0}),e.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(e.streamReader.cancel(new _util.AbortException(r.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[c,t]of this._intentStates)if(t===e){this._intentStates.delete(c);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){et(this,Y,[]);et(this,f,Promise.resolve())}postMessage(e,r){const o={data:structuredClone(e,r)};b(this,f).then(()=>{for(const c of b(this,Y))c.call(this,o)})}addEventListener(e,r){b(this,Y).push(r)}removeEventListener(e,r){const o=b(this,Y).indexOf(r);b(this,Y).splice(o,1)}terminate(){b(this,Y).length=0}}Y=new WeakMap,f=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const n=(k=document==null?void 0:document.currentScript)==null?void 0:k.src;n&&(PDFWorkerUtil.fallbackWorkerSrc=n.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(n,e){let r;try{if(r=new URL(n),!r.origin||r.origin==="null")return!1}catch(c){return!1}const o=new URL(e,r);return r.origin===o.origin},PDFWorkerUtil.createCDNWrapper=function(n){const e=`importScripts("${n}");`;return URL.createObjectURL(new Blob([e]))}}const _PDFWorker=class _PDFWorker{constructor({name:n=null,port:e=null,verbosity:r=(0,_util.getVerbosityLevel)()}={}){if(e&&b(_PDFWorker,V).has(e))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=n,this.destroyed=!1,this.verbosity=r,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e){b(_PDFWorker,V).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(n){this._port=n,this._messageHandler=new _message_handler.MessageHandler("main","worker",n),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:n}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,n)||(n=PDFWorkerUtil.createCDNWrapper(new URL(n,window.location).href));const e=new Worker(n),r=new _message_handler.MessageHandler("main","worker",e),o=()=>{e.removeEventListener("error",c),r.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},c=()=>{this._webWorker||o()};e.addEventListener("error",c),r.on("test",s=>{if(e.removeEventListener("error",c),this.destroyed){o();return}s?(this._messageHandler=r,this._port=e,this._webWorker=e,this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),r.destroy(),e.terminate())}),r.on("ready",s=>{if(e.removeEventListener("error",c),this.destroyed){o();return}try{t()}catch(g){this._setupFakeWorker()}});const t=()=>{const s=new Uint8Array;r.send("test",s,[s.buffer])};t();return}catch(e){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(n=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;this._port=e;const r=`fake${PDFWorkerUtil.fakeWorkerId++}`,o=new _message_handler.MessageHandler(r+"_worker",r,e);n.setup(o,e);const c=new _message_handler.MessageHandler(r,r+"_worker",e);this._messageHandler=c,this._readyCapability.resolve(),c.send("configure",{verbosity:this.verbosity})}).catch(n=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${n.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),b(_PDFWorker,V).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(n){if(!(n!=null&&n.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return b(this,V).has(n.port)?b(this,V).get(n.port):new _PDFWorker(n)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var n;try{return((n=globalThis.pdfjsWorker)==null?void 0:n.WorkerMessageHandler)||null}catch(e){return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};V=new WeakMap,et(_PDFWorker,V,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(e,r,o,c){et(this,W,null);et(this,q,new Map);et(this,N,new Map);et(this,m,null);this.messageHandler=e,this.loadingTask=r,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:c.ownerDocument,styleElement:c.styleElement}),this._params=c,c.useWorkerFetch||(this.CMapReaderFactory=new c.CMapReaderFactory({baseUrl:c.cMapUrl,isCompressed:c.cMapPacked}),this.StandardFontDataFactory=new c.StandardFontDataFactory({baseUrl:c.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=o,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return b(this,W)}getRenderingIntent(e,r=_util.AnnotationMode.ENABLE,o=null,c=!1){let t=_util.RenderingIntentFlag.DISPLAY,s=null;switch(e){case"any":t=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":t=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(r){case _util.AnnotationMode.DISABLE:t+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:t+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:t+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,s=(t&_util.RenderingIntentFlag.PRINT&&o instanceof _annotation_storage.PrintAnnotationStorage?o:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${r}`)}return c&&(t+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:t,cacheKey:`${t}_${_annotation_storage.AnnotationStorage.getHash(s)}`,annotationStorageMap:s}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const o of b(this,q).values())e.push(o._destroy());b(this,q).clear(),b(this,N).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const r=this.messageHandler.sendWithPromise("Terminate",null);return e.push(r),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_t(this,m,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:r}=this;e.on("GetReader",(o,c)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},c.onPull=()=>{this._fullReader.read().then(function({value:t,done:s}){if(s){c.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(t),"GetReader - expected an ArrayBuffer."),c.enqueue(new Uint8Array(t),1,[t])}).catch(t=>{c.error(t)})},c.onCancel=t=>{this._fullReader.cancel(t),c.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",o=>{const c=(0,_util.createPromiseCapability)(),t=this._fullReader;return t.headersReady.then(()=>{var s;(!t.isStreamingSupported||!t.isRangeSupported)&&(this._lastProgress&&((s=r.onProgress)==null||s.call(r,this._lastProgress)),t.onProgress=g=>{var T;(T=r.onProgress)==null||T.call(r,{loaded:g.loaded,total:g.total})}),c.resolve({isStreamingSupported:t.isStreamingSupported,isRangeSupported:t.isRangeSupported,contentLength:t.contentLength})},c.reject),c.promise}),e.on("GetRangeReader",(o,c)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const t=this._networkStream.getRangeReader(o.begin,o.end);if(!t){c.close();return}c.onPull=()=>{t.read().then(function({value:s,done:g}){if(g){c.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(s),"GetRangeReader - expected an ArrayBuffer."),c.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{c.error(s)})},c.onCancel=s=>{t.cancel(s),c.ready.catch(g=>{if(!this.destroyed)throw g})}}),e.on("GetDoc",({pdfInfo:o})=>{this._numPages=o.numPages,this._htmlForXfa=o.htmlForXfa,delete o.htmlForXfa,r._capability.resolve(new PDFDocumentProxy(o,this))}),e.on("DocException",function(o){let c;switch(o.name){case"PasswordException":c=new _util.PasswordException(o.message,o.code);break;case"InvalidPDFException":c=new _util.InvalidPDFException(o.message);break;case"MissingPDFException":c=new _util.MissingPDFException(o.message);break;case"UnexpectedResponseException":c=new _util.UnexpectedResponseException(o.message,o.status);break;case"UnknownErrorException":c=new _util.UnknownErrorException(o.message,o.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}r._capability.reject(c)}),e.on("PasswordRequest",o=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),r.onPassword){const c=t=>{t instanceof Error?this._passwordCapability.reject(t):this._passwordCapability.resolve({password:t})};try{r.onPassword(c,o.code)}catch(t){this._passwordCapability.reject(t)}}else this._passwordCapability.reject(new _util.PasswordException(o.message,o.code));return this._passwordCapability.promise}),e.on("DataLoaded",o=>{var c;(c=r.onProgress)==null||c.call(r,{loaded:o.length,total:o.length}),this.downloadInfoCapability.resolve(o)}),e.on("StartRenderPage",o=>{if(this.destroyed)return;b(this,q).get(o.pageIndex)._startRenderPage(o.transparency,o.cacheKey)}),e.on("commonobj",([o,c,t])=>{var s;if(!this.destroyed&&!this.commonObjs.has(o))switch(c){case"Font":const g=this._params;if("error"in t){const E=t.error;(0,_util.warn)(`Error during font loading: ${E}`),this.commonObjs.resolve(o,E);break}let T=null;g.pdfBug&&((s=globalThis.FontInspector)!=null&&s.enabled)&&(T={registerFont(E,w){globalThis.FontInspector.fontAdded(E,w)}});const O=new _font_loader.FontFaceObject(t,{isEvalSupported:g.isEvalSupported,disableFontFace:g.disableFontFace,ignoreErrors:g.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:T});this.fontLoader.bind(O).catch(E=>e.sendWithPromise("FontFallback",{id:o})).finally(()=>{!g.fontExtraProperties&&O.data&&(O.data=null),this.commonObjs.resolve(o,O)});break;case"FontPath":case"Image":this.commonObjs.resolve(o,t);break;default:throw new Error(`Got unknown common object type ${c}`)}}),e.on("obj",([o,c,t,s])=>{var T;if(this.destroyed)return;const g=b(this,q).get(c);if(!g.objs.has(o))switch(t){case"Image":g.objs.resolve(o,s);const O=8e6;if(s){let E;if(s.bitmap){const{bitmap:w,width:Q,height:ct}=s;E=Q*ct*4,g._bitmaps.add(w)}else E=((T=s.data)==null?void 0:T.length)||0;E>O&&(g.cleanupAfterRender=!0)}break;case"Pattern":g.objs.resolve(o,s);break;default:throw new Error(`Got unknown object type ${t}`)}}),e.on("DocProgress",o=>{var c;this.destroyed||(c=r.onProgress)==null||c.call(r,{loaded:o.loaded,total:o.total})}),e.on("DocStats",o=>{this.destroyed||_t(this,W,Object.freeze({streamTypes:Object.freeze(o.streamTypes),fontTypes:Object.freeze(o.fontTypes)}))}),e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),e.on("FetchBuiltInCMap",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(o):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(o):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:e}){var r,o;this.destroyed||(o=(r=this.loadingTask).onUnsupportedFeature)==null||o.call(r,e)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,r;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(r=(e=this._fullReader)==null?void 0:e.filename)!=null?r:null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const r=e-1,o=b(this,N).get(r);if(o)return o;const c=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(t=>{if(this.destroyed)throw new Error("Transport destroyed");const s=new PDFPageProxy(r,t,this,this._params.ownerDocument,this._params.pdfBug);return b(this,q).set(r,s),s});return b(this,N).set(r,c),c}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:r})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return b(this,m)||_t(this,m,this.messageHandler.sendWithPromise("GetMetadata",null).then(e=>{var r,o,c,t;return{info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:(o=(r=this._fullReader)==null?void 0:r.filename)!=null?o:null,contentLength:(t=(c=this._fullReader)==null?void 0:c.contentLength)!=null?t:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const r of b(this,q).values())if(!r.cleanup())throw new Error(`startCleanup: Page ${r.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),_t(this,m,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,enableXfa:e.enableXfa})}}W=new WeakMap,q=new WeakMap,N=new WeakMap,m=new WeakMap;class PDFObjects{constructor(){et(this,R);et(this,A,Object.create(null))}get(e,r=null){if(r){const c=ht(this,R,oe).call(this,e);return c.capability.promise.then(()=>r(c.data)),null}const o=b(this,A)[e];if(!(o!=null&&o.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${e}.`);return o.data}has(e){const r=b(this,A)[e];return(r==null?void 0:r.capability.settled)||!1}resolve(e,r=null){const o=ht(this,R,oe).call(this,e);o.data=r,o.capability.resolve()}clear(){_t(this,A,Object.create(null))}}A=new WeakMap,R=new WeakSet,oe=function(e){const r=b(this,A)[e];return r||(b(this,A)[e]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(e){et(this,y,null);_t(this,y,e),this.onContinue=null}get promise(){return b(this,y).capability.promise}cancel(){b(this,y).cancel()}get separateAnnots(){const{separateAnnots:e}=b(this,y).operatorList;if(!e)return!1;const{annotationCanvasMap:r}=b(this,y);return e.form||e.canvas&&(r==null?void 0:r.size)>0}}y=new WeakMap,exports.RenderTask=RenderTask;const a=class a{constructor({callback:e,params:r,objs:o,commonObjs:c,annotationCanvasMap:t,operatorList:s,pageIndex:g,canvasFactory:T,useRequestAnimationFrame:O=!1,pdfBug:E=!1,pageColors:w=null}){this.callback=e,this.params=r,this.objs=o,this.commonObjs=c,this.annotationCanvasMap=t,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=g,this.canvasFactory=T,this._pdfBug=E,this.pageColors=w,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=O===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=r.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:r}){var g,T;if(this.cancelled)return;if(this._canvas){if(b(a,d).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");b(a,d).add(this._canvas)}this._pdfBug&&((g=globalThis.StepperManager)!=null&&g.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:o,viewport:c,transform:t,background:s}=this.params;this.gfx=new _canvas.CanvasGraphics(o,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:t,viewport:c,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,(T=this.graphicsReadyCallback)==null||T.call(this)}cancel(e=null){var r;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),this._canvas&&b(a,d).delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&b(a,d).delete(this._canvas),this.callback())))}};d=new WeakMap,et(a,d,new WeakSet);let InternalRenderTask=a;const version="3.1.81";exports.version=version;const build="0766898d5";exports.build=build},(dt,u,Y)=>{var N,m,A,Pe,v;Object.defineProperty(u,"__esModule",{value:!0}),u.PrintAnnotationStorage=u.AnnotationStorage=void 0;var f=Y(1),k=Y(4),V=Y(8);class W{constructor(){et(this,A);et(this,N,!1);et(this,m,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(d,a){const n=b(this,m).get(d);return n===void 0?a:Object.assign(a,n)}getRawValue(d){return b(this,m).get(d)}remove(d){if(b(this,m).delete(d),b(this,m).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const a of b(this,m).values())if(a instanceof k.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(d,a){const n=b(this,m).get(d);let e=!1;if(n!==void 0)for(const[r,o]of Object.entries(a))n[r]!==o&&(e=!0,n[r]=o);else e=!0,b(this,m).set(d,a);e&&ht(this,A,Pe).call(this),a instanceof k.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(a.constructor._type)}has(d){return b(this,m).has(d)}getAll(){return b(this,m).size>0?(0,f.objectFromMap)(b(this,m)):null}get size(){return b(this,m).size}resetModified(){b(this,N)&&(_t(this,N,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new q(this)}get serializable(){if(b(this,m).size===0)return null;const d=new Map;for(const[a,n]of b(this,m)){const e=n instanceof k.AnnotationEditor?n.serialize():n;e&&d.set(a,e)}return d}static getHash(d){if(!d)return"";const a=new V.MurmurHash3_64;for(const[n,e]of d)a.update(`${n}:${JSON.stringify(e)}`);return a.hexdigest()}}N=new WeakMap,m=new WeakMap,A=new WeakSet,Pe=function(){b(this,N)||(_t(this,N,!0),typeof this.onSetModified=="function"&&this.onSetModified())},u.AnnotationStorage=W;class q extends W{constructor(a){super();et(this,v,null);_t(this,v,structuredClone(a.serializable))}get print(){(0,f.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return b(this,v)}}v=new WeakMap,u.PrintAnnotationStorage=q},(dt,u,Y)=>{var W,q,N,m,A,R;Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationEditor=void 0;var f=Y(5),k=Y(1);const v=class v{constructor(d){et(this,W,this.focusin.bind(this));et(this,q,this.focusout.bind(this));et(this,N,!1);et(this,m,!1);et(this,A,!1);et(this,R,v._zIndex++);this.constructor===v&&(0,k.unreachable)("Cannot initialize AnnotationEditor."),this.parent=d.parent,this.id=d.id,this.width=this.height=null,this.pageIndex=d.parent.pageIndex,this.name=d.name,this.div=null;const[a,n]=this.parent.viewportBaseDimensions;this.x=d.x/a,this.y=d.y/n,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,k.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=b(this,R)}focusin(d){b(this,N)?_t(this,N,!1):this.parent.setSelected(this)}focusout(d){if(!this.isAttachedToDOM)return;const a=d.relatedTarget;a!=null&&a.closest(`#${this.id}`)||(d.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(d){const a=this.parent.div.getBoundingClientRect();this.startX=d.clientX-a.x,this.startY=d.clientY-a.y,d.dataTransfer.setData("text/plain",this.id),d.dataTransfer.effectAllowed="move"}setAt(d,a,n,e){const[r,o]=this.parent.viewportBaseDimensions;[n,e]=this.screenToPageTranslation(n,e),this.x=(d+n)/r,this.y=(a+e)/o,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(d,a){const[n,e]=this.parent.viewportBaseDimensions;[d,a]=this.screenToPageTranslation(d,a),this.x+=d/n,this.y+=a/e,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(d,a){const{rotation:n}=this.parent.viewport;switch(n){case 90:return[a,-d];case 180:return[-d,-a];case 270:return[-a,d];default:return[d,a]}}setDims(d,a){const[n,e]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*d/n}%`,this.div.style.height=`${100*a/e}%`}fixDims(){const{style:d}=this.div,{height:a,width:n}=d,e=n.endsWith("%"),r=a.endsWith("%");if(e&&r)return;const[o,c]=this.parent.viewportBaseDimensions;e||(d.width=`${100*parseFloat(n)/o}%`),r||(d.height=`${100*parseFloat(a)/c}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",b(this,W)),this.div.addEventListener("focusout",b(this,q));const[d,a]=this.getInitialTranslation();return this.translate(d,a),(0,f.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(d){const a=f.KeyboardManager.platform.isMac;if(d.button!==0||d.ctrlKey&&a){d.preventDefault();return}d.ctrlKey&&!a||d.shiftKey||d.metaKey&&a?this.parent.toggleSelected(this):this.parent.setSelected(this),_t(this,N,!0)}getRect(d,a){const[n,e]=this.parent.viewportBaseDimensions,[r,o]=this.parent.pageDimensions,c=r*d/n,t=o*a/e,s=this.x*r,g=this.y*o,T=this.width*r,O=this.height*o;switch(this.rotation){case 0:return[s+c,o-g-t-O,s+c+T,o-g-t];case 90:return[s+t,o-g+c,s+t+O,o-g+c+T];case 180:return[s-c-T,o-g+t,s-c,o-g+t+O];case 270:return[s-t-O,o-g-c-T,s-t,o-g-c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(d,a){const[n,e,r,o]=d,c=r-n,t=o-e;switch(this.rotation){case 0:return[n,a-o,c,t];case 90:return[n,a-e,t,c];case 180:return[r,a-e,c,t];case 270:return[r,a-o,t,c];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){_t(this,A,!0)}disableEditMode(){_t(this,A,!1)}isInEditMode(){return b(this,A)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var d;(d=this.div)==null||d.addEventListener("focusin",b(this,W))}serialize(){(0,k.unreachable)("An editor must be serializable")}static deserialize(d,a){const n=new this.prototype.constructor({parent:a,id:a.getNextId()});n.rotation=d.rotation;const[e,r]=a.pageDimensions,[o,c,t,s]=n.getRectInCurrentCoords(d.rect,r);return n.x=o/e,n.y=c/r,n.width=t/e,n.height=s/r,n}remove(){this.div.removeEventListener("focusin",b(this,W)),this.div.removeEventListener("focusout",b(this,q)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var d;(d=this.div)==null||d.classList.add("selectedEditor")}unselect(){var d;(d=this.div)==null||d.classList.remove("selectedEditor")}updateParams(d,a){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return b(this,m)}set isEditing(d){_t(this,m,d),d?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};W=new WeakMap,q=new WeakMap,N=new WeakMap,m=new WeakMap,A=new WeakMap,R=new WeakMap,It(v,"_colorManager",new f.ColorManager),It(v,"_zIndex",1);let V=v;u.AnnotationEditor=V},(dt,u,Y)=>{var v,y,d,a,n,e,xe,t,s,g,T,O,E,w,Q,ct,it,X,j,$,Z,nt,bt,yt,D,h,l,we,F,le,I,ke,G,Fe,z,Ht,tt,Jt,i,Re,P,Me,x,ce,rt,Qt,U,he;Object.defineProperty(u,"__esModule",{value:!0}),u.KeyboardManager=u.CommandManager=u.ColorManager=u.AnnotationEditorUIManager=void 0,u.bindEvents=V,u.opacityToHex=W;var f=Y(1),k=Y(6);function V(gt,L,ft){for(const At of ft)L.addEventListener(At,gt[At].bind(gt))}function W(gt){return Math.round(Math.min(255,Math.max(1,255*gt))).toString(16).padStart(2,"0")}class q{constructor(){et(this,v,0)}getId(){return`${f.AnnotationEditorPrefix}${ae(this,v)._++}`}}v=new WeakMap;class N{constructor(L=128){et(this,y,[]);et(this,d,!1);et(this,a,void 0);et(this,n,-1);_t(this,a,L)}add({cmd:L,undo:ft,mustExec:At,type:St=NaN,overwriteIfSameType:Rt=!1,keepUndo:Ft=!1}){if(At&&L(),b(this,d))return;const Et={cmd:L,undo:ft,type:St};if(b(this,n)===-1){b(this,y).length>0&&(b(this,y).length=0),_t(this,n,0),b(this,y).push(Et);return}if(Rt&&b(this,y)[b(this,n)].type===St){Ft&&(Et.undo=b(this,y)[b(this,n)].undo),b(this,y)[b(this,n)]=Et;return}const at=b(this,n)+1;at===b(this,a)?b(this,y).splice(0,1):(_t(this,n,at),at<b(this,y).length&&b(this,y).splice(at)),b(this,y).push(Et)}undo(){b(this,n)!==-1&&(_t(this,d,!0),b(this,y)[b(this,n)].undo(),_t(this,d,!1),_t(this,n,b(this,n)-1))}redo(){b(this,n)<b(this,y).length-1&&(_t(this,n,b(this,n)+1),_t(this,d,!0),b(this,y)[b(this,n)].cmd(),_t(this,d,!1))}hasSomethingToUndo(){return b(this,n)!==-1}hasSomethingToRedo(){return b(this,n)<b(this,y).length-1}destroy(){_t(this,y,null)}}y=new WeakMap,d=new WeakMap,a=new WeakMap,n=new WeakMap,u.CommandManager=N;const o=class o{constructor(L){et(this,e);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const ft=o.platform.isMac;for(const[At,St]of L)for(const Rt of At){const Ft=Rt.startsWith("mac+");ft&&Ft?(this.callbacks.set(Rt.slice(4),St),this.allKeys.add(Rt.split("+").at(-1))):!ft&&!Ft&&(this.callbacks.set(Rt,St),this.allKeys.add(Rt.split("+").at(-1)))}}static get platform(){const L=typeof navigator<"u"?navigator.platform:"";return(0,f.shadow)(this,"platform",{isWin:L.includes("Win"),isMac:L.includes("Mac")})}exec(L,ft){if(!this.allKeys.has(ft.key))return;const At=this.callbacks.get(ht(this,e,xe).call(this,ft));At&&(At.bind(L)(),ft.stopPropagation(),ft.preventDefault())}};e=new WeakSet,xe=function(L){L.altKey&&this.buffer.push("alt"),L.ctrlKey&&this.buffer.push("ctrl"),L.metaKey&&this.buffer.push("meta"),L.shiftKey&&this.buffer.push("shift"),this.buffer.push(L.key);const ft=this.buffer.join("+");return this.buffer.length=0,ft};let m=o;u.KeyboardManager=m;const c=class c{get _colors(){const L=new Map([["CanvasText",null],["Canvas",null]]);return(0,k.getColorValues)(L),(0,f.shadow)(this,"_colors",L)}convert(L){const ft=(0,k.getRGB)(L);if(!window.matchMedia("(forced-colors: active)").matches)return ft;for(const[At,St]of this._colors)if(St.every((Rt,Ft)=>Rt===ft[Ft]))return c._colorsMapping.get(At);return ft}getHexCode(L){const ft=this._colors.get(L);return ft?f.Util.makeHexColor(...ft):L}};It(c,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let A=c;u.ColorManager=A;const st=class st{constructor(L,ft){et(this,l);et(this,F);et(this,I);et(this,G);et(this,z);et(this,tt);et(this,i);et(this,P);et(this,x);et(this,rt);et(this,U);et(this,t,null);et(this,s,new Map);et(this,g,new Map);et(this,T,new N);et(this,O,0);et(this,E,null);et(this,w,null);et(this,Q,new q);et(this,ct,!1);et(this,it,f.AnnotationEditorType.NONE);et(this,X,new Set);et(this,j,this.copy.bind(this));et(this,$,this.cut.bind(this));et(this,Z,this.paste.bind(this));et(this,nt,this.keydown.bind(this));et(this,bt,this.onEditingAction.bind(this));et(this,yt,this.onPageChanging.bind(this));et(this,D,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});et(this,h,null);_t(this,h,L),_t(this,w,ft),b(this,w)._on("editingaction",b(this,bt)),b(this,w)._on("pagechanging",b(this,yt))}destroy(){ht(this,F,le).call(this),b(this,w)._off("editingaction",b(this,bt)),b(this,w)._off("pagechanging",b(this,yt));for(const L of b(this,g).values())L.destroy();b(this,g).clear(),b(this,s).clear(),_t(this,t,null),b(this,X).clear(),b(this,T).destroy()}onPageChanging({pageNumber:L}){_t(this,O,L-1)}focusMainContainer(){b(this,h).focus()}copy(L){if(L.preventDefault(),b(this,t)&&b(this,t).commitOrRemove(),!this.hasSelection)return;const ft=[];for(const At of b(this,X))At.isEmpty()||ft.push(At.serialize());ft.length!==0&&L.clipboardData.setData("application/pdfjs",JSON.stringify(ft))}cut(L){this.copy(L),this.delete()}paste(L){L.preventDefault();let ft=L.clipboardData.getData("application/pdfjs");if(!ft)return;try{ft=JSON.parse(ft)}catch(St){(0,f.warn)(`paste: "${St.message}".`);return}if(!Array.isArray(ft))return;this.unselectAll();const At=b(this,g).get(b(this,O));try{const St=[];for(const Et of ft){const at=At.deserialize(Et);if(!at)return;St.push(at)}const Rt=()=>{for(const Et of St)ht(this,x,ce).call(this,Et);ht(this,U,he).call(this,St)},Ft=()=>{for(const Et of St)Et.remove()};this.addCommands({cmd:Rt,undo:Ft,mustExec:!0})}catch(St){(0,f.warn)(`paste: "${St.message}".`)}}keydown(L){var ft;(ft=this.getActive())!=null&&ft.shouldGetKeyboardEvents()||st._keyboardManager.exec(this,L)}onEditingAction(L){["undo","redo","delete","selectAll"].includes(L.name)&&this[L.name]()}setEditingState(L){L?(ht(this,l,we).call(this),ht(this,I,ke).call(this),ht(this,z,Ht).call(this,{isEditing:b(this,it)!==f.AnnotationEditorType.NONE,isEmpty:ht(this,rt,Qt).call(this),hasSomethingToUndo:b(this,T).hasSomethingToUndo(),hasSomethingToRedo:b(this,T).hasSomethingToRedo(),hasSelectedEditor:!1})):(ht(this,F,le).call(this),ht(this,G,Fe).call(this),ht(this,z,Ht).call(this,{isEditing:!1}))}registerEditorTypes(L){if(!b(this,E)){_t(this,E,L);for(const ft of b(this,E))ht(this,tt,Jt).call(this,ft.defaultPropertiesToUpdate)}}getId(){return b(this,Q).getId()}addLayer(L){b(this,g).set(L.pageIndex,L),b(this,ct)?L.enable():L.disable()}removeLayer(L){b(this,g).delete(L.pageIndex)}updateMode(L){if(_t(this,it,L),L===f.AnnotationEditorType.NONE)this.setEditingState(!1),ht(this,P,Me).call(this);else{this.setEditingState(!0),ht(this,i,Re).call(this);for(const ft of b(this,g).values())ft.updateMode(L)}}updateToolbar(L){L!==b(this,it)&&b(this,w).dispatch("switchannotationeditormode",{source:this,mode:L})}updateParams(L,ft){if(b(this,E)){for(const At of b(this,X))At.updateParams(L,ft);for(const At of b(this,E))At.updateDefaultParams(L,ft)}}getEditors(L){const ft=[];for(const At of b(this,s).values())At.pageIndex===L&&ft.push(At);return ft}getEditor(L){return b(this,s).get(L)}addEditor(L){b(this,s).set(L.id,L)}removeEditor(L){b(this,s).delete(L.id),this.unselect(L)}setActiveEditor(L){b(this,t)!==L&&(_t(this,t,L),L&&ht(this,tt,Jt).call(this,L.propertiesToUpdate))}toggleSelected(L){if(b(this,X).has(L)){b(this,X).delete(L),L.unselect(),ht(this,z,Ht).call(this,{hasSelectedEditor:this.hasSelection});return}b(this,X).add(L),L.select(),ht(this,tt,Jt).call(this,L.propertiesToUpdate),ht(this,z,Ht).call(this,{hasSelectedEditor:!0})}setSelected(L){for(const ft of b(this,X))ft!==L&&ft.unselect();b(this,X).clear(),b(this,X).add(L),L.select(),ht(this,tt,Jt).call(this,L.propertiesToUpdate),ht(this,z,Ht).call(this,{hasSelectedEditor:!0})}isSelected(L){return b(this,X).has(L)}unselect(L){L.unselect(),b(this,X).delete(L),ht(this,z,Ht).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return b(this,X).size!==0}undo(){b(this,T).undo(),ht(this,z,Ht).call(this,{hasSomethingToUndo:b(this,T).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ht(this,rt,Qt).call(this)})}redo(){b(this,T).redo(),ht(this,z,Ht).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:b(this,T).hasSomethingToRedo(),isEmpty:ht(this,rt,Qt).call(this)})}addCommands(L){b(this,T).add(L),ht(this,z,Ht).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ht(this,rt,Qt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const L=[...b(this,X)],ft=()=>{for(const St of L)St.remove()},At=()=>{for(const St of L)ht(this,x,ce).call(this,St)};this.addCommands({cmd:ft,undo:At,mustExec:!0})}commitOrRemove(){var L;(L=b(this,t))==null||L.commitOrRemove()}selectAll(){for(const L of b(this,X))L.commit();ht(this,U,he).call(this,b(this,s).values())}unselectAll(){if(b(this,t)){b(this,t).commitOrRemove();return}if(b(this,X).size!==0){for(const L of b(this,X))L.unselect();b(this,X).clear(),ht(this,z,Ht).call(this,{hasSelectedEditor:!1})}}isActive(L){return b(this,t)===L}getActive(){return b(this,t)}getMode(){return b(this,it)}};t=new WeakMap,s=new WeakMap,g=new WeakMap,T=new WeakMap,O=new WeakMap,E=new WeakMap,w=new WeakMap,Q=new WeakMap,ct=new WeakMap,it=new WeakMap,X=new WeakMap,j=new WeakMap,$=new WeakMap,Z=new WeakMap,nt=new WeakMap,bt=new WeakMap,yt=new WeakMap,D=new WeakMap,h=new WeakMap,l=new WeakSet,we=function(){b(this,h).addEventListener("keydown",b(this,nt))},F=new WeakSet,le=function(){b(this,h).removeEventListener("keydown",b(this,nt))},I=new WeakSet,ke=function(){document.addEventListener("copy",b(this,j)),document.addEventListener("cut",b(this,$)),document.addEventListener("paste",b(this,Z))},G=new WeakSet,Fe=function(){document.removeEventListener("copy",b(this,j)),document.removeEventListener("cut",b(this,$)),document.removeEventListener("paste",b(this,Z))},z=new WeakSet,Ht=function(L){Object.entries(L).some(([At,St])=>b(this,D)[At]!==St)&&b(this,w).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(b(this,D),L)})},tt=new WeakSet,Jt=function(L){b(this,w).dispatch("annotationeditorparamschanged",{source:this,details:L})},i=new WeakSet,Re=function(){if(!b(this,ct)){_t(this,ct,!0);for(const L of b(this,g).values())L.enable()}},P=new WeakSet,Me=function(){if(this.unselectAll(),b(this,ct)){_t(this,ct,!1);for(const L of b(this,g).values())L.disable()}},x=new WeakSet,ce=function(L){const ft=b(this,g).get(L.pageIndex);ft?ft.addOrRebuild(L):this.addEditor(L)},rt=new WeakSet,Qt=function(){if(b(this,s).size===0)return!0;if(b(this,s).size===1)for(const L of b(this,s).values())return L.isEmpty();return!1},U=new WeakSet,he=function(L){b(this,X).clear();for(const ft of L)ft.isEmpty()||(b(this,X).add(ft),ft.select());ht(this,z,Ht).call(this,{hasSelectedEditor:!0})},It(st,"_keyboardManager",new m([[["ctrl+a","mac+meta+a"],st.prototype.selectAll],[["ctrl+z","mac+meta+z"],st.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],st.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],st.prototype.delete],[["Escape","mac+Escape"],st.prototype.unselectAll]]));let R=st;u.AnnotationEditorUIManager=R},(dt,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.StatTimer=u.RenderingCancelledException=u.PixelsPerInch=u.PageViewport=u.PDFDateString=u.DOMStandardFontDataFactory=u.DOMSVGFactory=u.DOMCanvasFactory=u.DOMCMapReaderFactory=u.AnnotationPrefix=void 0,u.deprecated=s,u.getColorValues=w,u.getCurrentTransform=Q,u.getCurrentTransformInverse=ct,u.getFilenameFromUrl=e,u.getPdfFilenameFromUrl=r,u.getRGB=E,u.getXfaPageViewport=O,u.isDataScheme=a,u.isPdfFile=n,u.isValidFetchUrl=c,u.loadScript=t;var f=Y(7),k=Y(1);const V="http://www.w3.org/2000/svg",W="pdfjs_internal_id_";u.AnnotationPrefix=W;const it=class it{};It(it,"CSS",96),It(it,"PDF",72),It(it,"PDF_TO_CSS_UNITS",it.CSS/it.PDF);let q=it;u.PixelsPerInch=q;class N extends f.BaseCanvasFactory{constructor({ownerDocument:j=globalThis.document}={}){super(),this._document=j}_createCanvas(j,$){const Z=this._document.createElement("canvas");return Z.width=j,Z.height=$,Z}}u.DOMCanvasFactory=N;async function m(X,j=!1){if(c(X,document.baseURI)){const $=await fetch(X);if(!$.ok)throw new Error($.statusText);return j?new Uint8Array(await $.arrayBuffer()):(0,k.stringToBytes)(await $.text())}return new Promise(($,Z)=>{const nt=new XMLHttpRequest;nt.open("GET",X,!0),j&&(nt.responseType="arraybuffer"),nt.onreadystatechange=()=>{if(nt.readyState===XMLHttpRequest.DONE){if(nt.status===200||nt.status===0){let bt;if(j&&nt.response?bt=new Uint8Array(nt.response):!j&&nt.responseText&&(bt=(0,k.stringToBytes)(nt.responseText)),bt){$(bt);return}}Z(new Error(nt.statusText))}},nt.send(null)})}class A extends f.BaseCMapReaderFactory{_fetchData(j,$){return m(j,this.isCompressed).then(Z=>({cMapData:Z,compressionType:$}))}}u.DOMCMapReaderFactory=A;class R extends f.BaseStandardFontDataFactory{_fetchData(j){return m(j,!0)}}u.DOMStandardFontDataFactory=R;class v extends f.BaseSVGFactory{_createSVG(j){return document.createElementNS(V,j)}}u.DOMSVGFactory=v;class y{constructor({viewBox:j,scale:$,rotation:Z,offsetX:nt=0,offsetY:bt=0,dontFlip:yt=!1}){this.viewBox=j,this.scale=$,this.rotation=Z,this.offsetX=nt,this.offsetY=bt;const D=(j[2]+j[0])/2,h=(j[3]+j[1])/2;let l,_,F,M;switch(Z%=360,Z<0&&(Z+=360),Z){case 180:l=-1,_=0,F=0,M=1;break;case 90:l=0,_=1,F=1,M=0;break;case 270:l=0,_=-1,F=-1,M=0;break;case 0:l=1,_=0,F=0,M=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}yt&&(F=-F,M=-M);let I,B,G,ot;l===0?(I=Math.abs(h-j[1])*$+nt,B=Math.abs(D-j[0])*$+bt,G=Math.abs(j[3]-j[1])*$,ot=Math.abs(j[2]-j[0])*$):(I=Math.abs(D-j[0])*$+nt,B=Math.abs(h-j[1])*$+bt,G=Math.abs(j[2]-j[0])*$,ot=Math.abs(j[3]-j[1])*$),this.transform=[l*$,_*$,F*$,M*$,I-l*$*D-F*$*h,B-_*$*D-M*$*h],this.width=G,this.height=ot}clone({scale:j=this.scale,rotation:$=this.rotation,offsetX:Z=this.offsetX,offsetY:nt=this.offsetY,dontFlip:bt=!1}={}){return new y({viewBox:this.viewBox.slice(),scale:j,rotation:$,offsetX:Z,offsetY:nt,dontFlip:bt})}convertToViewportPoint(j,$){return k.Util.applyTransform([j,$],this.transform)}convertToViewportRectangle(j){const $=k.Util.applyTransform([j[0],j[1]],this.transform),Z=k.Util.applyTransform([j[2],j[3]],this.transform);return[$[0],$[1],Z[0],Z[1]]}convertToPdfPoint(j,$){return k.Util.applyInverseTransform([j,$],this.transform)}}u.PageViewport=y;class d extends k.BaseException{constructor(j,$){super(j,"RenderingCancelledException"),this.type=$}}u.RenderingCancelledException=d;function a(X){const j=X.length;let $=0;for(;$<j&&X[$].trim()==="";)$++;return X.substring($,$+5).toLowerCase()==="data:"}function n(X){return typeof X=="string"&&/\.pdf$/i.test(X)}function e(X,j=!1){return j||([X]=X.split(/[#?]/,1)),X.substring(X.lastIndexOf("/")+1)}function r(X,j="document.pdf"){if(typeof X!="string")return j;if(a(X))return(0,k.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),j;const $=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Z=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,nt=$.exec(X);let bt=Z.exec(nt[1])||Z.exec(nt[2])||Z.exec(nt[3]);if(bt&&(bt=bt[0],bt.includes("%")))try{bt=Z.exec(decodeURIComponent(bt))[0]}catch(yt){}return bt||j}class o{constructor(){It(this,"started",Object.create(null));It(this,"times",[])}time(j){j in this.started&&(0,k.warn)(`Timer is already running for ${j}`),this.started[j]=Date.now()}timeEnd(j){j in this.started||(0,k.warn)(`Timer has not been started for ${j}`),this.times.push({name:j,start:this.started[j],end:Date.now()}),delete this.started[j]}toString(){const j=[];let $=0;for(const{name:Z}of this.times)$=Math.max(Z.length,$);for(const{name:Z,start:nt,end:bt}of this.times)j.push(`${Z.padEnd($)} ${bt-nt}ms
`);return j.join("")}}u.StatTimer=o;function c(X,j){try{const{protocol:$}=j?new URL(X,j):new URL(X);return $==="http:"||$==="https:"}catch($){return!1}}function t(X,j=!1){return new Promise(($,Z)=>{const nt=document.createElement("script");nt.src=X,nt.onload=function(bt){j&&nt.remove(),$(bt)},nt.onerror=function(){Z(new Error(`Cannot load script at: ${nt.src}`))},(document.head||document.documentElement).append(nt)})}function s(X){console.log("Deprecated API usage: "+X)}let g;class T{static toDateObject(j){if(!j||typeof j!="string")return null;g||(g=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const $=g.exec(j);if(!$)return null;const Z=parseInt($[1],10);let nt=parseInt($[2],10);nt=nt>=1&&nt<=12?nt-1:0;let bt=parseInt($[3],10);bt=bt>=1&&bt<=31?bt:1;let yt=parseInt($[4],10);yt=yt>=0&&yt<=23?yt:0;let D=parseInt($[5],10);D=D>=0&&D<=59?D:0;let h=parseInt($[6],10);h=h>=0&&h<=59?h:0;const l=$[7]||"Z";let _=parseInt($[8],10);_=_>=0&&_<=23?_:0;let F=parseInt($[9],10)||0;return F=F>=0&&F<=59?F:0,l==="-"?(yt+=_,D+=F):l==="+"&&(yt-=_,D-=F),new Date(Date.UTC(Z,nt,bt,yt,D,h))}}u.PDFDateString=T;function O(X,{scale:j=1,rotation:$=0}){const{width:Z,height:nt}=X.attributes.style,bt=[0,0,parseInt(Z),parseInt(nt)];return new y({viewBox:bt,scale:j,rotation:$})}function E(X){if(X.startsWith("#")){const j=parseInt(X.slice(1),16);return[(j&16711680)>>16,(j&65280)>>8,j&255]}return X.startsWith("rgb(")?X.slice(4,-1).split(",").map(j=>parseInt(j)):X.startsWith("rgba(")?X.slice(5,-1).split(",").map(j=>parseInt(j)).slice(0,3):((0,k.warn)(`Not a valid color format: "${X}"`),[0,0,0])}function w(X){const j=document.createElement("span");j.style.visibility="hidden",document.body.append(j);for(const $ of X.keys()){j.style.color=$;const Z=window.getComputedStyle(j).color;X.set($,E(Z))}j.remove()}function Q(X){const{a:j,b:$,c:Z,d:nt,e:bt,f:yt}=X.getTransform();return[j,$,Z,nt,bt,yt]}function ct(X){const{a:j,b:$,c:Z,d:nt,e:bt,f:yt}=X.getTransform().invertSelf();return[j,$,Z,nt,bt,yt]}},(dt,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.BaseStandardFontDataFactory=u.BaseSVGFactory=u.BaseCanvasFactory=u.BaseCMapReaderFactory=void 0;var f=Y(1);class k{constructor(){this.constructor===k&&(0,f.unreachable)("Cannot initialize BaseCanvasFactory.")}create(m,A){if(m<=0||A<=0)throw new Error("Invalid canvas size");const R=this._createCanvas(m,A);return{canvas:R,context:R.getContext("2d")}}reset(m,A,R){if(!m.canvas)throw new Error("Canvas is not specified");if(A<=0||R<=0)throw new Error("Invalid canvas size");m.canvas.width=A,m.canvas.height=R}destroy(m){if(!m.canvas)throw new Error("Canvas is not specified");m.canvas.width=0,m.canvas.height=0,m.canvas=null,m.context=null}_createCanvas(m,A){(0,f.unreachable)("Abstract method `_createCanvas` called.")}}u.BaseCanvasFactory=k;class V{constructor({baseUrl:m=null,isCompressed:A=!1}){this.constructor===V&&(0,f.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=m,this.isCompressed=A}async fetch({name:m}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!m)throw new Error("CMap name must be specified.");const A=this.baseUrl+m+(this.isCompressed?".bcmap":""),R=this.isCompressed?f.CMapCompressionType.BINARY:f.CMapCompressionType.NONE;return this._fetchData(A,R).catch(v=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${A}`)})}_fetchData(m,A){(0,f.unreachable)("Abstract method `_fetchData` called.")}}u.BaseCMapReaderFactory=V;class W{constructor({baseUrl:m=null}){this.constructor===W&&(0,f.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=m}async fetch({filename:m}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!m)throw new Error("Font filename must be specified.");const A=`${this.baseUrl}${m}`;return this._fetchData(A).catch(R=>{throw new Error(`Unable to load font data at: ${A}`)})}_fetchData(m){(0,f.unreachable)("Abstract method `_fetchData` called.")}}u.BaseStandardFontDataFactory=W;class q{constructor(){this.constructor===q&&(0,f.unreachable)("Cannot initialize BaseSVGFactory.")}create(m,A,R=!1){if(m<=0||A<=0)throw new Error("Invalid SVG dimensions");const v=this._createSVG("svg:svg");return v.setAttribute("version","1.1"),R||(v.setAttribute("width",`${m}px`),v.setAttribute("height",`${A}px`)),v.setAttribute("preserveAspectRatio","none"),v.setAttribute("viewBox",`0 0 ${m} ${A}`),v}createElement(m){if(typeof m!="string")throw new Error("Invalid SVG element type");return this._createSVG(m)}_createSVG(m){(0,f.unreachable)("Abstract method `_createSVG` called.")}}u.BaseSVGFactory=q},(dt,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.MurmurHash3_64=void 0;var f=Y(1);const k=3285377520,V=4294901760,W=65535;class q{constructor(m){this.h1=m?m&4294967295:k,this.h2=m?m&4294967295:k}update(m){let A,R;if(typeof m=="string"){A=new Uint8Array(m.length*2),R=0;for(let g=0,T=m.length;g<T;g++){const O=m.charCodeAt(g);O<=255?A[R++]=O:(A[R++]=O>>>8,A[R++]=O&255)}}else if((0,f.isArrayBuffer)(m))A=m.slice(),R=A.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const v=R>>2,y=R-v*4,d=new Uint32Array(A.buffer,0,v);let a=0,n=0,e=this.h1,r=this.h2;const o=3432918353,c=461845907,t=o&W,s=c&W;for(let g=0;g<v;g++)g&1?(a=d[g],a=a*o&V|a*t&W,a=a<<15|a>>>17,a=a*c&V|a*s&W,e^=a,e=e<<13|e>>>19,e=e*5+3864292196):(n=d[g],n=n*o&V|n*t&W,n=n<<15|n>>>17,n=n*c&V|n*s&W,r^=n,r=r<<13|r>>>19,r=r*5+3864292196);switch(a=0,y){case 3:a^=A[v*4+2]<<16;case 2:a^=A[v*4+1]<<8;case 1:a^=A[v*4],a=a*o&V|a*t&W,a=a<<15|a>>>17,a=a*c&V|a*s&W,v&1?e^=a:r^=a}this.h1=e,this.h2=r}hexdigest(){let m=this.h1,A=this.h2;return m^=A>>>1,m=m*3981806797&V|m*36045&W,A=A*4283543511&V|((A<<16|m>>>16)*2950163797&V)>>>16,m^=A>>>1,m=m*444984403&V|m*60499&W,A=A*3301882366&V|((A<<16|m>>>16)*3120437893&V)>>>16,m^=A>>>1,(m>>>0).toString(16).padStart(8,"0")+(A>>>0).toString(16).padStart(8,"0")}}u.MurmurHash3_64=q},(dt,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.FontLoader=u.FontFaceObject=void 0;var f=Y(1);class k{constructor({onUnsupportedFeature:q,ownerDocument:N=globalThis.document,styleElement:m=null}){this._onUnsupportedFeature=q,this._document=N,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(q){this.nativeFontFaces.push(q),this._document.fonts.add(q)}insertRule(q){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const N=this.styleElement.sheet;N.insertRule(q,N.cssRules.length)}clear(){for(const q of this.nativeFontFaces)this._document.fonts.delete(q);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(q){if(q.attached||q.missingFile)return;if(q.attached=!0,this.isFontLoadingAPISupported){const m=q.createNativeFontFace();if(m){this.addNativeFontFace(m);try{await m.loaded}catch(A){throw this._onUnsupportedFeature({featureId:f.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,f.warn)(`Failed to load font '${m.family}': '${A}'.`),q.disableFontFace=!0,A}}return}const N=q.createFontFaceRule();if(N){if(this.insertRule(N),this.isSyncFontLoadingSupported)return;await new Promise(m=>{const A=this._queueLoadingCallback(m);this._prepareFontLoadEvent(q,A)})}}get isFontLoadingAPISupported(){var N;const q=!!((N=this._document)!=null&&N.fonts);return(0,f.shadow)(this,"isFontLoadingAPISupported",q)}get isSyncFontLoadingSupported(){let q=!1;if(typeof navigator>"u")q=!0;else{const N=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(N==null?void 0:N[1])>=14&&(q=!0)}return(0,f.shadow)(this,"isSyncFontLoadingSupported",q)}_queueLoadingCallback(q){function N(){for((0,f.assert)(!A.done,"completeRequest() cannot be called twice."),A.done=!0;m.length>0&&m[0].done;){const R=m.shift();setTimeout(R.callback,0)}}const{loadingRequests:m}=this,A={done:!1,complete:N,callback:q};return m.push(A),A}get _loadTestFont(){const q=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,f.shadow)(this,"_loadTestFont",q)}_prepareFontLoadEvent(q,N){function m(E,w){return E.charCodeAt(w)<<24|E.charCodeAt(w+1)<<16|E.charCodeAt(w+2)<<8|E.charCodeAt(w+3)&255}function A(E,w,Q,ct){const it=E.substring(0,w),X=E.substring(w+Q);return it+ct+X}let R,v;const y=this._document.createElement("canvas");y.width=1,y.height=1;const d=y.getContext("2d");let a=0;function n(E,w){if(++a>30){(0,f.warn)("Load test font never loaded."),w();return}if(d.font="30px "+E,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){w();return}setTimeout(n.bind(null,E,w))}const e=`lt${Date.now()}${this.loadTestFontId++}`;let r=this._loadTestFont;r=A(r,976,e.length,e);const c=16,t=1482184792;let s=m(r,c);for(R=0,v=e.length-3;R<v;R+=4)s=s-t+m(e,R)|0;R<e.length&&(s=s-t+m(e+"XXX",R)|0),r=A(r,c,4,(0,f.string32)(s));const g=`url(data:font/opentype;base64,${btoa(r)});`,T=`@font-face {font-family:"${e}";src:${g}}`;this.insertRule(T);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const E of[q.loadedName,e]){const w=this._document.createElement("span");w.textContent="Hi",w.style.fontFamily=E,O.append(w)}this._document.body.append(O),n(e,()=>{O.remove(),N.complete()})}}u.FontLoader=k;class V{constructor(q,{isEvalSupported:N=!0,disableFontFace:m=!1,ignoreErrors:A=!1,onUnsupportedFeature:R,fontRegistry:v=null}){this.compiledGlyphs=Object.create(null);for(const y in q)this[y]=q[y];this.isEvalSupported=N!==!1,this.disableFontFace=m===!0,this.ignoreErrors=A===!0,this._onUnsupportedFeature=R,this.fontRegistry=v}createNativeFontFace(){var N;if(!this.data||this.disableFontFace)return null;let q;if(!this.cssFontInfo)q=new FontFace(this.loadedName,this.data,{});else{const m={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(m.style=`oblique ${this.cssFontInfo.italicAngle}deg`),q=new FontFace(this.cssFontInfo.fontFamily,this.data,m)}return(N=this.fontRegistry)==null||N.registerFont(this),q}createFontFaceRule(){var A;if(!this.data||this.disableFontFace)return null;const q=(0,f.bytesToString)(this.data),N=`url(data:${this.mimetype};base64,${btoa(q)});`;let m;if(!this.cssFontInfo)m=`@font-face {font-family:"${this.loadedName}";src:${N}}`;else{let R=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(R+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),m=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${R}src:${N}}`}return(A=this.fontRegistry)==null||A.registerFont(this,N),m}getPathGenerator(q,N){if(this.compiledGlyphs[N]!==void 0)return this.compiledGlyphs[N];let m;try{m=q.get(this.loadedName+"_path_"+N)}catch(A){if(!this.ignoreErrors)throw A;return this._onUnsupportedFeature({featureId:f.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,f.warn)(`getPathGenerator - ignoring character: "${A}".`),this.compiledGlyphs[N]=function(R,v){}}if(this.isEvalSupported&&f.FeatureTest.isEvalSupported){const A=[];for(const R of m){const v=R.args!==void 0?R.args.join(","):"";A.push("c.",R.cmd,"(",v,`);
`)}return this.compiledGlyphs[N]=new Function("c","size",A.join(""))}return this.compiledGlyphs[N]=function(A,R){for(const v of m)v.cmd==="scale"&&(v.args=[R,-R]),A[v.cmd].apply(A,v.args)}}}u.FontFaceObject=V},(dt,u,Y)=>{var nt,de;Object.defineProperty(u,"__esModule",{value:!0}),u.CanvasGraphics=void 0;var f=Y(1),k=Y(6),V=Y(11),W=Y(13),q=Y(12);const N=16,m=100,A=4096,R=15,v=10,y=q.isNodeJS&&typeof Path2D>"u"?-1:1e3,d=16;function a(D,h){if(D._removeMirroring)throw new Error("Context is already forwarding operations.");D.__originalSave=D.save,D.__originalRestore=D.restore,D.__originalRotate=D.rotate,D.__originalScale=D.scale,D.__originalTranslate=D.translate,D.__originalTransform=D.transform,D.__originalSetTransform=D.setTransform,D.__originalResetTransform=D.resetTransform,D.__originalClip=D.clip,D.__originalMoveTo=D.moveTo,D.__originalLineTo=D.lineTo,D.__originalBezierCurveTo=D.bezierCurveTo,D.__originalRect=D.rect,D.__originalClosePath=D.closePath,D.__originalBeginPath=D.beginPath,D._removeMirroring=()=>{D.save=D.__originalSave,D.restore=D.__originalRestore,D.rotate=D.__originalRotate,D.scale=D.__originalScale,D.translate=D.__originalTranslate,D.transform=D.__originalTransform,D.setTransform=D.__originalSetTransform,D.resetTransform=D.__originalResetTransform,D.clip=D.__originalClip,D.moveTo=D.__originalMoveTo,D.lineTo=D.__originalLineTo,D.bezierCurveTo=D.__originalBezierCurveTo,D.rect=D.__originalRect,D.closePath=D.__originalClosePath,D.beginPath=D.__originalBeginPath,delete D._removeMirroring},D.save=function(){h.save(),this.__originalSave()},D.restore=function(){h.restore(),this.__originalRestore()},D.translate=function(_,F){h.translate(_,F),this.__originalTranslate(_,F)},D.scale=function(_,F){h.scale(_,F),this.__originalScale(_,F)},D.transform=function(_,F,M,I,B,G){h.transform(_,F,M,I,B,G),this.__originalTransform(_,F,M,I,B,G)},D.setTransform=function(_,F,M,I,B,G){h.setTransform(_,F,M,I,B,G),this.__originalSetTransform(_,F,M,I,B,G)},D.resetTransform=function(){h.resetTransform(),this.__originalResetTransform()},D.rotate=function(_){h.rotate(_),this.__originalRotate(_)},D.clip=function(_){h.clip(_),this.__originalClip(_)},D.moveTo=function(l,_){h.moveTo(l,_),this.__originalMoveTo(l,_)},D.lineTo=function(l,_){h.lineTo(l,_),this.__originalLineTo(l,_)},D.bezierCurveTo=function(l,_,F,M,I,B){h.bezierCurveTo(l,_,F,M,I,B),this.__originalBezierCurveTo(l,_,F,M,I,B)},D.rect=function(l,_,F,M){h.rect(l,_,F,M),this.__originalRect(l,_,F,M)},D.closePath=function(){h.closePath(),this.__originalClosePath()},D.beginPath=function(){h.beginPath(),this.__originalBeginPath()}}class n{constructor(h){this.canvasFactory=h,this.cache=Object.create(null)}getCanvas(h,l,_){let F;return this.cache[h]!==void 0?(F=this.cache[h],this.canvasFactory.reset(F,l,_)):(F=this.canvasFactory.create(l,_),this.cache[h]=F),F}delete(h){delete this.cache[h]}clear(){for(const h in this.cache){const l=this.cache[h];this.canvasFactory.destroy(l),delete this.cache[h]}}}function e(D,h,l,_,F,M,I,B,G,ot){const[z,lt,tt,ut,i,p]=(0,k.getCurrentTransform)(D);if(lt===0&&tt===0){const x=I*z+i,H=Math.round(x),rt=B*ut+p,mt=Math.round(rt),U=(I+G)*z+i,vt=Math.abs(Math.round(U)-H)||1,st=(B+ot)*ut+p,gt=Math.abs(Math.round(st)-mt)||1;return D.setTransform(Math.sign(z),0,0,Math.sign(ut),H,mt),D.drawImage(h,l,_,F,M,0,0,vt,gt),D.setTransform(z,lt,tt,ut,i,p),[vt,gt]}if(z===0&&ut===0){const x=B*tt+i,H=Math.round(x),rt=I*lt+p,mt=Math.round(rt),U=(B+ot)*tt+i,vt=Math.abs(Math.round(U)-H)||1,st=(I+G)*lt+p,gt=Math.abs(Math.round(st)-mt)||1;return D.setTransform(0,Math.sign(lt),Math.sign(tt),0,H,mt),D.drawImage(h,l,_,F,M,0,0,gt,vt),D.setTransform(z,lt,tt,ut,i,p),[gt,vt]}D.drawImage(h,l,_,F,M,I,B,G,ot);const P=Math.hypot(z,lt),C=Math.hypot(tt,ut);return[P*G,C*ot]}function r(D){const{width:h,height:l}=D;if(h>y||l>y)return null;const _=1e3,F=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),M=h+1;let I=new Uint8Array(M*(l+1)),B,G,ot;const z=h+7&-8;let lt=new Uint8Array(z*l),tt=0;for(const C of D.data){let x=128;for(;x>0;)lt[tt++]=C&x?0:255,x>>=1}let ut=0;for(tt=0,lt[tt]!==0&&(I[0]=1,++ut),G=1;G<h;G++)lt[tt]!==lt[tt+1]&&(I[G]=lt[tt]?2:1,++ut),tt++;for(lt[tt]!==0&&(I[G]=2,++ut),B=1;B<l;B++){tt=B*z,ot=B*M,lt[tt-z]!==lt[tt]&&(I[ot]=lt[tt]?1:8,++ut);let C=(lt[tt]?4:0)+(lt[tt-z]?8:0);for(G=1;G<h;G++)C=(C>>2)+(lt[tt+1]?4:0)+(lt[tt-z+1]?8:0),F[C]&&(I[ot+G]=F[C],++ut),tt++;if(lt[tt-z]!==lt[tt]&&(I[ot+G]=lt[tt]?2:4,++ut),ut>_)return null}for(tt=z*(l-1),ot=B*M,lt[tt]!==0&&(I[ot]=8,++ut),G=1;G<h;G++)lt[tt]!==lt[tt+1]&&(I[ot+G]=lt[tt]?4:8,++ut),tt++;if(lt[tt]!==0&&(I[ot+G]=4,++ut),ut>_)return null;const i=new Int32Array([0,M,-1,0,-M,0,0,0,1]),p=new Path2D;for(B=0;ut&&B<=l;B++){let C=B*M;const x=C+h;for(;C<x&&!I[C];)C++;if(C===x)continue;p.moveTo(C%M,B);const H=C;let rt=I[C];do{const mt=i[rt];do C+=mt;while(!I[C]);const U=I[C];U!==5&&U!==10?(rt=U,I[C]=0):(rt=U&51*rt>>4,I[C]&=rt>>2|rt<<2),p.lineTo(C%M,C/M|0),I[C]||--ut}while(H!==C);--B}return lt=null,I=null,function(C){C.save(),C.scale(1/h,-1/l),C.translate(0,-l),C.fill(p),C.beginPath(),C.restore()}}class o{constructor(h,l){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=f.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=f.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=f.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,h,l])}clone(){const h=Object.create(this);return h.clipBox=this.clipBox.slice(),h}setCurrentPoint(h,l){this.x=h,this.y=l}updatePathMinMax(h,l,_){[l,_]=f.Util.applyTransform([l,_],h),this.minX=Math.min(this.minX,l),this.minY=Math.min(this.minY,_),this.maxX=Math.max(this.maxX,l),this.maxY=Math.max(this.maxY,_)}updateRectMinMax(h,l){const _=f.Util.applyTransform(l,h),F=f.Util.applyTransform(l.slice(2),h);this.minX=Math.min(this.minX,_[0],F[0]),this.minY=Math.min(this.minY,_[1],F[1]),this.maxX=Math.max(this.maxX,_[0],F[0]),this.maxY=Math.max(this.maxY,_[1],F[1])}updateScalingPathMinMax(h,l){f.Util.scaleMinMax(h,l),this.minX=Math.min(this.minX,l[0]),this.maxX=Math.max(this.maxX,l[1]),this.minY=Math.min(this.minY,l[2]),this.maxY=Math.max(this.maxY,l[3])}updateCurvePathMinMax(h,l,_,F,M,I,B,G,ot,z){const lt=f.Util.bezierBoundingBox(l,_,F,M,I,B,G,ot);if(z){z[0]=Math.min(z[0],lt[0],lt[2]),z[1]=Math.max(z[1],lt[0],lt[2]),z[2]=Math.min(z[2],lt[1],lt[3]),z[3]=Math.max(z[3],lt[1],lt[3]);return}this.updateRectMinMax(h,lt)}getPathBoundingBox(h=V.PathType.FILL,l=null){const _=[this.minX,this.minY,this.maxX,this.maxY];if(h===V.PathType.STROKE){l||(0,f.unreachable)("Stroke bounding box must include transform.");const F=f.Util.singularValueDecompose2dScale(l),M=F[0]*this.lineWidth/2,I=F[1]*this.lineWidth/2;_[0]-=M,_[1]-=I,_[2]+=M,_[3]+=I}return _}updateClipFromPath(){const h=f.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(h||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(h){this.clipBox=h,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(h=V.PathType.FILL,l=null){return f.Util.intersect(this.clipBox,this.getPathBoundingBox(h,l))}}function c(D,h,l=null){if(typeof ImageData<"u"&&h instanceof ImageData){D.putImageData(h,0,0);return}const _=h.height,F=h.width,M=_%d,I=(_-M)/d,B=M===0?I:I+1,G=D.createImageData(F,d);let ot=0,z;const lt=h.data,tt=G.data;let ut,i,p,P,C,x,H,rt;if(l)switch(l.length){case 1:C=l[0],x=l[0],H=l[0],rt=l[0];break;case 4:C=l[0],x=l[1],H=l[2],rt=l[3];break}if(h.kind===f.ImageKind.GRAYSCALE_1BPP){const mt=lt.byteLength,U=new Uint32Array(tt.buffer,0,tt.byteLength>>2),vt=U.length,st=F+7>>3;let gt=4294967295,L=f.FeatureTest.isLittleEndian?4278190080:255;for(rt&&rt[0]===255&&rt[255]===0&&([gt,L]=[L,gt]),ut=0;ut<B;ut++){for(p=ut<I?d:M,z=0,i=0;i<p;i++){const ft=mt-ot;let At=0;const St=ft>st?F:ft*8-7,Rt=St&-8;let Ft=0,Et=0;for(;At<Rt;At+=8)Et=lt[ot++],U[z++]=Et&128?gt:L,U[z++]=Et&64?gt:L,U[z++]=Et&32?gt:L,U[z++]=Et&16?gt:L,U[z++]=Et&8?gt:L,U[z++]=Et&4?gt:L,U[z++]=Et&2?gt:L,U[z++]=Et&1?gt:L;for(;At<St;At++)Ft===0&&(Et=lt[ot++],Ft=128),U[z++]=Et&Ft?gt:L,Ft>>=1}for(;z<vt;)U[z++]=0;D.putImageData(G,0,ut*d)}}else if(h.kind===f.ImageKind.RGBA_32BPP){const mt=!!(C||x||H);for(i=0,P=F*d*4,ut=0;ut<I;ut++){if(tt.set(lt.subarray(ot,ot+P)),ot+=P,mt)for(let U=0;U<P;U+=4)C&&(tt[U+0]=C[tt[U+0]]),x&&(tt[U+1]=x[tt[U+1]]),H&&(tt[U+2]=H[tt[U+2]]);D.putImageData(G,0,i),i+=d}if(ut<B){if(P=F*M*4,tt.set(lt.subarray(ot,ot+P)),mt)for(let U=0;U<P;U+=4)C&&(tt[U+0]=C[tt[U+0]]),x&&(tt[U+1]=x[tt[U+1]]),H&&(tt[U+2]=H[tt[U+2]]);D.putImageData(G,0,i)}}else if(h.kind===f.ImageKind.RGB_24BPP){const mt=!!(C||x||H);for(p=d,P=F*p,ut=0;ut<B;ut++){for(ut>=I&&(p=M,P=F*p),z=0,i=P;i--;)tt[z++]=lt[ot++],tt[z++]=lt[ot++],tt[z++]=lt[ot++],tt[z++]=255;if(mt)for(let U=0;U<z;U+=4)C&&(tt[U+0]=C[tt[U+0]]),x&&(tt[U+1]=x[tt[U+1]]),H&&(tt[U+2]=H[tt[U+2]]);D.putImageData(G,0,ut*d)}}else throw new Error(`bad image kind: ${h.kind}`)}function t(D,h){if(h.bitmap){D.drawImage(h.bitmap,0,0);return}const l=h.height,_=h.width,F=l%d,M=(l-F)/d,I=F===0?M:M+1,B=D.createImageData(_,d);let G=0;const ot=h.data,z=B.data;for(let lt=0;lt<I;lt++){const tt=lt<M?d:F;({srcPos:G}=(0,W.applyMaskImageData)({src:ot,srcPos:G,dest:z,width:_,height:tt})),D.putImageData(B,0,lt*d)}}function s(D,h){const l=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(const _ of l)D[_]!==void 0&&(h[_]=D[_]);D.setLineDash!==void 0&&(h.setLineDash(D.getLineDash()),h.lineDashOffset=D.lineDashOffset)}function g(D,h){D.strokeStyle=D.fillStyle=h||"#000000",D.fillRule="nonzero",D.globalAlpha=1,D.lineWidth=1,D.lineCap="butt",D.lineJoin="miter",D.miterLimit=10,D.globalCompositeOperation="source-over",D.font="10px sans-serif",D.setLineDash!==void 0&&(D.setLineDash([]),D.lineDashOffset=0)}function T(D,h,l,_){const F=D.length;for(let M=3;M<F;M+=4){const I=D[M];if(I===0)D[M-3]=h,D[M-2]=l,D[M-1]=_;else if(I<255){const B=255-I;D[M-3]=D[M-3]*I+h*B>>8,D[M-2]=D[M-2]*I+l*B>>8,D[M-1]=D[M-1]*I+_*B>>8}}}function O(D,h,l){const _=D.length,F=1/255;for(let M=3;M<_;M+=4){const I=l?l[D[M]]:D[M];h[M]=h[M]*I*F|0}}function E(D,h,l){const _=D.length;for(let F=3;F<_;F+=4){const M=D[F-3]*77+D[F-2]*152+D[F-1]*28;h[F]=l?h[F]*l[M>>8]>>8:h[F]*M>>16}}function w(D,h,l,_,F,M,I,B,G,ot,z){const lt=!!M,tt=lt?M[0]:0,ut=lt?M[1]:0,i=lt?M[2]:0;let p;F==="Luminosity"?p=E:p=O;const C=Math.min(_,Math.ceil(1048576/l));for(let x=0;x<_;x+=C){const H=Math.min(C,_-x),rt=D.getImageData(B-ot,x+(G-z),l,H),mt=h.getImageData(B,x+G,l,H);lt&&T(rt.data,tt,ut,i),p(rt.data,mt.data,I),h.putImageData(mt,B,x+G)}}function Q(D,h,l,_){const F=_[0],M=_[1],I=_[2]-F,B=_[3]-M;I===0||B===0||(w(h.context,l,I,B,h.subtype,h.backdrop,h.transferMap,F,M,h.offsetX,h.offsetY),D.save(),D.globalAlpha=1,D.globalCompositeOperation="source-over",D.setTransform(1,0,0,1,0,0),D.drawImage(l.canvas,0,0),D.restore())}function ct(D,h){const l=f.Util.singularValueDecompose2dScale(D);l[0]=Math.fround(l[0]),l[1]=Math.fround(l[1]);const _=Math.fround((globalThis.devicePixelRatio||1)*k.PixelsPerInch.PDF_TO_CSS_UNITS);return h!==void 0?h:l[0]<=_||l[1]<=_}const it=["butt","round","square"],X=["miter","round","bevel"],j={},$={},yt=class yt{constructor(h,l,_,F,{optionalContentConfig:M,markedContentStack:I=null},B,G){et(this,nt);this.ctx=h,this.current=new o(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=l,this.objs=_,this.canvasFactory=F,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=I||[],this.optionalContentConfig=M,this.cachedCanvases=new n(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=B,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(G==null?void 0:G.background)||null,this.foregroundColor=(G==null?void 0:G.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(h,l=null){return typeof h=="string"?h.startsWith("g_")?this.commonObjs.get(h):this.objs.get(h):l}beginDrawing({transform:h,viewport:l,transparency:_=!1,background:F=null}){const M=this.ctx.canvas.width,I=this.ctx.canvas.height,B=F||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const G=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const ot=this.backgroundColor=this.ctx.fillStyle;let z=!0,lt=B;if(this.ctx.fillStyle=B,lt=this.ctx.fillStyle,z=typeof lt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(lt),G==="#000000"&&ot==="#ffffff"||G===ot||!z)this.foregroundColor=this.backgroundColor=null;else{const[tt,ut,i]=(0,k.getRGB)(lt),p=C=>(C/=255,C<=.03928?C/12.92:((C+.055)/1.055)**2.4),P=Math.round(.2126*p(tt)+.7152*p(ut)+.0722*p(i));this.selectColor=(C,x,H)=>{const rt=.2126*p(C)+.7152*p(x)+.0722*p(H);return Math.round(rt)===P?ot:G}}}if(this.ctx.fillStyle=this.backgroundColor||B,this.ctx.fillRect(0,0,M,I),this.ctx.restore(),_){const G=this.cachedCanvases.getCanvas("transparent",M,I);this.compositeCtx=this.ctx,this.transparentCanvas=G.canvas,this.ctx=G.context,this.ctx.save(),this.ctx.transform(...(0,k.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),g(this.ctx,this.foregroundColor),h&&(this.ctx.transform(...h),this.outputScaleX=h[0],this.outputScaleY=h[0]),this.ctx.transform(...l.transform),this.viewportScale=l.scale,this.baseTransform=(0,k.getCurrentTransform)(this.ctx)}executeOperatorList(h,l,_,F){const M=h.argsArray,I=h.fnArray;let B=l||0;const G=M.length;if(G===B)return B;const ot=G-B>v&&typeof _=="function",z=ot?Date.now()+R:0;let lt=0;const tt=this.commonObjs,ut=this.objs;let i;for(;;){if(F!==void 0&&B===F.nextBreakPoint)return F.breakIt(B,_),B;if(i=I[B],i!==f.OPS.dependency)this[i].apply(this,M[B]);else for(const p of M[B]){const P=p.startsWith("g_")?tt:ut;if(!P.has(p))return P.get(p,_),B}if(B++,B===G)return B;if(ot&&++lt>v){if(Date.now()>z)return _(),B;lt=0}}}endDrawing(){ht(this,nt,de).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const h of this._cachedBitmapsMap.values()){for(const l of h.values())typeof HTMLCanvasElement<"u"&&l instanceof HTMLCanvasElement&&(l.width=l.height=0);h.clear()}this._cachedBitmapsMap.clear()}_scaleImage(h,l){const _=h.width,F=h.height;let M=Math.max(Math.hypot(l[0],l[1]),1),I=Math.max(Math.hypot(l[2],l[3]),1),B=_,G=F,ot="prescale1",z,lt;for(;M>2&&B>1||I>2&&G>1;){let tt=B,ut=G;M>2&&B>1&&(tt=Math.ceil(B/2),M/=B/tt),I>2&&G>1&&(ut=Math.ceil(G/2),I/=G/ut),z=this.cachedCanvases.getCanvas(ot,tt,ut),lt=z.context,lt.clearRect(0,0,tt,ut),lt.drawImage(h,0,0,B,G,0,0,tt,ut),h=z.canvas,B=tt,G=ut,ot=ot==="prescale1"?"prescale2":"prescale1"}return{img:h,paintWidth:B,paintHeight:G}}_createMaskCanvas(h){const l=this.ctx,{width:_,height:F}=h,M=this.current.fillColor,I=this.current.patternFill,B=(0,k.getCurrentTransform)(l);let G,ot,z,lt;if((h.bitmap||h.data)&&h.count>1){const vt=h.bitmap||h.data.buffer;ot=JSON.stringify(I?B:[B.slice(0,4),M]),G=this._cachedBitmapsMap.get(vt),G||(G=new Map,this._cachedBitmapsMap.set(vt,G));const st=G.get(ot);if(st&&!I){const gt=Math.round(Math.min(B[0],B[2])+B[4]),L=Math.round(Math.min(B[1],B[3])+B[5]);return{canvas:st,offsetX:gt,offsetY:L}}z=st}z||(lt=this.cachedCanvases.getCanvas("maskCanvas",_,F),t(lt.context,h));let tt=f.Util.transform(B,[1/_,0,0,-1/F,0,0]);tt=f.Util.transform(tt,[1,0,0,1,0,-F]);const ut=f.Util.applyTransform([0,0],tt),i=f.Util.applyTransform([_,F],tt),p=f.Util.normalizeRect([ut[0],ut[1],i[0],i[1]]),P=Math.round(p[2]-p[0])||1,C=Math.round(p[3]-p[1])||1,x=this.cachedCanvases.getCanvas("fillCanvas",P,C),H=x.context,rt=Math.min(ut[0],i[0]),mt=Math.min(ut[1],i[1]);H.translate(-rt,-mt),H.transform(...tt),z||(z=this._scaleImage(lt.canvas,(0,k.getCurrentTransformInverse)(H)),z=z.img,G&&I&&G.set(ot,z)),H.imageSmoothingEnabled=ct((0,k.getCurrentTransform)(H),h.interpolate),e(H,z,0,0,z.width,z.height,0,0,_,F),H.globalCompositeOperation="source-in";const U=f.Util.transform((0,k.getCurrentTransformInverse)(H),[1,0,0,1,-rt,-mt]);return H.fillStyle=I?M.getPattern(l,this,U,V.PathType.FILL):M,H.fillRect(0,0,_,F),G&&!I&&(this.cachedCanvases.delete("fillCanvas"),G.set(ot,x.canvas)),{canvas:x.canvas,offsetX:Math.round(rt),offsetY:Math.round(mt)}}setLineWidth(h){h!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=h,this.ctx.lineWidth=h}setLineCap(h){this.ctx.lineCap=it[h]}setLineJoin(h){this.ctx.lineJoin=X[h]}setMiterLimit(h){this.ctx.miterLimit=h}setDash(h,l){const _=this.ctx;_.setLineDash!==void 0&&(_.setLineDash(h),_.lineDashOffset=l)}setRenderingIntent(h){}setFlatness(h){}setGState(h){for(const[l,_]of h)switch(l){case"LW":this.setLineWidth(_);break;case"LC":this.setLineCap(_);break;case"LJ":this.setLineJoin(_);break;case"ML":this.setMiterLimit(_);break;case"D":this.setDash(_[0],_[1]);break;case"RI":this.setRenderingIntent(_);break;case"FL":this.setFlatness(_);break;case"Font":this.setFont(_[0],_[1]);break;case"CA":this.current.strokeAlpha=_;break;case"ca":this.current.fillAlpha=_,this.ctx.globalAlpha=_;break;case"BM":this.ctx.globalCompositeOperation=_;break;case"SMask":this.current.activeSMask=_?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=_}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const h=this.inSMaskMode;this.current.activeSMask&&!h?this.beginSMaskMode():!this.current.activeSMask&&h&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const h=this.ctx.canvas.width,l=this.ctx.canvas.height,_="smaskGroupAt"+this.groupLevel,F=this.cachedCanvases.getCanvas(_,h,l);this.suspendedCtx=this.ctx,this.ctx=F.context;const M=this.ctx;M.setTransform(...(0,k.getCurrentTransform)(this.suspendedCtx)),s(this.suspendedCtx,M),a(M,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),s(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(h){if(!this.current.activeSMask)return;h?(h[0]=Math.floor(h[0]),h[1]=Math.floor(h[1]),h[2]=Math.ceil(h[2]),h[3]=Math.ceil(h[3])):h=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const l=this.current.activeSMask,_=this.suspendedCtx;Q(_,l,this.ctx,h),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(s(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const h=this.current;this.stateStack.push(h),this.current=h.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),s(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(h,l,_,F,M,I){this.ctx.transform(h,l,_,F,M,I),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(h,l,_){const F=this.ctx,M=this.current;let I=M.x,B=M.y,G,ot;const z=(0,k.getCurrentTransform)(F),lt=z[0]===0&&z[3]===0||z[1]===0&&z[2]===0,tt=lt?_.slice(0):null;for(let ut=0,i=0,p=h.length;ut<p;ut++)switch(h[ut]|0){case f.OPS.rectangle:I=l[i++],B=l[i++];const P=l[i++],C=l[i++],x=I+P,H=B+C;F.moveTo(I,B),P===0||C===0?F.lineTo(x,H):(F.lineTo(x,B),F.lineTo(x,H),F.lineTo(I,H)),lt||M.updateRectMinMax(z,[I,B,x,H]),F.closePath();break;case f.OPS.moveTo:I=l[i++],B=l[i++],F.moveTo(I,B),lt||M.updatePathMinMax(z,I,B);break;case f.OPS.lineTo:I=l[i++],B=l[i++],F.lineTo(I,B),lt||M.updatePathMinMax(z,I,B);break;case f.OPS.curveTo:G=I,ot=B,I=l[i+4],B=l[i+5],F.bezierCurveTo(l[i],l[i+1],l[i+2],l[i+3],I,B),M.updateCurvePathMinMax(z,G,ot,l[i],l[i+1],l[i+2],l[i+3],I,B,tt),i+=6;break;case f.OPS.curveTo2:G=I,ot=B,F.bezierCurveTo(I,B,l[i],l[i+1],l[i+2],l[i+3]),M.updateCurvePathMinMax(z,G,ot,I,B,l[i],l[i+1],l[i+2],l[i+3],tt),I=l[i+2],B=l[i+3],i+=4;break;case f.OPS.curveTo3:G=I,ot=B,I=l[i+2],B=l[i+3],F.bezierCurveTo(l[i],l[i+1],I,B,I,B),M.updateCurvePathMinMax(z,G,ot,l[i],l[i+1],I,B,I,B,tt),i+=4;break;case f.OPS.closePath:F.closePath();break}lt&&M.updateScalingPathMinMax(z,tt),M.setCurrentPoint(I,B)}closePath(){this.ctx.closePath()}stroke(h){h=typeof h<"u"?h:!0;const l=this.ctx,_=this.current.strokeColor;l.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof _=="object"&&(_!=null&&_.getPattern)?(l.save(),l.strokeStyle=_.getPattern(l,this,(0,k.getCurrentTransformInverse)(l),V.PathType.STROKE),this.rescaleAndStroke(!1),l.restore()):this.rescaleAndStroke(!0)),h&&this.consumePath(this.current.getClippedPathBoundingBox()),l.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(h){h=typeof h<"u"?h:!0;const l=this.ctx,_=this.current.fillColor,F=this.current.patternFill;let M=!1;F&&(l.save(),l.fillStyle=_.getPattern(l,this,(0,k.getCurrentTransformInverse)(l),V.PathType.FILL),M=!0);const I=this.current.getClippedPathBoundingBox();this.contentVisible&&I!==null&&(this.pendingEOFill?(l.fill("evenodd"),this.pendingEOFill=!1):l.fill()),M&&l.restore(),h&&this.consumePath(I)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=j}eoClip(){this.pendingClip=$}beginText(){this.current.textMatrix=f.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const h=this.pendingTextPaths,l=this.ctx;if(h===void 0){l.beginPath();return}l.save(),l.beginPath();for(const _ of h)l.setTransform(..._.transform),l.translate(_.x,_.y),_.addToPath(l,_.fontSize);l.restore(),l.clip(),l.beginPath(),delete this.pendingTextPaths}setCharSpacing(h){this.current.charSpacing=h}setWordSpacing(h){this.current.wordSpacing=h}setHScale(h){this.current.textHScale=h/100}setLeading(h){this.current.leading=-h}setFont(h,l){const _=this.commonObjs.get(h),F=this.current;if(!_)throw new Error(`Can't find font for ${h}`);if(F.fontMatrix=_.fontMatrix||f.FONT_IDENTITY_MATRIX,(F.fontMatrix[0]===0||F.fontMatrix[3]===0)&&(0,f.warn)("Invalid font matrix for font "+h),l<0?(l=-l,F.fontDirection=-1):F.fontDirection=1,this.current.font=_,this.current.fontSize=l,_.isType3Font)return;const M=_.loadedName||"sans-serif";let I="normal";_.black?I="900":_.bold&&(I="bold");const B=_.italic?"italic":"normal",G=`"${M}", ${_.fallbackName}`;let ot=l;l<N?ot=N:l>m&&(ot=m),this.current.fontSizeScale=l/ot,this.ctx.font=`${B} ${I} ${ot}px ${G}`}setTextRenderingMode(h){this.current.textRenderingMode=h}setTextRise(h){this.current.textRise=h}moveText(h,l){this.current.x=this.current.lineX+=h,this.current.y=this.current.lineY+=l}setLeadingMoveText(h,l){this.setLeading(-l),this.moveText(h,l)}setTextMatrix(h,l,_,F,M,I){this.current.textMatrix=[h,l,_,F,M,I],this.current.textMatrixScale=Math.hypot(h,l),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(h,l,_,F){const M=this.ctx,I=this.current,B=I.font,G=I.textRenderingMode,ot=I.fontSize/I.fontSizeScale,z=G&f.TextRenderingMode.FILL_STROKE_MASK,lt=!!(G&f.TextRenderingMode.ADD_TO_PATH_FLAG),tt=I.patternFill&&!B.missingFile;let ut;(B.disableFontFace||lt||tt)&&(ut=B.getPathGenerator(this.commonObjs,h)),B.disableFontFace||tt?(M.save(),M.translate(l,_),M.beginPath(),ut(M,ot),F&&M.setTransform(...F),(z===f.TextRenderingMode.FILL||z===f.TextRenderingMode.FILL_STROKE)&&M.fill(),(z===f.TextRenderingMode.STROKE||z===f.TextRenderingMode.FILL_STROKE)&&M.stroke(),M.restore()):((z===f.TextRenderingMode.FILL||z===f.TextRenderingMode.FILL_STROKE)&&M.fillText(h,l,_),(z===f.TextRenderingMode.STROKE||z===f.TextRenderingMode.FILL_STROKE)&&M.strokeText(h,l,_)),lt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,k.getCurrentTransform)(M),x:l,y:_,fontSize:ot,addToPath:ut})}get isFontSubpixelAAEnabled(){const{context:h}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);h.scale(1.5,1),h.fillText("I",0,10);const l=h.getImageData(0,0,10,10).data;let _=!1;for(let F=3;F<l.length;F+=4)if(l[F]>0&&l[F]<255){_=!0;break}return(0,f.shadow)(this,"isFontSubpixelAAEnabled",_)}showText(h){const l=this.current,_=l.font;if(_.isType3Font)return this.showType3Text(h);const F=l.fontSize;if(F===0)return;const M=this.ctx,I=l.fontSizeScale,B=l.charSpacing,G=l.wordSpacing,ot=l.fontDirection,z=l.textHScale*ot,lt=h.length,tt=_.vertical,ut=tt?1:-1,i=_.defaultVMetrics,p=F*l.fontMatrix[0],P=l.textRenderingMode===f.TextRenderingMode.FILL&&!_.disableFontFace&&!l.patternFill;M.save(),M.transform(...l.textMatrix),M.translate(l.x,l.y+l.textRise),ot>0?M.scale(z,-1):M.scale(z,1);let C;if(l.patternFill){M.save();const U=l.fillColor.getPattern(M,this,(0,k.getCurrentTransformInverse)(M),V.PathType.FILL);C=(0,k.getCurrentTransform)(M),M.restore(),M.fillStyle=U}let x=l.lineWidth;const H=l.textMatrixScale;if(H===0||x===0){const U=l.textRenderingMode&f.TextRenderingMode.FILL_STROKE_MASK;(U===f.TextRenderingMode.STROKE||U===f.TextRenderingMode.FILL_STROKE)&&(x=this.getSinglePixelWidth())}else x/=H;if(I!==1&&(M.scale(I,I),x/=I),M.lineWidth=x,_.isInvalidPDFjsFont){const U=[];let vt=0;for(const st of h)U.push(st.unicode),vt+=st.width;M.fillText(U.join(""),0,0),l.x+=vt*p*z,M.restore(),this.compose();return}let rt=0,mt;for(mt=0;mt<lt;++mt){const U=h[mt];if(typeof U=="number"){rt+=ut*U*F/1e3;continue}let vt=!1;const st=(U.isSpace?G:0)+B,gt=U.fontChar,L=U.accent;let ft,At,St=U.width;if(tt){const Ft=U.vmetric||i,Et=-(U.vmetric?Ft[1]:St*.5)*p,at=Ft[2]*p;St=Ft?-Ft[0]:St,ft=Et/I,At=(rt+at)/I}else ft=rt/I,At=0;if(_.remeasure&&St>0){const Ft=M.measureText(gt).width*1e3/F*I;if(St<Ft&&this.isFontSubpixelAAEnabled){const Et=St/Ft;vt=!0,M.save(),M.scale(Et,1),ft/=Et}else St!==Ft&&(ft+=(St-Ft)/2e3*F/I)}if(this.contentVisible&&(U.isInFont||_.missingFile)){if(P&&!L)M.fillText(gt,ft,At);else if(this.paintChar(gt,ft,At,C),L){const Ft=ft+F*L.offset.x/I,Et=At-F*L.offset.y/I;this.paintChar(L.fontChar,Ft,Et,C)}}let Rt;tt?Rt=St*p-st*ot:Rt=St*p+st*ot,rt+=Rt,vt&&M.restore()}tt?l.y-=rt:l.x+=rt*z,M.restore(),this.compose()}showType3Text(h){const l=this.ctx,_=this.current,F=_.font,M=_.fontSize,I=_.fontDirection,B=F.vertical?1:-1,G=_.charSpacing,ot=_.wordSpacing,z=_.textHScale*I,lt=_.fontMatrix||f.FONT_IDENTITY_MATRIX,tt=h.length,ut=_.textRenderingMode===f.TextRenderingMode.INVISIBLE;let i,p,P,C;if(!(ut||M===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,l.save(),l.transform(..._.textMatrix),l.translate(_.x,_.y),l.scale(z,I),i=0;i<tt;++i){if(p=h[i],typeof p=="number"){C=B*p*M/1e3,this.ctx.translate(C,0),_.x+=C*z;continue}const x=(p.isSpace?ot:0)+G,H=F.charProcOperatorList[p.operatorListId];if(!H){(0,f.warn)(`Type3 character "${p.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=p,this.save(),l.scale(M,M),l.transform(...lt),this.executeOperatorList(H),this.restore()),P=f.Util.applyTransform([p.width,0],lt)[0]*M+x,l.translate(P,0),_.x+=P*z}l.restore(),this.processingType3=null}}setCharWidth(h,l){}setCharWidthAndBounds(h,l,_,F,M,I){this.ctx.rect(_,F,M-_,I-F),this.ctx.clip(),this.endPath()}getColorN_Pattern(h){let l;if(h[0]==="TilingPattern"){const _=h[1],F=this.baseTransform||(0,k.getCurrentTransform)(this.ctx),M={createCanvasGraphics:I=>new yt(I,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};l=new V.TilingPattern(h,_,this.ctx,M,F)}else l=this._getPattern(h[1],h[2]);return l}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(h,l,_){var M;const F=((M=this.selectColor)==null?void 0:M.call(this,h,l,_))||f.Util.makeHexColor(h,l,_);this.ctx.strokeStyle=F,this.current.strokeColor=F}setFillRGBColor(h,l,_){var M;const F=((M=this.selectColor)==null?void 0:M.call(this,h,l,_))||f.Util.makeHexColor(h,l,_);this.ctx.fillStyle=F,this.current.fillColor=F,this.current.patternFill=!1}_getPattern(h,l=null){let _;return this.cachedPatterns.has(h)?_=this.cachedPatterns.get(h):(_=(0,V.getShadingPattern)(this.objs.get(h)),this.cachedPatterns.set(h,_)),l&&(_.matrix=l),_}shadingFill(h){if(!this.contentVisible)return;const l=this.ctx;this.save();const _=this._getPattern(h);l.fillStyle=_.getPattern(l,this,(0,k.getCurrentTransformInverse)(l),V.PathType.SHADING);const F=(0,k.getCurrentTransformInverse)(l);if(F){const M=l.canvas,I=M.width,B=M.height,G=f.Util.applyTransform([0,0],F),ot=f.Util.applyTransform([0,B],F),z=f.Util.applyTransform([I,0],F),lt=f.Util.applyTransform([I,B],F),tt=Math.min(G[0],ot[0],z[0],lt[0]),ut=Math.min(G[1],ot[1],z[1],lt[1]),i=Math.max(G[0],ot[0],z[0],lt[0]),p=Math.max(G[1],ot[1],z[1],lt[1]);this.ctx.fillRect(tt,ut,i-tt,p-ut)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,f.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,f.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(h,l){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(h)&&h.length===6&&this.transform(...h),this.baseTransform=(0,k.getCurrentTransform)(this.ctx),l)){const _=l[2]-l[0],F=l[3]-l[1];this.ctx.rect(l[0],l[1],_,F),this.current.updateRectMinMax((0,k.getCurrentTransform)(this.ctx),l),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(h){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const l=this.ctx;h.isolated||(0,f.info)("TODO: Support non-isolated groups."),h.knockout&&(0,f.warn)("Knockout groups not supported.");const _=(0,k.getCurrentTransform)(l);if(h.matrix&&l.transform(...h.matrix),!h.bbox)throw new Error("Bounding box is required.");let F=f.Util.getAxialAlignedBoundingBox(h.bbox,(0,k.getCurrentTransform)(l));const M=[0,0,l.canvas.width,l.canvas.height];F=f.Util.intersect(F,M)||[0,0,0,0];const I=Math.floor(F[0]),B=Math.floor(F[1]);let G=Math.max(Math.ceil(F[2])-I,1),ot=Math.max(Math.ceil(F[3])-B,1),z=1,lt=1;G>A&&(z=G/A,G=A),ot>A&&(lt=ot/A,ot=A),this.current.startNewPathAndClipBox([0,0,G,ot]);let tt="groupAt"+this.groupLevel;h.smask&&(tt+="_smask_"+this.smaskCounter++%2);const ut=this.cachedCanvases.getCanvas(tt,G,ot),i=ut.context;i.scale(1/z,1/lt),i.translate(-I,-B),i.transform(..._),h.smask?this.smaskStack.push({canvas:ut.canvas,context:i,offsetX:I,offsetY:B,scaleX:z,scaleY:lt,subtype:h.smask.subtype,backdrop:h.smask.backdrop,transferMap:h.smask.transferMap||null,startTransformInverse:null}):(l.setTransform(1,0,0,1,0,0),l.translate(I,B),l.scale(z,lt),l.save()),s(l,i),this.ctx=i,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(l),this.groupLevel++}endGroup(h){if(!this.contentVisible)return;this.groupLevel--;const l=this.ctx,_=this.groupStack.pop();if(this.ctx=_,this.ctx.imageSmoothingEnabled=!1,h.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const F=(0,k.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...F);const M=f.Util.getAxialAlignedBoundingBox([0,0,l.canvas.width,l.canvas.height],F);this.ctx.drawImage(l.canvas,0,0),this.ctx.restore(),this.compose(M)}}beginAnnotation(h,l,_,F,M){if(ht(this,nt,de).call(this),g(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(l)&&l.length===4){const I=l[2]-l[0],B=l[3]-l[1];if(M&&this.annotationCanvasMap){_=_.slice(),_[4]-=l[0],_[5]-=l[1],l=l.slice(),l[0]=l[1]=0,l[2]=I,l[3]=B;const[G,ot]=f.Util.singularValueDecompose2dScale((0,k.getCurrentTransform)(this.ctx)),{viewportScale:z}=this,lt=Math.ceil(I*this.outputScaleX*z),tt=Math.ceil(B*this.outputScaleY*z);this.annotationCanvas=this.canvasFactory.create(lt,tt);const{canvas:ut,context:i}=this.annotationCanvas;this.annotationCanvasMap.set(h,ut),this.annotationCanvas.savedCtx=this.ctx,this.ctx=i,this.ctx.setTransform(G,0,0,-ot,0,B*ot),g(this.ctx,this.foregroundColor)}else g(this.ctx,this.foregroundColor),this.ctx.rect(l[0],l[1],I,B),this.ctx.clip(),this.endPath()}this.current=new o(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(..._),this.transform(...F)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(h){if(!this.contentVisible)return;const l=h.count;h=this.getObject(h.data,h),h.count=l;const _=this.ctx,F=this.processingType3;if(F&&(F.compiled===void 0&&(F.compiled=r(h)),F.compiled)){F.compiled(_);return}const M=this._createMaskCanvas(h),I=M.canvas;_.save(),_.setTransform(1,0,0,1,0,0),_.drawImage(I,M.offsetX,M.offsetY),_.restore(),this.compose()}paintImageMaskXObjectRepeat(h,l,_=0,F=0,M,I){if(!this.contentVisible)return;h=this.getObject(h.data,h);const B=this.ctx;B.save();const G=(0,k.getCurrentTransform)(B);B.transform(l,_,F,M,0,0);const ot=this._createMaskCanvas(h);B.setTransform(1,0,0,1,ot.offsetX-G[4],ot.offsetY-G[5]);for(let z=0,lt=I.length;z<lt;z+=2){const tt=f.Util.transform(G,[l,_,F,M,I[z],I[z+1]]),[ut,i]=f.Util.applyTransform([0,0],tt);B.drawImage(ot.canvas,ut,i)}B.restore(),this.compose()}paintImageMaskXObjectGroup(h){if(!this.contentVisible)return;const l=this.ctx,_=this.current.fillColor,F=this.current.patternFill;for(const M of h){const{data:I,width:B,height:G,transform:ot}=M,z=this.cachedCanvases.getCanvas("maskCanvas",B,G),lt=z.context;lt.save();const tt=this.getObject(I,M);t(lt,tt),lt.globalCompositeOperation="source-in",lt.fillStyle=F?_.getPattern(lt,this,(0,k.getCurrentTransformInverse)(l),V.PathType.FILL):_,lt.fillRect(0,0,B,G),lt.restore(),l.save(),l.transform(...ot),l.scale(1,-1),e(l,z.canvas,0,0,B,G,0,-1,1,1),l.restore()}this.compose()}paintImageXObject(h){if(!this.contentVisible)return;const l=this.getObject(h);if(!l){(0,f.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(l)}paintImageXObjectRepeat(h,l,_,F){if(!this.contentVisible)return;const M=this.getObject(h);if(!M){(0,f.warn)("Dependent image isn't ready yet");return}const I=M.width,B=M.height,G=[];for(let ot=0,z=F.length;ot<z;ot+=2)G.push({transform:[l,0,0,_,F[ot],F[ot+1]],x:0,y:0,w:I,h:B});this.paintInlineImageXObjectGroup(M,G)}paintInlineImageXObject(h){if(!this.contentVisible)return;const l=h.width,_=h.height,F=this.ctx;this.save(),F.scale(1/l,-1/_);let M;if(typeof HTMLElement=="function"&&h instanceof HTMLElement||!h.data)M=h;else{const B=this.cachedCanvases.getCanvas("inlineImage",l,_),G=B.context;c(G,h,this.current.transferMaps),M=B.canvas}const I=this._scaleImage(M,(0,k.getCurrentTransformInverse)(F));F.imageSmoothingEnabled=ct((0,k.getCurrentTransform)(F),h.interpolate),e(F,I.img,0,0,I.paintWidth,I.paintHeight,0,-_,l,_),this.compose(),this.restore()}paintInlineImageXObjectGroup(h,l){if(!this.contentVisible)return;const _=this.ctx,F=h.width,M=h.height,I=this.cachedCanvases.getCanvas("inlineImage",F,M),B=I.context;c(B,h,this.current.transferMaps);for(const G of l)_.save(),_.transform(...G.transform),_.scale(1,-1),e(_,I.canvas,G.x,G.y,G.w,G.h,0,-1,1,1),_.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(h){}markPointProps(h,l){}beginMarkedContent(h){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(h,l){h==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(l)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(h){const l=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(h);const _=this.ctx;this.pendingClip&&(l||(this.pendingClip===$?_.clip("evenodd"):_.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),_.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const h=(0,k.getCurrentTransform)(this.ctx);if(h[1]===0&&h[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(h[0]),Math.abs(h[3]));else{const l=Math.abs(h[0]*h[3]-h[2]*h[1]),_=Math.hypot(h[0],h[2]),F=Math.hypot(h[1],h[3]);this._cachedGetSinglePixelWidth=Math.max(_,F)/l}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:h}=this.current,l=(0,k.getCurrentTransform)(this.ctx);let _,F;if(l[1]===0&&l[2]===0){const M=Math.abs(l[0]),I=Math.abs(l[3]);if(h===0)_=1/M,F=1/I;else{const B=M*h,G=I*h;_=B<1?1/B:1,F=G<1?1/G:1}}else{const M=Math.abs(l[0]*l[3]-l[2]*l[1]),I=Math.hypot(l[0],l[1]),B=Math.hypot(l[2],l[3]);if(h===0)_=B/M,F=I/M;else{const G=h*M;_=B>G?B/G:1,F=I>G?I/G:1}}this._cachedScaleForStroking=[_,F]}return this._cachedScaleForStroking}rescaleAndStroke(h){const{ctx:l}=this,{lineWidth:_}=this.current,[F,M]=this.getScaleForStroking();if(l.lineWidth=_||1,F===1&&M===1){l.stroke();return}let I,B,G;h&&(I=(0,k.getCurrentTransform)(l),B=l.getLineDash().slice(),G=l.lineDashOffset),l.scale(F,M);const ot=Math.max(F,M);l.setLineDash(l.getLineDash().map(z=>z/ot)),l.lineDashOffset/=ot,l.stroke(),h&&(l.setTransform(...I),l.setLineDash(B),l.lineDashOffset=G)}isContentVisible(){for(let h=this.markedContentStack.length-1;h>=0;h--)if(!this.markedContentStack[h].visible)return!1;return!0}};nt=new WeakSet,de=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)};let Z=yt;u.CanvasGraphics=Z;for(const D in f.OPS)Z.prototype[D]!==void 0&&(Z.prototype[f.OPS[D]]=Z.prototype[D])},(dt,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TilingPattern=u.PathType=void 0,u.getShadingPattern=d;var f=Y(1),k=Y(6),V=Y(12);const W={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};u.PathType=W;function q(e,r){if(!r||V.isNodeJS)return;const o=r[2]-r[0],c=r[3]-r[1],t=new Path2D;t.rect(r[0],r[1],o,c),e.clip(t)}class N{constructor(){this.constructor===N&&(0,f.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,f.unreachable)("Abstract method `getPattern` called.")}}class m extends N{constructor(r){super(),this._type=r[1],this._bbox=r[2],this._colorStops=r[3],this._p0=r[4],this._p1=r[5],this._r0=r[6],this._r1=r[7],this.matrix=null}_createGradient(r){let o;this._type==="axial"?o=r.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(o=r.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const c of this._colorStops)o.addColorStop(c[0],c[1]);return o}getPattern(r,o,c,t){let s;if(t===W.STROKE||t===W.FILL){const g=o.current.getClippedPathBoundingBox(t,(0,k.getCurrentTransform)(r))||[0,0,0,0],T=Math.ceil(g[2]-g[0])||1,O=Math.ceil(g[3]-g[1])||1,E=o.cachedCanvases.getCanvas("pattern",T,O,!0),w=E.context;w.clearRect(0,0,w.canvas.width,w.canvas.height),w.beginPath(),w.rect(0,0,w.canvas.width,w.canvas.height),w.translate(-g[0],-g[1]),c=f.Util.transform(c,[1,0,0,1,g[0],g[1]]),w.transform(...o.baseTransform),this.matrix&&w.transform(...this.matrix),q(w,this._bbox),w.fillStyle=this._createGradient(w),w.fill(),s=r.createPattern(E.canvas,"no-repeat");const Q=new DOMMatrix(c);s.setTransform(Q)}else q(r,this._bbox),s=this._createGradient(r);return s}}function A(e,r,o,c,t,s,g,T){const O=r.coords,E=r.colors,w=e.data,Q=e.width*4;let ct;O[o+1]>O[c+1]&&(ct=o,o=c,c=ct,ct=s,s=g,g=ct),O[c+1]>O[t+1]&&(ct=c,c=t,t=ct,ct=g,g=T,T=ct),O[o+1]>O[c+1]&&(ct=o,o=c,c=ct,ct=s,s=g,g=ct);const it=(O[o]+r.offsetX)*r.scaleX,X=(O[o+1]+r.offsetY)*r.scaleY,j=(O[c]+r.offsetX)*r.scaleX,$=(O[c+1]+r.offsetY)*r.scaleY,Z=(O[t]+r.offsetX)*r.scaleX,nt=(O[t+1]+r.offsetY)*r.scaleY;if(X>=nt)return;const bt=E[s],yt=E[s+1],D=E[s+2],h=E[g],l=E[g+1],_=E[g+2],F=E[T],M=E[T+1],I=E[T+2],B=Math.round(X),G=Math.round(nt);let ot,z,lt,tt,ut,i,p,P;for(let C=B;C<=G;C++){if(C<$){let U;C<X?U=0:U=(X-C)/(X-$),ot=it-(it-j)*U,z=bt-(bt-h)*U,lt=yt-(yt-l)*U,tt=D-(D-_)*U}else{let U;C>nt?U=1:$===nt?U=0:U=($-C)/($-nt),ot=j-(j-Z)*U,z=h-(h-F)*U,lt=l-(l-M)*U,tt=_-(_-I)*U}let x;C<X?x=0:C>nt?x=1:x=(X-C)/(X-nt),ut=it-(it-Z)*x,i=bt-(bt-F)*x,p=yt-(yt-M)*x,P=D-(D-I)*x;const H=Math.round(Math.min(ot,ut)),rt=Math.round(Math.max(ot,ut));let mt=Q*C+H*4;for(let U=H;U<=rt;U++)x=(ot-U)/(ot-ut),x<0?x=0:x>1&&(x=1),w[mt++]=z-(z-i)*x|0,w[mt++]=lt-(lt-p)*x|0,w[mt++]=tt-(tt-P)*x|0,w[mt++]=255}}function R(e,r,o){const c=r.coords,t=r.colors;let s,g;switch(r.type){case"lattice":const T=r.verticesPerRow,O=Math.floor(c.length/T)-1,E=T-1;for(s=0;s<O;s++){let w=s*T;for(let Q=0;Q<E;Q++,w++)A(e,o,c[w],c[w+1],c[w+T],t[w],t[w+1],t[w+T]),A(e,o,c[w+T+1],c[w+1],c[w+T],t[w+T+1],t[w+1],t[w+T])}break;case"triangles":for(s=0,g=c.length;s<g;s+=3)A(e,o,c[s],c[s+1],c[s+2],t[s],t[s+1],t[s+2]);break;default:throw new Error("illegal figure")}}class v extends N{constructor(r){super(),this._coords=r[2],this._colors=r[3],this._figures=r[4],this._bounds=r[5],this._bbox=r[7],this._background=r[8],this.matrix=null}_createMeshCanvas(r,o,c){const T=Math.floor(this._bounds[0]),O=Math.floor(this._bounds[1]),E=Math.ceil(this._bounds[2])-T,w=Math.ceil(this._bounds[3])-O,Q=Math.min(Math.ceil(Math.abs(E*r[0]*1.1)),3e3),ct=Math.min(Math.ceil(Math.abs(w*r[1]*1.1)),3e3),it=E/Q,X=w/ct,j={coords:this._coords,colors:this._colors,offsetX:-T,offsetY:-O,scaleX:1/it,scaleY:1/X},$=Q+2*2,Z=ct+2*2,nt=c.getCanvas("mesh",$,Z,!1),bt=nt.context,yt=bt.createImageData(Q,ct);if(o){const h=yt.data;for(let l=0,_=h.length;l<_;l+=4)h[l]=o[0],h[l+1]=o[1],h[l+2]=o[2],h[l+3]=255}for(const h of this._figures)R(yt,h,j);return bt.putImageData(yt,2,2),{canvas:nt.canvas,offsetX:T-2*it,offsetY:O-2*X,scaleX:it,scaleY:X}}getPattern(r,o,c,t){q(r,this._bbox);let s;if(t===W.SHADING)s=f.Util.singularValueDecompose2dScale((0,k.getCurrentTransform)(r));else if(s=f.Util.singularValueDecompose2dScale(o.baseTransform),this.matrix){const T=f.Util.singularValueDecompose2dScale(this.matrix);s=[s[0]*T[0],s[1]*T[1]]}const g=this._createMeshCanvas(s,t===W.SHADING?null:this._background,o.cachedCanvases);return t!==W.SHADING&&(r.setTransform(...o.baseTransform),this.matrix&&r.transform(...this.matrix)),r.translate(g.offsetX,g.offsetY),r.scale(g.scaleX,g.scaleY),r.createPattern(g.canvas,"no-repeat")}}class y extends N{getPattern(){return"hotpink"}}function d(e){switch(e[0]){case"RadialAxial":return new m(e);case"Mesh":return new v(e);case"Dummy":return new y}throw new Error(`Unknown IR type: ${e[0]}`)}const a={COLORED:1,UNCOLORED:2};class n{static get MAX_PATTERN_SIZE(){return(0,f.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(r,o,c,t,s){this.operatorList=r[2],this.matrix=r[3]||[1,0,0,1,0,0],this.bbox=r[4],this.xstep=r[5],this.ystep=r[6],this.paintType=r[7],this.tilingType=r[8],this.color=o,this.ctx=c,this.canvasGraphicsFactory=t,this.baseTransform=s}createPatternCanvas(r){const o=this.operatorList,c=this.bbox,t=this.xstep,s=this.ystep,g=this.paintType,T=this.tilingType,O=this.color,E=this.canvasGraphicsFactory;(0,f.info)("TilingType: "+T);const w=c[0],Q=c[1],ct=c[2],it=c[3],X=f.Util.singularValueDecompose2dScale(this.matrix),j=f.Util.singularValueDecompose2dScale(this.baseTransform),$=[X[0]*j[0],X[1]*j[1]],Z=this.getSizeAndScale(t,this.ctx.canvas.width,$[0]),nt=this.getSizeAndScale(s,this.ctx.canvas.height,$[1]),bt=r.cachedCanvases.getCanvas("pattern",Z.size,nt.size,!0),yt=bt.context,D=E.createCanvasGraphics(yt);D.groupLevel=r.groupLevel,this.setFillAndStrokeStyleToContext(D,g,O);let h=w,l=Q,_=ct,F=it;return w<0&&(h=0,_+=Math.abs(w)),Q<0&&(l=0,F+=Math.abs(Q)),yt.translate(-(Z.scale*h),-(nt.scale*l)),D.transform(Z.scale,0,0,nt.scale,0,0),yt.save(),this.clipBbox(D,h,l,_,F),D.baseTransform=(0,k.getCurrentTransform)(D.ctx),D.executeOperatorList(o),D.endDrawing(),{canvas:bt.canvas,scaleX:Z.scale,scaleY:nt.scale,offsetX:h,offsetY:l}}getSizeAndScale(r,o,c){r=Math.abs(r);const t=Math.max(n.MAX_PATTERN_SIZE,o);let s=Math.ceil(r*c);return s>=t?s=t:c=s/r,{scale:c,size:s}}clipBbox(r,o,c,t,s){const g=t-o,T=s-c;r.ctx.rect(o,c,g,T),r.current.updateRectMinMax((0,k.getCurrentTransform)(r.ctx),[o,c,t,s]),r.clip(),r.endPath()}setFillAndStrokeStyleToContext(r,o,c){const t=r.ctx,s=r.current;switch(o){case a.COLORED:const g=this.ctx;t.fillStyle=g.fillStyle,t.strokeStyle=g.strokeStyle,s.fillColor=g.fillStyle,s.strokeColor=g.strokeStyle;break;case a.UNCOLORED:const T=f.Util.makeHexColor(c[0],c[1],c[2]);t.fillStyle=T,t.strokeStyle=T,s.fillColor=T,s.strokeColor=T;break;default:throw new f.FormatError(`Unsupported paint type: ${o}`)}}getPattern(r,o,c,t){let s=c;t!==W.SHADING&&(s=f.Util.transform(s,o.baseTransform),this.matrix&&(s=f.Util.transform(s,this.matrix)));const g=this.createPatternCanvas(o);let T=new DOMMatrix(s);T=T.translate(g.offsetX,g.offsetY),T=T.scale(1/g.scaleX,1/g.scaleY);const O=r.createPattern(g.canvas,"repeat");return O.setTransform(T),O}}u.TilingPattern=n},(dt,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.isNodeJS=void 0;const Y=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");u.isNodeJS=Y},(dt,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.applyMaskImageData=k;var f=Y(1);function k({src:V,srcPos:W=0,dest:q,destPos:N=0,width:m,height:A,inverseDecode:R=!1}){const v=f.FeatureTest.isLittleEndian?4278190080:255,[y,d]=R?[0,v]:[v,0],a=m>>3,n=m&7,e=V.length;q=new Uint32Array(q.buffer);for(let r=0;r<A;r++){for(const c=W+a;W<c;W++){const t=W<e?V[W]:255;q[N++]=t&128?d:y,q[N++]=t&64?d:y,q[N++]=t&32?d:y,q[N++]=t&16?d:y,q[N++]=t&8?d:y,q[N++]=t&4?d:y,q[N++]=t&2?d:y,q[N++]=t&1?d:y}if(n===0)continue;const o=W<e?V[W++]:255;for(let c=0;c<n;c++)q[N++]=o&1<<7-c?d:y}return{srcPos:W,destPos:N}}},(dt,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.GlobalWorkerOptions=void 0;const Y=Object.create(null);u.GlobalWorkerOptions=Y,Y.workerPort=Y.workerPort===void 0?null:Y.workerPort,Y.workerSrc=Y.workerSrc===void 0?"":Y.workerSrc},(dt,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.MessageHandler=void 0;var f=Y(1);const k={UNKNOWN:0,DATA:1,ERROR:2},V={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function W(N){switch(N instanceof Error||typeof N=="object"&&N!==null||(0,f.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),N.name){case"AbortException":return new f.AbortException(N.message);case"MissingPDFException":return new f.MissingPDFException(N.message);case"PasswordException":return new f.PasswordException(N.message,N.code);case"UnexpectedResponseException":return new f.UnexpectedResponseException(N.message,N.status);case"UnknownErrorException":return new f.UnknownErrorException(N.message,N.details);default:return new f.UnknownErrorException(N.message,N.toString())}}class q{constructor(m,A,R){this.sourceName=m,this.targetName=A,this.comObj=R,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=v=>{const y=v.data;if(y.targetName!==this.sourceName)return;if(y.stream){this._processStreamMessage(y);return}if(y.callback){const a=y.callbackId,n=this.callbackCapabilities[a];if(!n)throw new Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],y.callback===k.DATA)n.resolve(y.data);else if(y.callback===k.ERROR)n.reject(W(y.reason));else throw new Error("Unexpected callback case");return}const d=this.actionHandler[y.action];if(!d)throw new Error(`Unknown action from worker: ${y.action}`);if(y.callbackId){const a=this.sourceName,n=y.sourceName;new Promise(function(e){e(d(y.data))}).then(function(e){R.postMessage({sourceName:a,targetName:n,callback:k.DATA,callbackId:y.callbackId,data:e})},function(e){R.postMessage({sourceName:a,targetName:n,callback:k.ERROR,callbackId:y.callbackId,reason:W(e)})});return}if(y.streamId){this._createStreamSink(y);return}d(y.data)},R.addEventListener("message",this._onComObjOnMessage)}on(m,A){const R=this.actionHandler;if(R[m])throw new Error(`There is already an actionName called "${m}"`);R[m]=A}send(m,A,R){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:m,data:A},R)}sendWithPromise(m,A,R){const v=this.callbackId++,y=(0,f.createPromiseCapability)();this.callbackCapabilities[v]=y;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:m,callbackId:v,data:A},R)}catch(d){y.reject(d)}return y.promise}sendWithStream(m,A,R,v){const y=this.streamId++,d=this.sourceName,a=this.targetName,n=this.comObj;return new ReadableStream({start:e=>{const r=(0,f.createPromiseCapability)();return this.streamControllers[y]={controller:e,startCall:r,pullCall:null,cancelCall:null,isClosed:!1},n.postMessage({sourceName:d,targetName:a,action:m,streamId:y,data:A,desiredSize:e.desiredSize},v),r.promise},pull:e=>{const r=(0,f.createPromiseCapability)();return this.streamControllers[y].pullCall=r,n.postMessage({sourceName:d,targetName:a,stream:V.PULL,streamId:y,desiredSize:e.desiredSize}),r.promise},cancel:e=>{(0,f.assert)(e instanceof Error,"cancel must have a valid reason");const r=(0,f.createPromiseCapability)();return this.streamControllers[y].cancelCall=r,this.streamControllers[y].isClosed=!0,n.postMessage({sourceName:d,targetName:a,stream:V.CANCEL,streamId:y,reason:W(e)}),r.promise}},R)}_createStreamSink(m){const A=m.streamId,R=this.sourceName,v=m.sourceName,y=this.comObj,d=this,a=this.actionHandler[m.action],n={enqueue(e,r=1,o){if(this.isCancelled)return;const c=this.desiredSize;this.desiredSize-=r,c>0&&this.desiredSize<=0&&(this.sinkCapability=(0,f.createPromiseCapability)(),this.ready=this.sinkCapability.promise),y.postMessage({sourceName:R,targetName:v,stream:V.ENQUEUE,streamId:A,chunk:e},o)},close(){this.isCancelled||(this.isCancelled=!0,y.postMessage({sourceName:R,targetName:v,stream:V.CLOSE,streamId:A}),delete d.streamSinks[A])},error(e){(0,f.assert)(e instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,y.postMessage({sourceName:R,targetName:v,stream:V.ERROR,streamId:A,reason:W(e)}))},sinkCapability:(0,f.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:m.desiredSize,ready:null};n.sinkCapability.resolve(),n.ready=n.sinkCapability.promise,this.streamSinks[A]=n,new Promise(function(e){e(a(m.data,n))}).then(function(){y.postMessage({sourceName:R,targetName:v,stream:V.START_COMPLETE,streamId:A,success:!0})},function(e){y.postMessage({sourceName:R,targetName:v,stream:V.START_COMPLETE,streamId:A,reason:W(e)})})}_processStreamMessage(m){const A=m.streamId,R=this.sourceName,v=m.sourceName,y=this.comObj,d=this.streamControllers[A],a=this.streamSinks[A];switch(m.stream){case V.START_COMPLETE:m.success?d.startCall.resolve():d.startCall.reject(W(m.reason));break;case V.PULL_COMPLETE:m.success?d.pullCall.resolve():d.pullCall.reject(W(m.reason));break;case V.PULL:if(!a){y.postMessage({sourceName:R,targetName:v,stream:V.PULL_COMPLETE,streamId:A,success:!0});break}a.desiredSize<=0&&m.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=m.desiredSize,new Promise(function(n){n(a.onPull&&a.onPull())}).then(function(){y.postMessage({sourceName:R,targetName:v,stream:V.PULL_COMPLETE,streamId:A,success:!0})},function(n){y.postMessage({sourceName:R,targetName:v,stream:V.PULL_COMPLETE,streamId:A,reason:W(n)})});break;case V.ENQUEUE:if((0,f.assert)(d,"enqueue should have stream controller"),d.isClosed)break;d.controller.enqueue(m.chunk);break;case V.CLOSE:if((0,f.assert)(d,"close should have stream controller"),d.isClosed)break;d.isClosed=!0,d.controller.close(),this._deleteStreamController(d,A);break;case V.ERROR:(0,f.assert)(d,"error should have stream controller"),d.controller.error(W(m.reason)),this._deleteStreamController(d,A);break;case V.CANCEL_COMPLETE:m.success?d.cancelCall.resolve():d.cancelCall.reject(W(m.reason)),this._deleteStreamController(d,A);break;case V.CANCEL:if(!a)break;new Promise(function(n){n(a.onCancel&&a.onCancel(W(m.reason)))}).then(function(){y.postMessage({sourceName:R,targetName:v,stream:V.CANCEL_COMPLETE,streamId:A,success:!0})},function(n){y.postMessage({sourceName:R,targetName:v,stream:V.CANCEL_COMPLETE,streamId:A,reason:W(n)})}),a.sinkCapability.reject(W(m.reason)),a.isCancelled=!0,delete this.streamSinks[A];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(m,A){await Promise.allSettled([m.startCall&&m.startCall.promise,m.pullCall&&m.pullCall.promise,m.cancelCall&&m.cancelCall.promise]),delete this.streamControllers[A]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}u.MessageHandler=q},(dt,u,Y)=>{var V,W;Object.defineProperty(u,"__esModule",{value:!0}),u.Metadata=void 0;var f=Y(1);class k{constructor({parsedData:N,rawData:m}){et(this,V,void 0);et(this,W,void 0);_t(this,V,N),_t(this,W,m)}getRaw(){return b(this,W)}get(N){var m;return(m=b(this,V).get(N))!=null?m:null}getAll(){return(0,f.objectFromMap)(b(this,V))}has(N){return b(this,V).has(N)}}V=new WeakMap,W=new WeakMap,u.Metadata=k},(dt,u,Y)=>{var N,m,A,R,v,y,ue;Object.defineProperty(u,"__esModule",{value:!0}),u.OptionalContentConfig=void 0;var f=Y(1),k=Y(8);const V=Symbol("INTERNAL");class W{constructor(n,e){et(this,N,!0);this.name=n,this.intent=e}get visible(){return b(this,N)}_setVisible(n,e){n!==V&&(0,f.unreachable)("Internal method `_setVisible` called."),_t(this,N,e)}}N=new WeakMap;class q{constructor(n){et(this,y);et(this,m,null);et(this,A,new Map);et(this,R,null);et(this,v,null);if(this.name=null,this.creator=null,n!==null){this.name=n.name,this.creator=n.creator,_t(this,v,n.order);for(const e of n.groups)b(this,A).set(e.id,new W(e.name,e.intent));if(n.baseState==="OFF")for(const e of b(this,A).values())e._setVisible(V,!1);for(const e of n.on)b(this,A).get(e)._setVisible(V,!0);for(const e of n.off)b(this,A).get(e)._setVisible(V,!1);_t(this,R,this.getHash())}}isVisible(n){if(b(this,A).size===0)return!0;if(!n)return(0,f.warn)("Optional content group not defined."),!0;if(n.type==="OCG")return b(this,A).has(n.id)?b(this,A).get(n.id).visible:((0,f.warn)(`Optional content group not found: ${n.id}`),!0);if(n.type==="OCMD"){if(n.expression)return ht(this,y,ue).call(this,n.expression);if(!n.policy||n.policy==="AnyOn"){for(const e of n.ids){if(!b(this,A).has(e))return(0,f.warn)(`Optional content group not found: ${e}`),!0;if(b(this,A).get(e).visible)return!0}return!1}else if(n.policy==="AllOn"){for(const e of n.ids){if(!b(this,A).has(e))return(0,f.warn)(`Optional content group not found: ${e}`),!0;if(!b(this,A).get(e).visible)return!1}return!0}else if(n.policy==="AnyOff"){for(const e of n.ids){if(!b(this,A).has(e))return(0,f.warn)(`Optional content group not found: ${e}`),!0;if(!b(this,A).get(e).visible)return!0}return!1}else if(n.policy==="AllOff"){for(const e of n.ids){if(!b(this,A).has(e))return(0,f.warn)(`Optional content group not found: ${e}`),!0;if(b(this,A).get(e).visible)return!1}return!0}return(0,f.warn)(`Unknown optional content policy ${n.policy}.`),!0}return(0,f.warn)(`Unknown group type ${n.type}.`),!0}setVisibility(n,e=!0){if(!b(this,A).has(n)){(0,f.warn)(`Optional content group not found: ${n}`);return}b(this,A).get(n)._setVisible(V,!!e),_t(this,m,null)}get hasInitialVisibility(){return this.getHash()===b(this,R)}getOrder(){return b(this,A).size?b(this,v)?b(this,v).slice():[...b(this,A).keys()]:null}getGroups(){return b(this,A).size>0?(0,f.objectFromMap)(b(this,A)):null}getGroup(n){return b(this,A).get(n)||null}getHash(){if(b(this,m)!==null)return b(this,m);const n=new k.MurmurHash3_64;for(const[e,r]of b(this,A))n.update(`${e}:${r.visible}`);return _t(this,m,n.hexdigest())}}m=new WeakMap,A=new WeakMap,R=new WeakMap,v=new WeakMap,y=new WeakSet,ue=function(n){const e=n.length;if(e<2)return!0;const r=n[0];for(let o=1;o<e;o++){const c=n[o];let t;if(Array.isArray(c))t=ht(this,y,ue).call(this,c);else if(b(this,A).has(c))t=b(this,A).get(c).visible;else return(0,f.warn)(`Optional content group not found: ${c}`),!0;switch(r){case"And":if(!t)return!1;break;case"Or":if(t)return!0;break;case"Not":return!t;default:return!0}}return r==="And"},u.OptionalContentConfig=q},(dt,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFDataTransportStream=void 0;var f=Y(1),k=Y(6);class V{constructor(m,A){(0,f.assert)(A,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=m.progressiveDone||!1,this._contentDispositionFilename=m.contentDispositionFilename||null;const R=m.initialData;if((R==null?void 0:R.length)>0){const v=new Uint8Array(R).buffer;this._queuedChunks.push(v)}this._pdfDataRangeTransport=A,this._isStreamingSupported=!m.disableStream,this._isRangeSupported=!m.disableRange,this._contentLength=m.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((v,y)=>{this._onReceiveData({begin:v,chunk:y})}),this._pdfDataRangeTransport.addProgressListener((v,y)=>{this._onProgress({loaded:v,total:y})}),this._pdfDataRangeTransport.addProgressiveReadListener(v=>{this._onReceiveData({chunk:v})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(m){const A=new Uint8Array(m.chunk).buffer;if(m.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(A):this._queuedChunks.push(A);else{const R=this._rangeReaders.some(function(v){return v._begin!==m.begin?!1:(v._enqueue(A),!0)});(0,f.assert)(R,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var m,A;return(A=(m=this._fullRequestReader)==null?void 0:m._loaded)!=null?A:0}_onProgress(m){var A,R,v,y;m.total===void 0?(R=(A=this._rangeReaders[0])==null?void 0:A.onProgress)==null||R.call(A,{loaded:m.loaded}):(y=(v=this._fullRequestReader)==null?void 0:v.onProgress)==null||y.call(v,{loaded:m.loaded,total:m.total})}_onProgressiveDone(){var m;(m=this._fullRequestReader)==null||m.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(m){const A=this._rangeReaders.indexOf(m);A>=0&&this._rangeReaders.splice(A,1)}getFullReader(){(0,f.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const m=this._queuedChunks;return this._queuedChunks=null,new W(this,m,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(m,A){if(A<=this._progressiveDataLength)return null;const R=new q(this,m,A);return this._pdfDataRangeTransport.requestDataRange(m,A),this._rangeReaders.push(R),R}cancelAllRequests(m){var A;(A=this._fullRequestReader)==null||A.cancel(m);for(const R of this._rangeReaders.slice(0))R.cancel(m);this._pdfDataRangeTransport.abort()}}u.PDFDataTransportStream=V;class W{constructor(m,A,R=!1,v=null){this._stream=m,this._done=R||!1,this._filename=(0,k.isPdfFile)(v)?v:null,this._queuedChunks=A||[],this._loaded=0;for(const y of this._queuedChunks)this._loaded+=y.byteLength;this._requests=[],this._headersReady=Promise.resolve(),m._fullRequestReader=this,this.onProgress=null}_enqueue(m){this._done||(this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunks.push(m),this._loaded+=m.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const m=(0,f.createPromiseCapability)();return this._requests.push(m),m.promise}cancel(m){this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class q{constructor(m,A,R){this._stream=m,this._begin=A,this._end=R,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(m){if(!this._done){if(this._requests.length===0)this._queuedChunk=m;else{this._requests.shift().resolve({value:m,done:!1});for(const R of this._requests)R.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const A=this._queuedChunk;return this._queuedChunk=null,{value:A,done:!1}}if(this._done)return{value:void 0,done:!0};const m=(0,f.createPromiseCapability)();return this._requests.push(m),m.promise}cancel(m){this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(dt,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.XfaText=void 0;class Y{static textContent(k){const V=[],W={items:V,styles:Object.create(null)};function q(N){var R;if(!N)return;let m=null;const A=N.name;if(A==="#text")m=N.value;else if(Y.shouldBuildText(A))(R=N==null?void 0:N.attributes)!=null&&R.textContent?m=N.attributes.textContent:N.value&&(m=N.value);else return;if(m!==null&&V.push({str:m}),!!N.children)for(const v of N.children)q(v)}return q(k),W}static shouldBuildText(k){return!(k==="textarea"||k==="input"||k==="option"||k==="select")}}u.XfaText=Y},(dt,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.NodeStandardFontDataFactory=u.NodeCanvasFactory=u.NodeCMapReaderFactory=void 0;var f=Y(7);const k=function(N){return new Promise((m,A)=>{require$$0.readFile(N,(v,y)=>{if(v||!y){A(new Error(v));return}m(new Uint8Array(y))})})};class V extends f.BaseCanvasFactory{_createCanvas(m,A){return require$$0.createCanvas(m,A)}}u.NodeCanvasFactory=V;class W extends f.BaseCMapReaderFactory{_fetchData(m,A){return k(m).then(R=>({cMapData:R,compressionType:A}))}}u.NodeCMapReaderFactory=W;class q extends f.BaseStandardFontDataFactory{_fetchData(m){return k(m)}}u.NodeStandardFontDataFactory=q},(dt,u,Y)=>{var N,m,A,R,v,y,d,a,n,fe,r,Oe,c,pe,s,De;Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationEditorLayer=void 0;var f=Y(5),k=Y(1),V=Y(22),W=Y(23);const T=class T{constructor(E){et(this,n);et(this,r);et(this,c);et(this,s);et(this,N,void 0);et(this,m,!1);et(this,A,this.pointerup.bind(this));et(this,R,this.pointerdown.bind(this));et(this,v,new Map);et(this,y,!1);et(this,d,!1);et(this,a,void 0);T._initialized||(T._initialized=!0,V.FreeTextEditor.initialize(E.l10n),W.InkEditor.initialize(E.l10n)),E.uiManager.registerEditorTypes([V.FreeTextEditor,W.InkEditor]),_t(this,a,E.uiManager),this.annotationStorage=E.annotationStorage,this.pageIndex=E.pageIndex,this.div=E.div,_t(this,N,E.accessibilityManager),b(this,a).addLayer(this)}updateToolbar(E){b(this,a).updateToolbar(E)}updateMode(E=b(this,a).getMode()){ht(this,s,De).call(this),E===k.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),b(this,a).unselectAll(),this.div.classList.toggle("freeTextEditing",E===k.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",E===k.AnnotationEditorType.INK)}addInkEditorIfNeeded(E){if(!E&&b(this,a).getMode()!==k.AnnotationEditorType.INK)return;if(!E){for(const Q of b(this,v).values())if(Q.isEmpty()){Q.setInBackground();return}}ht(this,c,pe).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(E){b(this,a).setEditingState(E)}addCommands(E){b(this,a).addCommands(E)}enable(){this.div.style.pointerEvents="auto";for(const E of b(this,v).values())E.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const E of b(this,v).values())E.disableEditing()}setActiveEditor(E){b(this,a).getActive()!==E&&b(this,a).setActiveEditor(E)}enableClick(){this.div.addEventListener("pointerdown",b(this,R)),this.div.addEventListener("pointerup",b(this,A))}disableClick(){this.div.removeEventListener("pointerdown",b(this,R)),this.div.removeEventListener("pointerup",b(this,A))}attach(E){b(this,v).set(E.id,E)}detach(E){var w;b(this,v).delete(E.id),(w=b(this,N))==null||w.removePointerInTextLayer(E.contentDiv)}remove(E){b(this,a).removeEditor(E),this.detach(E),this.annotationStorage.remove(E.id),E.div.style.display="none",setTimeout(()=>{E.div.style.display="",E.div.remove(),E.isAttachedToDOM=!1,document.activeElement===document.body&&b(this,a).focusMainContainer()},0),b(this,d)||this.addInkEditorIfNeeded(!1)}add(E){if(ht(this,n,fe).call(this,E),b(this,a).addEditor(E),this.attach(E),!E.isAttachedToDOM){const w=E.render();this.div.append(w),E.isAttachedToDOM=!0}this.moveEditorInDOM(E),E.onceAdded(),this.addToAnnotationStorage(E)}moveEditorInDOM(E){var w;(w=b(this,N))==null||w.moveElementInDOM(this.div,E.div,E.contentDiv,!0)}addToAnnotationStorage(E){!E.isEmpty()&&!this.annotationStorage.has(E.id)&&this.annotationStorage.setValue(E.id,E)}addOrRebuild(E){E.needsToBeRebuilt()?E.rebuild():this.add(E)}addANewEditor(E){const w=()=>{this.addOrRebuild(E)},Q=()=>{E.remove()};this.addCommands({cmd:w,undo:Q,mustExec:!0})}addUndoableEditor(E){const w=()=>{this.addOrRebuild(E)},Q=()=>{E.remove()};this.addCommands({cmd:w,undo:Q,mustExec:!1})}getNextId(){return b(this,a).getId()}deserialize(E){switch(E.annotationType){case k.AnnotationEditorType.FREETEXT:return V.FreeTextEditor.deserialize(E,this);case k.AnnotationEditorType.INK:return W.InkEditor.deserialize(E,this)}return null}setSelected(E){b(this,a).setSelected(E)}toggleSelected(E){b(this,a).toggleSelected(E)}isSelected(E){return b(this,a).isSelected(E)}unselect(E){b(this,a).unselect(E)}pointerup(E){const w=f.KeyboardManager.platform.isMac;if(!(E.button!==0||E.ctrlKey&&w)&&E.target===this.div&&b(this,y)){if(_t(this,y,!1),!b(this,m)){_t(this,m,!0);return}ht(this,c,pe).call(this,E)}}pointerdown(E){const w=f.KeyboardManager.platform.isMac;if(E.button!==0||E.ctrlKey&&w||E.target!==this.div)return;_t(this,y,!0);const Q=b(this,a).getActive();_t(this,m,!Q||Q.isEmpty())}drop(E){const w=E.dataTransfer.getData("text/plain"),Q=b(this,a).getEditor(w);if(!Q)return;E.preventDefault(),E.dataTransfer.dropEffect="move",ht(this,n,fe).call(this,Q);const ct=this.div.getBoundingClientRect(),it=E.clientX-ct.x,X=E.clientY-ct.y;Q.translate(it-Q.startX,X-Q.startY),this.moveEditorInDOM(Q),Q.div.focus()}dragover(E){E.preventDefault()}destroy(){var E,w;((E=b(this,a).getActive())==null?void 0:E.parent)===this&&b(this,a).setActiveEditor(null);for(const Q of b(this,v).values())(w=b(this,N))==null||w.removePointerInTextLayer(Q.contentDiv),Q.isAttachedToDOM=!1,Q.div.remove(),Q.parent=null;this.div=null,b(this,v).clear(),b(this,a).removeLayer(this)}render(E){this.viewport=E.viewport,(0,f.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const w of b(this,a).getEditors(this.pageIndex))this.add(w);this.updateMode()}update(E){b(this,a).commitOrRemove(),this.viewport=E.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[E,w,Q,ct]=this.viewport.viewBox,it=Q-E,X=ct-w;return[it,X]}get viewportBaseDimensions(){const{width:E,height:w,rotation:Q}=this.viewport;return Q%180===0?[E,w]:[w,E]}setDimensions(){const{width:E,height:w,rotation:Q}=this.viewport,ct=Q%180!==0,it=Math.floor(E)+"px",X=Math.floor(w)+"px";this.div.style.width=ct?X:it,this.div.style.height=ct?it:X,this.div.setAttribute("data-main-rotation",Q)}};N=new WeakMap,m=new WeakMap,A=new WeakMap,R=new WeakMap,v=new WeakMap,y=new WeakMap,d=new WeakMap,a=new WeakMap,n=new WeakSet,fe=function(E){var w;E.parent!==this&&(this.attach(E),E.pageIndex=this.pageIndex,(w=E.parent)==null||w.detach(E),E.parent=this,E.div&&E.isAttachedToDOM&&(E.div.remove(),this.div.append(E.div)))},r=new WeakSet,Oe=function(E){switch(b(this,a).getMode()){case k.AnnotationEditorType.FREETEXT:return new V.FreeTextEditor(E);case k.AnnotationEditorType.INK:return new W.InkEditor(E)}return null},c=new WeakSet,pe=function(E){const w=this.getNextId(),Q=ht(this,r,Oe).call(this,{parent:this,id:w,x:E.offsetX,y:E.offsetY});return Q&&this.add(Q),Q},s=new WeakSet,De=function(){_t(this,d,!0);for(const E of b(this,v).values())E.isEmpty()&&E.remove();_t(this,d,!1)},It(T,"_initialized",!1);let q=T;u.AnnotationEditorLayer=q},(dt,u,Y)=>{var q,N,m,A,R,v,y,d,a,n,Ie,r,Le,c,Ne,s,ge;Object.defineProperty(u,"__esModule",{value:!0}),u.FreeTextEditor=void 0;var f=Y(1),k=Y(5),V=Y(4);const T=class T extends V.AnnotationEditor{constructor(w){super({...w,name:"freeTextEditor"});et(this,n);et(this,r);et(this,c);et(this,s);et(this,q,this.editorDivBlur.bind(this));et(this,N,this.editorDivFocus.bind(this));et(this,m,this.editorDivInput.bind(this));et(this,A,this.editorDivKeydown.bind(this));et(this,R,void 0);et(this,v,"");et(this,y,`${this.id}-editor`);et(this,d,!1);et(this,a,void 0);_t(this,R,w.color||T._defaultColor||V.AnnotationEditor._defaultLineColor),_t(this,a,w.fontSize||T._defaultFontSize)}static initialize(w){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(ct=>[ct,w.get(ct)]));const Q=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Q.getPropertyValue("--freetext-padding"))}static updateDefaultParams(w,Q){switch(w){case f.AnnotationEditorParamsType.FREETEXT_SIZE:T._defaultFontSize=Q;break;case f.AnnotationEditorParamsType.FREETEXT_COLOR:T._defaultColor=Q;break}}updateParams(w,Q){switch(w){case f.AnnotationEditorParamsType.FREETEXT_SIZE:ht(this,n,Ie).call(this,Q);break;case f.AnnotationEditorParamsType.FREETEXT_COLOR:ht(this,r,Le).call(this,Q);break}}static get defaultPropertiesToUpdate(){return[[f.AnnotationEditorParamsType.FREETEXT_SIZE,T._defaultFontSize],[f.AnnotationEditorParamsType.FREETEXT_COLOR,T._defaultColor||V.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[f.AnnotationEditorParamsType.FREETEXT_SIZE,b(this,a)],[f.AnnotationEditorParamsType.FREETEXT_COLOR,b(this,R)]]}getInitialTranslation(){return[-T._internalPadding*this.parent.scaleFactor,-(T._internalPadding+b(this,a))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(f.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",b(this,A)),this.editorDiv.addEventListener("focus",b(this,N)),this.editorDiv.addEventListener("blur",b(this,q)),this.editorDiv.addEventListener("input",b(this,m)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",b(this,y)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",b(this,A)),this.editorDiv.removeEventListener("focus",b(this,N)),this.editorDiv.removeEventListener("blur",b(this,q)),this.editorDiv.removeEventListener("input",b(this,m)),this.div.focus(),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(w){super.focusin(w),w.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){super.commit(),b(this,d)||(_t(this,d,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),_t(this,v,ht(this,c,Ne).call(this).trimEnd()),ht(this,s,ge).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(w){this.enableEditMode(),this.editorDiv.focus()}keydown(w){w.target===this.div&&w.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(w){T._keyboardManager.exec(this,w)}editorDivFocus(w){this.isEditing=!0}editorDivBlur(w){this.isEditing=!1}editorDivInput(w){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let w,Q;this.width&&(w=this.x,Q=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",b(this,y)),this.enableEditing(),T._l10nPromise.get("editor_free_text2_aria_label").then(it=>{var X;return(X=this.editorDiv)==null?void 0:X.setAttribute("aria-label",it)}),T._l10nPromise.get("free_text2_default_content").then(it=>{var X;return(X=this.editorDiv)==null?void 0:X.setAttribute("default-content",it)}),this.editorDiv.contentEditable=!0;const{style:ct}=this.editorDiv;if(ct.fontSize=`calc(${b(this,a)}px * var(--scale-factor))`,ct.color=b(this,R),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,k.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[it,X]=this.parent.viewportBaseDimensions;this.setAt(w*it,Q*X,this.width*it,this.height*X);for(const j of b(this,v).split(`
`)){const $=document.createElement("div");$.append(j?document.createTextNode(j):document.createElement("br")),this.editorDiv.append($)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(w,Q){const ct=super.deserialize(w,Q);return _t(ct,a,w.fontSize),_t(ct,R,f.Util.makeHexColor(...w.color)),_t(ct,v,w.value),ct}serialize(){if(this.isEmpty())return null;const w=T._internalPadding*this.parent.scaleFactor,Q=this.getRect(w,w),ct=V.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:f.AnnotationEditorType.FREETEXT,color:ct,fontSize:b(this,a),value:b(this,v),pageIndex:this.parent.pageIndex,rect:Q,rotation:this.rotation}}};q=new WeakMap,N=new WeakMap,m=new WeakMap,A=new WeakMap,R=new WeakMap,v=new WeakMap,y=new WeakMap,d=new WeakMap,a=new WeakMap,n=new WeakSet,Ie=function(w){const Q=it=>{this.editorDiv.style.fontSize=`calc(${it}px * var(--scale-factor))`,this.translate(0,-(it-b(this,a))*this.parent.scaleFactor),_t(this,a,it),ht(this,s,ge).call(this)},ct=b(this,a);this.parent.addCommands({cmd:()=>{Q(w)},undo:()=>{Q(ct)},mustExec:!0,type:f.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},r=new WeakSet,Le=function(w){const Q=b(this,R);this.parent.addCommands({cmd:()=>{_t(this,R,w),this.editorDiv.style.color=w},undo:()=>{_t(this,R,Q),this.editorDiv.style.color=Q},mustExec:!0,type:f.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},c=new WeakSet,Ne=function(){const w=this.editorDiv.getElementsByTagName("div");if(w.length===0)return this.editorDiv.innerText;const Q=[];for(const ct of w)Q.push(ct.innerText.replace(/\r\n?|\n/,""));return Q.join(`
`)},s=new WeakSet,ge=function(){const[w,Q]=this.parent.viewportBaseDimensions,ct=this.div.getBoundingClientRect();this.width=ct.width/w,this.height=ct.height/Q},It(T,"_freeTextDefaultContent",""),It(T,"_l10nPromise"),It(T,"_internalPadding",0),It(T,"_defaultColor",null),It(T,"_defaultFontSize",10),It(T,"_keyboardManager",new k.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],T.prototype.commitOrRemove]])),It(T,"_type","freetext");let W=T;u.FreeTextEditor=W},(dt,u,Y)=>{var A,R,v,y,d,a,n,e,r,o,c,t,s,g,T,Ue,E,je,Q,Be,it,We,j,me,Z,qe,bt,He,D,Ge,l,Xt,F,be,I,ee,G,se,z,$t,tt,_e,i,ne,P,Ae,x,Xe,rt,ze,U,Ve,st,ye,L,ie,At,Yt,Rt,ve;Object.defineProperty(u,"__esModule",{value:!0}),u.InkEditor=void 0,Object.defineProperty(u,"fitCurve",{enumerable:!0,get:function(){return V.fitCurve}});var f=Y(1),k=Y(4),V=Y(24),W=Y(5);const q=16,N=100,Et=class Et extends k.AnnotationEditor{constructor(S){super({...S,name:"inkEditor"});et(this,T);et(this,E);et(this,Q);et(this,it);et(this,j);et(this,Z);et(this,bt);et(this,D);et(this,l);et(this,F);et(this,I);et(this,G);et(this,z);et(this,tt);et(this,i);et(this,x);et(this,rt);et(this,U);et(this,st);et(this,L);et(this,At);et(this,Rt);et(this,A,0);et(this,R,0);et(this,v,0);et(this,y,this.canvasPointermove.bind(this));et(this,d,this.canvasPointerleave.bind(this));et(this,a,this.canvasPointerup.bind(this));et(this,n,this.canvasPointerdown.bind(this));et(this,e,!1);et(this,r,!1);et(this,o,null);et(this,c,null);et(this,t,0);et(this,s,0);et(this,g,null);this.color=S.color||null,this.thickness=S.thickness||null,this.opacity=S.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(S){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(J=>[J,S.get(J)]))}static updateDefaultParams(S,J){switch(S){case f.AnnotationEditorParamsType.INK_THICKNESS:Et._defaultThickness=J;break;case f.AnnotationEditorParamsType.INK_COLOR:Et._defaultColor=J;break;case f.AnnotationEditorParamsType.INK_OPACITY:Et._defaultOpacity=J/100;break}}updateParams(S,J){switch(S){case f.AnnotationEditorParamsType.INK_THICKNESS:ht(this,T,Ue).call(this,J);break;case f.AnnotationEditorParamsType.INK_COLOR:ht(this,E,je).call(this,J);break;case f.AnnotationEditorParamsType.INK_OPACITY:ht(this,Q,Be).call(this,J);break}}static get defaultPropertiesToUpdate(){return[[f.AnnotationEditorParamsType.INK_THICKNESS,Et._defaultThickness],[f.AnnotationEditorParamsType.INK_COLOR,Et._defaultColor||k.AnnotationEditor._defaultLineColor],[f.AnnotationEditorParamsType.INK_OPACITY,Math.round(Et._defaultOpacity*100)]]}get propertiesToUpdate(){var S;return[[f.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Et._defaultThickness],[f.AnnotationEditorParamsType.INK_COLOR,this.color||Et._defaultColor||k.AnnotationEditor._defaultLineColor],[f.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((S=this.opacity)!=null?S:Et._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(ht(this,I,ee).call(this),ht(this,G,se).call(this)),this.isAttachedToDOM||(this.parent.add(this),ht(this,z,$t).call(this)),ht(this,At,Yt).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,b(this,c).disconnect(),_t(this,c,null),super.remove())}enableEditMode(){b(this,e)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",b(this,n)),this.canvas.addEventListener("pointerup",b(this,a)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",b(this,n)),this.canvas.removeEventListener("pointerup",b(this,a)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){b(this,e)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),_t(this,e,!0),this.div.classList.add("disabled"),ht(this,At,Yt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(S){super.focusin(S),this.enableEditMode()}canvasPointerdown(S){S.button!==0||!this.isInEditMode()||b(this,e)||(this.setInForeground(),S.type!=="mouse"&&this.div.focus(),S.stopPropagation(),this.canvas.addEventListener("pointerleave",b(this,d)),this.canvas.addEventListener("pointermove",b(this,y)),ht(this,Z,qe).call(this,S.offsetX,S.offsetY))}canvasPointermove(S){S.stopPropagation(),ht(this,bt,He).call(this,S.offsetX,S.offsetY)}canvasPointerup(S){S.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(S.stopPropagation(),ht(this,F,be).call(this,S),this.setInBackground())}canvasPointerleave(S){ht(this,F,be).call(this,S),this.setInBackground()}render(){if(this.div)return this.div;let S,J;this.width&&(S=this.x,J=this.y),super.render(),Et._l10nPromise.get("editor_ink2_aria_label").then(Pt=>{var wt;return(wt=this.div)==null?void 0:wt.setAttribute("aria-label",Pt)});const[pt,Ct,Tt,Mt]=ht(this,it,We).call(this);if(this.setAt(pt,Ct,0,0),this.setDims(Tt,Mt),ht(this,I,ee).call(this),this.width){const[Pt,wt]=this.parent.viewportBaseDimensions;this.setAt(S*Pt,J*wt,this.width*Pt,this.height*wt),_t(this,r,!0),ht(this,z,$t).call(this),this.setDims(this.width*Pt,this.height*wt),ht(this,l,Xt).call(this),ht(this,Rt,ve).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ht(this,G,se).call(this),this.div}setDimensions(S,J){const pt=Math.round(S),Ct=Math.round(J);if(b(this,t)===pt&&b(this,s)===Ct)return;_t(this,t,pt),_t(this,s,Ct),this.canvas.style.visibility="hidden",b(this,A)&&Math.abs(b(this,A)-S/J)>.01&&(J=Math.ceil(S/b(this,A)),this.setDims(S,J));const[Tt,Mt]=this.parent.viewportBaseDimensions;this.width=S/Tt,this.height=J/Mt,b(this,e)&&ht(this,tt,_e).call(this,S,J),ht(this,z,$t).call(this),ht(this,l,Xt).call(this),this.canvas.style.visibility="visible"}static deserialize(S,J){var Lt,Dt;const pt=super.deserialize(S,J);pt.thickness=S.thickness,pt.color=f.Util.makeHexColor(...S.color),pt.opacity=S.opacity;const[Ct,Tt]=J.pageDimensions,Mt=pt.width*Ct,Pt=pt.height*Tt,wt=J.scaleFactor,kt=S.thickness/2;_t(pt,A,Mt/Pt),_t(pt,e,!0),_t(pt,t,Math.round(Mt)),_t(pt,s,Math.round(Pt));for(const{bezier:xt}of S.paths){const jt=[];pt.paths.push(jt);let Bt=wt*(xt[0]-kt),Wt=wt*(Pt-xt[1]-kt);for(let Nt=2,Ut=xt.length;Nt<Ut;Nt+=6){const Gt=wt*(xt[Nt]-kt),zt=wt*(Pt-xt[Nt+1]-kt),Zt=wt*(xt[Nt+2]-kt),te=wt*(Pt-xt[Nt+3]-kt),Kt=wt*(xt[Nt+4]-kt),Te=wt*(Pt-xt[Nt+5]-kt);jt.push([[Bt,Wt],[Gt,zt],[Zt,te],[Kt,Te]]),Bt=Kt,Wt=Te}const qt=ht(this,P,Ae).call(this,jt);pt.bezierPath2D.push(qt)}const Ot=ht(Lt=pt,st,ye).call(Lt);return _t(pt,v,Math.max(q,Ot[2]-Ot[0])),_t(pt,R,Math.max(q,Ot[3]-Ot[1])),ht(Dt=pt,tt,_e).call(Dt,Mt,Pt),pt}serialize(){if(this.isEmpty())return null;const S=this.getRect(0,0),J=this.rotation%180===0?S[3]-S[1]:S[2]-S[0],pt=k.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:f.AnnotationEditorType.INK,color:pt,thickness:this.thickness,opacity:this.opacity,paths:ht(this,x,Xe).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,J),pageIndex:this.parent.pageIndex,rect:S,rotation:this.rotation}}};A=new WeakMap,R=new WeakMap,v=new WeakMap,y=new WeakMap,d=new WeakMap,a=new WeakMap,n=new WeakMap,e=new WeakMap,r=new WeakMap,o=new WeakMap,c=new WeakMap,t=new WeakMap,s=new WeakMap,g=new WeakMap,T=new WeakSet,Ue=function(S){const J=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=S,ht(this,At,Yt).call(this)},undo:()=>{this.thickness=J,ht(this,At,Yt).call(this)},mustExec:!0,type:f.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},E=new WeakSet,je=function(S){const J=this.color;this.parent.addCommands({cmd:()=>{this.color=S,ht(this,l,Xt).call(this)},undo:()=>{this.color=J,ht(this,l,Xt).call(this)},mustExec:!0,type:f.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Q=new WeakSet,Be=function(S){S/=100;const J=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=S,ht(this,l,Xt).call(this)},undo:()=>{this.opacity=J,ht(this,l,Xt).call(this)},mustExec:!0,type:f.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},it=new WeakSet,We=function(){const{width:S,height:J,rotation:pt}=this.parent.viewport;switch(pt){case 90:return[0,S,S,J];case 180:return[S,J,S,J];case 270:return[J,0,S,J];default:return[0,0,S,J]}},j=new WeakSet,me=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,W.opacityToHex)(this.opacity)}`},Z=new WeakSet,qe=function(S,J){var pt;this.isEditing=!0,b(this,r)||(_t(this,r,!0),ht(this,z,$t).call(this),this.thickness||(this.thickness=Et._defaultThickness),this.color||(this.color=Et._defaultColor||k.AnnotationEditor._defaultLineColor),(pt=this.opacity)!=null||(this.opacity=Et._defaultOpacity)),this.currentPath.push([S,J]),_t(this,o,null),ht(this,j,me).call(this),this.ctx.beginPath(),this.ctx.moveTo(S,J),_t(this,g,()=>{b(this,g)&&(b(this,o)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):ht(this,l,Xt).call(this),this.ctx.lineTo(...b(this,o)),_t(this,o,null),this.ctx.stroke()),window.requestAnimationFrame(b(this,g)))}),window.requestAnimationFrame(b(this,g))},bt=new WeakSet,He=function(S,J){const[pt,Ct]=this.currentPath.at(-1);S===pt&&J===Ct||(this.currentPath.push([S,J]),_t(this,o,[S,J]))},D=new WeakSet,Ge=function(S,J){var kt;this.ctx.closePath(),_t(this,g,null),S=Math.min(Math.max(S,0),this.canvas.width),J=Math.min(Math.max(J,0),this.canvas.height);const[pt,Ct]=this.currentPath.at(-1);(S!==pt||J!==Ct)&&this.currentPath.push([S,J]);let Tt;if(this.currentPath.length!==1)Tt=(0,V.fitCurve)(this.currentPath,30,null);else{const Ot=[S,J];Tt=[[Ot,Ot.slice(),Ot.slice(),Ot]]}const Mt=ht(kt=Et,P,Ae).call(kt,Tt);this.currentPath.length=0;const Pt=()=>{this.paths.push(Tt),this.bezierPath2D.push(Mt),this.rebuild()},wt=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ht(this,I,ee).call(this),ht(this,G,se).call(this)),ht(this,At,Yt).call(this))};this.parent.addCommands({cmd:Pt,undo:wt,mustExec:!0})},l=new WeakSet,Xt=function(){if(this.isEmpty()){ht(this,i,ne).call(this);return}ht(this,j,me).call(this);const{canvas:S,ctx:J}=this;J.setTransform(1,0,0,1,0,0),J.clearRect(0,0,S.width,S.height),ht(this,i,ne).call(this);for(const pt of this.bezierPath2D)J.stroke(pt)},F=new WeakSet,be=function(S){ht(this,D,Ge).call(this,S.offsetX,S.offsetY),this.canvas.removeEventListener("pointerleave",b(this,d)),this.canvas.removeEventListener("pointermove",b(this,y)),this.parent.addToAnnotationStorage(this)},I=new WeakSet,ee=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Et._l10nPromise.get("editor_ink_canvas_aria_label").then(S=>{var J;return(J=this.canvas)==null?void 0:J.setAttribute("aria-label",S)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},G=new WeakSet,se=function(){let S=null;_t(this,c,new ResizeObserver(J=>{const pt=J[0].contentRect;pt.width&&pt.height&&(S!==null&&clearTimeout(S),S=setTimeout(()=>{this.fixDims(),S=null},N),this.setDimensions(pt.width,pt.height))})),b(this,c).observe(this.div)},z=new WeakSet,$t=function(){if(!b(this,r))return;const[S,J]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*S),this.canvas.height=Math.ceil(this.height*J),ht(this,i,ne).call(this)},tt=new WeakSet,_e=function(S,J){const pt=ht(this,L,ie).call(this),Ct=(S-pt)/b(this,v),Tt=(J-pt)/b(this,R);this.scaleFactor=Math.min(Ct,Tt)},i=new WeakSet,ne=function(){const S=ht(this,L,ie).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+S,this.translationY*this.scaleFactor+S)},P=new WeakSet,Ae=function(S){const J=new Path2D;for(let pt=0,Ct=S.length;pt<Ct;pt++){const[Tt,Mt,Pt,wt]=S[pt];pt===0&&J.moveTo(...Tt),J.bezierCurveTo(Mt[0],Mt[1],Pt[0],Pt[1],wt[0],wt[1])}return J},x=new WeakSet,Xe=function(S,J,pt,Ct){const Mt=[],Pt=this.thickness/2;let wt,kt;for(const Ot of this.paths){wt=[],kt=[];for(let Lt=0,Dt=Ot.length;Lt<Dt;Lt++){const[xt,jt,Bt,Wt]=Ot[Lt],qt=S*(xt[0]+J)+Pt,Nt=Ct-S*(xt[1]+pt)-Pt,Ut=S*(jt[0]+J)+Pt,Gt=Ct-S*(jt[1]+pt)-Pt,zt=S*(Bt[0]+J)+Pt,Zt=Ct-S*(Bt[1]+pt)-Pt,te=S*(Wt[0]+J)+Pt,Kt=Ct-S*(Wt[1]+pt)-Pt;Lt===0&&(wt.push(qt,Nt),kt.push(qt,Nt)),wt.push(Ut,Gt,zt,Zt,te,Kt),ht(this,rt,ze).call(this,qt,Nt,Ut,Gt,zt,Zt,te,Kt,4,kt)}Mt.push({bezier:wt,points:kt})}return Mt},rt=new WeakSet,ze=function(S,J,pt,Ct,Tt,Mt,Pt,wt,kt,Ot){if(ht(this,U,Ve).call(this,S,J,pt,Ct,Tt,Mt,Pt,wt)){Ot.push(Pt,wt);return}for(let Lt=1;Lt<kt-1;Lt++){const Dt=Lt/kt,xt=1-Dt;let jt=Dt*S+xt*pt,Bt=Dt*J+xt*Ct,Wt=Dt*pt+xt*Tt,qt=Dt*Ct+xt*Mt;const Nt=Dt*Tt+xt*Pt,Ut=Dt*Mt+xt*wt;jt=Dt*jt+xt*Wt,Bt=Dt*Bt+xt*qt,Wt=Dt*Wt+xt*Nt,qt=Dt*qt+xt*Ut,jt=Dt*jt+xt*Wt,Bt=Dt*Bt+xt*qt,Ot.push(jt,Bt)}Ot.push(Pt,wt)},U=new WeakSet,Ve=function(S,J,pt,Ct,Tt,Mt,Pt,wt){const Ot=(3*pt-2*S-Pt)**2,Lt=(3*Ct-2*J-wt)**2,Dt=(3*Tt-S-2*Pt)**2,xt=(3*Mt-J-2*wt)**2;return Math.max(Ot,Dt)+Math.max(Lt,xt)<=10},st=new WeakSet,ye=function(){let S=1/0,J=-1/0,pt=1/0,Ct=-1/0;for(const Tt of this.paths)for(const[Mt,Pt,wt,kt]of Tt){const Ot=f.Util.bezierBoundingBox(...Mt,...Pt,...wt,...kt);S=Math.min(S,Ot[0]),pt=Math.min(pt,Ot[1]),J=Math.max(J,Ot[2]),Ct=Math.max(Ct,Ot[3])}return[S,pt,J,Ct]},L=new WeakSet,ie=function(){return b(this,e)?Math.ceil(this.thickness*this.parent.scaleFactor):0},At=new WeakSet,Yt=function(S=!1){if(this.isEmpty())return;if(!b(this,e)){ht(this,l,Xt).call(this);return}const J=ht(this,st,ye).call(this),pt=ht(this,L,ie).call(this);_t(this,v,Math.max(q,J[2]-J[0])),_t(this,R,Math.max(q,J[3]-J[1]));const Ct=Math.ceil(pt+b(this,v)*this.scaleFactor),Tt=Math.ceil(pt+b(this,R)*this.scaleFactor),[Mt,Pt]=this.parent.viewportBaseDimensions;this.width=Ct/Mt,this.height=Tt/Pt,_t(this,A,Ct/Tt),ht(this,Rt,ve).call(this);const wt=this.translationX,kt=this.translationY;this.translationX=-J[0],this.translationY=-J[1],ht(this,z,$t).call(this),ht(this,l,Xt).call(this),_t(this,t,Ct),_t(this,s,Tt),this.setDims(Ct,Tt);const Ot=S?pt/this.scaleFactor/2:0;this.translate(wt-this.translationX-Ot,kt-this.translationY-Ot)},Rt=new WeakSet,ve=function(){const{style:S}=this.div;b(this,A)>=1?(S.minHeight=`${q}px`,S.minWidth=`${Math.round(b(this,A)*q)}px`):(S.minWidth=`${q}px`,S.minHeight=`${Math.round(q/b(this,A))}px`)},et(Et,P),It(Et,"_defaultColor",null),It(Et,"_defaultOpacity",1),It(Et,"_defaultThickness",1),It(Et,"_l10nPromise"),It(Et,"_type","ink");let m=Et;u.InkEditor=m},(dt,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.fitCurve=void 0;const f=Y(25);u.fitCurve=f},dt=>{function u(d,a,n){if(!Array.isArray(d))throw new TypeError("First argument should be an array");if(d.forEach(c=>{if(!Array.isArray(c)||c.some(t=>typeof t!="number")||c.length!==d[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),d=d.filter((c,t)=>t===0||!c.every((s,g)=>s===d[t-1][g])),d.length<2)return[];const e=d.length,r=R(d[1],d[0]),o=R(d[e-2],d[e-1]);return Y(d,r,o,a,n)}function Y(d,a,n,e,r){var c,t,s,g,T,O,E,w,Q,ct,it,X,j;if(d.length===2)return X=v.vectorLen(v.subtract(d[0],d[1]))/3,c=[d[0],v.addArrays(d[0],v.mulItems(a,X)),v.addArrays(d[1],v.mulItems(n,X)),d[1]],[c];if(t=q(d),[c,g,O]=f(d,t,t,a,n,r),g===0||g<e)return[c];if(g<e*e)for(s=t,T=g,E=O,j=0;j<20;j++){if(s=V(c,d,s),[c,g,O]=f(d,t,s,a,n,r),g<e)return[c];if(O===E){let $=g/T;if($>.9999&&$<1.0001)break}T=g,E=O}return it=[],w=v.subtract(d[O-1],d[O+1]),w.every($=>$===0)&&(w=v.subtract(d[O-1],d[O]),[w[0],w[1]]=[-w[1],w[0]]),Q=v.normalize(w),ct=v.mulItems(Q,-1),it=it.concat(Y(d.slice(0,O+1),a,Q,e,r)),it=it.concat(Y(d.slice(O),ct,n,e,r)),it}function f(d,a,n,e,r,o){var c,t,s;return c=k(d,n,e,r),[t,s]=N(d,c,a),o&&o({bez:c,points:d,params:a,maxErr:t,maxPoint:s}),[c,t,s]}function k(d,a,n,e){var r,o,c,t,s,g,T,O,E,w,Q,ct,it,X,j,$,Z,nt=d[0],bt=d[d.length-1];for(r=[nt,null,null,bt],o=v.zeros_Xx2x2(a.length),it=0,X=a.length;it<X;it++)$=a[it],Z=1-$,c=o[it],c[0]=v.mulItems(n,3*$*(Z*Z)),c[1]=v.mulItems(e,3*Z*($*$));for(t=[[0,0],[0,0]],s=[0,0],it=0,X=d.length;it<X;it++)$=a[it],c=o[it],t[0][0]+=v.dot(c[0],c[0]),t[0][1]+=v.dot(c[0],c[1]),t[1][0]+=v.dot(c[0],c[1]),t[1][1]+=v.dot(c[1],c[1]),j=v.subtract(d[it],y.q([nt,nt,bt,bt],$)),s[0]+=v.dot(c[0],j),s[1]+=v.dot(c[1],j);return g=t[0][0]*t[1][1]-t[1][0]*t[0][1],T=t[0][0]*s[1]-t[1][0]*s[0],O=s[0]*t[1][1]-s[1]*t[0][1],E=g===0?0:O/g,w=g===0?0:T/g,ct=v.vectorLen(v.subtract(nt,bt)),Q=1e-6*ct,E<Q||w<Q?(r[1]=v.addArrays(nt,v.mulItems(n,ct/3)),r[2]=v.addArrays(bt,v.mulItems(e,ct/3))):(r[1]=v.addArrays(nt,v.mulItems(n,E)),r[2]=v.addArrays(bt,v.mulItems(e,w))),r}function V(d,a,n){return n.map((e,r)=>W(d,a[r],e))}function W(d,a,n){var e=v.subtract(y.q(d,n),a),r=y.qprime(d,n),o=v.mulMatrix(e,r),c=v.sum(v.squareItems(r))+2*v.mulMatrix(e,y.qprimeprime(d,n));return c===0?n:n-o/c}function q(d){var a=[],n,e,r;return d.forEach((o,c)=>{n=c?e+v.vectorLen(v.subtract(o,r)):0,a.push(n),e=n,r=o}),a=a.map(o=>o/e),a}function N(d,a,n){var e,r,o,c,t,s,g,T;r=0,o=Math.floor(d.length/2);const O=m(a,10);for(t=0,s=d.length;t<s;t++)g=d[t],T=A(a,n[t],O,10),c=v.subtract(y.q(a,T),g),e=c[0]*c[0]+c[1]*c[1],e>r&&(r=e,o=t);return[r,o]}var m=function(d,a){for(var n,e=[0],r=d[0],o=0,c=1;c<=a;c++)n=y.q(d,c/a),o+=v.vectorLen(v.subtract(n,r)),e.push(o),r=n;return e=e.map(t=>t/o),e};function A(d,a,n,e){if(a<0)return 0;if(a>1)return 1;for(var r,o,c,t,s,g=1;g<=e;g++)if(a<=n[g]){t=(g-1)/e,c=g/e,o=n[g-1],r=n[g],s=(a-o)/(r-o)*(c-t)+t;break}return s}function R(d,a){return v.normalize(v.subtract(d,a))}class v{static zeros_Xx2x2(a){for(var n=[];a--;)n.push([0,0]);return n}static mulItems(a,n){return a.map(e=>e*n)}static mulMatrix(a,n){return a.reduce((e,r,o)=>e+r*n[o],0)}static subtract(a,n){return a.map((e,r)=>e-n[r])}static addArrays(a,n){return a.map((e,r)=>e+n[r])}static addItems(a,n){return a.map(e=>e+n)}static sum(a){return a.reduce((n,e)=>n+e)}static dot(a,n){return v.mulMatrix(a,n)}static vectorLen(a){return Math.hypot(...a)}static divItems(a,n){return a.map(e=>e/n)}static squareItems(a){return a.map(n=>n*n)}static normalize(a){return this.divItems(a,this.vectorLen(a))}}class y{static q(a,n){var e=1-n,r=v.mulItems(a[0],e*e*e),o=v.mulItems(a[1],3*e*e*n),c=v.mulItems(a[2],3*e*n*n),t=v.mulItems(a[3],n*n*n);return v.addArrays(v.addArrays(r,o),v.addArrays(c,t))}static qprime(a,n){var e=1-n,r=v.mulItems(v.subtract(a[1],a[0]),3*e*e),o=v.mulItems(v.subtract(a[2],a[1]),6*e*n),c=v.mulItems(v.subtract(a[3],a[2]),3*n*n);return v.addArrays(v.addArrays(r,o),c)}static qprimeprime(a,n){return v.addArrays(v.mulItems(v.addArrays(v.subtract(a[2],v.mulItems(a[1],2)),a[0]),6*(1-n)),v.mulItems(v.addArrays(v.subtract(a[3],v.mulItems(a[2],2)),a[1]),6*n))}}dt.exports=u,dt.exports.fitCubic=Y,dt.exports.createTangent=R},(dt,u,Y)=>{var h,Vt,_,$e,I,Se,G,Ee,z,Ce;Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationLayer=void 0;var f=Y(1),k=Y(6),V=Y(3),W=Y(27),q=Y(28);const N=1e3,m=9,A=new WeakSet;function R(ut){return{width:ut[2]-ut[0],height:ut[3]-ut[1]}}class v{static create(i){switch(i.data.annotationType){case f.AnnotationType.LINK:return new d(i);case f.AnnotationType.TEXT:return new a(i);case f.AnnotationType.WIDGET:switch(i.data.fieldType){case"Tx":return new e(i);case"Btn":return i.data.radioButton?new o(i):i.data.checkBox?new r(i):new c(i);case"Ch":return new t(i)}return new n(i);case f.AnnotationType.POPUP:return new s(i);case f.AnnotationType.FREETEXT:return new T(i);case f.AnnotationType.LINE:return new O(i);case f.AnnotationType.SQUARE:return new E(i);case f.AnnotationType.CIRCLE:return new w(i);case f.AnnotationType.POLYLINE:return new Q(i);case f.AnnotationType.CARET:return new it(i);case f.AnnotationType.INK:return new X(i);case f.AnnotationType.POLYGON:return new ct(i);case f.AnnotationType.HIGHLIGHT:return new j(i);case f.AnnotationType.UNDERLINE:return new $(i);case f.AnnotationType.SQUIGGLY:return new Z(i);case f.AnnotationType.STRIKEOUT:return new nt(i);case f.AnnotationType.STAMP:return new bt(i);case f.AnnotationType.FILEATTACHMENT:return new yt(i);default:return new y(i)}}}class y{constructor(i,{isRenderable:p=!1,ignoreBorder:P=!1,createQuadrilaterals:C=!1}={}){this.isRenderable=p,this.data=i.data,this.layer=i.layer,this.page=i.page,this.viewport=i.viewport,this.linkService=i.linkService,this.downloadManager=i.downloadManager,this.imageResourcesPath=i.imageResourcesPath,this.renderForms=i.renderForms,this.svgFactory=i.svgFactory,this.annotationStorage=i.annotationStorage,this.enableScripting=i.enableScripting,this.hasJSActions=i.hasJSActions,this._fieldObjects=i.fieldObjects,this._mouseState=i.mouseState,p&&(this.container=this._createContainer(P)),C&&(this.quadrilaterals=this._createQuadrilaterals(P))}_createContainer(i=!1){const p=this.data,P=this.page,C=this.viewport,x=document.createElement("section"),{width:H,height:rt}=R(p.rect),[mt,U,vt,st]=C.viewBox,gt=vt-mt,L=st-U;x.setAttribute("data-annotation-id",p.id);const ft=f.Util.normalizeRect([p.rect[0],P.view[3]-p.rect[1]+P.view[1],p.rect[2],P.view[3]-p.rect[3]+P.view[1]]);if(!i&&p.borderStyle.width>0){x.style.borderWidth=`${p.borderStyle.width}px`;const St=p.borderStyle.horizontalCornerRadius,Rt=p.borderStyle.verticalCornerRadius;if(St>0||Rt>0){const Et=`calc(${St}px * var(--scale-factor)) / calc(${Rt}px * var(--scale-factor))`;x.style.borderRadius=Et}else if(this instanceof o){const Et=`calc(${H}px * var(--scale-factor)) / calc(${rt}px * var(--scale-factor))`;x.style.borderRadius=Et}switch(p.borderStyle.style){case f.AnnotationBorderStyleType.SOLID:x.style.borderStyle="solid";break;case f.AnnotationBorderStyleType.DASHED:x.style.borderStyle="dashed";break;case f.AnnotationBorderStyleType.BEVELED:(0,f.warn)("Unimplemented border style: beveled");break;case f.AnnotationBorderStyleType.INSET:(0,f.warn)("Unimplemented border style: inset");break;case f.AnnotationBorderStyleType.UNDERLINE:x.style.borderBottomStyle="solid";break}const Ft=p.borderColor||null;Ft?x.style.borderColor=f.Util.makeHexColor(Ft[0]|0,Ft[1]|0,Ft[2]|0):x.style.borderWidth=0}x.style.left=`${100*(ft[0]-mt)/gt}%`,x.style.top=`${100*(ft[1]-U)/L}%`;const{rotation:At}=p;return p.hasOwnCanvas||At===0?(x.style.width=`${100*H/gt}%`,x.style.height=`${100*rt/L}%`):this.setRotation(At,x),x}setRotation(i,p=this.container){const[P,C,x,H]=this.viewport.viewBox,rt=x-P,mt=H-C,{width:U,height:vt}=R(this.data.rect);let st,gt;i%180===0?(st=100*U/rt,gt=100*vt/mt):(st=100*vt/rt,gt=100*U/mt),p.style.width=`${st}%`,p.style.height=`${gt}%`,p.setAttribute("data-main-rotation",(360-i)%360)}get _commonActions(){const i=(p,P,C)=>{const x=C.detail[p];C.target.style[P]=W.ColorConverters[`${x[0]}_HTML`](x.slice(1))};return(0,f.shadow)(this,"_commonActions",{display:p=>{const P=p.detail.display%2===1;this.container.style.visibility=P?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:P,print:p.detail.display===0||p.detail.display===3})},print:p=>{this.annotationStorage.setValue(this.data.id,{print:p.detail.print})},hidden:p=>{this.container.style.visibility=p.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:p.detail.hidden})},focus:p=>{setTimeout(()=>p.target.focus({preventScroll:!1}),0)},userName:p=>{p.target.title=p.detail.userName},readonly:p=>{p.detail.readonly?p.target.setAttribute("readonly",""):p.target.removeAttribute("readonly")},required:p=>{this._setRequired(p.target,p.detail.required)},bgColor:p=>{i("bgColor","backgroundColor",p)},fillColor:p=>{i("fillColor","backgroundColor",p)},fgColor:p=>{i("fgColor","color",p)},textColor:p=>{i("textColor","color",p)},borderColor:p=>{i("borderColor","borderColor",p)},strokeColor:p=>{i("strokeColor","borderColor",p)},rotation:p=>{const P=p.detail.rotation;this.setRotation(P),this.annotationStorage.setValue(this.data.id,{rotation:P})}})}_dispatchEventFromSandbox(i,p){const P=this._commonActions;for(const C of Object.keys(p.detail)){const x=i[C]||P[C];x==null||x(p)}}_setDefaultPropertiesFromJS(i){if(!this.enableScripting)return;const p=this.annotationStorage.getRawValue(this.data.id);if(!p)return;const P=this._commonActions;for(const[C,x]of Object.entries(p)){const H=P[C];if(H){const rt={detail:{[C]:x},target:i};H(rt),delete p[C]}}}_createQuadrilaterals(i=!1){if(!this.data.quadPoints)return null;const p=[],P=this.data.rect;for(const C of this.data.quadPoints)this.data.rect=[C[2].x,C[2].y,C[1].x,C[1].y],p.push(this._createContainer(i));return this.data.rect=P,p}_createPopup(i,p){let P=this.container;this.quadrilaterals&&(i=i||this.quadrilaterals,P=this.quadrilaterals[0]),i||(i=document.createElement("div"),i.className="popupTriggerArea",P.append(i));const x=new g({container:P,trigger:i,color:p.color,titleObj:p.titleObj,modificationDate:p.modificationDate,contentsObj:p.contentsObj,richText:p.richText,hideWrapper:!0}).render();x.style.left="100%",P.append(x)}_renderQuadrilaterals(i){for(const p of this.quadrilaterals)p.className=i;return this.quadrilaterals}render(){(0,f.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(i,p=null){const P=[];if(this._fieldObjects){const C=this._fieldObjects[i];if(C)for(const{page:x,id:H,exportValues:rt}of C){if(x===-1||H===p)continue;const mt=typeof rt=="string"?rt:null,U=document.querySelector(`[data-element-id="${H}"]`);if(U&&!A.has(U)){(0,f.warn)(`_getElementsByName - element not allowed: ${H}`);continue}P.push({id:H,exportValue:mt,domElement:U})}return P}for(const C of document.getElementsByName(i)){const{exportValue:x}=C,H=C.getAttribute("data-element-id");H!==p&&A.has(C)&&P.push({id:H,exportValue:x,domElement:C})}return P}static get platform(){const i=typeof navigator<"u"?navigator.platform:"";return(0,f.shadow)(this,"platform",{isWin:i.includes("Win"),isMac:i.includes("Mac")})}}class d extends y{constructor(p,P=null){super(p,{isRenderable:!0,ignoreBorder:!!(P!=null&&P.ignoreBorder),createQuadrilaterals:!0});et(this,h);et(this,_);this.isTooltipOnly=p.data.isTooltipOnly}render(){const{data:p,linkService:P}=this,C=document.createElement("a");C.setAttribute("data-element-id",p.id);let x=!1;return p.url?(P.addLinkAttributes(C,p.url,p.newWindow),x=!0):p.action?(this._bindNamedAction(C,p.action),x=!0):p.attachment?(this._bindAttachment(C,p.attachment),x=!0):p.setOCGState?(ht(this,_,$e).call(this,C,p.setOCGState),x=!0):p.dest?(this._bindLink(C,p.dest),x=!0):(p.actions&&(p.actions.Action||p.actions["Mouse Up"]||p.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(C,p),x=!0),p.resetForm?(this._bindResetFormAction(C,p.resetForm),x=!0):this.isTooltipOnly&&!x&&(this._bindLink(C,""),x=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((H,rt)=>{const mt=rt===0?C:C.cloneNode();return H.append(mt),H}):(this.container.className="linkAnnotation",x&&this.container.append(C),this.container)}_bindLink(p,P){p.href=this.linkService.getDestinationHash(P),p.onclick=()=>(P&&this.linkService.goToDestination(P),!1),(P||P==="")&&ht(this,h,Vt).call(this)}_bindNamedAction(p,P){p.href=this.linkService.getAnchorUrl(""),p.onclick=()=>(this.linkService.executeNamedAction(P),!1),ht(this,h,Vt).call(this)}_bindAttachment(p,P){p.href=this.linkService.getAnchorUrl(""),p.onclick=()=>{var C;return(C=this.downloadManager)==null||C.openOrDownloadData(this.container,P.content,P.filename),!1},ht(this,h,Vt).call(this)}_bindJSAction(p,P){p.href=this.linkService.getAnchorUrl("");const C=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const x of Object.keys(P.actions)){const H=C.get(x);H&&(p[H]=()=>{var rt;return(rt=this.linkService.eventBus)==null||rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P.id,name:x}}),!1})}p.onclick||(p.onclick=()=>!1),ht(this,h,Vt).call(this)}_bindResetFormAction(p,P){const C=p.onclick;if(C||(p.href=this.linkService.getAnchorUrl("")),ht(this,h,Vt).call(this),!this._fieldObjects){(0,f.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),C||(p.onclick=()=>!1);return}p.onclick=()=>{var st;C==null||C();const{fields:x,refs:H,include:rt}=P,mt=[];if(x.length!==0||H.length!==0){const gt=new Set(H);for(const L of x){const ft=this._fieldObjects[L]||[];for(const{id:At}of ft)gt.add(At)}for(const L of Object.values(this._fieldObjects))for(const ft of L)gt.has(ft.id)===rt&&mt.push(ft)}else for(const gt of Object.values(this._fieldObjects))mt.push(...gt);const U=this.annotationStorage,vt=[];for(const gt of mt){const{id:L}=gt;switch(vt.push(L),gt.type){case"text":{const At=gt.defaultValue||"";U.setValue(L,{value:At});break}case"checkbox":case"radiobutton":{const At=gt.defaultValue===gt.exportValues;U.setValue(L,{value:At});break}case"combobox":case"listbox":{const At=gt.defaultValue||"";U.setValue(L,{value:At});break}default:continue}const ft=document.querySelector(`[data-element-id="${L}"]`);if(ft){if(!A.has(ft)){(0,f.warn)(`_bindResetFormAction - element not allowed: ${L}`);continue}}else continue;ft.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((st=this.linkService.eventBus)==null||st.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:vt,name:"ResetForm"}})),!1}}}h=new WeakSet,Vt=function(){this.container.setAttribute("data-internal-link","")},_=new WeakSet,$e=function(p,P){p.href=this.linkService.getAnchorUrl(""),p.onclick=()=>(this.linkService.executeSetOCGState(P),!1),ht(this,h,Vt).call(this)};class a extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p})}render(){this.container.className="textAnnotation";const i=document.createElement("img");return i.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",i.alt="[{{type}} Annotation]",i.dataset.l10nId="text_annotation_type",i.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(i,this.data),this.container.append(i),this.container}}class n extends y{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(i){const{isWin:p,isMac:P}=y.platform;return p&&i.ctrlKey||P&&i.metaKey}_setEventListener(i,p,P,C){p.includes("mouse")?i.addEventListener(p,x=>{var H;(H=this.linkService.eventBus)==null||H.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:P,value:C(x),shift:x.shiftKey,modifier:this._getKeyModifier(x)}})}):i.addEventListener(p,x=>{var H;(H=this.linkService.eventBus)==null||H.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:P,value:C(x)}})})}_setEventListeners(i,p,P){var C;for(const[x,H]of p)(H==="Action"||(C=this.data.actions)!=null&&C[H])&&this._setEventListener(i,x,H,P)}_setBackgroundColor(i){const p=this.data.backgroundColor||null;i.style.backgroundColor=p===null?"transparent":f.Util.makeHexColor(p[0],p[1],p[2])}_setTextStyle(i){const p=["left","center","right"],{fontColor:P}=this.data.defaultAppearanceData,C=this.data.defaultAppearanceData.fontSize||m,x=i.style;let H;const rt=2,mt=U=>Math.round(10*U)/10;if(this.data.multiLine){const U=Math.abs(this.data.rect[3]-this.data.rect[1]-rt),vt=Math.round(U/(f.LINE_FACTOR*C))||1,st=U/vt;H=Math.min(C,mt(st/f.LINE_FACTOR))}else{const U=Math.abs(this.data.rect[3]-this.data.rect[1]-rt);H=Math.min(C,mt(U/f.LINE_FACTOR))}x.fontSize=`calc(${H}px * var(--scale-factor))`,x.color=f.Util.makeHexColor(P[0],P[1],P[2]),this.data.textAlignment!==null&&(x.textAlign=p[this.data.textAlignment])}_setRequired(i,p){p?i.setAttribute("required",!0):i.removeAttribute("required"),i.setAttribute("aria-required",p)}}class e extends n{constructor(i){const p=i.renderForms||!i.data.hasAppearance&&!!i.data.fieldValue;super(i,{isRenderable:p})}setPropertyOnSiblings(i,p,P,C){const x=this.annotationStorage;for(const H of this._getElementsByName(i.name,i.id))H.domElement&&(H.domElement[p]=P),x.setValue(H.id,{[C]:P})}render(){var C;const i=this.annotationStorage,p=this.data.id;this.container.className="textWidgetAnnotation";let P=null;if(this.renderForms){const x=i.getValue(p,{value:this.data.fieldValue});let H=x.formattedValue||x.value||"";const rt=i.getValue(p,{charLimit:this.data.maxLen}).charLimit;rt&&H.length>rt&&(H=H.slice(0,rt));const mt={userValue:H,formattedValue:null,valueOnFocus:""};this.data.multiLine?(P=document.createElement("textarea"),P.textContent=H,this.data.doNotScroll&&(P.style.overflowY="hidden")):(P=document.createElement("input"),P.type="text",P.setAttribute("value",H),this.data.doNotScroll&&(P.style.overflowX="hidden")),A.add(P),P.setAttribute("data-element-id",p),P.disabled=this.data.readOnly,P.name=this.data.fieldName,P.tabIndex=N,this._setRequired(P,this.data.required),rt&&(P.maxLength=rt),P.addEventListener("input",vt=>{i.setValue(p,{value:vt.target.value}),this.setPropertyOnSiblings(P,"value",vt.target.value,"value")}),P.addEventListener("resetform",vt=>{var gt;const st=(gt=this.data.defaultFieldValue)!=null?gt:"";P.value=mt.userValue=st,mt.formattedValue=null});let U=vt=>{const{formattedValue:st}=mt;st!=null&&(vt.target.value=st),vt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){P.addEventListener("focus",st=>{mt.userValue&&(st.target.value=mt.userValue),mt.valueOnFocus=st.target.value}),P.addEventListener("updatefromsandbox",st=>{const gt={value(L){var ft;mt.userValue=(ft=L.detail.value)!=null?ft:"",i.setValue(p,{value:mt.userValue.toString()}),L.target.value=mt.userValue},formattedValue(L){const{formattedValue:ft}=L.detail;mt.formattedValue=ft,ft!=null&&L.target!==document.activeElement&&(L.target.value=ft),i.setValue(p,{formattedValue:ft})},selRange(L){L.target.setSelectionRange(...L.detail.selRange)},charLimit:L=>{var Rt;const{charLimit:ft}=L.detail,{target:At}=L;if(ft===0){At.removeAttribute("maxLength");return}At.setAttribute("maxLength",ft);let St=mt.userValue;!St||St.length<=ft||(St=St.slice(0,ft),At.value=mt.userValue=St,i.setValue(p,{value:St}),(Rt=this.linkService.eventBus)==null||Rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:St,willCommit:!0,commitKey:1,selStart:At.selectionStart,selEnd:At.selectionEnd}}))}};this._dispatchEventFromSandbox(gt,st)}),P.addEventListener("keydown",st=>{var ft;let gt=-1;if(st.key==="Escape"?gt=0:st.key==="Enter"&&!this.data.multiLine?gt=2:st.key==="Tab"&&(gt=3),gt===-1)return;const{value:L}=st.target;mt.valueOnFocus!==L&&(mt.userValue=L,(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:L,willCommit:!0,commitKey:gt,selStart:st.target.selectionStart,selEnd:st.target.selectionEnd}}))});const vt=U;U=null,P.addEventListener("blur",st=>{var L;const{value:gt}=st.target;mt.userValue=gt,this._mouseState.isDown&&mt.valueOnFocus!==gt&&((L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:gt,willCommit:!0,commitKey:1,selStart:st.target.selectionStart,selEnd:st.target.selectionEnd}})),vt(st)}),(C=this.data.actions)!=null&&C.Keystroke&&P.addEventListener("beforeinput",st=>{var Et;const{data:gt,target:L}=st,{value:ft,selectionStart:At,selectionEnd:St}=L;let Rt=At,Ft=St;switch(st.inputType){case"deleteWordBackward":{const at=ft.substring(0,At).match(/\w*[^\w]*$/);at&&(Rt-=at[0].length);break}case"deleteWordForward":{const at=ft.substring(At).match(/^[^\w]*\w*/);at&&(Ft+=at[0].length);break}case"deleteContentBackward":At===St&&(Rt-=1);break;case"deleteContentForward":At===St&&(Ft+=1);break}st.preventDefault(),(Et=this.linkService.eventBus)==null||Et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:ft,change:gt||"",willCommit:!1,selStart:Rt,selEnd:Ft}})}),this._setEventListeners(P,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],st=>st.target.value)}if(U&&P.addEventListener("blur",U),this.data.comb){const st=(this.data.rect[2]-this.data.rect[0])/rt;P.classList.add("comb"),P.style.letterSpacing=`calc(${st}px * var(--scale-factor) - 1ch)`}}else P=document.createElement("div"),P.textContent=this.data.fieldValue,P.style.verticalAlign="middle",P.style.display="table-cell";return this._setTextStyle(P),this._setBackgroundColor(P),this._setDefaultPropertiesFromJS(P),this.container.append(P),this.container}}class r extends n{constructor(i){super(i,{isRenderable:i.renderForms})}render(){const i=this.annotationStorage,p=this.data,P=p.id;let C=i.getValue(P,{value:p.exportValue===p.fieldValue}).value;typeof C=="string"&&(C=C!=="Off",i.setValue(P,{value:C})),this.container.className="buttonWidgetAnnotation checkBox";const x=document.createElement("input");return A.add(x),x.setAttribute("data-element-id",P),x.disabled=p.readOnly,this._setRequired(x,this.data.required),x.type="checkbox",x.name=p.fieldName,C&&x.setAttribute("checked",!0),x.setAttribute("exportValue",p.exportValue),x.tabIndex=N,x.addEventListener("change",H=>{const{name:rt,checked:mt}=H.target;for(const U of this._getElementsByName(rt,P)){const vt=mt&&U.exportValue===p.exportValue;U.domElement&&(U.domElement.checked=vt),i.setValue(U.id,{value:vt})}i.setValue(P,{value:mt})}),x.addEventListener("resetform",H=>{const rt=p.defaultFieldValue||"Off";H.target.checked=rt===p.exportValue}),this.enableScripting&&this.hasJSActions&&(x.addEventListener("updatefromsandbox",H=>{const rt={value(mt){mt.target.checked=mt.detail.value!=="Off",i.setValue(P,{value:mt.target.checked})}};this._dispatchEventFromSandbox(rt,H)}),this._setEventListeners(x,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],H=>H.target.checked)),this._setBackgroundColor(x),this._setDefaultPropertiesFromJS(x),this.container.append(x),this.container}}class o extends n{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const i=this.annotationStorage,p=this.data,P=p.id;let C=i.getValue(P,{value:p.fieldValue===p.buttonValue}).value;typeof C=="string"&&(C=C!==p.buttonValue,i.setValue(P,{value:C}));const x=document.createElement("input");if(A.add(x),x.setAttribute("data-element-id",P),x.disabled=p.readOnly,this._setRequired(x,this.data.required),x.type="radio",x.name=p.fieldName,C&&x.setAttribute("checked",!0),x.tabIndex=N,x.addEventListener("change",H=>{const{name:rt,checked:mt}=H.target;for(const U of this._getElementsByName(rt,P))i.setValue(U.id,{value:!1});i.setValue(P,{value:mt})}),x.addEventListener("resetform",H=>{const rt=p.defaultFieldValue;H.target.checked=rt!=null&&rt===p.buttonValue}),this.enableScripting&&this.hasJSActions){const H=p.buttonValue;x.addEventListener("updatefromsandbox",rt=>{const mt={value:U=>{const vt=H===U.detail.value;for(const st of this._getElementsByName(U.target.name)){const gt=vt&&st.id===P;st.domElement&&(st.domElement.checked=gt),i.setValue(st.id,{value:gt})}}};this._dispatchEventFromSandbox(mt,rt)}),this._setEventListeners(x,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],rt=>rt.target.checked)}return this._setBackgroundColor(x),this._setDefaultPropertiesFromJS(x),this.container.append(x),this.container}}class c extends d{constructor(i){super(i,{ignoreBorder:i.data.hasAppearance})}render(){const i=super.render();i.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(i.title=this.data.alternativeText);const p=i.lastChild;return this.enableScripting&&this.hasJSActions&&p&&(this._setDefaultPropertiesFromJS(p),p.addEventListener("updatefromsandbox",P=>{this._dispatchEventFromSandbox({},P)})),i}}class t extends n{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const i=this.annotationStorage,p=this.data.id,P=i.getValue(p,{value:this.data.fieldValue}),C=document.createElement("select");A.add(C),C.setAttribute("data-element-id",p),C.disabled=this.data.readOnly,this._setRequired(C,this.data.required),C.name=this.data.fieldName,C.tabIndex=N;let x=this.data.combo&&this.data.options.length>0;this.data.combo||(C.size=this.data.options.length,this.data.multiSelect&&(C.multiple=!0)),C.addEventListener("resetform",U=>{const vt=this.data.defaultFieldValue;for(const st of C.options)st.selected=st.value===vt});for(const U of this.data.options){const vt=document.createElement("option");vt.textContent=U.displayValue,vt.value=U.exportValue,P.value.includes(U.exportValue)&&(vt.setAttribute("selected",!0),x=!1),C.append(vt)}let H=null;if(x){const U=document.createElement("option");U.value=" ",U.setAttribute("hidden",!0),U.setAttribute("selected",!0),C.prepend(U),H=()=>{U.remove(),C.removeEventListener("input",H),H=null},C.addEventListener("input",H)}const rt=(U,vt)=>{const st=vt?"value":"textContent",gt=U.target.options;return U.target.multiple?Array.prototype.filter.call(gt,L=>L.selected).map(L=>L[st]):gt.selectedIndex===-1?null:gt[gt.selectedIndex][st]},mt=U=>{const vt=U.target.options;return Array.prototype.map.call(vt,st=>({displayValue:st.textContent,exportValue:st.value}))};return this.enableScripting&&this.hasJSActions?(C.addEventListener("updatefromsandbox",U=>{const vt={value(st){H==null||H();const gt=st.detail.value,L=new Set(Array.isArray(gt)?gt:[gt]);for(const ft of C.options)ft.selected=L.has(ft.value);i.setValue(p,{value:rt(st,!0)})},multipleSelection(st){C.multiple=!0},remove(st){const gt=C.options,L=st.detail.remove;gt[L].selected=!1,C.remove(L),gt.length>0&&Array.prototype.findIndex.call(gt,At=>At.selected)===-1&&(gt[0].selected=!0),i.setValue(p,{value:rt(st,!0),items:mt(st)})},clear(st){for(;C.length!==0;)C.remove(0);i.setValue(p,{value:null,items:[]})},insert(st){const{index:gt,displayValue:L,exportValue:ft}=st.detail.insert,At=C.children[gt],St=document.createElement("option");St.textContent=L,St.value=ft,At?At.before(St):C.append(St),i.setValue(p,{value:rt(st,!0),items:mt(st)})},items(st){const{items:gt}=st.detail;for(;C.length!==0;)C.remove(0);for(const L of gt){const{displayValue:ft,exportValue:At}=L,St=document.createElement("option");St.textContent=ft,St.value=At,C.append(St)}C.options.length>0&&(C.options[0].selected=!0),i.setValue(p,{value:rt(st,!0),items:mt(st)})},indices(st){const gt=new Set(st.detail.indices);for(const L of st.target.options)L.selected=gt.has(L.index);i.setValue(p,{value:rt(st,!0)})},editable(st){st.target.disabled=!st.detail.editable}};this._dispatchEventFromSandbox(vt,U)}),C.addEventListener("input",U=>{var gt;const vt=rt(U,!0),st=rt(U,!1);i.setValue(p,{value:vt}),(gt=this.linkService.eventBus)==null||gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:st,changeEx:vt,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(C,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],U=>U.target.checked)):C.addEventListener("input",function(U){i.setValue(p,{value:rt(U,!0)})}),this.data.combo&&this._setTextStyle(C),this._setBackgroundColor(C),this._setDefaultPropertiesFromJS(C),this.container.append(C),this.container}}const M=class M extends y{constructor(i){var C,x,H;const{data:p}=i,P=!M.IGNORE_TYPES.has(p.parentType)&&!!((C=p.titleObj)!=null&&C.str||(x=p.contentsObj)!=null&&x.str||(H=p.richText)!=null&&H.str);super(i,{isRenderable:P})}render(){this.container.className="popupAnnotation";const i=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(i.length===0)return this.container;const p=new g({container:this.container,trigger:Array.from(i),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),P=this.page,C=f.Util.normalizeRect([this.data.parentRect[0],P.view[3]-this.data.parentRect[1]+P.view[1],this.data.parentRect[2],P.view[3]-this.data.parentRect[3]+P.view[1]]),x=C[0]+this.data.parentRect[2]-this.data.parentRect[0],H=C[1],[rt,mt,U,vt]=this.viewport.viewBox,st=U-rt,gt=vt-mt;return this.container.style.left=`${100*(x-rt)/st}%`,this.container.style.top=`${100*(H-mt)/gt}%`,this.container.append(p.render()),this.container}};It(M,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));let s=M;class g{constructor(i){this.container=i.container,this.trigger=i.trigger,this.color=i.color,this.titleObj=i.titleObj,this.modificationDate=i.modificationDate,this.contentsObj=i.contentsObj,this.richText=i.richText,this.hideWrapper=i.hideWrapper||!1,this.pinned=!1}render(){var rt,mt;const p=document.createElement("div");p.className="popupWrapper",this.hideElement=this.hideWrapper?p:this.container,this.hideElement.hidden=!0;const P=document.createElement("div");P.className="popup";const C=this.color;if(C){const U=.7*(255-C[0])+C[0],vt=.7*(255-C[1])+C[1],st=.7*(255-C[2])+C[2];P.style.backgroundColor=f.Util.makeHexColor(U|0,vt|0,st|0)}const x=document.createElement("h1");x.dir=this.titleObj.dir,x.textContent=this.titleObj.str,P.append(x);const H=k.PDFDateString.toDateObject(this.modificationDate);if(H){const U=document.createElement("span");U.className="popupDate",U.textContent="{{date}}, {{time}}",U.dataset.l10nId="annotation_date_string",U.dataset.l10nArgs=JSON.stringify({date:H.toLocaleDateString(),time:H.toLocaleTimeString()}),P.append(U)}if((rt=this.richText)!=null&&rt.str&&(!((mt=this.contentsObj)!=null&&mt.str)||this.contentsObj.str===this.richText.str))q.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:P}),P.lastChild.className="richText popupContent";else{const U=this._formatContents(this.contentsObj);P.append(U)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const U of this.trigger)U.addEventListener("click",this._toggle.bind(this)),U.addEventListener("mouseover",this._show.bind(this,!1)),U.addEventListener("mouseout",this._hide.bind(this,!1));return P.addEventListener("click",this._hide.bind(this,!0)),p.append(P),p}_formatContents({str:i,dir:p}){const P=document.createElement("p");P.className="popupContent",P.dir=p;const C=i.split(/(?:\r\n?|\n)/);for(let x=0,H=C.length;x<H;++x){const rt=C[x];P.append(document.createTextNode(rt)),x<H-1&&P.append(document.createElement("br"))}return P}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(i=!1){i&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(i=!0){i&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class T extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0}),this.textContent=i.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const i=document.createElement("div");i.className="annotationTextContent",i.setAttribute("role","comment");for(const p of this.textContent){const P=document.createElement("span");P.textContent=p,i.append(P)}this.container.append(i)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class O extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const i=this.data,{width:p,height:P}=R(i.rect),C=this.svgFactory.create(p,P,!0),x=this.svgFactory.createElement("svg:line");return x.setAttribute("x1",i.rect[2]-i.lineCoordinates[0]),x.setAttribute("y1",i.rect[3]-i.lineCoordinates[1]),x.setAttribute("x2",i.rect[2]-i.lineCoordinates[2]),x.setAttribute("y2",i.rect[3]-i.lineCoordinates[3]),x.setAttribute("stroke-width",i.borderStyle.width||1),x.setAttribute("stroke","transparent"),x.setAttribute("fill","transparent"),C.append(x),this.container.append(C),this._createPopup(x,i),this.container}}class E extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const i=this.data,{width:p,height:P}=R(i.rect),C=this.svgFactory.create(p,P,!0),x=i.borderStyle.width,H=this.svgFactory.createElement("svg:rect");return H.setAttribute("x",x/2),H.setAttribute("y",x/2),H.setAttribute("width",p-x),H.setAttribute("height",P-x),H.setAttribute("stroke-width",x||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),C.append(H),this.container.append(C),this._createPopup(H,i),this.container}}class w extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const i=this.data,{width:p,height:P}=R(i.rect),C=this.svgFactory.create(p,P,!0),x=i.borderStyle.width,H=this.svgFactory.createElement("svg:ellipse");return H.setAttribute("cx",p/2),H.setAttribute("cy",P/2),H.setAttribute("rx",p/2-x/2),H.setAttribute("ry",P/2-x/2),H.setAttribute("stroke-width",x||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),C.append(H),this.container.append(C),this._createPopup(H,i),this.container}}class Q extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const i=this.data,{width:p,height:P}=R(i.rect),C=this.svgFactory.create(p,P,!0);let x=[];for(const rt of i.vertices){const mt=rt.x-i.rect[0],U=i.rect[3]-rt.y;x.push(mt+","+U)}x=x.join(" ");const H=this.svgFactory.createElement(this.svgElementName);return H.setAttribute("points",x),H.setAttribute("stroke-width",i.borderStyle.width||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),C.append(H),this.container.append(C),this._createPopup(H,i),this.container}}class ct extends Q{constructor(i){super(i),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class it extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class X extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const i=this.data,{width:p,height:P}=R(i.rect),C=this.svgFactory.create(p,P,!0);for(const x of i.inkLists){let H=[];for(const mt of x){const U=mt.x-i.rect[0],vt=i.rect[3]-mt.y;H.push(`${U},${vt}`)}H=H.join(" ");const rt=this.svgFactory.createElement(this.svgElementName);rt.setAttribute("points",H),rt.setAttribute("stroke-width",i.borderStyle.width||1),rt.setAttribute("stroke","transparent"),rt.setAttribute("fill","transparent"),this._createPopup(rt,i),C.append(rt)}return this.container.append(C),this.container}}class j extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class $ extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class Z extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class nt extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class bt extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class yt extends y{constructor(i){var C;super(i,{isRenderable:!0});const{filename:p,content:P}=this.data.file;this.filename=(0,k.getFilenameFromUrl)(p,!0),this.content=P,(C=this.linkService.eventBus)==null||C.dispatch("fileattachmentannotation",{source:this,filename:p,content:P})}render(){var p,P;this.container.className="fileAttachmentAnnotation";const i=document.createElement("div");return i.className="popupTriggerArea",i.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((p=this.data.titleObj)!=null&&p.str||(P=this.data.contentsObj)!=null&&P.str||this.data.richText)&&this._createPopup(i,this.data),this.container.append(i),this.container}_download(){var i;(i=this.downloadManager)==null||i.openOrDownloadData(this.container,this.content,this.filename)}}const tt=class tt{static render(i){var rt,mt;const{annotations:p,div:P,viewport:C,accessibilityManager:x}=i;ht(this,G,Ee).call(this,P,C);let H=0;for(const U of p){if(U.annotationType!==f.AnnotationType.POPUP){const{width:st,height:gt}=R(U.rect);if(st<=0||gt<=0)continue}const vt=v.create({data:U,layer:P,page:i.page,viewport:C,linkService:i.linkService,downloadManager:i.downloadManager,imageResourcesPath:i.imageResourcesPath||"",renderForms:i.renderForms!==!1,svgFactory:new k.DOMSVGFactory,annotationStorage:i.annotationStorage||new V.AnnotationStorage,enableScripting:i.enableScripting,hasJSActions:i.hasJSActions,fieldObjects:i.fieldObjects,mouseState:i.mouseState||{isDown:!1}});if(vt.isRenderable){const st=vt.render();if(U.hidden&&(st.style.visibility="hidden"),Array.isArray(st))for(const gt of st)gt.style.zIndex=H++,ht(rt=tt,I,Se).call(rt,gt,U.id,P,x);else st.style.zIndex=H++,vt instanceof s?P.prepend(st):ht(mt=tt,I,Se).call(mt,st,U.id,P,x)}}ht(this,z,Ce).call(this,P,i.annotationCanvasMap)}static update(i){const{annotationCanvasMap:p,div:P,viewport:C}=i;ht(this,G,Ee).call(this,P,C),ht(this,z,Ce).call(this,P,p),P.hidden=!1}};I=new WeakSet,Se=function(i,p,P,C){const x=i.firstChild||i;x.id=`${k.AnnotationPrefix}${p}`,P.append(i),C==null||C.moveElementInDOM(P,i,x,!1)},G=new WeakSet,Ee=function(i,{width:p,height:P,rotation:C}){const{style:x}=i,H=C%180!==0,rt=Math.floor(p)+"px",mt=Math.floor(P)+"px";x.width=H?mt:rt,x.height=H?rt:mt,i.setAttribute("data-main-rotation",C)},z=new WeakSet,Ce=function(i,p){if(p){for(const[P,C]of p){const x=i.querySelector(`[data-annotation-id="${P}"]`);if(!x)continue;const{firstChild:H}=x;H?H.nodeName==="CANVAS"?H.replaceWith(C):H.before(C):x.append(C)}p.clear()}},et(tt,I),et(tt,G),et(tt,z);let D=tt;u.AnnotationLayer=D},(dt,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.ColorConverters=void 0;function Y(k){return Math.floor(Math.max(0,Math.min(1,k))*255).toString(16).padStart(2,"0")}class f{static CMYK_G([V,W,q,N]){return["G",1-Math.min(1,.3*V+.59*q+.11*W+N)]}static G_CMYK([V]){return["CMYK",0,0,0,1-V]}static G_RGB([V]){return["RGB",V,V,V]}static G_HTML([V]){const W=Y(V);return`#${W}${W}${W}`}static RGB_G([V,W,q]){return["G",.3*V+.59*W+.11*q]}static RGB_HTML([V,W,q]){const N=Y(V),m=Y(W),A=Y(q);return`#${N}${m}${A}`}static T_HTML(){return"#00000000"}static CMYK_RGB([V,W,q,N]){return["RGB",1-Math.min(1,V+N),1-Math.min(1,q+N),1-Math.min(1,W+N)]}static CMYK_HTML(V){const W=this.CMYK_RGB(V).slice(1);return this.RGB_HTML(W)}static RGB_CMYK([V,W,q]){const N=1-V,m=1-W,A=1-q,R=Math.min(N,m,A);return["CMYK",N,m,A,R]}}u.ColorConverters=f},(dt,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.XfaLayer=void 0;var f=Y(19);class k{static setupStorage(W,q,N,m,A){const R=m.getValue(q,{value:null});switch(N.name){case"textarea":if(R.value!==null&&(W.textContent=R.value),A==="print")break;W.addEventListener("input",v=>{m.setValue(q,{value:v.target.value})});break;case"input":if(N.attributes.type==="radio"||N.attributes.type==="checkbox"){if(R.value===N.attributes.xfaOn?W.setAttribute("checked",!0):R.value===N.attributes.xfaOff&&W.removeAttribute("checked"),A==="print")break;W.addEventListener("change",v=>{m.setValue(q,{value:v.target.checked?v.target.getAttribute("xfaOn"):v.target.getAttribute("xfaOff")})})}else{if(R.value!==null&&W.setAttribute("value",R.value),A==="print")break;W.addEventListener("input",v=>{m.setValue(q,{value:v.target.value})})}break;case"select":if(R.value!==null)for(const v of N.children)v.attributes.value===R.value&&(v.attributes.selected=!0);W.addEventListener("input",v=>{const y=v.target.options,d=y.selectedIndex===-1?"":y[y.selectedIndex].value;m.setValue(q,{value:d})});break}}static setAttributes({html:W,element:q,storage:N=null,intent:m,linkService:A}){const{attributes:R}=q,v=W instanceof HTMLAnchorElement;R.type==="radio"&&(R.name=`${R.name}-${m}`);for(const[y,d]of Object.entries(R))if(d!=null)switch(y){case"class":d.length&&W.setAttribute(y,d.join(" "));break;case"dataId":break;case"id":W.setAttribute("data-element-id",d);break;case"style":Object.assign(W.style,d);break;case"textContent":W.textContent=d;break;default:(!v||y!=="href"&&y!=="newWindow")&&W.setAttribute(y,d)}v&&A.addLinkAttributes(W,R.href,R.newWindow),N&&R.dataId&&this.setupStorage(W,R.dataId,q,N)}static render(W){var a;const q=W.annotationStorage,N=W.linkService,m=W.xfaHtml,A=W.intent||"display",R=document.createElement(m.name);m.attributes&&this.setAttributes({html:R,element:m,intent:A,linkService:N});const v=[[m,-1,R]],y=W.div;if(y.append(R),W.viewport){const n=`matrix(${W.viewport.transform.join(",")})`;y.style.transform=n}A!=="richText"&&y.setAttribute("class","xfaLayer xfaFont");const d=[];for(;v.length>0;){const[n,e,r]=v.at(-1);if(e+1===n.children.length){v.pop();continue}const o=n.children[++v.at(-1)[1]];if(o===null)continue;const{name:c}=o;if(c==="#text"){const s=document.createTextNode(o.value);d.push(s),r.append(s);continue}let t;if((a=o==null?void 0:o.attributes)!=null&&a.xmlns?t=document.createElementNS(o.attributes.xmlns,c):t=document.createElement(c),r.append(t),o.attributes&&this.setAttributes({html:t,element:o,storage:q,intent:A,linkService:N}),o.children&&o.children.length>0)v.push([o,-1,t]);else if(o.value){const s=document.createTextNode(o.value);f.XfaText.shouldBuildText(c)&&d.push(s),t.append(s)}}for(const n of y.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))n.setAttribute("readOnly",!0);return{textDivs:d}}static update(W){const q=`matrix(${W.viewport.transform.join(",")})`;W.div.style.transform=q,W.div.hidden=!1}}u.XfaLayer=k},(dt,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TextLayerRenderTask=void 0,u.renderTextLayer=y;var f=Y(1),k=Y(6);const V=1e5,W=30,q=.8,N=new Map;function m(d,a){const n=N.get(d);if(n)return n;a.save(),a.font=`${W}px ${d}`;const e=a.measureText("");let r=e.fontBoundingBoxAscent,o=Math.abs(e.fontBoundingBoxDescent);if(r){a.restore();const t=r/(r+o);return N.set(d,t),t}a.strokeStyle="red",a.clearRect(0,0,W,W),a.strokeText("g",0,0);let c=a.getImageData(0,0,W,W).data;o=0;for(let t=c.length-1-3;t>=0;t-=4)if(c[t]>0){o=Math.ceil(t/4/W);break}a.clearRect(0,0,W,W),a.strokeText("A",0,W),c=a.getImageData(0,0,W,W).data,r=0;for(let t=0,s=c.length;t<s;t+=4)if(c[t]>0){r=W-Math.floor(t/4/W);break}if(a.restore(),r){const t=r/(r+o);return N.set(d,t),t}return N.set(d,q),q}function A(d,a,n,e){const r=document.createElement("span"),o={angle:0,canvasWidth:0,hasText:a.str!=="",hasEOL:a.hasEOL,fontSize:0};d._textDivs.push(r);const c=f.Util.transform(d._viewport.transform,a.transform);let t=Math.atan2(c[1],c[0]);const s=n[a.fontName];s.vertical&&(t+=Math.PI/2);const g=Math.hypot(c[2],c[3]),T=g*m(s.fontFamily,e);let O,E;t===0?(O=c[4],E=c[5]-T):(O=c[4]+T*Math.sin(t),E=c[5]-T*Math.cos(t)),r.style.left=`${O}px`,r.style.top=`${E}px`,r.style.fontSize=`${g}px`,r.style.fontFamily=s.fontFamily,o.fontSize=g,r.setAttribute("role","presentation"),r.textContent=a.str,r.dir=a.dir,d._fontInspectorEnabled&&(r.dataset.fontName=a.fontName),t!==0&&(o.angle=t*(180/Math.PI));let w=!1;if(a.str.length>1)w=!0;else if(a.str!==" "&&a.transform[0]!==a.transform[3]){const Q=Math.abs(a.transform[0]),ct=Math.abs(a.transform[3]);Q!==ct&&Math.max(Q,ct)/Math.min(Q,ct)>1.5&&(w=!0)}w&&(s.vertical?o.canvasWidth=a.height*d._viewport.scale:o.canvasWidth=a.width*d._viewport.scale),d._textDivProperties.set(r,o),d._textContentStream&&d._layoutText(r)}function R(d){if(d._canceled)return;const a=d._textDivs,n=d._capability;if(a.length>V){d._renderingDone=!0,n.resolve();return}if(!d._textContentStream)for(const r of a)d._layoutText(r);d._renderingDone=!0,n.resolve()}class v{constructor({textContent:a,textContentStream:n,container:e,viewport:r,textDivs:o,textContentItemsStr:c}){var t;this._textContent=a,this._textContentStream=n,this._container=e,this._document=e.ownerDocument,this._viewport=r,this._textDivs=o||[],this._textContentItemsStr=c||[],this._fontInspectorEnabled=!!((t=globalThis.FontInspector)!=null&&t.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,f.createPromiseCapability)(),this._renderTimer=null,this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._textDivProperties=null,this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new f.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(a,n){for(const e of a){if(e.str===void 0){if(e.type==="beginMarkedContentProps"||e.type==="beginMarkedContent"){const r=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),e.id!==null&&this._container.setAttribute("id",`${e.id}`),r.append(this._container)}else e.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(e.str),A(this,e,n,this._layoutTextCtx)}}_layoutText(a){const n=this._textDivProperties.get(a);let e="";if(n.canvasWidth!==0&&n.hasText){const{fontFamily:r}=a.style,{fontSize:o}=n;(o!==this._layoutTextLastFontSize||r!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${o*this._devicePixelRatio}px ${r}`,this._layoutTextLastFontSize=o,this._layoutTextLastFontFamily=r);const{width:c}=this._layoutTextCtx.measureText(a.textContent);c>0&&(e=`scaleX(${this._devicePixelRatio*n.canvasWidth/c})`)}if(n.angle!==0&&(e=`rotate(${n.angle}deg) ${e}`),e.length>0&&(a.style.transform=e),n.hasText&&this._container.append(a),n.hasEOL){const r=document.createElement("br");r.setAttribute("role","presentation"),this._container.append(r)}}_render(a=0){const n=(0,f.createPromiseCapability)();let e=Object.create(null);const r=this._document.createElement("canvas");if(r.height=r.width=W,this._layoutTextCtx=r.getContext("2d",{alpha:!1}),this._textContent){const o=this._textContent.items,c=this._textContent.styles;this._processItems(o,c),n.resolve()}else if(this._textContentStream){const o=()=>{this._reader.read().then(({value:c,done:t})=>{if(t){n.resolve();return}Object.assign(e,c.styles),this._processItems(c.items,e),o()},n.reject)};this._reader=this._textContentStream.getReader(),o()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');n.promise.then(()=>{e=null,a?((0,k.deprecated)("The TextLayerRender `timeout` parameter will be removed in the future, since streaming of textContent has made it obsolete."),this._renderTimer=setTimeout(()=>{R(this),this._renderTimer=null},a)):R(this)},this._capability.reject)}}u.TextLayerRenderTask=v;function y(d){const a=new v({textContent:d.textContent,textContentStream:d.textContentStream,container:d.container,viewport:d.viewport,textDivs:d.textDivs,textContentItemsStr:d.textContentItemsStr});return a._render(d.timeout),a}},(dt,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.SVGGraphics=void 0;var f=Y(6),k=Y(1),V=Y(12);let W=class{constructor(){(0,k.unreachable)("Not implemented: SVGGraphics")}};u.SVGGraphics=W;{let a=function(t){let s=[];const g=[];for(const T of t){if(T.fn==="save"){s.push({fnId:92,fn:"group",items:[]}),g.push(s),s=s.at(-1).items;continue}T.fn==="restore"?s=g.pop():s.push(T)}return s},n=function(t){if(Number.isInteger(t))return t.toString();const s=t.toFixed(10);let g=s.length-1;if(s[g]!=="0")return s;do g--;while(s[g]==="0");return s.substring(0,s[g]==="."?g:g+1)},e=function(t){if(t[4]===0&&t[5]===0){if(t[1]===0&&t[2]===0)return t[0]===1&&t[3]===1?"":`scale(${n(t[0])} ${n(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2]){const s=Math.acos(t[0])*180/Math.PI;return`rotate(${n(s)})`}}else if(t[0]===1&&t[1]===0&&t[2]===0&&t[3]===1)return`translate(${n(t[4])} ${n(t[5])})`;return`matrix(${n(t[0])} ${n(t[1])} ${n(t[2])} ${n(t[3])} ${n(t[4])} ${n(t[5])})`};const q={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},N="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/1999/xlink",A=["butt","round","square"],R=["miter","round","bevel"],v=function(t,s="",g=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!g)return URL.createObjectURL(new Blob([t],{type:s}));const T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let O=`data:${s};base64,`;for(let E=0,w=t.length;E<w;E+=3){const Q=t[E]&255,ct=t[E+1]&255,it=t[E+2]&255,X=Q>>2,j=(Q&3)<<4|ct>>4,$=E+1<w?(ct&15)<<2|it>>6:64,Z=E+2<w?it&63:64;O+=T[X]+T[j]+T[$]+T[Z]}return O},y=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),s=12,g=new Int32Array(256);for(let it=0;it<256;it++){let X=it;for(let j=0;j<8;j++)X&1?X=3988292384^X>>1&2147483647:X=X>>1&2147483647;g[it]=X}function T(it,X,j){let $=-1;for(let Z=X;Z<j;Z++){const nt=($^it[Z])&255,bt=g[nt];$=$>>>8^bt}return $^-1}function O(it,X,j,$){let Z=$;const nt=X.length;j[Z]=nt>>24&255,j[Z+1]=nt>>16&255,j[Z+2]=nt>>8&255,j[Z+3]=nt&255,Z+=4,j[Z]=it.charCodeAt(0)&255,j[Z+1]=it.charCodeAt(1)&255,j[Z+2]=it.charCodeAt(2)&255,j[Z+3]=it.charCodeAt(3)&255,Z+=4,j.set(X,Z),Z+=X.length;const bt=T(j,$+4,Z);j[Z]=bt>>24&255,j[Z+1]=bt>>16&255,j[Z+2]=bt>>8&255,j[Z+3]=bt&255}function E(it,X,j){let $=1,Z=0;for(let nt=X;nt<j;++nt)$=($+(it[nt]&255))%65521,Z=(Z+$)%65521;return Z<<16|$}function w(it){if(!V.isNodeJS)return Q(it);try{let X;parseInt(process.versions.node)>=8?X=it:X=Buffer.from(it);const j=require$$0.deflateSync(X,{level:9});return j instanceof Uint8Array?j:new Uint8Array(j)}catch(X){(0,k.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+X)}return Q(it)}function Q(it){let X=it.length;const j=65535,$=Math.ceil(X/j),Z=new Uint8Array(2+X+$*5+4);let nt=0;Z[nt++]=120,Z[nt++]=156;let bt=0;for(;X>j;)Z[nt++]=0,Z[nt++]=255,Z[nt++]=255,Z[nt++]=0,Z[nt++]=0,Z.set(it.subarray(bt,bt+j),nt),nt+=j,bt+=j,X-=j;Z[nt++]=1,Z[nt++]=X&255,Z[nt++]=X>>8&255,Z[nt++]=~X&65535&255,Z[nt++]=(~X&65535)>>8&255,Z.set(it.subarray(bt),nt),nt+=it.length-bt;const yt=E(it,0,it.length);return Z[nt++]=yt>>24&255,Z[nt++]=yt>>16&255,Z[nt++]=yt>>8&255,Z[nt++]=yt&255,Z}function ct(it,X,j,$){const Z=it.width,nt=it.height;let bt,yt,D;const h=it.data;switch(X){case k.ImageKind.GRAYSCALE_1BPP:yt=0,bt=1,D=Z+7>>3;break;case k.ImageKind.RGB_24BPP:yt=2,bt=8,D=Z*3;break;case k.ImageKind.RGBA_32BPP:yt=6,bt=8,D=Z*4;break;default:throw new Error("invalid format")}const l=new Uint8Array((1+D)*nt);let _=0,F=0;for(let z=0;z<nt;++z)l[_++]=0,l.set(h.subarray(F,F+D),_),F+=D,_+=D;if(X===k.ImageKind.GRAYSCALE_1BPP&&$){_=0;for(let z=0;z<nt;z++){_++;for(let lt=0;lt<D;lt++)l[_++]^=255}}const M=new Uint8Array([Z>>24&255,Z>>16&255,Z>>8&255,Z&255,nt>>24&255,nt>>16&255,nt>>8&255,nt&255,bt,yt,0,0,0]),I=w(l),B=t.length+s*3+M.length+I.length,G=new Uint8Array(B);let ot=0;return G.set(t,ot),ot+=t.length,O("IHDR",M,G,ot),ot+=s+M.length,O("IDATA",I,G,ot),ot+=s+I.length,O("IEND",new Uint8Array(0),G,ot),v(G,"image/png",j)}return function(X,j,$){const Z=X.kind===void 0?k.ImageKind.GRAYSCALE_1BPP:X.kind;return ct(X,Z,j,$)}}();class d{constructor(){this.fontSizeScale=1,this.fontWeight=q.fontWeight,this.fontSize=0,this.textMatrix=k.IDENTITY_MATRIX,this.fontMatrix=k.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=k.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=q.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(s,g){this.x=s,this.y=g}}let r=0,o=0,c=0;u.SVGGraphics=W=class{constructor(t,s,g=!1){(0,f.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new f.DOMSVGFactory,this.current=new d,this.transformMatrix=k.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=s,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!g,this._operatorIdMapping=[];for(const T in k.OPS)this._operatorIdMapping[k.OPS[T]]=T}getObject(t,s=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):s}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const s=t.fnArray,g=t.argsArray;for(let T=0,O=s.length;T<O;T++)if(s[T]===k.OPS.dependency)for(const E of g[T]){const w=E.startsWith("g_")?this.commonObjs:this.objs,Q=new Promise(ct=>{w.get(E,ct)});this.current.dependencies.push(Q)}return Promise.all(this.current.dependencies)}transform(t,s,g,T,O,E){const w=[t,s,g,T,O,E];this.transformMatrix=k.Util.transform(this.transformMatrix,w),this.tgrp=null}getSVG(t,s){this.viewport=s;const g=this._initialize(s);return this.loadDependencies(t).then(()=>(this.transformMatrix=k.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),g))}convertOpList(t){const s=this._operatorIdMapping,g=t.argsArray,T=t.fnArray,O=[];for(let E=0,w=T.length;E<w;E++){const Q=T[E];O.push({fnId:Q,fn:s[Q],args:g[E]})}return a(O)}executeOpTree(t){for(const s of t){const g=s.fn,T=s.fnId,O=s.args;switch(T|0){case k.OPS.beginText:this.beginText();break;case k.OPS.dependency:break;case k.OPS.setLeading:this.setLeading(O);break;case k.OPS.setLeadingMoveText:this.setLeadingMoveText(O[0],O[1]);break;case k.OPS.setFont:this.setFont(O);break;case k.OPS.showText:this.showText(O[0]);break;case k.OPS.showSpacedText:this.showText(O[0]);break;case k.OPS.endText:this.endText();break;case k.OPS.moveText:this.moveText(O[0],O[1]);break;case k.OPS.setCharSpacing:this.setCharSpacing(O[0]);break;case k.OPS.setWordSpacing:this.setWordSpacing(O[0]);break;case k.OPS.setHScale:this.setHScale(O[0]);break;case k.OPS.setTextMatrix:this.setTextMatrix(O[0],O[1],O[2],O[3],O[4],O[5]);break;case k.OPS.setTextRise:this.setTextRise(O[0]);break;case k.OPS.setTextRenderingMode:this.setTextRenderingMode(O[0]);break;case k.OPS.setLineWidth:this.setLineWidth(O[0]);break;case k.OPS.setLineJoin:this.setLineJoin(O[0]);break;case k.OPS.setLineCap:this.setLineCap(O[0]);break;case k.OPS.setMiterLimit:this.setMiterLimit(O[0]);break;case k.OPS.setFillRGBColor:this.setFillRGBColor(O[0],O[1],O[2]);break;case k.OPS.setStrokeRGBColor:this.setStrokeRGBColor(O[0],O[1],O[2]);break;case k.OPS.setStrokeColorN:this.setStrokeColorN(O);break;case k.OPS.setFillColorN:this.setFillColorN(O);break;case k.OPS.shadingFill:this.shadingFill(O[0]);break;case k.OPS.setDash:this.setDash(O[0],O[1]);break;case k.OPS.setRenderingIntent:this.setRenderingIntent(O[0]);break;case k.OPS.setFlatness:this.setFlatness(O[0]);break;case k.OPS.setGState:this.setGState(O[0]);break;case k.OPS.fill:this.fill();break;case k.OPS.eoFill:this.eoFill();break;case k.OPS.stroke:this.stroke();break;case k.OPS.fillStroke:this.fillStroke();break;case k.OPS.eoFillStroke:this.eoFillStroke();break;case k.OPS.clip:this.clip("nonzero");break;case k.OPS.eoClip:this.clip("evenodd");break;case k.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case k.OPS.paintImageXObject:this.paintImageXObject(O[0]);break;case k.OPS.paintInlineImageXObject:this.paintInlineImageXObject(O[0]);break;case k.OPS.paintImageMaskXObject:this.paintImageMaskXObject(O[0]);break;case k.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(O[0],O[1]);break;case k.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case k.OPS.closePath:this.closePath();break;case k.OPS.closeStroke:this.closeStroke();break;case k.OPS.closeFillStroke:this.closeFillStroke();break;case k.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case k.OPS.nextLine:this.nextLine();break;case k.OPS.transform:this.transform(O[0],O[1],O[2],O[3],O[4],O[5]);break;case k.OPS.constructPath:this.constructPath(O[0],O[1]);break;case k.OPS.endPath:this.endPath();break;case 92:this.group(s.items);break;default:(0,k.warn)(`Unimplemented operator ${g}`);break}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,s,g,T,O,E){const w=this.current;w.textMatrix=w.lineMatrix=[t,s,g,T,O,E],w.textMatrixScale=Math.hypot(t,s),w.x=w.lineX=0,w.y=w.lineY=0,w.xcoords=[],w.ycoords=[],w.tspan=this.svgFactory.createElement("svg:tspan"),w.tspan.setAttributeNS(null,"font-family",w.fontFamily),w.tspan.setAttributeNS(null,"font-size",`${n(w.fontSize)}px`),w.tspan.setAttributeNS(null,"y",n(-w.y)),w.txtElement=this.svgFactory.createElement("svg:text"),w.txtElement.append(w.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=k.IDENTITY_MATRIX,t.lineMatrix=k.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,s){const g=this.current;g.x=g.lineX+=t,g.y=g.lineY+=s,g.xcoords=[],g.ycoords=[],g.tspan=this.svgFactory.createElement("svg:tspan"),g.tspan.setAttributeNS(null,"font-family",g.fontFamily),g.tspan.setAttributeNS(null,"font-size",`${n(g.fontSize)}px`),g.tspan.setAttributeNS(null,"y",n(-g.y))}showText(t){const s=this.current,g=s.font,T=s.fontSize;if(T===0)return;const O=s.fontSizeScale,E=s.charSpacing,w=s.wordSpacing,Q=s.fontDirection,ct=s.textHScale*Q,it=g.vertical,X=it?1:-1,j=g.defaultVMetrics,$=T*s.fontMatrix[0];let Z=0;for(const yt of t){if(yt===null){Z+=Q*w;continue}else if(typeof yt=="number"){Z+=X*yt*T/1e3;continue}const D=(yt.isSpace?w:0)+E,h=yt.fontChar;let l,_,F=yt.width;if(it){let I;const B=yt.vmetric||j;I=yt.vmetric?B[1]:F*.5,I=-I*$;const G=B[2]*$;F=B?-B[0]:F,l=I/O,_=(Z+G)/O}else l=Z/O,_=0;(yt.isInFont||g.missingFile)&&(s.xcoords.push(s.x+l),it&&s.ycoords.push(-s.y+_),s.tspan.textContent+=h);let M;it?M=F*$-D*Q:M=F*$+D*Q,Z+=M}s.tspan.setAttributeNS(null,"x",s.xcoords.map(n).join(" ")),it?s.tspan.setAttributeNS(null,"y",s.ycoords.map(n).join(" ")):s.tspan.setAttributeNS(null,"y",n(-s.y)),it?s.y-=Z:s.x+=Z*ct,s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${n(s.fontSize)}px`),s.fontStyle!==q.fontStyle&&s.tspan.setAttributeNS(null,"font-style",s.fontStyle),s.fontWeight!==q.fontWeight&&s.tspan.setAttributeNS(null,"font-weight",s.fontWeight);const nt=s.textRenderingMode&k.TextRenderingMode.FILL_STROKE_MASK;if(nt===k.TextRenderingMode.FILL||nt===k.TextRenderingMode.FILL_STROKE?(s.fillColor!==q.fillColor&&s.tspan.setAttributeNS(null,"fill",s.fillColor),s.fillAlpha<1&&s.tspan.setAttributeNS(null,"fill-opacity",s.fillAlpha)):s.textRenderingMode===k.TextRenderingMode.ADD_TO_PATH?s.tspan.setAttributeNS(null,"fill","transparent"):s.tspan.setAttributeNS(null,"fill","none"),nt===k.TextRenderingMode.STROKE||nt===k.TextRenderingMode.FILL_STROKE){const yt=1/(s.textMatrixScale||1);this._setStrokeAttributes(s.tspan,yt)}let bt=s.textMatrix;s.textRise!==0&&(bt=bt.slice(),bt[5]+=s.textRise),s.txtElement.setAttributeNS(null,"transform",`${e(bt)} scale(${n(ct)}, -1)`),s.txtElement.setAttributeNS(N,"xml:space","preserve"),s.txtElement.append(s.tspan),s.txtgrp.append(s.txtElement),this._ensureTransformGroup().append(s.txtElement)}setLeadingMoveText(t,s){this.setLeading(-s),this.moveText(t,s)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const s=v(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${s}); }
`}setFont(t){const s=this.current,g=this.commonObjs.get(t[0]);let T=t[1];s.font=g,this.embedFonts&&!g.missingFile&&!this.embeddedFonts[g.loadedName]&&(this.addFontStyle(g),this.embeddedFonts[g.loadedName]=g),s.fontMatrix=g.fontMatrix||k.FONT_IDENTITY_MATRIX;let O="normal";g.black?O="900":g.bold&&(O="bold");const E=g.italic?"italic":"normal";T<0?(T=-T,s.fontDirection=-1):s.fontDirection=1,s.fontSize=T,s.fontFamily=g.loadedName,s.fontWeight=O,s.fontStyle=E,s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"y",n(-s.y)),s.xcoords=[],s.ycoords=[]}endText(){var s;const t=this.current;t.textRenderingMode&k.TextRenderingMode.ADD_TO_PATH_FLAG&&((s=t.txtElement)!=null&&s.hasChildNodes())&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=A[t]}setLineJoin(t){this.current.lineJoin=R[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,s,g){this.current.strokeColor=k.Util.makeHexColor(t,s,g)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,s,g){this.current.fillColor=k.Util.makeHexColor(t,s,g),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const s=this.viewport.width,g=this.viewport.height,T=k.Util.inverseTransform(this.transformMatrix),O=k.Util.applyTransform([0,0],T),E=k.Util.applyTransform([0,g],T),w=k.Util.applyTransform([s,0],T),Q=k.Util.applyTransform([s,g],T),ct=Math.min(O[0],E[0],w[0],Q[0]),it=Math.min(O[1],E[1],w[1],Q[1]),X=Math.max(O[0],E[0],w[0],Q[0]),j=Math.max(O[1],E[1],w[1],Q[1]),$=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x",ct),$.setAttributeNS(null,"y",it),$.setAttributeNS(null,"width",X-ct),$.setAttributeNS(null,"height",j-it),$.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&$.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append($)}_makeColorN_Pattern(t){return t[0]==="TilingPattern"?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const s=t[1],g=t[2],T=t[3]||k.IDENTITY_MATRIX,[O,E,w,Q]=t[4],ct=t[5],it=t[6],X=t[7],j=`shading${c++}`,[$,Z,nt,bt]=k.Util.normalizeRect([...k.Util.applyTransform([O,E],T),...k.Util.applyTransform([w,Q],T)]),[yt,D]=k.Util.singularValueDecompose2dScale(T),h=ct*yt,l=it*D,_=this.svgFactory.createElement("svg:pattern");_.setAttributeNS(null,"id",j),_.setAttributeNS(null,"patternUnits","userSpaceOnUse"),_.setAttributeNS(null,"width",h),_.setAttributeNS(null,"height",l),_.setAttributeNS(null,"x",`${$}`),_.setAttributeNS(null,"y",`${Z}`);const F=this.svg,M=this.transformMatrix,I=this.current.fillColor,B=this.current.strokeColor,G=this.svgFactory.create(nt-$,bt-Z);if(this.svg=G,this.transformMatrix=T,X===2){const ot=k.Util.makeHexColor(...s);this.current.fillColor=ot,this.current.strokeColor=ot}return this.executeOpTree(this.convertOpList(g)),this.svg=F,this.transformMatrix=M,this.current.fillColor=I,this.current.strokeColor=B,_.append(G.childNodes[0]),this.defs.append(_),`url(#${j})`}_makeShadingPattern(t){switch(typeof t=="string"&&(t=this.objs.get(t)),t[0]){case"RadialAxial":const s=`shading${c++}`,g=t[3];let T;switch(t[1]){case"axial":const O=t[4],E=t[5];T=this.svgFactory.createElement("svg:linearGradient"),T.setAttributeNS(null,"id",s),T.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),T.setAttributeNS(null,"x1",O[0]),T.setAttributeNS(null,"y1",O[1]),T.setAttributeNS(null,"x2",E[0]),T.setAttributeNS(null,"y2",E[1]);break;case"radial":const w=t[4],Q=t[5],ct=t[6],it=t[7];T=this.svgFactory.createElement("svg:radialGradient"),T.setAttributeNS(null,"id",s),T.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),T.setAttributeNS(null,"cx",Q[0]),T.setAttributeNS(null,"cy",Q[1]),T.setAttributeNS(null,"r",it),T.setAttributeNS(null,"fx",w[0]),T.setAttributeNS(null,"fy",w[1]),T.setAttributeNS(null,"fr",ct);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const O of g){const E=this.svgFactory.createElement("svg:stop");E.setAttributeNS(null,"offset",O[0]),E.setAttributeNS(null,"stop-color",O[1]),T.append(E)}return this.defs.append(T),`url(#${s})`;case"Mesh":return(0,k.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,s){this.current.dashArray=t,this.current.dashPhase=s}constructPath(t,s){const g=this.current;let T=g.x,O=g.y,E=[],w=0;for(const Q of t)switch(Q|0){case k.OPS.rectangle:T=s[w++],O=s[w++];const ct=s[w++],it=s[w++],X=T+ct,j=O+it;E.push("M",n(T),n(O),"L",n(X),n(O),"L",n(X),n(j),"L",n(T),n(j),"Z");break;case k.OPS.moveTo:T=s[w++],O=s[w++],E.push("M",n(T),n(O));break;case k.OPS.lineTo:T=s[w++],O=s[w++],E.push("L",n(T),n(O));break;case k.OPS.curveTo:T=s[w+4],O=s[w+5],E.push("C",n(s[w]),n(s[w+1]),n(s[w+2]),n(s[w+3]),n(T),n(O)),w+=6;break;case k.OPS.curveTo2:E.push("C",n(T),n(O),n(s[w]),n(s[w+1]),n(s[w+2]),n(s[w+3])),T=s[w+2],O=s[w+3],w+=4;break;case k.OPS.curveTo3:T=s[w+2],O=s[w+3],E.push("C",n(s[w]),n(s[w+1]),n(T),n(O),n(T),n(O)),w+=4;break;case k.OPS.closePath:E.push("Z");break}E=E.join(" "),g.path&&t.length>0&&t[0]!==k.OPS.rectangle&&t[0]!==k.OPS.moveTo?E=g.path.getAttributeNS(null,"d")+E:(g.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(g.path)),g.path.setAttributeNS(null,"d",E),g.path.setAttributeNS(null,"fill","none"),g.element=g.path,g.setCurrentPoint(T,O)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element){this.pendingClip=null;return}const s=`clippath${r++}`,g=this.svgFactory.createElement("svg:clipPath");g.setAttributeNS(null,"id",s),g.setAttributeNS(null,"transform",e(this.transformMatrix));const T=t.element.cloneNode(!0);if(this.pendingClip==="evenodd"?T.setAttributeNS(null,"clip-rule","evenodd"):T.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,g.append(T),this.defs.append(g),t.activeClipUrl){t.clipGroup=null;for(const O of this.extraStack)O.clipGroup=null;g.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${s})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const s=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",s)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[s,g]of t)switch(s){case"LW":this.setLineWidth(g);break;case"LC":this.setLineCap(g);break;case"LJ":this.setLineJoin(g);break;case"ML":this.setMiterLimit(g);break;case"D":this.setDash(g[0],g[1]);break;case"RI":this.setRenderingIntent(g);break;case"FL":this.setFlatness(g);break;case"Font":this.setFont(g);break;case"CA":this.setStrokeAlpha(g);break;case"ca":this.setFillAlpha(g);break;default:(0,k.warn)(`Unimplemented graphic state operator ${s}`);break}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,s=1){const g=this.current;let T=g.dashArray;s!==1&&T.length>0&&(T=T.map(function(O){return s*O})),t.setAttributeNS(null,"stroke",g.strokeColor),t.setAttributeNS(null,"stroke-opacity",g.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",n(g.miterLimit)),t.setAttributeNS(null,"stroke-linecap",g.lineCap),t.setAttributeNS(null,"stroke-linejoin",g.lineJoin),t.setAttributeNS(null,"stroke-width",n(s*g.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",T.map(n).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",n(s*g.dashPhase)+"px")}eoFill(){var t;(t=this.current.element)==null||t.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var t;(t=this.current.element)==null||t.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(t)}paintImageXObject(t){const s=this.getObject(t);if(!s){(0,k.warn)(`Dependent image with object ID ${t} is not ready yet`);return}this.paintInlineImageXObject(s)}paintInlineImageXObject(t,s){const g=t.width,T=t.height,O=y(t,this.forceDataSchema,!!s),E=this.svgFactory.createElement("svg:rect");E.setAttributeNS(null,"x","0"),E.setAttributeNS(null,"y","0"),E.setAttributeNS(null,"width",n(g)),E.setAttributeNS(null,"height",n(T)),this.current.element=E,this.clip("nonzero");const w=this.svgFactory.createElement("svg:image");w.setAttributeNS(m,"xlink:href",O),w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y",n(-T)),w.setAttributeNS(null,"width",n(g)+"px"),w.setAttributeNS(null,"height",n(T)+"px"),w.setAttributeNS(null,"transform",`scale(${n(1/g)} ${n(-1/T)})`),s?s.append(w):this._ensureTransformGroup().append(w)}paintImageMaskXObject(t){const s=this.getObject(t.data,t);if(s.bitmap){(0,k.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const g=this.current,T=s.width,O=s.height,E=g.fillColor;g.maskId=`mask${o++}`;const w=this.svgFactory.createElement("svg:mask");w.setAttributeNS(null,"id",g.maskId);const Q=this.svgFactory.createElement("svg:rect");Q.setAttributeNS(null,"x","0"),Q.setAttributeNS(null,"y","0"),Q.setAttributeNS(null,"width",n(T)),Q.setAttributeNS(null,"height",n(O)),Q.setAttributeNS(null,"fill",E),Q.setAttributeNS(null,"mask",`url(#${g.maskId})`),this.defs.append(w),this._ensureTransformGroup().append(Q),this.paintInlineImageXObject(s,w)}paintFormXObjectBegin(t,s){if(Array.isArray(t)&&t.length===6&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),s){const g=s[2]-s[0],T=s[3]-s[1],O=this.svgFactory.createElement("svg:rect");O.setAttributeNS(null,"x",s[0]),O.setAttributeNS(null,"y",s[1]),O.setAttributeNS(null,"width",n(g)),O.setAttributeNS(null,"height",n(T)),this.current.element=O,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const s=this.svgFactory.create(t.width,t.height),g=this.svgFactory.createElement("svg:defs");s.append(g),this.defs=g;const T=this.svgFactory.createElement("svg:g");return T.setAttributeNS(null,"transform",e(t.transform)),s.append(T),this.svg=T,s}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",e(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(dt,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFNodeStream=void 0;var f=Y(1),k=Y(32);const V=require$$0,W=require$$0,q=require$$0,N=require$$0,m=/^file:\/\/\/[a-zA-Z]:\//;function A(o){const c=N.parse(o);return c.protocol==="file:"||c.host?c:/^[a-z]:[/\\]/i.test(o)?N.parse(`file:///${o}`):(c.host||(c.protocol="file:"),c)}class R{constructor(c){this.source=c,this.url=A(c.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&c.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var c,t;return(t=(c=this._fullRequestReader)==null?void 0:c._loaded)!=null?t:0}getFullReader(){return(0,f.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new e(this):new a(this),this._fullRequestReader}getRangeReader(c,t){if(t<=this._progressiveDataLength)return null;const s=this.isFsUrl?new r(this,c,t):new n(this,c,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(c){var t;(t=this._fullRequestReader)==null||t.cancel(c);for(const s of this._rangeRequestReaders.slice(0))s.cancel(c)}}u.PDFNodeStream=R;class v{constructor(c){this._url=c.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=c.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=(0,f.createPromiseCapability)(),this._headersCapability=(0,f.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const c=this._readableStream.read();return c===null?(this._readCapability=(0,f.createPromiseCapability)(),this.read()):(this._loaded+=c.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(c).buffer,done:!1})}cancel(c){if(!this._readableStream){this._error(c);return}this._readableStream.destroy(c)}_error(c){this._storedError=c,this._readCapability.resolve()}_setReadableStream(c){this._readableStream=c,c.on("readable",()=>{this._readCapability.resolve()}),c.on("end",()=>{c.destroy(),this._done=!0,this._readCapability.resolve()}),c.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new f.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class y{constructor(c){this._url=c.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,f.createPromiseCapability)();const t=c.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const c=this._readableStream.read();return c===null?(this._readCapability=(0,f.createPromiseCapability)(),this.read()):(this._loaded+=c.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(c).buffer,done:!1})}cancel(c){if(!this._readableStream){this._error(c);return}this._readableStream.destroy(c)}_error(c){this._storedError=c,this._readCapability.resolve()}_setReadableStream(c){this._readableStream=c,c.on("readable",()=>{this._readCapability.resolve()}),c.on("end",()=>{c.destroy(),this._done=!0,this._readCapability.resolve()}),c.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function d(o,c){return{protocol:o.protocol,auth:o.auth,host:o.hostname,port:o.port,path:o.path,method:"GET",headers:c}}class a extends v{constructor(c){super(c);const t=s=>{if(s.statusCode===404){const E=new f.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=E,this._headersCapability.reject(E);return}this._headersCapability.resolve(),this._setReadableStream(s);const g=E=>this._readableStream.headers[E.toLowerCase()],{allowRangeRequests:T,suggestedLength:O}=(0,k.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:c.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=T,this._contentLength=O||this._contentLength,this._filename=(0,k.extractFilenameFromHeader)(g)};this._request=null,this._url.protocol==="http:"?this._request=W.request(d(this._url,c.httpHeaders),t):this._request=q.request(d(this._url,c.httpHeaders),t),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class n extends y{constructor(c,t,s){super(c),this._httpHeaders={};for(const T in c.httpHeaders){const O=c.httpHeaders[T];typeof O>"u"||(this._httpHeaders[T]=O)}this._httpHeaders.Range=`bytes=${t}-${s-1}`;const g=T=>{if(T.statusCode===404){const O=new f.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=O;return}this._setReadableStream(T)};this._request=null,this._url.protocol==="http:"?this._request=W.request(d(this._url,this._httpHeaders),g):this._request=q.request(d(this._url,this._httpHeaders),g),this._request.on("error",T=>{this._storedError=T}),this._request.end()}}class e extends v{constructor(c){super(c);let t=decodeURIComponent(this._url.path);m.test(this._url.href)&&(t=t.replace(/^\//,"")),V.lstat(t,(s,g)=>{if(s){s.code==="ENOENT"&&(s=new f.MissingPDFException(`Missing PDF "${t}".`)),this._storedError=s,this._headersCapability.reject(s);return}this._contentLength=g.size,this._setReadableStream(V.createReadStream(t)),this._headersCapability.resolve()})}}class r extends y{constructor(c,t,s){super(c);let g=decodeURIComponent(this._url.path);m.test(this._url.href)&&(g=g.replace(/^\//,"")),this._setReadableStream(V.createReadStream(g,{start:t,end:s-1}))}}},(dt,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.createResponseStatusError=N,u.extractFilenameFromHeader=q,u.validateRangeRequestCapabilities=W,u.validateResponseStatus=m;var f=Y(1),k=Y(33),V=Y(6);function W({getResponseHeader:A,isHttp:R,rangeChunkSize:v,disableRange:y}){const d={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(A("Content-Length"),10);return!Number.isInteger(a)||(d.suggestedLength=a,a<=2*v)||y||!R||A("Accept-Ranges")!=="bytes"||(A("Content-Encoding")||"identity")!=="identity"||(d.allowRangeRequests=!0),d}function q(A){const R=A("Content-Disposition");if(R){let v=(0,k.getFilenameFromContentDispositionHeader)(R);if(v.includes("%"))try{v=decodeURIComponent(v)}catch(y){}if((0,V.isPdfFile)(v))return v}return null}function N(A,R){return A===404||A===0&&R.startsWith("file:")?new f.MissingPDFException('Missing PDF "'+R+'".'):new f.UnexpectedResponseException(`Unexpected server response (${A}) while retrieving PDF "${R}".`,A)}function m(A){return A===200||A===206}},(dt,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.getFilenameFromContentDispositionHeader=k;var f=Y(1);function k(V){let W=!0,q=N("filename\\*","i").exec(V);if(q){q=q[1];let a=v(q);return a=unescape(a),a=y(a),a=d(a),A(a)}if(q=R(V),q){const a=d(q);return A(a)}if(q=N("filename","i").exec(V),q){q=q[1];let a=v(q);return a=d(a),A(a)}function N(a,n){return new RegExp("(?:^|;)\\s*"+a+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',n)}function m(a,n){if(a){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const e=new TextDecoder(a,{fatal:!0}),r=(0,f.stringToBytes)(n);n=e.decode(r),W=!1}catch(e){}}return n}function A(a){return W&&/[\x80-\xff]/.test(a)&&(a=m("utf-8",a),W&&(a=m("iso-8859-1",a))),a}function R(a){const n=[];let e;const r=N("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(e=r.exec(a))!==null;){let[,c,t,s]=e;if(c=parseInt(c,10),c in n){if(c===0)break;continue}n[c]=[t,s]}const o=[];for(let c=0;c<n.length&&c in n;++c){let[t,s]=n[c];s=v(s),t&&(s=unescape(s),c===0&&(s=y(s))),o.push(s)}return o.join("")}function v(a){if(a.startsWith('"')){const n=a.slice(1).split('\\"');for(let e=0;e<n.length;++e){const r=n[e].indexOf('"');r!==-1&&(n[e]=n[e].slice(0,r),n.length=e+1),n[e]=n[e].replace(/\\(.)/g,"$1")}a=n.join('"')}return a}function y(a){const n=a.indexOf("'");if(n===-1)return a;const e=a.slice(0,n),o=a.slice(n+1).replace(/^[^']*'/,"");return m(e,o)}function d(a){return!a.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(a)?a:a.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(n,e,r,o){if(r==="q"||r==="Q")return o=o.replace(/_/g," "),o=o.replace(/=([0-9a-fA-F]{2})/g,function(c,t){return String.fromCharCode(parseInt(t,16))}),m(e,o);try{o=atob(o)}catch(c){}return m(e,o)})}return""}},(dt,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFNetworkStream=void 0;var f=Y(1),k=Y(32);const V=200,W=206;function q(v){const y=v.response;return typeof y!="string"?y:(0,f.stringToBytes)(y).buffer}class N{constructor(y,d={}){this.url=y,this.isHttp=/^https?:/i.test(y),this.httpHeaders=this.isHttp&&d.httpHeaders||Object.create(null),this.withCredentials=d.withCredentials||!1,this.getXhr=d.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(y,d,a){const n={begin:y,end:d};for(const e in a)n[e]=a[e];return this.request(n)}requestFull(y){return this.request(y)}request(y){const d=this.getXhr(),a=this.currXhrId++,n=this.pendingRequests[a]={xhr:d};d.open("GET",this.url),d.withCredentials=this.withCredentials;for(const e in this.httpHeaders){const r=this.httpHeaders[e];typeof r>"u"||d.setRequestHeader(e,r)}return this.isHttp&&"begin"in y&&"end"in y?(d.setRequestHeader("Range",`bytes=${y.begin}-${y.end-1}`),n.expectedStatus=W):n.expectedStatus=V,d.responseType="arraybuffer",y.onError&&(d.onerror=function(e){y.onError(d.status)}),d.onreadystatechange=this.onStateChange.bind(this,a),d.onprogress=this.onProgress.bind(this,a),n.onHeadersReceived=y.onHeadersReceived,n.onDone=y.onDone,n.onError=y.onError,n.onProgress=y.onProgress,d.send(null),a}onProgress(y,d){var n;const a=this.pendingRequests[y];a&&((n=a.onProgress)==null||n.call(a,d))}onStateChange(y,d){var c,t,s;const a=this.pendingRequests[y];if(!a)return;const n=a.xhr;if(n.readyState>=2&&a.onHeadersReceived&&(a.onHeadersReceived(),delete a.onHeadersReceived),n.readyState!==4||!(y in this.pendingRequests))return;if(delete this.pendingRequests[y],n.status===0&&this.isHttp){(c=a.onError)==null||c.call(a,n.status);return}const e=n.status||V;if(!(e===V&&a.expectedStatus===W)&&e!==a.expectedStatus){(t=a.onError)==null||t.call(a,n.status);return}const o=q(n);if(e===W){const g=n.getResponseHeader("Content-Range"),T=/bytes (\d+)-(\d+)\/(\d+)/.exec(g);a.onDone({begin:parseInt(T[1],10),chunk:o})}else o?a.onDone({begin:0,chunk:o}):(s=a.onError)==null||s.call(a,n.status)}getRequestXhr(y){return this.pendingRequests[y].xhr}isPendingRequest(y){return y in this.pendingRequests}abortRequest(y){const d=this.pendingRequests[y].xhr;delete this.pendingRequests[y],d.abort()}}class m{constructor(y){this._source=y,this._manager=new N(y.url,{httpHeaders:y.httpHeaders,withCredentials:y.withCredentials}),this._rangeChunkSize=y.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(y){const d=this._rangeRequestReaders.indexOf(y);d>=0&&this._rangeRequestReaders.splice(d,1)}getFullReader(){return(0,f.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new A(this._manager,this._source),this._fullRequestReader}getRangeReader(y,d){const a=new R(this._manager,y,d);return a.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(a),a}cancelAllRequests(y){var d;(d=this._fullRequestReader)==null||d.cancel(y);for(const a of this._rangeRequestReaders.slice(0))a.cancel(y)}}u.PDFNetworkStream=m;class A{constructor(y,d){this._manager=y;const a={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=d.url,this._fullRequestId=y.requestFull(a),this._headersReceivedCapability=(0,f.createPromiseCapability)(),this._disableRange=d.disableRange||!1,this._contentLength=d.length,this._rangeChunkSize=d.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const y=this._fullRequestId,d=this._manager.getRequestXhr(y),a=r=>d.getResponseHeader(r),{allowRangeRequests:n,suggestedLength:e}=(0,k.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=e||this._contentLength,this._filename=(0,k.extractFilenameFromHeader)(a),this._isRangeSupported&&this._manager.abortRequest(y),this._headersReceivedCapability.resolve()}_onDone(y){if(y&&(this._requests.length>0?this._requests.shift().resolve({value:y.chunk,done:!1}):this._cachedChunks.push(y.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(y){this._storedError=(0,k.createResponseStatusError)(y,this._url),this._headersReceivedCapability.reject(this._storedError);for(const d of this._requests)d.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(y){var d;(d=this.onProgress)==null||d.call(this,{loaded:y.loaded,total:y.lengthComputable?y.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const y=(0,f.createPromiseCapability)();return this._requests.push(y),y.promise}cancel(y){this._done=!0,this._headersReceivedCapability.reject(y);for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class R{constructor(y,d,a){this._manager=y;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._requestId=y.requestRange(d,a,n),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var y;(y=this.onClosed)==null||y.call(this,this)}_onDone(y){const d=y.chunk;this._requests.length>0?this._requests.shift().resolve({value:d,done:!1}):this._queuedChunk=d,this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(y){this._storedError=(0,k.createResponseStatusError)(y,this._url);for(const d of this._requests)d.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(y){var d;this.isStreamingSupported||(d=this.onProgress)==null||d.call(this,{loaded:y.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const d=this._queuedChunk;return this._queuedChunk=null,{value:d,done:!1}}if(this._done)return{value:void 0,done:!0};const y=(0,f.createPromiseCapability)();return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(dt,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFFetchStream=void 0;var f=Y(1),k=Y(32);function V(A,R,v){return{method:"GET",headers:A,signal:v.signal,mode:"cors",credentials:R?"include":"same-origin",redirect:"follow"}}function W(A){const R=new Headers;for(const v in A){const y=A[v];typeof y>"u"||R.append(v,y)}return R}class q{constructor(R){this.source=R,this.isHttp=/^https?:/i.test(R.url),this.httpHeaders=this.isHttp&&R.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var R,v;return(v=(R=this._fullRequestReader)==null?void 0:R._loaded)!=null?v:0}getFullReader(){return(0,f.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new N(this),this._fullRequestReader}getRangeReader(R,v){if(v<=this._progressiveDataLength)return null;const y=new m(this,R,v);return this._rangeRequestReaders.push(y),y}cancelAllRequests(R){var v;(v=this._fullRequestReader)==null||v.cancel(R);for(const y of this._rangeRequestReaders.slice(0))y.cancel(R)}}u.PDFFetchStream=q;class N{constructor(R){this._stream=R,this._reader=null,this._loaded=0,this._filename=null;const v=R.source;this._withCredentials=v.withCredentials||!1,this._contentLength=v.length,this._headersCapability=(0,f.createPromiseCapability)(),this._disableRange=v.disableRange||!1,this._rangeChunkSize=v.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!v.disableStream,this._isRangeSupported=!v.disableRange,this._headers=W(this._stream.httpHeaders);const y=v.url;fetch(y,V(this._headers,this._withCredentials,this._abortController)).then(d=>{if(!(0,k.validateResponseStatus)(d.status))throw(0,k.createResponseStatusError)(d.status,y);this._reader=d.body.getReader(),this._headersCapability.resolve();const a=r=>d.headers.get(r),{allowRangeRequests:n,suggestedLength:e}=(0,k.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=n,this._contentLength=e||this._contentLength,this._filename=(0,k.extractFilenameFromHeader)(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new f.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var d;await this._headersCapability.promise;const{value:R,done:v}=await this._reader.read();return v?{value:R,done:v}:(this._loaded+=R.byteLength,(d=this.onProgress)==null||d.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(R).buffer,done:!1})}cancel(R){var v;(v=this._reader)==null||v.cancel(R),this._abortController.abort()}}class m{constructor(R,v,y){this._stream=R,this._reader=null,this._loaded=0;const d=R.source;this._withCredentials=d.withCredentials||!1,this._readCapability=(0,f.createPromiseCapability)(),this._isStreamingSupported=!d.disableStream,this._abortController=new AbortController,this._headers=W(this._stream.httpHeaders),this._headers.append("Range",`bytes=${v}-${y-1}`);const a=d.url;fetch(a,V(this._headers,this._withCredentials,this._abortController)).then(n=>{if(!(0,k.validateResponseStatus)(n.status))throw(0,k.createResponseStatusError)(n.status,a);this._readCapability.resolve(),this._reader=n.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var d;await this._readCapability.promise;const{value:R,done:v}=await this._reader.read();return v?{value:R,done:v}:(this._loaded+=R.byteLength,(d=this.onProgress)==null||d.call(this,{loaded:this._loaded}),{value:new Uint8Array(R).buffer,done:!1})}cancel(R){var v;(v=this._reader)==null||v.cancel(R),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(dt){var u=__webpack_module_cache__[dt];if(u!==void 0)return u.exports;var Y=__webpack_module_cache__[dt]={exports:{}};return __webpack_modules__[dt](Y,Y.exports,__w_pdfjs_require__),Y.exports}var __webpack_exports__={};return(()=>{var dt=__webpack_exports__;Object.defineProperty(dt,"__esModule",{value:!0}),Object.defineProperty(dt,"AnnotationEditorLayer",{enumerable:!0,get:function(){return k.AnnotationEditorLayer}}),Object.defineProperty(dt,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return u.AnnotationEditorParamsType}}),Object.defineProperty(dt,"AnnotationEditorType",{enumerable:!0,get:function(){return u.AnnotationEditorType}}),Object.defineProperty(dt,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return V.AnnotationEditorUIManager}}),Object.defineProperty(dt,"AnnotationLayer",{enumerable:!0,get:function(){return W.AnnotationLayer}}),Object.defineProperty(dt,"AnnotationMode",{enumerable:!0,get:function(){return u.AnnotationMode}}),Object.defineProperty(dt,"CMapCompressionType",{enumerable:!0,get:function(){return u.CMapCompressionType}}),Object.defineProperty(dt,"GlobalWorkerOptions",{enumerable:!0,get:function(){return q.GlobalWorkerOptions}}),Object.defineProperty(dt,"InvalidPDFException",{enumerable:!0,get:function(){return u.InvalidPDFException}}),Object.defineProperty(dt,"MissingPDFException",{enumerable:!0,get:function(){return u.MissingPDFException}}),Object.defineProperty(dt,"OPS",{enumerable:!0,get:function(){return u.OPS}}),Object.defineProperty(dt,"PDFDataRangeTransport",{enumerable:!0,get:function(){return Y.PDFDataRangeTransport}}),Object.defineProperty(dt,"PDFDateString",{enumerable:!0,get:function(){return f.PDFDateString}}),Object.defineProperty(dt,"PDFWorker",{enumerable:!0,get:function(){return Y.PDFWorker}}),Object.defineProperty(dt,"PasswordResponses",{enumerable:!0,get:function(){return u.PasswordResponses}}),Object.defineProperty(dt,"PermissionFlag",{enumerable:!0,get:function(){return u.PermissionFlag}}),Object.defineProperty(dt,"PixelsPerInch",{enumerable:!0,get:function(){return f.PixelsPerInch}}),Object.defineProperty(dt,"RenderingCancelledException",{enumerable:!0,get:function(){return f.RenderingCancelledException}}),Object.defineProperty(dt,"SVGGraphics",{enumerable:!0,get:function(){return A.SVGGraphics}}),Object.defineProperty(dt,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return u.UNSUPPORTED_FEATURES}}),Object.defineProperty(dt,"UnexpectedResponseException",{enumerable:!0,get:function(){return u.UnexpectedResponseException}}),Object.defineProperty(dt,"Util",{enumerable:!0,get:function(){return u.Util}}),Object.defineProperty(dt,"VerbosityLevel",{enumerable:!0,get:function(){return u.VerbosityLevel}}),Object.defineProperty(dt,"XfaLayer",{enumerable:!0,get:function(){return R.XfaLayer}}),Object.defineProperty(dt,"build",{enumerable:!0,get:function(){return Y.build}}),Object.defineProperty(dt,"createPromiseCapability",{enumerable:!0,get:function(){return u.createPromiseCapability}}),Object.defineProperty(dt,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return u.createValidAbsoluteUrl}}),Object.defineProperty(dt,"getDocument",{enumerable:!0,get:function(){return Y.getDocument}}),Object.defineProperty(dt,"getFilenameFromUrl",{enumerable:!0,get:function(){return f.getFilenameFromUrl}}),Object.defineProperty(dt,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return f.getPdfFilenameFromUrl}}),Object.defineProperty(dt,"getXfaPageViewport",{enumerable:!0,get:function(){return f.getXfaPageViewport}}),Object.defineProperty(dt,"isPdfFile",{enumerable:!0,get:function(){return f.isPdfFile}}),Object.defineProperty(dt,"loadScript",{enumerable:!0,get:function(){return f.loadScript}}),Object.defineProperty(dt,"renderTextLayer",{enumerable:!0,get:function(){return m.renderTextLayer}}),Object.defineProperty(dt,"shadow",{enumerable:!0,get:function(){return u.shadow}}),Object.defineProperty(dt,"version",{enumerable:!0,get:function(){return Y.version}});var u=__w_pdfjs_require__(1),Y=__w_pdfjs_require__(2),f=__w_pdfjs_require__(6),k=__w_pdfjs_require__(21),V=__w_pdfjs_require__(5),W=__w_pdfjs_require__(26),q=__w_pdfjs_require__(14),N=__w_pdfjs_require__(12),m=__w_pdfjs_require__(29),A=__w_pdfjs_require__(30),R=__w_pdfjs_require__(28);if(N.isNodeJS){const{PDFNodeStream:v}=__w_pdfjs_require__(31);(0,Y.setPDFNetworkStreamFactory)(y=>new v(y))}else{const{PDFNetworkStream:v}=__w_pdfjs_require__(34),{PDFFetchStream:y}=__w_pdfjs_require__(35);(0,Y.setPDFNetworkStreamFactory)(d=>(0,f.isValidFetchUrl)(d.url)?new y(d):new v(d))}})(),__webpack_exports__})())})(pdf$2);var pdfExports=pdf$2.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdf$1=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]);export{pdfExports as a,pdf$1 as p};
