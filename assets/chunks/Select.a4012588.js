import{D as N}from"./Dropdown.f706c3bb.js";import{p as A}from"./Dropdown.vue_vue_type_style_index_0_lang.ee72ccc6.js";import{p as O}from"./Input.760a7f8f.js";import{I as z}from"./20.7180ddd2.js";import{I as T}from"./20.c6fe5404.js";import{p as F}from"./SpinnerRing.c9093f91.js";import{d as j,u as q}from"./adapter.c83e5e9c.js";import{c as y,m as E,g as U,r as I,w as G,_ as J,J as i,x as c,A as C,B as f,N as v,p as w,q as S,y as V,z as b,L as K,v as D,G as L,K as M,C as P}from"./framework.f3d2a0a5.js";import{u as R}from"./use-loading.f698da79.js";import{i as B}from"./value.830bdabd.js";import{m as H,k as Q}from"./theme.6d4ed01a.js";const W=j({setup({props:e,keyword:o}){const n=q(e);return y(()=>n.value.filter(l=>l.text.toLowerCase().includes(o.value.toLowerCase())))}}),X=E({components:{Dropdown:N,DropdownItem:A,pInput:O,IconArrow:z,IconCheck:T,IconLoading:F},props:{modelValue:{type:[String,Number,Boolean,Array,Object,Date],default:""},selected:{type:Object,default:()=>({text:"",value:void 0})},options:{type:Array,default:()=>[]},placeholder:{type:String,default:""},emptyText:{type:String,default:"No Data"},loadingText:{type:String,default:"Loading..."},adapter:{type:Object,default:()=>W},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},size:{type:String,default:"md"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["change","update:modelValue","update:selected","userInput"],setup(e,{emit:o}){const n=U(),r=I(),l=I(""),s=I(!1),u=R({elapsed:!1}),g={props:e,keyword:l,isOpen:s,isLoading:u},p=e.adapter.setup(g),d=y({get(){var t;return(t=p.value.find($=>B($.value,e.modelValue)))!=null?t:{text:"",value:void 0}},set(t){o("change",t),o("update:modelValue",t.value),o("update:selected",t),s.value&&o("userInput",t)}}),h=y(()=>{const t=[];return s.value&&t.push("select--open"),e.disabled&&t.push("select--disabled"),e.readonly&&t.push("select--readonly"),e.error&&t.push("select--error","state--error"),t}),m=y({get(){var t;return s.value?l.value:(t=d.value)==null?void 0:t.text},set(t){t!==m.value&&(l.value=t)}});function a(t){d.value=t}function _(){!e.disabled&&!e.readonly&&(s.value=!0)}function k(t){return B(t.value,d.value.value)}return G(s,t=>{t||(l.value="")},{flush:"post"}),H(()=>{s.value&&r.value&&r.value!==document.activeElement&&r.value.focus()}),Q(()=>{var t;(t=n==null?void 0:n.proxy)!=null&&t.$el&&(r.value=n.proxy.$el.querySelector(".select__search"))}),{classNames:h,model:d,isOpen:s,isLoading:u,search:m,items:p,select:a,onFocus:_,isSelected:k}}});const Y={key:0,"data-testid":"select-no-data",class:"select__empty"},Z={class:"select__option"},x={class:"select__option-text"},ee={key:2,"data-testid":"select-loading",class:"select__loading"};function te(e,o,n,r,l,s){const u=i("IconArrow"),g=i("p-input"),p=i("IconCheck"),d=i("DropdownItem"),h=i("IconLoading"),m=i("Dropdown");return c(),C(m,{modelValue:e.isOpen,"onUpdate:modelValue":o[1]||(o[1]=a=>e.isOpen=a),class:D(["select",e.classNames]),"data-testid":"select","aria-label":"select",disabled:e.disabled},{activator:f(()=>[v(g,{modelValue:e.search,"onUpdate:modelValue":o[0]||(o[0]=a=>e.search=a),"data-testid":"select-search",class:"select__search",size:e.size,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,onFocus:e.onFocus},{append:f(()=>[v(u,{class:"select__caret"})]),_:1},8,["modelValue","size","placeholder","disabled","readonly","onFocus"])]),default:f(()=>[!e.isLoading&&e.items.length===0?(c(),w("div",Y,[S(e.$slots,"empty",{},()=>[V(b(e.emptyText),1)])])):(c(!0),w(M,{key:1},K(e.items,(a,_)=>(c(),C(d,{key:_,"data-testid":"select-item",class:D({selected:e.isSelected(a)}),onClick:k=>e.select(a)},{default:f(()=>[L("div",Z,[L("div",x,[S(e.$slots,"option",{isSelected:e.isSelected(a),item:a},()=>[V(b(a.text),1)])]),v(p,{class:"select__option-checked"})])]),_:2},1032,["class","onClick"]))),128)),e.isLoading?(c(),w("div",ee,[v(h,{width:"14",height:"14"}),S(e.$slots,"loading",{},()=>[V(b(e.loadingText),1)])])):P("",!0)]),_:3},8,["modelValue","disabled","class"])}const me=J(X,[["render",te]]);export{me as p};
