import{D as B,a as N}from"./Dropdown.c1bb9e3d.js";import{p as A}from"./Input.c170ae2b.js";import{I as T}from"./16.b259f95e.js";import{I as F}from"./16.d1061e9b.js";import{p as E}from"./SpinnerRing.8f1cd9a7.js";import{d as j,u as q}from"./adapter.7c97a812.js";import{h as v,f as z,g as _,i as P,z as U,E as M,_ as R,b as c,o as i,l as C,w as I,d as f,c as b,r as w,k as V,t as k,P as G,n as L,a as D,O as H,p as J}from"../app.ee7072c2.js";import{u as K}from"./use-loading.ea3f4c50.js";import{i as $}from"./value.27565d8f.js";import{i as Q}from"./index.7eb79c8e.js";const W=j({setup({props:e,keyword:o}){const l=q(e);return v(()=>l.value.filter(n=>n.text.toLowerCase().includes(o.value.toLowerCase())))}}),X=z({components:{Dropdown:B,DropdownItem:N,Input:A,IconArrow:T,IconCheck:F,IconLoading:E},props:{modelValue:{type:[String,Number,Boolean,Array,Object,Date],default:""},selected:{type:Object,default:()=>({text:"",value:void 0})},options:{type:Array,default:()=>[]},placeholder:{type:String,default:""},emptyText:{type:String,default:"No Data"},loadingText:{type:String,default:"Loading..."},adapter:{type:Object,default:()=>W},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},models:{prop:"modelValue",event:"update:modelValue"},emits:["change","update:modelValue","update:selected","userInput"],setup(e,{emit:o}){const l=M(),d=_(),n=_(""),s=_(!1),u=K({elapsed:!1}),y={props:e,keyword:n,isOpen:s,isLoading:u},p=e.adapter.setup(y),r=v({get(){var t;return(t=p.value.find(O=>$(O.value,e.modelValue)))!=null?t:{text:"",value:void 0}},set(t){o("change",t),o("update:modelValue",t.value),o("update:selected",t),s.value&&o("userInput",t)}}),g=v(()=>{const t=[];return s.value&&t.push("select--open"),e.disabled&&t.push("select--disabled"),e.readonly&&t.push("select--readonly"),t}),m=v({get(){var t;return s.value?n.value:(t=r.value)==null?void 0:t.text},set(t){t!==m.value&&(n.value=t)}});function a(t){r.value=t}function h(){!e.disabled&&!e.readonly&&(s.value=!0)}function S(t){return $(t.value,r.value.value)}return P(s,t=>{t||(n.value="")},{flush:"post"}),Q(()=>{s.value&&d.value&&d.value!==document.activeElement&&d.value.focus()}),U(()=>{var t;(t=l==null?void 0:l.proxy)!=null&&t.$el&&(d.value=l.proxy.$el.querySelector(".select__search"))}),{classNames:g,model:r,isOpen:s,isLoading:u,search:m,items:p,select:a,onFocus:h,isSelected:S}}});const Y={key:0,"data-testid":"select-no-data",class:"select__empty"},Z={class:"select__option"},x={class:"select__option-text"},ee={key:2,"data-testid":"select-loading",class:"select__loading"};function te(e,o,l,d,n,s){const u=c("Input"),y=c("IconArrow"),p=c("IconCheck"),r=c("DropdownItem"),g=c("IconLoading"),m=c("Dropdown");return i(),C(m,{modelValue:e.isOpen,"onUpdate:modelValue":o[1]||(o[1]=a=>e.isOpen=a),class:L(["select",e.classNames]),"data-testid":"select","aria-label":"select",disabled:e.disabled},{activator:I(()=>[f(u,{modelValue:e.search,"onUpdate:modelValue":o[0]||(o[0]=a=>e.search=a),"data-testid":"select-search",class:"select__search",placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,onFocus:e.onFocus},null,8,["modelValue","placeholder","disabled","readonly","onFocus"]),f(y,{class:"select__caret"})]),default:I(()=>[!e.isLoading&&e.items.length===0?(i(),b("div",Y,[w(e.$slots,"empty",{},()=>[V(k(e.emptyText),1)])])):(i(!0),b(H,{key:1},G(e.items,(a,h)=>(i(),C(r,{key:h,"data-testid":"select-item",class:L({selected:e.isSelected(a)}),onClick:S=>e.select(a)},{default:I(()=>[D("div",Z,[D("div",x,[w(e.$slots,"option",{isSelected:e.isSelected(a),item:a},()=>[V(k(a.text),1)])]),f(p,{class:"select__option-checked"})])]),_:2},1032,["class","onClick"]))),128)),e.isLoading?(i(),b("div",ee,[f(g,{width:"14",height:"14"}),w(e.$slots,"loading",{},()=>[V(k(e.loadingText),1)])])):J("",!0)]),_:3},8,["modelValue","disabled","class"])}const pe=R(X,[["render",te]]);export{pe as p};
