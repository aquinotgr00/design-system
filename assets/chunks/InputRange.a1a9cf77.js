import{t as _,e as q}from"./index.71be0f73.js";import{u as V}from"./index.eb95be55.js";import{z as G,i as E,N as H,_ as J,f as K,C as b,g as w,h as r,k as Q,o as W,c as Y,m as d,d as A,E as N,a0 as S,n as Z}from"../app.5d0b0c3f.js";import{t as x}from"./throttle.f0db56e4.js";import{k as h,s as T}from"./index.cc846abb.js";function B(e,t){const s=G();E(e,async c=>{if(s.value&&s.value.unset(),c){const{default:v}=await J(()=>import("./interact.min.5a95aeaa.js").then(l=>l.i),["assets/chunks/interact.min.5a95aeaa.js","assets/app.5d0b0c3f.js"]),n=x(t,1e3/120);s.value=v(c).styleCursor(!1).draggable({onmove:n})}}),H(async()=>{s.value&&s.value.unset()})}const ee=K({props:{modelValue:{type:[Number,Array],default:void 0},start:{type:Number,default:void 0},end:{type:Number,default:void 0},step:{type:[String,Number],default:1},min:{type:[String,Number],default:0},max:{type:[String,Number],default:100},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1}},models:{prop:"modelValue",event:"update:modelValue"},emits:["change","update:modelValue","update:end","update:start"],setup(e,{emit:t}){const s=_("track"),c=_("thumb-start"),v=_("thumb-end"),n=h(b(e,"min")),l=h(b(e,"max")),f=h(b(e,"step")),y=w(Array.isArray(e.modelValue)?e.modelValue[0]:e.start??n.value),k=w(Array.isArray(e.modelValue)?e.modelValue[1]:e.end??e.modelValue??l.value),R=r(()=>e.multiple?y.value+f.value:n.value),$=r(()=>e.multiple?k.value-f.value:l.value),i=V(y.value,n,$),o=V(k.value,R,l),{width:D,left:I}=q(s),L=r({get(){return Array.isArray(e.modelValue)?e.modelValue[0]:e.start??n.value},set(a){t("update:start",a)}}),P=r({get(){return Array.isArray(e.modelValue)?e.modelValue[1]:Number.isFinite(e.modelValue)?e.modelValue:e.end??l.value},set(a){t("update:end",a)}}),p=r(()=>(i.value-n.value)/(l.value-n.value)*100),U=r(()=>(o.value-n.value)/(l.value-n.value)*100),z=r(()=>{const a=[];return e.disabled&&a.push("input-range--disabled"),e.readonly&&a.push("input-range--readonly"),e.error&&a.push("input-range--error","state--error"),a}),M=r(()=>({width:`${p.value}%`})),F=r(()=>({width:`${U.value-p.value}%`}));function m(a){const g=(a.pageX-I.value)/D.value*(l.value-n.value)+n.value;return Math.round(g/f.value)*f.value}function O(a){!e.disabled&&!e.readonly&&(i.value=m(a))}function X(a){if(!e.disabled&&!e.readonly){const u=m(a);if(e.multiple){const C=Math.abs(u-i.value),g=Math.abs(u-o.value);if(C<g){i.value=u;return}}o.value=u}}function j(a){!e.disabled&&!e.readonly&&(o.value=m(a))}return B(c,a=>{!e.disabled&&!e.readonly&&(i.value=m(a))}),B(v,a=>{!e.disabled&&!e.readonly&&(o.value=m(a))}),T(i,L),T(o,P),E([i,o],([a,u])=>{y.value=a,k.value=u,e.multiple?(t("update:modelValue",[a,u]),t("change",[a,u])):(t("update:modelValue",u),t("change",u))}),{classNames:z,lowerStyle:M,upperStyle:F,onClickLowerTrack:O,onClickActiveTrack:X,onClickUpperTrack:j}}});const ae={ref:"track",class:"input-range__tracks"},te={ref:"thumb-start","data-testid":"thumb-start",class:"input-range__thumb input-range__thumb-start"},le={ref:"thumb-end","data-testid":"thumb-end",class:"input-range__thumb input-range__thumb-end"};function ne(e,t,s,c,v,n){return W(),Y("div",{"data-testid":"input-range",class:Z(["input-range",e.classNames])},[d("div",ae,[A(d("div",{"data-testid":"track-lower",class:"input-range__track input-range__track-lower",style:S(e.lowerStyle),onClick:t[0]||(t[0]=(...l)=>e.onClickLowerTrack&&e.onClickLowerTrack(...l))},null,4),[[N,e.multiple]]),d("div",{ref:"track-active","data-testid":"track-active",class:"input-range__track input-range__track-active",style:S(e.upperStyle),onClick:t[1]||(t[1]=(...l)=>e.onClickActiveTrack&&e.onClickActiveTrack(...l))},[A(d("div",te,null,512),[[N,e.multiple]]),d("div",le,null,512)],4),d("div",{"data-testid":"track-upper",class:"input-range__track input-range__track-upper",onClick:t[2]||(t[2]=(...l)=>e.onClickUpperTrack&&e.onClickUpperTrack(...l))})],512)],2)}const ce=Q(ee,[["render",ne]]);export{ce as p};
