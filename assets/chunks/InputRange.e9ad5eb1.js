import{t as _,e as H}from"./index.0ae26b57.js";import{u as S}from"./index.046c3cda.js";import{z as J,m as K,_ as Q,S as W,i as Y,C as b,j as N,k as r,l as Z,f as x,o as ee,c as ae,h as d,d as T,E as B,a0 as E,n as te}from"../app.12128179.js";import{t as le}from"./throttle.1ff994ca.js";import{j as h,s as R}from"./index.d402bf23.js";function $(e,t){const c=J();K(async()=>{if(e.value){const{default:s}=await Q(()=>import("./interact.min.acdd77fa.js").then(l=>l.i),["assets/chunks/interact.min.acdd77fa.js","assets/app.12128179.js"]),v=le(t,1e3/120);c.value=s(e.value).styleCursor(!1).draggable({onmove:v})}}),W(async()=>{var s;(s=c.value)==null||s.unset()})}const ne=Y({props:{modelValue:{type:[Number,Array],default:void 0},start:{type:Number,default:void 0},end:{type:Number,default:void 0},step:{type:[String,Number],default:1},min:{type:[String,Number],default:0},max:{type:[String,Number],default:100},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1}},models:{prop:"modelValue",event:"update:modelValue"},emits:["change","update:modelValue","update:end","update:start"],setup(e,{emit:t}){var C,V,w;const c=_("track"),s=_("thumb-start"),v=_("thumb-end"),l=h(b(e,"min")),n=h(b(e,"max")),f=h(b(e,"step")),y=N(Array.isArray(e.modelValue)?e.modelValue[0]:(C=e.start)!=null?C:l.value),k=N(Array.isArray(e.modelValue)?e.modelValue[1]:(w=(V=e.end)!=null?V:e.modelValue)!=null?w:n.value),D=r(()=>e.multiple?y.value+f.value:l.value),I=r(()=>e.multiple?k.value-f.value:n.value),i=S(y.value,l,I),o=S(k.value,D,n),{width:L,left:M}=H(c),P=r({get(){var a;return Array.isArray(e.modelValue)?e.modelValue[0]:(a=e.start)!=null?a:l.value},set(a){t("update:start",a)}}),U=r({get(){var a;return Array.isArray(e.modelValue)?e.modelValue[1]:Number.isFinite(e.modelValue)?e.modelValue:(a=e.end)!=null?a:n.value},set(a){t("update:end",a)}}),p=r(()=>(i.value-l.value)/(n.value-l.value)*100),z=r(()=>(o.value-l.value)/(n.value-l.value)*100),j=r(()=>{const a=[];return e.disabled&&a.push("input-range--disabled"),e.readonly&&a.push("input-range--readonly"),e.error&&a.push("input-range--error","state--error"),a}),F=r(()=>({width:`${p.value}%`})),O=r(()=>({width:`${z.value-p.value}%`}));function m(a){const g=(a.pageX-M.value)/L.value*(n.value-l.value)+l.value;return Math.round(g/f.value)*f.value}function X(a){!e.disabled&&!e.readonly&&(i.value=m(a))}function q(a){if(!e.disabled&&!e.readonly){const u=m(a);if(e.multiple){const A=Math.abs(u-i.value),g=Math.abs(u-o.value);if(A<g){i.value=u;return}}o.value=u}}function G(a){!e.disabled&&!e.readonly&&(o.value=m(a))}return $(s,a=>{!e.disabled&&!e.readonly&&(i.value=m(a))}),$(v,a=>{!e.disabled&&!e.readonly&&(o.value=m(a))}),R(i,P),R(o,U),Z([i,o],([a,u])=>{y.value=a,k.value=u,e.multiple?(t("update:modelValue",[a,u]),t("change",[a,u])):(t("update:modelValue",u),t("change",u))}),{classNames:j,lowerStyle:F,upperStyle:O,onClickLowerTrack:X,onClickActiveTrack:q,onClickUpperTrack:G}}});const ue={ref:"track",class:"input-range__tracks"},re={ref:"thumb-start","data-testid":"thumb-start",class:"input-range__thumb input-range__thumb-start"},se={ref:"thumb-end","data-testid":"thumb-end",class:"input-range__thumb input-range__thumb-end"};function ie(e,t,c,s,v,l){return ee(),ae("div",{"data-testid":"input-range",class:te(["input-range",e.classNames])},[d("div",ue,[T(d("div",{"data-testid":"track-lower",class:"input-range__track input-range__track-lower",style:E(e.lowerStyle),onClick:t[0]||(t[0]=(...n)=>e.onClickLowerTrack&&e.onClickLowerTrack(...n))},null,4),[[B,e.multiple]]),d("div",{ref:"track-active","data-testid":"track-active",class:"input-range__track input-range__track-active",style:E(e.upperStyle),onClick:t[1]||(t[1]=(...n)=>e.onClickActiveTrack&&e.onClickActiveTrack(...n))},[T(d("div",re,null,512),[[B,e.multiple]]),d("div",se,null,512)],4),d("div",{"data-testid":"track-upper",class:"input-range__track input-range__track-upper",onClick:t[2]||(t[2]=(...n)=>e.onClickUpperTrack&&e.onClickUpperTrack(...n))})],512)],2)}const ye=x(ne,[["render",ie]]);export{ye as p};
