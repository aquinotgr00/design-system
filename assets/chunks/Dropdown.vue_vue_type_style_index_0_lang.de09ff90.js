import{t as k,o as G,c as b}from"./index.f92bfe5e.js";import{p as W}from"./Button.c45fb4d8.js";import{d as B,f as v,S,_ as I,o as p,y as f,z as h,r as C,n as X,J as O,a as x,t as T,h as K,X as U,w as V,U as R,B as g,c as j,a1 as D,D as J,A as $,x as z,T as q,a5 as H,l as Q}from"./framework.76afac0a.js";import{u as E}from"./utils-6ba05f5b.d8ec137d.js";import{u as Y}from"./use-focus.ae494a4f.js";import{z as Z,A as ee,b as te,L as oe,T as ae}from"./floating-ui.dom.browser.min.3a6ea315.js";import{u as ne}from"./index.66044519.js";import{I as se}from"./16.2c528cc2.js";var le=E,P=le.createSVGComponent(P,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},[{elem:"path",attrs:{d:"M11 8L6 13 5.3 12.3 9.6 8 5.3 3.7 6 3z"}}]),re=P;const ie=re,A=Symbol("DROPDOWN_CONTEXT"),ue=B({props:{text:{type:String,default:""},href:{type:String,default:void 0},active:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:s}){const n=S(A,void 0,!0);function o(e){s("click",e),(n!=null&&n.close&&!e.defaultPrevented||e.defaultPrevented&&t.href)&&n.close()}const r=v(()=>{const e=[""];return t.active&&e.push("dropdown__item--active"),e}),l=v(()=>{let e="button";return t.href&&(e="a"),e});return{handleOnClick:o,classNames:r,tagName:l}}});function de(t,s,n,o,r,l){return p(),f(O(t.tagName),{"data-testid":"dropdown-item",class:X(["dropdown__item",t.classNames]),href:t.href,onClick:t.handleOnClick},{default:h(()=>[C(t.$slots,"default",{},()=>[x(T(t.text),1)])]),_:3},8,["class","href","onClick"])}const ce=I(ue,[["render",de]]);var pe=E,M=pe.createSVGComponent(M,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},[{elem:"path",attrs:{d:"M6.7 12.3L2.9 8.5 15 8.5 15 7.5 2.9 7.5 6.7 3.7 6 3 1 8 6 13z"}}]),fe=M;const ve=fe,N=Symbol("DropdownTree"),me=B({components:{DropdownItem:ce,IconNext:ie,IconBack:ve},props:{text:{type:String,default:""},noCaret:{type:Boolean,default:!1}},emits:["click"],setup(t,{slots:s,emit:n}){var a;const o=S(N,void 0,!0),r=K("slide-left"),l=v(()=>o===void 0),e=(a=o==null?void 0:o.tree)!=null?a:U({_level:0,slots:s}),i=()=>{e.value={_level:e.value._level+1,prev:e.value,slots:s}},d=()=>{e.value.prev&&(e.value=e.value.prev)},_=v(()=>e.value.slots.default),w=v(()=>!!(l.value&&e.value.prev));V(e,(u,y)=>{r.value=u._level>y._level?"slide-left":"slide-right"}),l.value&&R(N,{tree:e,next:i,back:d});function m(){l.value&&(e.value={prev:void 0,_level:0,slots:s})}function c(){const u=new MouseEvent("click");n("click",u),u.defaultPrevented||i()}return{isRoot:l,tree:e,view:_,next:i,back:d,reset:m,canBack:w,transition:r,handleOnClick:c}}});const _e=z("div",{class:"dropdown__group-content"},null,-1),we={class:"dropdown__subitem__content"};function be(t,s,n,o,r,l){const e=g("IconBack"),i=g("DropdownItem"),d=g("IconNext");return p(),f(q,{name:t.transition,mode:"out-in"},{default:h(()=>[(p(),j("div",{key:t.tree._level,"data-testid":"dropdown-subitem",class:"dropdown__subitem"},[t.canBack?(p(),f(i,{key:"btn-back","data-testid":"dropdown-back",class:"dropdown__subitem__btn dropdown__subitem__btn--back",onClick:s[0]||(s[0]=D(_=>t.back(),["prevent"]))},{default:h(()=>[C(t.$slots,"button-back",{},()=>[J(e,{class:"dropdown__subitem__next"}),_e])]),_:3})):$("",!0),t.isRoot?(p(),f(O(t.view),{key:2})):(p(),f(i,{key:"btn-next",class:"dropdown__subitem__btn",onClick:D(t.handleOnClick,["prevent"])},{default:h(()=>[z("div",we,[C(t.$slots,"button-content",{next:t.next,back:t.back},()=>[x(T(t.text),1)])]),t.noCaret?$("",!0):(p(),f(d,{key:0,"data-testid":"dropdown-subitem-next",class:"dropdown__subitem__next"}))]),_:3},8,["onClick"]))]))]),_:3},8,["name"])}const he=I(me,[["render",be]]),Se=B({components:{Button:W,DropdownGroup:he,IconArrow:se},props:{modelValue:{type:Boolean,default:!1},text:{type:String,default:""},placement:{type:String,default:"bottom-start"},variant:{type:String,default:"solid"},color:{type:String,default:"default"},size:{type:String,default:"md"},icon:{type:Boolean,default:!1},pill:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},noCaret:{type:Boolean,default:!1},divider:{type:Boolean,default:!1}},models:{prop:"modelValue",event:"update:modelValue"},emits:["show","hide","update:modelValue"],setup(t,{emit:s}){const n=k("dropdown"),o=k("menu"),r=k("wizard"),l=H(t,"placement"),e=ne(t),{next:i,prev:d}=Y(o),_=v(()=>{const a=[""];return t.divider&&a.push("dropdown--divider"),a});function w(){t.disabled||(e.value?c():m())}function m(){t.disabled||(e.value=!0,s("show"))}function c(){t.disabled||(e.value=!1,s("hide"))}return G(o,()=>{e.value&&setTimeout(()=>{c()})},{ignore:[n]}),b("Escape",a=>{const u=a.target;e.value&&(c(),typeof u.blur=="function"&&u.blur())}),b(["ArrowUp"],a=>{a.preventDefault(),e.value&&d()}),b(["ArrowDown"],a=>{a.preventDefault(),e.value&&i()}),b(["Tab"],a=>{a.preventDefault(),e.value&&(a.shiftKey?d():i())}),Q(a=>{if(n.value&&o.value){const u=Z(n.value,o.value,()=>{ee(n.value,o.value,{strategy:"absolute",placement:l.value,middleware:[te(),oe(),ae(8)]}).then(({x:y,y:L,placement:F})=>{o.value&&(o.value.dataset.popperPlacement=F,o.value.style.left=`${y||0}px`,o.value.style.top=`${L||0}px`)})});a(u)}},{flush:"post"}),V(e,a=>{!a&&r.value&&r.value.reset()},{immediate:!0}),R(A,{isOpen:e,toggle:w,open:m,close:c}),{isOpen:e,classNames:_,toggle:w,open:m,close:c}}});export{ie as I,Se as _,he as a,ce as p};
