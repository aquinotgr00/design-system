import{p as ee}from"./index.d8de1b1c.js";import{q as re,v as ie,l as le,c as de,j as x,x as ue,t as M,y as A,r as K,e as ce,d as fe,s as Y}from"./theme.8e6a443b.js";import{s as $,r as h,b as pe,a1 as U,a0 as Z,V as X,ab as ve,c as O,u as G,w as S,l as me,m as j,_ as F,J as y,x as z,p as B,G as p,N as g,B as C,z as V,a8 as te,a7 as k,y as ge,t as oe,q as T,h as _e,o as he,a9 as J,T as ye,v as Pe}from"./framework.303a6298.js";import{I as we,a as $e}from"./16.f4c833cf.js";import{g as be}from"./commonjsHelpers.042e6b4d.js";import{u as Se}from"./utils-6ba05f5b.9deb8fd3.js";import{I as De}from"./Dropdown.e57796b1.js";import{p as Ee}from"./Button.a7efe8a4.js";import{p as Ne}from"./Divider.5509941a.js";import{p as Ce}from"./Select.ef2832ad.js";import{H as Oe}from"./Heading.5ef64652.js";import{u as Ie}from"./use-selector.d4e18244.js";import{f as Te}from"./focus.ec676fab.js";import{u as R}from"./index.59e0aac4.js";import{d as Le}from"./debounce.425ad733.js";import{r as ke}from"./isObjectLike.53b0037d.js";import{t as Ve}from"./toInteger.cccd26ae.js";import{t as je}from"./toNumber.09abc7f0.js";import{t as Q}from"./toString.314d06e3.js";import{u as Fe}from"./use-loading.61770e2a.js";var ze=ke.isFinite,Be=Math.min;function Me(e){var n=Math[e];return function(o,a){if(o=je(o),a=a==null?0:Be(Ve(a),292),a&&ze(o)){var t=(Q(o)+"e").split("e"),r=n(t[0]+"e"+(+t[1]+a));return t=(Q(r)+"e").split("e"),+(t[0]+"e"+(+t[1]-a))}return n(o)}}var Re=Me("round");const He=Re,We=Symbol("DropzoneContext");function Ae(e,n){const o=$(!0),a=$(),t=h(),r=h();async function l(){if(i(),e.value){const{default:f}=await Z(()=>import("./interact.min.6dc930b6.js").then(s=>s.i),["assets/chunks/interact.min.6dc930b6.js","assets/chunks/commonjsHelpers.042e6b4d.js"]);a.value=f(n.value,{context:e.value}).dropzone({accept:".pdf-object",overlap:.95,enabled:o.value,checker(s,d,v,c,P,w,D){var E;return v&&(((E=e.value)==null?void 0:E.contains(D))||D.classList.contains("pdf-object--external"))},ondragenter(s){r.value=s.target,s.target.classList.add("hover")},ondragleave(s){s.target.classList.remove("hover")},ondrop(s){r.value=s.target,t.value=s.target,s.target.classList.remove("hover")}})}}function i(){a.value&&a.value.unset()}return re(e,f=>{f.some(d=>d.type==="childList"&&d.target.matches(n.value))&&l()},{subtree:!0,childList:!0}),pe(()=>{i()}),U(We,{dropzone:t,hoverzone:r}),o}const q=Symbol("PDFObjects"),Yt=Symbol("PDFObjects");function Je(e){var f,s,d,v;const n=O(()=>He(e.width/e.height,2)),o=h((f=e.minWidth)!=null?f:e.width*.5),a=h((s=e.maxWidth)!=null?s:e.width*2),t=h((d=e.minHeight)!=null?d:e.height*.5),r=h((v=e.maxHeight)!=null?v:e.height*2),l=R(e.width,o,a),i=R(e.height,t,r);return S(()=>e.minWidth,c=>{Number.isFinite(c)&&(o.value=c)}),S(()=>e.minHeight,c=>{Number.isFinite(c)&&(t.value=c)}),S(()=>e.maxWidth,c=>{Number.isFinite(c)&&(a.value=c)}),S(()=>e.maxHeight,c=>{Number.isFinite(c)&&(r.value=c)}),{ratio:n,width:l,height:i,minWidth:o,maxWidth:a,minHeight:t,maxHeight:r}}function Qt(e){var w;const{objects:n,page:o}=X(q),a=h((w=e.page)!=null?w:o.value),t=h(e.x),r=h(e.y),l=Symbol("PDFObject"),{width:i,height:f,minWidth:s,maxWidth:d,minHeight:v,maxHeight:c,ratio:P}=Je(e);return n.set(l,ve({id:l,page:a,x:t,y:r,width:i,height:f})),ie(()=>{Number.isFinite(a.value)||de(o).toBeTruthy().then(()=>{a.value=o.value})}),le(()=>{n.delete(l)}),{id:l,x:t,y:r,page:a,width:i,height:f,minWidth:s,minHeight:v,maxWidth:d,maxHeight:c,ratio:P}}function eo(e){const{root:n}=X(q),o=O(()=>`.page[data-page-number="${G(e)}"]`);return Ie(o,n)}const to=Le(Te,100),ae=Symbol("PdfViewer");function ne(){return X(ae,()=>{const e=h(1),n=h(1),o=h(0);return{page:e,scale:n,totalPage:o}},!0)}function Ze(e,n={}){const o=h(!1),a=O(()=>{var d;return(d=G(n.offsetTop))!=null?d:0}),t=O(()=>{var d;return(d=G(e))==null?void 0:d.parentElement}),{top:r,height:l}=x(t),{top:i,width:f,left:s}=x(e);return me(d=>{o.value&&e.value&&(r.value-a.value>=0?(e.value.style.setProperty("height",`${window.innerHeight-i.value}px`),e.value.style.setProperty("width","100%")):(t.value.style.setProperty("min-height",`${l.value}px`),e.value.style.setProperty("position","fixed"),e.value.style.setProperty("top",`${a.value}px`),e.value.style.setProperty("left",`${s.value}px`),e.value.style.setProperty("width",`${f.value}px`),e.value.style.setProperty("height",`${window.innerHeight-a.value}px`)),d(()=>{t.value.style.removeProperty("min-height"),e.value.style.removeProperty("position"),e.value.style.removeProperty("top"),e.value.style.removeProperty("left"),e.value.style.removeProperty("width"),e.value.style.removeProperty("height")}))}),o}var Ge=Se,se=Ge.createSVGComponent(se,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},[{elem:"path",attrs:{d:"M8 5L13 10 12.3 10.7 8 6.4 3.7 10.7 3 10z"}}]),Ue=se;const Xe=be(Ue),qe=j({components:{IconZoomIn:we,IconZoomOut:$e,IconPrev:Xe,IconNext:De,pButton:Ee,pDivider:Ne,pSelect:Ce},setup(){const{page:e,scale:n,totalPage:o}=ne(),a=O(()=>Array.from({length:o.value}).map((f,s)=>({text:`${s+1}`,value:s+1})));function t(){n.value=Math.round(n.value/.1)*.1+.1}function r(){n.value=Math.round(n.value/.1)*.1-.1}function l(){e.value++}function i(){e.value--}return{page:e,pages:a,scale:n,totalPage:o,zoomIn:t,zoomOut:r,next:l,prev:i}}});const xe={"data-testid":"pdf-navigation",class:"pdf__navigation"},Ke={class:"pdf__navigation-container"},Ye={class:"pdf__navigation-scale"},Qe={"data-testid":"pdf-total",class:"flex-shrink-0"};function et(e,n,o,a,t,r){const l=y("IconZoomOut"),i=y("p-button"),f=y("IconZoomIn"),s=y("p-divider"),d=y("p-select"),v=y("IconPrev"),c=y("IconNext");return z(),B("div",xe,[p("div",Ke,[g(i,{"data-testid":"pdf-zoom-out",variant:"ghost",size:"xs",icon:"",onClick:e.zoomOut},{default:C(()=>[g(l)]),_:1},8,["onClick"]),p("span",Ye,V((e.scale*100).toFixed(0))+"% ",1),g(i,{"data-testid":"pdf-zoom-in",variant:"ghost",size:"xs",icon:"",onClick:e.zoomIn},{default:C(()=>[g(f)]),_:1},8,["onClick"]),g(s,{vertical:""}),g(d,{modelValue:e.page,"onUpdate:modelValue":n[0]||(n[0]=P=>e.page=P),options:e.pages,size:"xs"},null,8,["modelValue","options"]),p("span",Qe,"of "+V(e.totalPage),1),g(i,{"data-testid":"pdf-prev",variant:"ghost",size:"xs",icon:"",onClick:e.prev},{default:C(()=>[g(v)]),_:1},8,["onClick"]),g(i,{"data-testid":"pdf-next",variant:"ghost",size:"xs",icon:"",onClick:e.next},{default:C(()=>[g(c)]),_:1},8,["onClick"])])])}const tt=F(qe,[["render",et]]),ot="/design-system/assets/pdf-loading.2dcb0a6f.svg",at=j({setup(){return{PDF_LOADING_IMG:ot}}});const nt={"data-testid":"pdf-loading",class:"pdf__loading"},st=["src"];function rt(e,n,o,a,t,r){return z(),B("div",nt,[p("img",{src:e.PDF_LOADING_IMG,width:"793",height:"1122"},null,8,st)])}const it=F(at,[["render",rt]]),lt=j({directives:{pAspectRatio:ee},components:{Heading:Oe},props:{url:{type:String,default:""},pdfJs:{type:Object,default:()=>({})},error:{type:Object,default:()=>({})}},setup(){return{}}});const dt={"data-testid":"pdf-error",class:"pdf__error"},ut={class:"mt-7"},ct=p("dt",null,"URL:",-1),ft={class:"truncate"},pt=["href"],vt=p("dt",null," Reason: ",-1),mt=p("dt",null," PDFJS Version: ",-1);function gt(e,n,o,a,t,r){const l=y("Heading"),i=te("p-aspect-ratio");return k((z(),B("div",dt,[g(l,{element:"h3"},{default:C(()=>[ge(" Failed to load PDF ")]),_:1}),p("dl",ut,[ct,p("dd",ft,[p("a",{href:e.url,target:"_blank"},[p("code",null,V(e.url),1)],8,pt)]),vt,p("dd",null,[p("code",null,V(e.error.message),1)]),mt,p("dd",null,[p("code",null,V(e.pdfJs.version),1)])])])),[[i,1122/793]])}const _t=F(lt,[["render",gt]]),ht=["mousemove","mousedown","touchstart","keydown","scroll"];function yt(e,n=5e3){const o=h(!1);let a;function t(){o.value=!1,a&&clearTimeout(a),a=setTimeout(()=>{o.value=!0},n)}return ue(e,ht,t,{passive:!0}),o}const Pt=j({props:{dropTarget:{type:String,default:".pdfViewer > .page"}},setup(e){const n=new Map,o=M("root"),a=ne(),t=oe(e,"dropTarget");return U(q,{...a,objects:n,root:o}),Ae(o,t),{}}}),wt={ref:"root",class:"pdf-objects","data-testid":"pdf-objects"};function $t(e,n,o,a,t,r){return z(),B("div",wt,[T(e.$slots,"default")],512)}const bt=F(Pt,[["render",$t]]);function St(e,n){const o=$(),a=$(),t=$(),r=$(),l=$(),i=$(),f=O(()=>{var u,_;return(_=(u=o.value)==null?void 0:u.numPages)!=null?_:0}),s=R(1,.1,2),d=R(1,1,f),v=Fe(),c=$(!1),P=$(),w=A(),D=A(),E=A();async function H(u,_){v.value=!0,P.value=void 0;try{i.value=await Z(()=>import("./pdf.f4a5ea7b.js").then(b=>b.p),["assets/chunks/pdf.f4a5ea7b.js","assets/chunks/commonjsHelpers.042e6b4d.js","assets/chunks/vite-browser-external_commonjs-proxy.005f2268.js"]),typeof window<"u"&&"Worker"in window&&(i.value.GlobalWorkerOptions.workerSrc=`https://cdn.jsdelivr.net/npm/pdfjs-dist@${i.value.version}/build/pdf.worker.min.js`),await L(),u&&(r.value=i.value.getDocument({url:u,password:_,cMapUrl:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${i.value.version}/cmaps/`,cMapPacked:!0,disableStream:!1}),o.value=await r.value.promise,t.value.setDocument(o.value),l.value.setDocument(o.value),w.trigger(o.value))}catch(b){b instanceof Error&&(P.value=b,D.trigger(b))}finally{v.value=!1}}async function L(){var u,_;r.value&&!r.value.destroyed&&(await r.value.destroy(),o.value=void 0,r.value=void 0,(u=t.value)==null||u.setDocument(null),(_=l.value)==null||_.setDocument(null))}async function W(){if(typeof navigator<"u"&&e.value&&n.value){const{NullL10n:u,PDFLinkService:_,PDFViewer:b,EventBus:m}=await Z(()=>import("./pdf_viewer.9f3686b5.js").then(N=>N.p),["assets/chunks/pdf_viewer.9f3686b5.js","assets/chunks/commonjsHelpers.042e6b4d.js","assets/chunks/pdf.f4a5ea7b.js","assets/chunks/vite-browser-external_commonjs-proxy.005f2268.js"]),I=new m;I.on("pagesinit",()=>{const N=n.value.clientWidth>=793;t.value.currentScaleValue=N?"1":"page-width",t.value.currentPageNumber=d.value,c.value=!0,E.trigger(t.value)}),I.on("pagechanging",N=>{d.value=N.pageNumber}),I.on("scalechanging",N=>{s.value=N.scale}),a.value=I,l.value=new _({eventBus:a.value}),t.value=new b({container:e.value,viewer:n.value,eventBus:a.value,linkService:l.value,l10n:u,useOnlyCssZoom:!1,removePageBorders:!0}),l.value.setViewer(t.value)}}return S([e,n],async([u,_])=>{t.value?u&&_&&(t.value.container=u,t.value.viewer=_,o.value&&t.value.setDocument(o.value),t.value.update()):await W()}),S(d,u=>{t.value&&u!==t.value.currentPageNumber&&(t.value.currentPageNumber=u)}),S(s,u=>{t.value&&u!==t.value.currentScale&&(t.value.currentScale=u)}),_e(async()=>{var u;(u=t.value)==null||u.cleanup(),await L()}),{page:d,scale:s,totalPage:f,loading:v,error:P,ready:c,openDoc:H,closeDoc:L,pdfDoc:o,pdfEventBus:a,pdfViewer:t,pdfLoadingTask:r,pdfLinkService:l,pdfJS:i,onLoaded:w.on,onError:D.on,onReady:E.on}}const Dt=j({directives:{pAspectRatio:ee},components:{PdfObjects:bt,PdfNavigation:tt,PdfLoading:it,PdfError:_t},props:{src:{type:String,default:""},page:{type:Number,default:1},scale:{type:Number,default:1},password:{type:String,default:void 0},layout:{type:String,default:"fixed"},ratio:{type:[Number,String],default:210/297},offsetTop:{type:[Number,String],default:0}},emits:["ready","loaded","error","error-password","update:page","update:scale"],setup(e,{emit:n}){const o=M("root"),a=M("container"),t=M("viewer"),r=yt(a),l=K(e,"page"),i=K(e,"scale"),f=ce(oe(e,"offsetTop"),{nanToZero:!0}),s=Ze(o,{offsetTop:f}),d=O(()=>{const m=[];return e.layout&&m.push(`pdf-viewer--layout-${e.layout}`),m}),{page:v,scale:c,totalPage:P,openDoc:w,closeDoc:D,pdfDoc:E,pdfJS:H,loading:L,error:W,onLoaded:u,onError:_,onReady:b}=St(a,t);return fe(()=>[e.src,e.password],([m,I])=>{w(m,I)},{debounce:500}),S(()=>e.layout,m=>{s.value=m==="fit"},{immediate:!0}),he(async()=>{e.src&&w(e.src,e.password)}),u(m=>{n("loaded",m)}),_(m=>{m.name==="PasswordException"?n("error-password",m):n("error",m)}),b(m=>{n("ready",m)}),U(ae,{page:v,scale:c,totalPage:P}),Y(v,l),Y(c,i),{pdfPage:v,pdfScale:c,classNames:d,totalPage:P,openDoc:w,closeDoc:D,pdfDoc:E,pdfJS:H,idle:r,loading:L,error:W}}});const Et=["data-page","data-scale"],Nt={class:"pdf__header"},Ct={ref:"container",class:"pdf__container pdfContainer"},Ot={ref:"viewer",class:"pdf__viewer pdfViewer"},It={class:"pdf__footer"};function Tt(e,n,o,a,t,r){const l=y("PdfLoading"),i=y("PdfError"),f=y("PdfNavigation"),s=y("PdfObjects"),d=te("p-aspect-ratio");return k((z(),B("div",{ref:"root","data-testid":"pdf-viewer",class:Pe(["pdf",e.classNames]),"data-page":e.pdfPage,"data-scale":e.pdfScale},[p("div",Nt,[T(e.$slots,"header",{page:e.pdfPage,scale:e.pdfScale,totalPage:e.totalPage,doc:e.pdfDoc})]),g(s,{class:"pdf__wrapper"},{default:C(()=>[p("div",Ct,[k(g(l,null,null,512),[[J,e.loading||!e.src]]),k(g(i,{url:e.src,"pdf-js":e.pdfJS,error:e.error},null,8,["url","pdf-js","error"]),[[J,!e.loading&&e.error]]),p("div",Ot,null,512),T(e.$slots,"default",{page:e.pdfPage,scale:e.pdfScale,totalPage:e.totalPage,doc:e.pdfDoc})],512),T(e.$slots,"container",{page:e.pdfPage,scale:e.pdfScale,totalPage:e.totalPage,doc:e.pdfDoc}),g(ye,{name:"slide-up"},{default:C(()=>[k(g(f,null,null,512),[[J,!e.idle&&!e.loading&&!e.error]])]),_:1}),T(e.$slots,"body",{page:e.pdfPage,scale:e.pdfScale,totalPage:e.totalPage,doc:e.pdfDoc})]),_:3}),p("div",It,[T(e.$slots,"footer",{page:e.pdfPage,scale:e.pdfScale,totalPage:e.totalPage,doc:e.pdfDoc})])],10,Et)),[[d,e.layout==="fixed"?e.ratio:!1]])}const oo=F(Dt,[["render",Tt]]),ao="/design-system/assets/Calibrator-v3.e869f66c.pdf";export{We as D,ao as F,Yt as P,q as a,eo as b,to as f,oo as p,Qt as u};
