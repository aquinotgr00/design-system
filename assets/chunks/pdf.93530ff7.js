var Ye=Object.defineProperty;var Ke=(ct,u,Y)=>u in ct?Ye(ct,u,{enumerable:!0,configurable:!0,writable:!0,value:Y}):ct[u]=Y;var It=(ct,u,Y)=>(Ke(ct,typeof u!="symbol"?u+"":u,Y),Y),re=(ct,u,Y)=>{if(!u.has(ct))throw TypeError("Cannot "+Y)};var b=(ct,u,Y)=>(re(ct,u,"read from private field"),Y?Y.call(ct):u.get(ct)),et=(ct,u,Y)=>{if(u.has(ct))throw TypeError("Cannot add the same private member more than once");u instanceof WeakSet?u.add(ct):u.set(ct,Y)},_t=(ct,u,Y,f)=>(re(ct,u,"write to private field"),f?f.call(ct,Y):u.set(ct,Y),Y),ae=(ct,u,Y,f)=>({set _(k){_t(ct,u,k,Y)},get _(){return b(ct,u,f)}}),dt=(ct,u,Y)=>(re(ct,u,"access private method"),Y);import{P as getDefaultExportFromCjs}from"../app.455a1cca.js";import{r as require$$5}from"./vite-browser-external_commonjs-proxy.68c5ddd9.js";function _mergeNamespaces(ct,u){for(var Y=0;Y<u.length;Y++){const f=u[Y];if(typeof f!="string"&&!Array.isArray(f)){for(const k in f)if(k!=="default"&&!(k in ct)){const z=Object.getOwnPropertyDescriptor(f,k);z&&Object.defineProperty(ct,k,z.get?z:{enumerable:!0,get:()=>f[k]})}}}return Object.freeze(Object.defineProperty(ct,Symbol.toStringTag,{value:"Module"}))}function commonjsRequire(ct){throw new Error('Could not dynamically require "'+ct+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdfExports={},pdf$2={get exports(){return pdfExports},set exports(ct){pdfExports=ct}};(function(module,exports){(function(u,Y){module.exports=Y()})(globalThis,()=>(()=>{var __webpack_modules__=[,(ct,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.VerbosityLevel=u.Util=u.UnknownErrorException=u.UnexpectedResponseException=u.UNSUPPORTED_FEATURES=u.TextRenderingMode=u.StreamType=u.RenderingIntentFlag=u.PermissionFlag=u.PasswordResponses=u.PasswordException=u.PageActionEventType=u.OPS=u.MissingPDFException=u.LINE_FACTOR=u.LINE_DESCENT_FACTOR=u.InvalidPDFException=u.ImageKind=u.IDENTITY_MATRIX=u.FormatError=u.FontType=u.FeatureTest=u.FONT_IDENTITY_MATRIX=u.DocumentActionEventType=u.CMapCompressionType=u.BaseException=u.BASELINE_FACTOR=u.AnnotationType=u.AnnotationStateModelType=u.AnnotationReviewState=u.AnnotationReplyType=u.AnnotationMode=u.AnnotationMarkedState=u.AnnotationFlag=u.AnnotationFieldFlag=u.AnnotationEditorType=u.AnnotationEditorPrefix=u.AnnotationEditorParamsType=u.AnnotationBorderStyleType=u.AnnotationActionEventType=u.AbortException=void 0,u.arrayByteLength=p,u.arraysToBytes=P,u.assert=h,u.bytesToString=ut,u.createPromiseCapability=Ct,u.createValidAbsoluteUrl=_,u.getModificationDate=Ft,u.getVerbosityLevel=st,u.info=bt,u.isArrayBuffer=St,u.isArrayEqual=Rt,u.objectFromMap=H,u.objectSize=x,u.setVerbosityLevel=Z,u.shadow=F,u.string32=C,u.stringToBytes=i,u.stringToPDFString=L,u.stringToUTF8String=ft,u.unreachable=O,u.utf8StringToString=At,u.warn=yt;const Y=[1,0,0,1,0,0];u.IDENTITY_MATRIX=Y;const f=[.001,0,0,.001,0,0];u.FONT_IDENTITY_MATRIX=f;const k=1.35;u.LINE_FACTOR=k;const z=.35;u.LINE_DESCENT_FACTOR=z;const U=z/k;u.BASELINE_FACTOR=U;const W={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};u.RenderingIntentFlag=W;const N={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};u.AnnotationMode=N;const m="pdfjs_internal_editor_";u.AnnotationEditorPrefix=m;const A={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};u.AnnotationEditorType=A;const R={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};u.AnnotationEditorParamsType=R;const v={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};u.PermissionFlag=v;const y={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};u.TextRenderingMode=y;const d={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};u.ImageKind=d;const o={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};u.AnnotationType=o;const n={MARKED:"Marked",REVIEW:"Review"};u.AnnotationStateModelType=n;const e={MARKED:"Marked",UNMARKED:"Unmarked"};u.AnnotationMarkedState=e;const r={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};u.AnnotationReviewState=r;const a={GROUP:"Group",REPLY:"R"};u.AnnotationReplyType=a;const c={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};u.AnnotationFlag=c;const t={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};u.AnnotationFieldFlag=t;const s={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};u.AnnotationBorderStyleType=s;const g={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};u.AnnotationActionEventType=g;const T={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};u.DocumentActionEventType=T;const D={O:"PageOpen",C:"PageClose"};u.PageActionEventType=D;const E={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};u.StreamType=E;const w={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};u.FontType=w;const Q={ERRORS:0,WARNINGS:1,INFOS:5};u.VerbosityLevel=Q;const ht={NONE:0,BINARY:1};u.CMapCompressionType=ht;const at={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};u.OPS=at;const X={forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};u.UNSUPPORTED_FEATURES=X;const B={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};u.PasswordResponses=B;let $=Q.WARNINGS;function Z(rt){Number.isInteger(rt)&&($=rt)}function st(){return $}function bt(rt){$>=Q.INFOS&&console.log(`Info: ${rt}`)}function yt(rt){$>=Q.WARNINGS&&console.log(`Warning: ${rt}`)}function O(rt){throw new Error(rt)}function h(rt,K){rt||O(K)}function l(rt){if(!rt)return!1;switch(rt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function _(rt,K=null,S=null){if(!rt)return null;try{if(S&&typeof rt=="string"){if(S.addDefaultProtocol&&rt.startsWith("www.")){const pt=rt.match(/\./g);pt&&pt.length>=2&&(rt=`http://${rt}`)}if(S.tryConvertEncoding)try{rt=ft(rt)}catch{}}const J=K?new URL(rt,K):new URL(rt);if(l(J))return J}catch{}return null}function F(rt,K,S,J=!1){return Object.defineProperty(rt,K,{value:S,enumerable:!J,configurable:!0,writable:!1}),S}const M=function(){function K(S,J){this.constructor===K&&O("Cannot initialize BaseException."),this.message=S,this.name=J}return K.prototype=new Error,K.constructor=K,K}();u.BaseException=M;class I extends M{constructor(K,S){super(K,"PasswordException"),this.code=S}}u.PasswordException=I;class q extends M{constructor(K,S){super(K,"UnknownErrorException"),this.details=S}}u.UnknownErrorException=q;class G extends M{constructor(K){super(K,"InvalidPDFException")}}u.InvalidPDFException=G;class ot extends M{constructor(K){super(K,"MissingPDFException")}}u.MissingPDFException=ot;class V extends M{constructor(K,S){super(K,"UnexpectedResponseException"),this.status=S}}u.UnexpectedResponseException=V;class lt extends M{constructor(K){super(K,"FormatError")}}u.FormatError=lt;class tt extends M{constructor(K){super(K,"AbortException")}}u.AbortException=tt;function ut(rt){(typeof rt!="object"||rt===null||rt.length===void 0)&&O("Invalid argument for bytesToString");const K=rt.length,S=8192;if(K<S)return String.fromCharCode.apply(null,rt);const J=[];for(let pt=0;pt<K;pt+=S){const Et=Math.min(pt+S,K),Tt=rt.subarray(pt,Et);J.push(String.fromCharCode.apply(null,Tt))}return J.join("")}function i(rt){typeof rt!="string"&&O("Invalid argument for stringToBytes");const K=rt.length,S=new Uint8Array(K);for(let J=0;J<K;++J)S[J]=rt.charCodeAt(J)&255;return S}function p(rt){if(rt.length!==void 0)return rt.length;if(rt.byteLength!==void 0)return rt.byteLength;O("Invalid argument for arrayByteLength")}function P(rt){const K=rt.length;if(K===1&&rt[0]instanceof Uint8Array)return rt[0];let S=0;for(let Et=0;Et<K;Et++)S+=p(rt[Et]);let J=0;const pt=new Uint8Array(S);for(let Et=0;Et<K;Et++){let Tt=rt[Et];Tt instanceof Uint8Array||(typeof Tt=="string"?Tt=i(Tt):Tt=new Uint8Array(Tt));const Mt=Tt.byteLength;pt.set(Tt,J),J+=Mt}return pt}function C(rt){return String.fromCharCode(rt>>24&255,rt>>16&255,rt>>8&255,rt&255)}function x(rt){return Object.keys(rt).length}function H(rt){const K=Object.create(null);for(const[S,J]of rt)K[S]=J;return K}function it(){const rt=new Uint8Array(4);return rt[0]=1,new Uint32Array(rt.buffer,0,1)[0]===1}function gt(){try{return new Function(""),!0}catch{return!1}}class j{static get isLittleEndian(){return F(this,"isLittleEndian",it())}static get isEvalSupported(){return F(this,"isEvalSupported",gt())}static get isOffscreenCanvasSupported(){return F(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}u.FeatureTest=j;const vt=[...Array(256).keys()].map(rt=>rt.toString(16).padStart(2,"0"));class nt{static makeHexColor(K,S,J){return`#${vt[K]}${vt[S]}${vt[J]}`}static scaleMinMax(K,S){let J;K[0]?(K[0]<0&&(J=S[0],S[0]=S[1],S[1]=J),S[0]*=K[0],S[1]*=K[0],K[3]<0&&(J=S[2],S[2]=S[3],S[3]=J),S[2]*=K[3],S[3]*=K[3]):(J=S[0],S[0]=S[2],S[2]=J,J=S[1],S[1]=S[3],S[3]=J,K[1]<0&&(J=S[2],S[2]=S[3],S[3]=J),S[2]*=K[1],S[3]*=K[1],K[2]<0&&(J=S[0],S[0]=S[1],S[1]=J),S[0]*=K[2],S[1]*=K[2]),S[0]+=K[4],S[1]+=K[4],S[2]+=K[5],S[3]+=K[5]}static transform(K,S){return[K[0]*S[0]+K[2]*S[1],K[1]*S[0]+K[3]*S[1],K[0]*S[2]+K[2]*S[3],K[1]*S[2]+K[3]*S[3],K[0]*S[4]+K[2]*S[5]+K[4],K[1]*S[4]+K[3]*S[5]+K[5]]}static applyTransform(K,S){const J=K[0]*S[0]+K[1]*S[2]+S[4],pt=K[0]*S[1]+K[1]*S[3]+S[5];return[J,pt]}static applyInverseTransform(K,S){const J=S[0]*S[3]-S[1]*S[2],pt=(K[0]*S[3]-K[1]*S[2]+S[2]*S[5]-S[4]*S[3])/J,Et=(-K[0]*S[1]+K[1]*S[0]+S[4]*S[1]-S[5]*S[0])/J;return[pt,Et]}static getAxialAlignedBoundingBox(K,S){const J=nt.applyTransform(K,S),pt=nt.applyTransform(K.slice(2,4),S),Et=nt.applyTransform([K[0],K[3]],S),Tt=nt.applyTransform([K[2],K[1]],S);return[Math.min(J[0],pt[0],Et[0],Tt[0]),Math.min(J[1],pt[1],Et[1],Tt[1]),Math.max(J[0],pt[0],Et[0],Tt[0]),Math.max(J[1],pt[1],Et[1],Tt[1])]}static inverseTransform(K){const S=K[0]*K[3]-K[1]*K[2];return[K[3]/S,-K[1]/S,-K[2]/S,K[0]/S,(K[2]*K[5]-K[4]*K[3])/S,(K[4]*K[1]-K[5]*K[0])/S]}static singularValueDecompose2dScale(K){const S=[K[0],K[2],K[1],K[3]],J=K[0]*S[0]+K[1]*S[2],pt=K[0]*S[1]+K[1]*S[3],Et=K[2]*S[0]+K[3]*S[2],Tt=K[2]*S[1]+K[3]*S[3],Mt=(J+Tt)/2,Pt=Math.sqrt((J+Tt)**2-4*(J*Tt-Et*pt))/2,wt=Mt+Pt||1,kt=Mt-Pt||1;return[Math.sqrt(wt),Math.sqrt(kt)]}static normalizeRect(K){const S=K.slice(0);return K[0]>K[2]&&(S[0]=K[2],S[2]=K[0]),K[1]>K[3]&&(S[1]=K[3],S[3]=K[1]),S}static intersect(K,S){const J=Math.max(Math.min(K[0],K[2]),Math.min(S[0],S[2])),pt=Math.min(Math.max(K[0],K[2]),Math.max(S[0],S[2]));if(J>pt)return null;const Et=Math.max(Math.min(K[1],K[3]),Math.min(S[1],S[3])),Tt=Math.min(Math.max(K[1],K[3]),Math.max(S[1],S[3]));return Et>Tt?null:[J,Et,pt,Tt]}static bezierBoundingBox(K,S,J,pt,Et,Tt,Mt,Pt){const wt=[],kt=[[],[]];let Ot,Lt,Dt,xt,jt,Bt,Wt,qt;for(let zt=0;zt<2;++zt){if(zt===0?(Lt=6*K-12*J+6*Et,Ot=-3*K+9*J-9*Et+3*Mt,Dt=3*J-3*K):(Lt=6*S-12*pt+6*Tt,Ot=-3*S+9*pt-9*Tt+3*Pt,Dt=3*pt-3*S),Math.abs(Ot)<1e-12){if(Math.abs(Lt)<1e-12)continue;xt=-Dt/Lt,0<xt&&xt<1&&wt.push(xt);continue}Wt=Lt*Lt-4*Dt*Ot,qt=Math.sqrt(Wt),!(Wt<0)&&(jt=(-Lt+qt)/(2*Ot),0<jt&&jt<1&&wt.push(jt),Bt=(-Lt-qt)/(2*Ot),0<Bt&&Bt<1&&wt.push(Bt))}let Nt=wt.length,Ut;const Gt=Nt;for(;Nt--;)xt=wt[Nt],Ut=1-xt,kt[0][Nt]=Ut*Ut*Ut*K+3*Ut*Ut*xt*J+3*Ut*xt*xt*Et+xt*xt*xt*Mt,kt[1][Nt]=Ut*Ut*Ut*S+3*Ut*Ut*xt*pt+3*Ut*xt*xt*Tt+xt*xt*xt*Pt;return kt[0][Gt]=K,kt[1][Gt]=S,kt[0][Gt+1]=Mt,kt[1][Gt+1]=Pt,kt[0].length=kt[1].length=Gt+2,[Math.min(...kt[0]),Math.min(...kt[1]),Math.max(...kt[0]),Math.max(...kt[1])]}}u.Util=nt;const mt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function L(rt){if(rt[0]>="ï"){let S;if(rt[0]==="þ"&&rt[1]==="ÿ"?S="utf-16be":rt[0]==="ÿ"&&rt[1]==="þ"?S="utf-16le":rt[0]==="ï"&&rt[1]==="»"&&rt[2]==="¿"&&(S="utf-8"),S)try{const J=new TextDecoder(S,{fatal:!0}),pt=i(rt);return J.decode(pt)}catch(J){yt(`stringToPDFString: "${J}".`)}}const K=[];for(let S=0,J=rt.length;S<J;S++){const pt=mt[rt.charCodeAt(S)];K.push(pt?String.fromCharCode(pt):rt.charAt(S))}return K.join("")}function ft(rt){return decodeURIComponent(escape(rt))}function At(rt){return unescape(encodeURIComponent(rt))}function St(rt){return typeof rt=="object"&&rt!==null&&rt.byteLength!==void 0}function Rt(rt,K){if(rt.length!==K.length)return!1;for(let S=0,J=rt.length;S<J;S++)if(rt[S]!==K[S])return!1;return!0}function Ft(rt=new Date){return[rt.getUTCFullYear().toString(),(rt.getUTCMonth()+1).toString().padStart(2,"0"),rt.getUTCDate().toString().padStart(2,"0"),rt.getUTCHours().toString().padStart(2,"0"),rt.getUTCMinutes().toString().padStart(2,"0"),rt.getUTCSeconds().toString().padStart(2,"0")].join("")}function Ct(){const rt=Object.create(null);let K=!1;return Object.defineProperty(rt,"settled",{get(){return K}}),rt.promise=new Promise(function(S,J){rt.resolve=function(pt){K=!0,S(pt)},rt.reject=function(pt){K=!0,J(pt)}}),rt}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var ct,Y,f,k,z,U,W,N,m,A,R,oe,y,d;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(12),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:n,NodeCMapReaderFactory:e,NodeStandardFontDataFactory:r}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=n,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=e,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=r}let createPDFNetworkStream;function setPDFNetworkStreamFactory(n){createPDFNetworkStream=n}function getDocument(n){const e=new PDFDocumentLoadingTask;let r;if(typeof n=="string"||n instanceof URL)r={url:n};else if((0,_util.isArrayBuffer)(n))r={data:n};else if(n instanceof PDFDataRangeTransport)r={range:n};else{if(typeof n!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!n.url&&!n.data&&!n.range)throw new Error("Invalid parameter object: need either .data, .range or .url");r=n}const a=Object.create(null);let c=null,t=null;for(const g in r){const T=r[g];switch(g){case"url":if(typeof window<"u")try{a[g]=new URL(T,window.location).href;continue}catch(D){(0,_util.warn)(`Cannot create valid URL: "${D}".`)}else if(typeof T=="string"||T instanceof URL){a[g]=T.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":c=T;continue;case"worker":t=T;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&T instanceof Buffer)a[g]=new Uint8Array(T);else{if(T instanceof Uint8Array)break;if(typeof T=="string")a[g]=(0,_util.stringToBytes)(T);else if(typeof T=="object"&&T!==null&&!isNaN(T.length))a[g]=new Uint8Array(T);else if((0,_util.isArrayBuffer)(T))a[g]=new Uint8Array(T);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}a[g]=T}if(a.CMapReaderFactory=a.CMapReaderFactory||DefaultCMapReaderFactory,a.StandardFontDataFactory=a.StandardFontDataFactory||DefaultStandardFontDataFactory,a.ignoreErrors=a.stopAtErrors!==!0,a.fontExtraProperties=a.fontExtraProperties===!0,a.pdfBug=a.pdfBug===!0,a.enableXfa=a.enableXfa===!0,(!Number.isInteger(a.rangeChunkSize)||a.rangeChunkSize<1)&&(a.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof a.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(a.docBaseUrl))&&(a.docBaseUrl=null),(!Number.isInteger(a.maxImageSize)||a.maxImageSize<-1)&&(a.maxImageSize=-1),typeof a.cMapUrl!="string"&&(a.cMapUrl=null),typeof a.standardFontDataUrl!="string"&&(a.standardFontDataUrl=null),typeof a.useWorkerFetch!="boolean"&&(a.useWorkerFetch=a.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&a.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof a.isEvalSupported!="boolean"&&(a.isEvalSupported=!0),typeof a.isOffscreenCanvasSupported!="boolean"&&(a.isOffscreenCanvasSupported=!_is_node.isNodeJS),typeof a.disableFontFace!="boolean"&&(a.disableFontFace=_is_node.isNodeJS),typeof a.useSystemFonts!="boolean"&&(a.useSystemFonts=!_is_node.isNodeJS&&!a.disableFontFace),(typeof a.ownerDocument!="object"||a.ownerDocument===null)&&(a.ownerDocument=globalThis.document),typeof a.disableRange!="boolean"&&(a.disableRange=!1),typeof a.disableStream!="boolean"&&(a.disableStream=!1),typeof a.disableAutoFetch!="boolean"&&(a.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(a.verbosity),!t){const g={verbosity:a.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};t=g.port?PDFWorker.fromPort(g):new PDFWorker(g),e._worker=t}const s=e.docId;return t.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const g=_fetchDocument(t,a,c,s),T=new Promise(function(D){let E;c?E=new _transport_stream.PDFDataTransportStream({length:a.length,initialData:a.initialData,progressiveDone:a.progressiveDone,contentDispositionFilename:a.contentDispositionFilename,disableRange:a.disableRange,disableStream:a.disableStream},c):a.data||(E=createPDFNetworkStream({url:a.url,length:a.length,httpHeaders:a.httpHeaders,withCredentials:a.withCredentials,rangeChunkSize:a.rangeChunkSize,disableRange:a.disableRange,disableStream:a.disableStream})),D(E)});return Promise.all([g,T]).then(function([D,E]){if(e.destroyed)throw new Error("Loading aborted");const w=new _message_handler.MessageHandler(s,D,t.port),Q=new WorkerTransport(w,e,E,a);e._transport=Q,w.send("Ready",null)})}).catch(e._capability.reject),e}async function _fetchDocument(n,e,r,a){if(n.destroyed)throw new Error("Worker was destroyed");r&&(e.length=r.length,e.initialData=r.initialData,e.progressiveDone=r.progressiveDone,e.contentDispositionFilename=r.contentDispositionFilename);const c=await n.messageHandler.sendWithPromise("GetDocRequest",{docId:a,apiVersion:"3.1.81",data:e.data,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length,docBaseUrl:e.docBaseUrl,enableXfa:e.enableXfa,evaluatorOptions:{maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,isOffscreenCanvasSupported:e.isOffscreenCanvasSupported,fontExtraProperties:e.fontExtraProperties,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null}});if(e.data&&(e.data=null),n.destroyed)throw new Error("Worker was destroyed");return c}const u=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${ae(u,ct)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0,await((e=this._transport)==null?void 0:e.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=u;ct=new WeakMap,et(PDFDocumentLoadingTask,ct,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,r,a=!1,c=null){this.length=e,this.initialData=r,this.progressiveDone=a,this.contentDispositionFilename=c,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,r){for(const a of this._rangeListeners)a(e,r)}onDataProgress(e,r){this._readyCapability.promise.then(()=>{for(const a of this._progressListeners)a(e,r)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const r of this._progressiveReadListeners)r(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,r){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,r){this._pdfInfo=e,this._transport=r}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,r,a,c,t=!1){this._pageIndex=e,this._pageInfo=r,this._ownerDocument=c,this._transport=a,this._stats=t?new _display_utils.StatTimer:null,this._pdfBug=t,this.commonObjs=a.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:r=this.rotate,offsetX:a=0,offsetY:c=0,dontFlip:t=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:r,offsetX:a,offsetY:c,dontFlip:t})}getAnnotations({intent:e="display"}={}){const r=this._transport.getRenderingIntent(e);let a=this._annotationPromises.get(r.cacheKey);return a||(a=this._transport.getAnnotations(this._pageIndex,r.renderingIntent),this._annotationPromises.set(r.cacheKey,a)),a}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:r,intent:a="display",annotationMode:c=_util.AnnotationMode.ENABLE,transform:t=null,canvasFactory:s=null,background:g=null,optionalContentConfigPromise:T=null,annotationCanvasMap:D=null,pageColors:E=null,printAnnotationStorage:w=null}){var st,bt;(st=this._stats)==null||st.time("Overall");const Q=this._transport.getRenderingIntent(a,c,w);this.pendingCleanup=!1,T||(T=this._transport.getOptionalContentConfig());let ht=this._intentStates.get(Q.cacheKey);ht||(ht=Object.create(null),this._intentStates.set(Q.cacheKey,ht)),ht.streamReaderCancelTimeout&&(clearTimeout(ht.streamReaderCancelTimeout),ht.streamReaderCancelTimeout=null);const at=s||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),X=!!(Q.renderingIntent&_util.RenderingIntentFlag.PRINT);ht.displayReadyCapability||(ht.displayReadyCapability=(0,_util.createPromiseCapability)(),ht.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(bt=this._stats)==null||bt.time("Page Request"),this._pumpOperatorList(Q));const B=yt=>{var O,h;ht.renderTasks.delete($),(this.cleanupAfterRender||X)&&(this.pendingCleanup=!0),this._tryCleanup(),yt?($.capability.reject(yt),this._abortOperatorList({intentState:ht,reason:yt instanceof Error?yt:new Error(yt)})):$.capability.resolve(),(O=this._stats)==null||O.timeEnd("Rendering"),(h=this._stats)==null||h.timeEnd("Overall")},$=new InternalRenderTask({callback:B,params:{canvasContext:e,viewport:r,transform:t,background:g},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:D,operatorList:ht.operatorList,pageIndex:this._pageIndex,canvasFactory:at,useRequestAnimationFrame:!X,pdfBug:this._pdfBug,pageColors:E});(ht.renderTasks||(ht.renderTasks=new Set)).add($);const Z=$.task;return Promise.all([ht.displayReadyCapability.promise,T]).then(([yt,O])=>{var h;if(this.pendingCleanup){B();return}(h=this._stats)==null||h.time("Rendering"),$.initializeGraphics({transparency:yt,optionalContentConfig:O}),$.operatorListChanged()}).catch(B),Z}getOperatorList({intent:e="display",annotationMode:r=_util.AnnotationMode.ENABLE,printAnnotationStorage:a=null}={}){var T;function c(){s.operatorList.lastChunk&&(s.opListReadCapability.resolve(s.operatorList),s.renderTasks.delete(g))}const t=this._transport.getRenderingIntent(e,r,a,!0);let s=this._intentStates.get(t.cacheKey);s||(s=Object.create(null),this._intentStates.set(t.cacheKey,s));let g;return s.opListReadCapability||(g=Object.create(null),g.operatorListChanged=c,s.opListReadCapability=(0,_util.createPromiseCapability)(),(s.renderTasks||(s.renderTasks=new Set)).add(g),s.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(T=this._stats)==null||T.time("Page Request"),this._pumpOperatorList(t)),s.opListReadCapability.promise}streamTextContent({disableCombineTextItems:e=!1,includeMarkedContent:r=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:e!==!0,includeMarkedContent:r===!0},{highWaterMark:100,size(c){return c.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(a=>_xfa_text.XfaText.textContent(a));const r=this.streamTextContent(e);return new Promise(function(a,c){function t(){s.read().then(function({value:T,done:D}){if(D){a(g);return}Object.assign(g.styles,T.styles),g.items.push(...T.items),t()},c)}const s=r.getReader(),g={items:[],styles:Object.create(null)};t()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const e=[];for(const r of this._intentStates.values())if(this._abortOperatorList({intentState:r,reason:new Error("Page was destroyed."),force:!0}),!r.opListReadCapability)for(const a of r.renderTasks)e.push(a.completed),a.cancel();this.objs.clear();for(const r of this._bitmaps)r.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(e)}cleanup(e=!1){return this.pendingCleanup=!0,this._tryCleanup(e)}_tryCleanup(e=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:r,operatorList:a}of this._intentStates.values())if(r.size>0||!a.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const r of this._bitmaps)r.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(e,r){var c,t;const a=this._intentStates.get(r);a&&((c=this._stats)==null||c.timeEnd("Page Request"),(t=a.displayReadyCapability)==null||t.resolve(e))}_renderPageChunk(e,r){for(let a=0,c=e.length;a<c;a++)r.operatorList.fnArray.push(e.fnArray[a]),r.operatorList.argsArray.push(e.argsArray[a]);r.operatorList.lastChunk=e.lastChunk,r.operatorList.separateAnnots=e.separateAnnots;for(const a of r.renderTasks)a.operatorListChanged();e.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:e,cacheKey:r,annotationStorageMap:a}){const t=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:r,annotationStorage:a}).getReader(),s=this._intentStates.get(r);s.streamReader=t;const g=()=>{t.read().then(({value:T,done:D})=>{if(D){s.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(T,s),g())},T=>{if(s.streamReader=null,!this._transport.destroyed){if(s.operatorList){s.operatorList.lastChunk=!0;for(const D of s.renderTasks)D.operatorListChanged();this._tryCleanup()}if(s.displayReadyCapability)s.displayReadyCapability.reject(T);else if(s.opListReadCapability)s.opListReadCapability.reject(T);else throw T}})};g()}_abortOperatorList({intentState:e,reason:r,force:a=!1}){if(e.streamReader){if(!a){if(e.renderTasks.size>0)return;if(r instanceof _display_utils.RenderingCancelledException){e.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:e,reason:r,force:!0}),e.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(e.streamReader.cancel(new _util.AbortException(r.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[c,t]of this._intentStates)if(t===e){this._intentStates.delete(c);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){et(this,Y,[]);et(this,f,Promise.resolve())}postMessage(e,r){const a={data:structuredClone(e,r)};b(this,f).then(()=>{for(const c of b(this,Y))c.call(this,a)})}addEventListener(e,r){b(this,Y).push(r)}removeEventListener(e,r){const a=b(this,Y).indexOf(r);b(this,Y).splice(a,1)}terminate(){b(this,Y).length=0}}Y=new WeakMap,f=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const n=(k=document==null?void 0:document.currentScript)==null?void 0:k.src;n&&(PDFWorkerUtil.fallbackWorkerSrc=n.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(n,e){let r;try{if(r=new URL(n),!r.origin||r.origin==="null")return!1}catch{return!1}const a=new URL(e,r);return r.origin===a.origin},PDFWorkerUtil.createCDNWrapper=function(n){const e=`importScripts("${n}");`;return URL.createObjectURL(new Blob([e]))}}const _PDFWorker=class{constructor({name:n=null,port:e=null,verbosity:r=(0,_util.getVerbosityLevel)()}={}){if(e&&b(_PDFWorker,z).has(e))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=n,this.destroyed=!1,this.verbosity=r,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e){b(_PDFWorker,z).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(n){this._port=n,this._messageHandler=new _message_handler.MessageHandler("main","worker",n),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:n}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,n)||(n=PDFWorkerUtil.createCDNWrapper(new URL(n,window.location).href));const e=new Worker(n),r=new _message_handler.MessageHandler("main","worker",e),a=()=>{e.removeEventListener("error",c),r.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},c=()=>{this._webWorker||a()};e.addEventListener("error",c),r.on("test",s=>{if(e.removeEventListener("error",c),this.destroyed){a();return}s?(this._messageHandler=r,this._port=e,this._webWorker=e,this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),r.destroy(),e.terminate())}),r.on("ready",s=>{if(e.removeEventListener("error",c),this.destroyed){a();return}try{t()}catch{this._setupFakeWorker()}});const t=()=>{const s=new Uint8Array;r.send("test",s,[s.buffer])};t();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(n=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;this._port=e;const r=`fake${PDFWorkerUtil.fakeWorkerId++}`,a=new _message_handler.MessageHandler(r+"_worker",r,e);n.setup(a,e);const c=new _message_handler.MessageHandler(r,r+"_worker",e);this._messageHandler=c,this._readyCapability.resolve(),c.send("configure",{verbosity:this.verbosity})}).catch(n=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${n.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),b(_PDFWorker,z).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(n){if(!(n!=null&&n.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return b(this,z).has(n.port)?b(this,z).get(n.port):new _PDFWorker(n)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var n;try{return((n=globalThis.pdfjsWorker)==null?void 0:n.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;z=new WeakMap,et(PDFWorker,z,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(e,r,a,c){et(this,U,null);et(this,W,new Map);et(this,N,new Map);et(this,m,null);this.messageHandler=e,this.loadingTask=r,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:c.ownerDocument,styleElement:c.styleElement}),this._params=c,c.useWorkerFetch||(this.CMapReaderFactory=new c.CMapReaderFactory({baseUrl:c.cMapUrl,isCompressed:c.cMapPacked}),this.StandardFontDataFactory=new c.StandardFontDataFactory({baseUrl:c.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=a,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return b(this,U)}getRenderingIntent(e,r=_util.AnnotationMode.ENABLE,a=null,c=!1){let t=_util.RenderingIntentFlag.DISPLAY,s=null;switch(e){case"any":t=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":t=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(r){case _util.AnnotationMode.DISABLE:t+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:t+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:t+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,s=(t&_util.RenderingIntentFlag.PRINT&&a instanceof _annotation_storage.PrintAnnotationStorage?a:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${r}`)}return c&&(t+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:t,cacheKey:`${t}_${_annotation_storage.AnnotationStorage.getHash(s)}`,annotationStorageMap:s}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const a of b(this,W).values())e.push(a._destroy());b(this,W).clear(),b(this,N).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const r=this.messageHandler.sendWithPromise("Terminate",null);return e.push(r),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_t(this,m,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:r}=this;e.on("GetReader",(a,c)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},c.onPull=()=>{this._fullReader.read().then(function({value:t,done:s}){if(s){c.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(t),"GetReader - expected an ArrayBuffer."),c.enqueue(new Uint8Array(t),1,[t])}).catch(t=>{c.error(t)})},c.onCancel=t=>{this._fullReader.cancel(t),c.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",a=>{const c=(0,_util.createPromiseCapability)(),t=this._fullReader;return t.headersReady.then(()=>{var s;(!t.isStreamingSupported||!t.isRangeSupported)&&(this._lastProgress&&((s=r.onProgress)==null||s.call(r,this._lastProgress)),t.onProgress=g=>{var T;(T=r.onProgress)==null||T.call(r,{loaded:g.loaded,total:g.total})}),c.resolve({isStreamingSupported:t.isStreamingSupported,isRangeSupported:t.isRangeSupported,contentLength:t.contentLength})},c.reject),c.promise}),e.on("GetRangeReader",(a,c)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const t=this._networkStream.getRangeReader(a.begin,a.end);if(!t){c.close();return}c.onPull=()=>{t.read().then(function({value:s,done:g}){if(g){c.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(s),"GetRangeReader - expected an ArrayBuffer."),c.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{c.error(s)})},c.onCancel=s=>{t.cancel(s),c.ready.catch(g=>{if(!this.destroyed)throw g})}}),e.on("GetDoc",({pdfInfo:a})=>{this._numPages=a.numPages,this._htmlForXfa=a.htmlForXfa,delete a.htmlForXfa,r._capability.resolve(new PDFDocumentProxy(a,this))}),e.on("DocException",function(a){let c;switch(a.name){case"PasswordException":c=new _util.PasswordException(a.message,a.code);break;case"InvalidPDFException":c=new _util.InvalidPDFException(a.message);break;case"MissingPDFException":c=new _util.MissingPDFException(a.message);break;case"UnexpectedResponseException":c=new _util.UnexpectedResponseException(a.message,a.status);break;case"UnknownErrorException":c=new _util.UnknownErrorException(a.message,a.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}r._capability.reject(c)}),e.on("PasswordRequest",a=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),r.onPassword){const c=t=>{t instanceof Error?this._passwordCapability.reject(t):this._passwordCapability.resolve({password:t})};try{r.onPassword(c,a.code)}catch(t){this._passwordCapability.reject(t)}}else this._passwordCapability.reject(new _util.PasswordException(a.message,a.code));return this._passwordCapability.promise}),e.on("DataLoaded",a=>{var c;(c=r.onProgress)==null||c.call(r,{loaded:a.length,total:a.length}),this.downloadInfoCapability.resolve(a)}),e.on("StartRenderPage",a=>{if(this.destroyed)return;b(this,W).get(a.pageIndex)._startRenderPage(a.transparency,a.cacheKey)}),e.on("commonobj",([a,c,t])=>{var s;if(!this.destroyed&&!this.commonObjs.has(a))switch(c){case"Font":const g=this._params;if("error"in t){const E=t.error;(0,_util.warn)(`Error during font loading: ${E}`),this.commonObjs.resolve(a,E);break}let T=null;g.pdfBug&&((s=globalThis.FontInspector)!=null&&s.enabled)&&(T={registerFont(E,w){globalThis.FontInspector.fontAdded(E,w)}});const D=new _font_loader.FontFaceObject(t,{isEvalSupported:g.isEvalSupported,disableFontFace:g.disableFontFace,ignoreErrors:g.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:T});this.fontLoader.bind(D).catch(E=>e.sendWithPromise("FontFallback",{id:a})).finally(()=>{!g.fontExtraProperties&&D.data&&(D.data=null),this.commonObjs.resolve(a,D)});break;case"FontPath":case"Image":this.commonObjs.resolve(a,t);break;default:throw new Error(`Got unknown common object type ${c}`)}}),e.on("obj",([a,c,t,s])=>{var T;if(this.destroyed)return;const g=b(this,W).get(c);if(!g.objs.has(a))switch(t){case"Image":g.objs.resolve(a,s);const D=8e6;if(s){let E;if(s.bitmap){const{bitmap:w,width:Q,height:ht}=s;E=Q*ht*4,g._bitmaps.add(w)}else E=((T=s.data)==null?void 0:T.length)||0;E>D&&(g.cleanupAfterRender=!0)}break;case"Pattern":g.objs.resolve(a,s);break;default:throw new Error(`Got unknown object type ${t}`)}}),e.on("DocProgress",a=>{var c;this.destroyed||(c=r.onProgress)==null||c.call(r,{loaded:a.loaded,total:a.total})}),e.on("DocStats",a=>{this.destroyed||_t(this,U,Object.freeze({streamTypes:Object.freeze(a.streamTypes),fontTypes:Object.freeze(a.fontTypes)}))}),e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),e.on("FetchBuiltInCMap",a=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(a):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",a=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(a):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:e}){var r,a;this.destroyed||(a=(r=this.loadingTask).onUnsupportedFeature)==null||a.call(r,e)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((e=this._fullReader)==null?void 0:e.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const r=e-1,a=b(this,N).get(r);if(a)return a;const c=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(t=>{if(this.destroyed)throw new Error("Transport destroyed");const s=new PDFPageProxy(r,t,this,this._params.ownerDocument,this._params.pdfBug);return b(this,W).set(r,s),s});return b(this,N).set(r,c),c}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:r})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return b(this,m)||_t(this,m,this.messageHandler.sendWithPromise("GetMetadata",null).then(e=>{var r,a;return{info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const r of b(this,W).values())if(!r.cleanup())throw new Error(`startCleanup: Page ${r.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),_t(this,m,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,enableXfa:e.enableXfa})}}U=new WeakMap,W=new WeakMap,N=new WeakMap,m=new WeakMap;class PDFObjects{constructor(){et(this,R);et(this,A,Object.create(null))}get(e,r=null){if(r){const c=dt(this,R,oe).call(this,e);return c.capability.promise.then(()=>r(c.data)),null}const a=b(this,A)[e];if(!(a!=null&&a.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${e}.`);return a.data}has(e){const r=b(this,A)[e];return(r==null?void 0:r.capability.settled)||!1}resolve(e,r=null){const a=dt(this,R,oe).call(this,e);a.data=r,a.capability.resolve()}clear(){_t(this,A,Object.create(null))}}A=new WeakMap,R=new WeakSet,oe=function(e){const r=b(this,A)[e];return r||(b(this,A)[e]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(e){et(this,y,null);_t(this,y,e),this.onContinue=null}get promise(){return b(this,y).capability.promise}cancel(){b(this,y).cancel()}get separateAnnots(){const{separateAnnots:e}=b(this,y).operatorList;if(!e)return!1;const{annotationCanvasMap:r}=b(this,y);return e.form||e.canvas&&(r==null?void 0:r.size)>0}}y=new WeakMap,exports.RenderTask=RenderTask;const o=class{constructor({callback:e,params:r,objs:a,commonObjs:c,annotationCanvasMap:t,operatorList:s,pageIndex:g,canvasFactory:T,useRequestAnimationFrame:D=!1,pdfBug:E=!1,pageColors:w=null}){this.callback=e,this.params=r,this.objs=a,this.commonObjs=c,this.annotationCanvasMap=t,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=g,this.canvasFactory=T,this._pdfBug=E,this.pageColors=w,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=D===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=r.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:r}){var g,T;if(this.cancelled)return;if(this._canvas){if(b(o,d).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");b(o,d).add(this._canvas)}this._pdfBug&&((g=globalThis.StepperManager)!=null&&g.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:a,viewport:c,transform:t,background:s}=this.params;this.gfx=new _canvas.CanvasGraphics(a,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:t,viewport:c,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,(T=this.graphicsReadyCallback)==null||T.call(this)}cancel(e=null){var r;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),this._canvas&&b(o,d).delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&b(o,d).delete(this._canvas),this.callback())))}};let InternalRenderTask=o;d=new WeakMap,et(InternalRenderTask,d,new WeakSet);const version="3.1.81";exports.version=version;const build="0766898d5";exports.build=build},(ct,u,Y)=>{var N,m,A,Pe,v;Object.defineProperty(u,"__esModule",{value:!0}),u.PrintAnnotationStorage=u.AnnotationStorage=void 0;var f=Y(1),k=Y(4),z=Y(8);class U{constructor(){et(this,A);et(this,N,!1);et(this,m,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(d,o){const n=b(this,m).get(d);return n===void 0?o:Object.assign(o,n)}getRawValue(d){return b(this,m).get(d)}remove(d){if(b(this,m).delete(d),b(this,m).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const o of b(this,m).values())if(o instanceof k.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(d,o){const n=b(this,m).get(d);let e=!1;if(n!==void 0)for(const[r,a]of Object.entries(o))n[r]!==a&&(e=!0,n[r]=a);else e=!0,b(this,m).set(d,o);e&&dt(this,A,Pe).call(this),o instanceof k.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(o.constructor._type)}has(d){return b(this,m).has(d)}getAll(){return b(this,m).size>0?(0,f.objectFromMap)(b(this,m)):null}get size(){return b(this,m).size}resetModified(){b(this,N)&&(_t(this,N,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new W(this)}get serializable(){if(b(this,m).size===0)return null;const d=new Map;for(const[o,n]of b(this,m)){const e=n instanceof k.AnnotationEditor?n.serialize():n;e&&d.set(o,e)}return d}static getHash(d){if(!d)return"";const o=new z.MurmurHash3_64;for(const[n,e]of d)o.update(`${n}:${JSON.stringify(e)}`);return o.hexdigest()}}N=new WeakMap,m=new WeakMap,A=new WeakSet,Pe=function(){b(this,N)||(_t(this,N,!0),typeof this.onSetModified=="function"&&this.onSetModified())},u.AnnotationStorage=U;class W extends U{constructor(o){super();et(this,v,null);_t(this,v,structuredClone(o.serializable))}get print(){(0,f.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return b(this,v)}}v=new WeakMap,u.PrintAnnotationStorage=W},(ct,u,Y)=>{var U,W,N,m,A,R;Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationEditor=void 0;var f=Y(5),k=Y(1);const v=class{constructor(d){et(this,U,this.focusin.bind(this));et(this,W,this.focusout.bind(this));et(this,N,!1);et(this,m,!1);et(this,A,!1);et(this,R,v._zIndex++);this.constructor===v&&(0,k.unreachable)("Cannot initialize AnnotationEditor."),this.parent=d.parent,this.id=d.id,this.width=this.height=null,this.pageIndex=d.parent.pageIndex,this.name=d.name,this.div=null;const[o,n]=this.parent.viewportBaseDimensions;this.x=d.x/o,this.y=d.y/n,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,k.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=b(this,R)}focusin(d){b(this,N)?_t(this,N,!1):this.parent.setSelected(this)}focusout(d){if(!this.isAttachedToDOM)return;const o=d.relatedTarget;o!=null&&o.closest(`#${this.id}`)||(d.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(d){const o=this.parent.div.getBoundingClientRect();this.startX=d.clientX-o.x,this.startY=d.clientY-o.y,d.dataTransfer.setData("text/plain",this.id),d.dataTransfer.effectAllowed="move"}setAt(d,o,n,e){const[r,a]=this.parent.viewportBaseDimensions;[n,e]=this.screenToPageTranslation(n,e),this.x=(d+n)/r,this.y=(o+e)/a,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(d,o){const[n,e]=this.parent.viewportBaseDimensions;[d,o]=this.screenToPageTranslation(d,o),this.x+=d/n,this.y+=o/e,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(d,o){const{rotation:n}=this.parent.viewport;switch(n){case 90:return[o,-d];case 180:return[-d,-o];case 270:return[-o,d];default:return[d,o]}}setDims(d,o){const[n,e]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*d/n}%`,this.div.style.height=`${100*o/e}%`}fixDims(){const{style:d}=this.div,{height:o,width:n}=d,e=n.endsWith("%"),r=o.endsWith("%");if(e&&r)return;const[a,c]=this.parent.viewportBaseDimensions;e||(d.width=`${100*parseFloat(n)/a}%`),r||(d.height=`${100*parseFloat(o)/c}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",b(this,U)),this.div.addEventListener("focusout",b(this,W));const[d,o]=this.getInitialTranslation();return this.translate(d,o),(0,f.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(d){const o=f.KeyboardManager.platform.isMac;if(d.button!==0||d.ctrlKey&&o){d.preventDefault();return}d.ctrlKey&&!o||d.shiftKey||d.metaKey&&o?this.parent.toggleSelected(this):this.parent.setSelected(this),_t(this,N,!0)}getRect(d,o){const[n,e]=this.parent.viewportBaseDimensions,[r,a]=this.parent.pageDimensions,c=r*d/n,t=a*o/e,s=this.x*r,g=this.y*a,T=this.width*r,D=this.height*a;switch(this.rotation){case 0:return[s+c,a-g-t-D,s+c+T,a-g-t];case 90:return[s+t,a-g+c,s+t+D,a-g+c+T];case 180:return[s-c-T,a-g+t,s-c,a-g+t+D];case 270:return[s-t-D,a-g-c-T,s-t,a-g-c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(d,o){const[n,e,r,a]=d,c=r-n,t=a-e;switch(this.rotation){case 0:return[n,o-a,c,t];case 90:return[n,o-e,t,c];case 180:return[r,o-e,c,t];case 270:return[r,o-a,t,c];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){_t(this,A,!0)}disableEditMode(){_t(this,A,!1)}isInEditMode(){return b(this,A)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var d;(d=this.div)==null||d.addEventListener("focusin",b(this,U))}serialize(){(0,k.unreachable)("An editor must be serializable")}static deserialize(d,o){const n=new this.prototype.constructor({parent:o,id:o.getNextId()});n.rotation=d.rotation;const[e,r]=o.pageDimensions,[a,c,t,s]=n.getRectInCurrentCoords(d.rect,r);return n.x=a/e,n.y=c/r,n.width=t/e,n.height=s/r,n}remove(){this.div.removeEventListener("focusin",b(this,U)),this.div.removeEventListener("focusout",b(this,W)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var d;(d=this.div)==null||d.classList.add("selectedEditor")}unselect(){var d;(d=this.div)==null||d.classList.remove("selectedEditor")}updateParams(d,o){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return b(this,m)}set isEditing(d){_t(this,m,d),d?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let z=v;U=new WeakMap,W=new WeakMap,N=new WeakMap,m=new WeakMap,A=new WeakMap,R=new WeakMap,It(z,"_colorManager",new f.ColorManager),It(z,"_zIndex",1),u.AnnotationEditor=z},(ct,u,Y)=>{var v,y,d,o,n,e,xe,t,s,g,T,D,E,w,Q,ht,at,X,B,$,Z,st,bt,yt,O,h,l,we,F,le,I,ke,G,Fe,V,Ht,tt,Jt,i,Re,P,Me,x,ce,it,Qt,j,he;Object.defineProperty(u,"__esModule",{value:!0}),u.KeyboardManager=u.CommandManager=u.ColorManager=u.AnnotationEditorUIManager=void 0,u.bindEvents=z,u.opacityToHex=U;var f=Y(1),k=Y(6);function z(mt,L,ft){for(const At of ft)L.addEventListener(At,mt[At].bind(mt))}function U(mt){return Math.round(Math.min(255,Math.max(1,255*mt))).toString(16).padStart(2,"0")}class W{constructor(){et(this,v,0)}getId(){return`${f.AnnotationEditorPrefix}${ae(this,v)._++}`}}v=new WeakMap;class N{constructor(L=128){et(this,y,[]);et(this,d,!1);et(this,o,void 0);et(this,n,-1);_t(this,o,L)}add({cmd:L,undo:ft,mustExec:At,type:St=NaN,overwriteIfSameType:Rt=!1,keepUndo:Ft=!1}){if(At&&L(),b(this,d))return;const Ct={cmd:L,undo:ft,type:St};if(b(this,n)===-1){b(this,y).length>0&&(b(this,y).length=0),_t(this,n,0),b(this,y).push(Ct);return}if(Rt&&b(this,y)[b(this,n)].type===St){Ft&&(Ct.undo=b(this,y)[b(this,n)].undo),b(this,y)[b(this,n)]=Ct;return}const rt=b(this,n)+1;rt===b(this,o)?b(this,y).splice(0,1):(_t(this,n,rt),rt<b(this,y).length&&b(this,y).splice(rt)),b(this,y).push(Ct)}undo(){b(this,n)!==-1&&(_t(this,d,!0),b(this,y)[b(this,n)].undo(),_t(this,d,!1),_t(this,n,b(this,n)-1))}redo(){b(this,n)<b(this,y).length-1&&(_t(this,n,b(this,n)+1),_t(this,d,!0),b(this,y)[b(this,n)].cmd(),_t(this,d,!1))}hasSomethingToUndo(){return b(this,n)!==-1}hasSomethingToRedo(){return b(this,n)<b(this,y).length-1}destroy(){_t(this,y,null)}}y=new WeakMap,d=new WeakMap,o=new WeakMap,n=new WeakMap,u.CommandManager=N;const a=class{constructor(L){et(this,e);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const ft=a.platform.isMac;for(const[At,St]of L)for(const Rt of At){const Ft=Rt.startsWith("mac+");ft&&Ft?(this.callbacks.set(Rt.slice(4),St),this.allKeys.add(Rt.split("+").at(-1))):!ft&&!Ft&&(this.callbacks.set(Rt,St),this.allKeys.add(Rt.split("+").at(-1)))}}static get platform(){const L=typeof navigator<"u"?navigator.platform:"";return(0,f.shadow)(this,"platform",{isWin:L.includes("Win"),isMac:L.includes("Mac")})}exec(L,ft){if(!this.allKeys.has(ft.key))return;const At=this.callbacks.get(dt(this,e,xe).call(this,ft));At&&(At.bind(L)(),ft.stopPropagation(),ft.preventDefault())}};let m=a;e=new WeakSet,xe=function(L){L.altKey&&this.buffer.push("alt"),L.ctrlKey&&this.buffer.push("ctrl"),L.metaKey&&this.buffer.push("meta"),L.shiftKey&&this.buffer.push("shift"),this.buffer.push(L.key);const ft=this.buffer.join("+");return this.buffer.length=0,ft},u.KeyboardManager=m;const c=class{get _colors(){const L=new Map([["CanvasText",null],["Canvas",null]]);return(0,k.getColorValues)(L),(0,f.shadow)(this,"_colors",L)}convert(L){const ft=(0,k.getRGB)(L);if(!window.matchMedia("(forced-colors: active)").matches)return ft;for(const[At,St]of this._colors)if(St.every((Rt,Ft)=>Rt===ft[Ft]))return c._colorsMapping.get(At);return ft}getHexCode(L){const ft=this._colors.get(L);return ft?f.Util.makeHexColor(...ft):L}};let A=c;It(A,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),u.ColorManager=A;const nt=class{constructor(L,ft){et(this,l);et(this,F);et(this,I);et(this,G);et(this,V);et(this,tt);et(this,i);et(this,P);et(this,x);et(this,it);et(this,j);et(this,t,null);et(this,s,new Map);et(this,g,new Map);et(this,T,new N);et(this,D,0);et(this,E,null);et(this,w,null);et(this,Q,new W);et(this,ht,!1);et(this,at,f.AnnotationEditorType.NONE);et(this,X,new Set);et(this,B,this.copy.bind(this));et(this,$,this.cut.bind(this));et(this,Z,this.paste.bind(this));et(this,st,this.keydown.bind(this));et(this,bt,this.onEditingAction.bind(this));et(this,yt,this.onPageChanging.bind(this));et(this,O,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});et(this,h,null);_t(this,h,L),_t(this,w,ft),b(this,w)._on("editingaction",b(this,bt)),b(this,w)._on("pagechanging",b(this,yt))}destroy(){dt(this,F,le).call(this),b(this,w)._off("editingaction",b(this,bt)),b(this,w)._off("pagechanging",b(this,yt));for(const L of b(this,g).values())L.destroy();b(this,g).clear(),b(this,s).clear(),_t(this,t,null),b(this,X).clear(),b(this,T).destroy()}onPageChanging({pageNumber:L}){_t(this,D,L-1)}focusMainContainer(){b(this,h).focus()}copy(L){if(L.preventDefault(),b(this,t)&&b(this,t).commitOrRemove(),!this.hasSelection)return;const ft=[];for(const At of b(this,X))At.isEmpty()||ft.push(At.serialize());ft.length!==0&&L.clipboardData.setData("application/pdfjs",JSON.stringify(ft))}cut(L){this.copy(L),this.delete()}paste(L){L.preventDefault();let ft=L.clipboardData.getData("application/pdfjs");if(!ft)return;try{ft=JSON.parse(ft)}catch(St){(0,f.warn)(`paste: "${St.message}".`);return}if(!Array.isArray(ft))return;this.unselectAll();const At=b(this,g).get(b(this,D));try{const St=[];for(const Ct of ft){const rt=At.deserialize(Ct);if(!rt)return;St.push(rt)}const Rt=()=>{for(const Ct of St)dt(this,x,ce).call(this,Ct);dt(this,j,he).call(this,St)},Ft=()=>{for(const Ct of St)Ct.remove()};this.addCommands({cmd:Rt,undo:Ft,mustExec:!0})}catch(St){(0,f.warn)(`paste: "${St.message}".`)}}keydown(L){var ft;(ft=this.getActive())!=null&&ft.shouldGetKeyboardEvents()||nt._keyboardManager.exec(this,L)}onEditingAction(L){["undo","redo","delete","selectAll"].includes(L.name)&&this[L.name]()}setEditingState(L){L?(dt(this,l,we).call(this),dt(this,I,ke).call(this),dt(this,V,Ht).call(this,{isEditing:b(this,at)!==f.AnnotationEditorType.NONE,isEmpty:dt(this,it,Qt).call(this),hasSomethingToUndo:b(this,T).hasSomethingToUndo(),hasSomethingToRedo:b(this,T).hasSomethingToRedo(),hasSelectedEditor:!1})):(dt(this,F,le).call(this),dt(this,G,Fe).call(this),dt(this,V,Ht).call(this,{isEditing:!1}))}registerEditorTypes(L){if(!b(this,E)){_t(this,E,L);for(const ft of b(this,E))dt(this,tt,Jt).call(this,ft.defaultPropertiesToUpdate)}}getId(){return b(this,Q).getId()}addLayer(L){b(this,g).set(L.pageIndex,L),b(this,ht)?L.enable():L.disable()}removeLayer(L){b(this,g).delete(L.pageIndex)}updateMode(L){if(_t(this,at,L),L===f.AnnotationEditorType.NONE)this.setEditingState(!1),dt(this,P,Me).call(this);else{this.setEditingState(!0),dt(this,i,Re).call(this);for(const ft of b(this,g).values())ft.updateMode(L)}}updateToolbar(L){L!==b(this,at)&&b(this,w).dispatch("switchannotationeditormode",{source:this,mode:L})}updateParams(L,ft){if(b(this,E)){for(const At of b(this,X))At.updateParams(L,ft);for(const At of b(this,E))At.updateDefaultParams(L,ft)}}getEditors(L){const ft=[];for(const At of b(this,s).values())At.pageIndex===L&&ft.push(At);return ft}getEditor(L){return b(this,s).get(L)}addEditor(L){b(this,s).set(L.id,L)}removeEditor(L){b(this,s).delete(L.id),this.unselect(L)}setActiveEditor(L){b(this,t)!==L&&(_t(this,t,L),L&&dt(this,tt,Jt).call(this,L.propertiesToUpdate))}toggleSelected(L){if(b(this,X).has(L)){b(this,X).delete(L),L.unselect(),dt(this,V,Ht).call(this,{hasSelectedEditor:this.hasSelection});return}b(this,X).add(L),L.select(),dt(this,tt,Jt).call(this,L.propertiesToUpdate),dt(this,V,Ht).call(this,{hasSelectedEditor:!0})}setSelected(L){for(const ft of b(this,X))ft!==L&&ft.unselect();b(this,X).clear(),b(this,X).add(L),L.select(),dt(this,tt,Jt).call(this,L.propertiesToUpdate),dt(this,V,Ht).call(this,{hasSelectedEditor:!0})}isSelected(L){return b(this,X).has(L)}unselect(L){L.unselect(),b(this,X).delete(L),dt(this,V,Ht).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return b(this,X).size!==0}undo(){b(this,T).undo(),dt(this,V,Ht).call(this,{hasSomethingToUndo:b(this,T).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:dt(this,it,Qt).call(this)})}redo(){b(this,T).redo(),dt(this,V,Ht).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:b(this,T).hasSomethingToRedo(),isEmpty:dt(this,it,Qt).call(this)})}addCommands(L){b(this,T).add(L),dt(this,V,Ht).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:dt(this,it,Qt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const L=[...b(this,X)],ft=()=>{for(const St of L)St.remove()},At=()=>{for(const St of L)dt(this,x,ce).call(this,St)};this.addCommands({cmd:ft,undo:At,mustExec:!0})}commitOrRemove(){var L;(L=b(this,t))==null||L.commitOrRemove()}selectAll(){for(const L of b(this,X))L.commit();dt(this,j,he).call(this,b(this,s).values())}unselectAll(){if(b(this,t)){b(this,t).commitOrRemove();return}if(b(this,X).size!==0){for(const L of b(this,X))L.unselect();b(this,X).clear(),dt(this,V,Ht).call(this,{hasSelectedEditor:!1})}}isActive(L){return b(this,t)===L}getActive(){return b(this,t)}getMode(){return b(this,at)}};let R=nt;t=new WeakMap,s=new WeakMap,g=new WeakMap,T=new WeakMap,D=new WeakMap,E=new WeakMap,w=new WeakMap,Q=new WeakMap,ht=new WeakMap,at=new WeakMap,X=new WeakMap,B=new WeakMap,$=new WeakMap,Z=new WeakMap,st=new WeakMap,bt=new WeakMap,yt=new WeakMap,O=new WeakMap,h=new WeakMap,l=new WeakSet,we=function(){b(this,h).addEventListener("keydown",b(this,st))},F=new WeakSet,le=function(){b(this,h).removeEventListener("keydown",b(this,st))},I=new WeakSet,ke=function(){document.addEventListener("copy",b(this,B)),document.addEventListener("cut",b(this,$)),document.addEventListener("paste",b(this,Z))},G=new WeakSet,Fe=function(){document.removeEventListener("copy",b(this,B)),document.removeEventListener("cut",b(this,$)),document.removeEventListener("paste",b(this,Z))},V=new WeakSet,Ht=function(L){Object.entries(L).some(([At,St])=>b(this,O)[At]!==St)&&b(this,w).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(b(this,O),L)})},tt=new WeakSet,Jt=function(L){b(this,w).dispatch("annotationeditorparamschanged",{source:this,details:L})},i=new WeakSet,Re=function(){if(!b(this,ht)){_t(this,ht,!0);for(const L of b(this,g).values())L.enable()}},P=new WeakSet,Me=function(){if(this.unselectAll(),b(this,ht)){_t(this,ht,!1);for(const L of b(this,g).values())L.disable()}},x=new WeakSet,ce=function(L){const ft=b(this,g).get(L.pageIndex);ft?ft.addOrRebuild(L):this.addEditor(L)},it=new WeakSet,Qt=function(){if(b(this,s).size===0)return!0;if(b(this,s).size===1)for(const L of b(this,s).values())return L.isEmpty();return!1},j=new WeakSet,he=function(L){b(this,X).clear();for(const ft of L)ft.isEmpty()||(b(this,X).add(ft),ft.select());dt(this,V,Ht).call(this,{hasSelectedEditor:!0})},It(R,"_keyboardManager",new m([[["ctrl+a","mac+meta+a"],nt.prototype.selectAll],[["ctrl+z","mac+meta+z"],nt.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],nt.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],nt.prototype.delete],[["Escape","mac+Escape"],nt.prototype.unselectAll]])),u.AnnotationEditorUIManager=R},(ct,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.StatTimer=u.RenderingCancelledException=u.PixelsPerInch=u.PageViewport=u.PDFDateString=u.DOMStandardFontDataFactory=u.DOMSVGFactory=u.DOMCanvasFactory=u.DOMCMapReaderFactory=u.AnnotationPrefix=void 0,u.deprecated=s,u.getColorValues=w,u.getCurrentTransform=Q,u.getCurrentTransformInverse=ht,u.getFilenameFromUrl=e,u.getPdfFilenameFromUrl=r,u.getRGB=E,u.getXfaPageViewport=D,u.isDataScheme=o,u.isPdfFile=n,u.isValidFetchUrl=c,u.loadScript=t;var f=Y(7),k=Y(1);const z="http://www.w3.org/2000/svg",U="pdfjs_internal_id_";u.AnnotationPrefix=U;const at=class{};let W=at;It(W,"CSS",96),It(W,"PDF",72),It(W,"PDF_TO_CSS_UNITS",at.CSS/at.PDF),u.PixelsPerInch=W;class N extends f.BaseCanvasFactory{constructor({ownerDocument:B=globalThis.document}={}){super(),this._document=B}_createCanvas(B,$){const Z=this._document.createElement("canvas");return Z.width=B,Z.height=$,Z}}u.DOMCanvasFactory=N;async function m(X,B=!1){if(c(X,document.baseURI)){const $=await fetch(X);if(!$.ok)throw new Error($.statusText);return B?new Uint8Array(await $.arrayBuffer()):(0,k.stringToBytes)(await $.text())}return new Promise(($,Z)=>{const st=new XMLHttpRequest;st.open("GET",X,!0),B&&(st.responseType="arraybuffer"),st.onreadystatechange=()=>{if(st.readyState===XMLHttpRequest.DONE){if(st.status===200||st.status===0){let bt;if(B&&st.response?bt=new Uint8Array(st.response):!B&&st.responseText&&(bt=(0,k.stringToBytes)(st.responseText)),bt){$(bt);return}}Z(new Error(st.statusText))}},st.send(null)})}class A extends f.BaseCMapReaderFactory{_fetchData(B,$){return m(B,this.isCompressed).then(Z=>({cMapData:Z,compressionType:$}))}}u.DOMCMapReaderFactory=A;class R extends f.BaseStandardFontDataFactory{_fetchData(B){return m(B,!0)}}u.DOMStandardFontDataFactory=R;class v extends f.BaseSVGFactory{_createSVG(B){return document.createElementNS(z,B)}}u.DOMSVGFactory=v;class y{constructor({viewBox:B,scale:$,rotation:Z,offsetX:st=0,offsetY:bt=0,dontFlip:yt=!1}){this.viewBox=B,this.scale=$,this.rotation=Z,this.offsetX=st,this.offsetY=bt;const O=(B[2]+B[0])/2,h=(B[3]+B[1])/2;let l,_,F,M;switch(Z%=360,Z<0&&(Z+=360),Z){case 180:l=-1,_=0,F=0,M=1;break;case 90:l=0,_=1,F=1,M=0;break;case 270:l=0,_=-1,F=-1,M=0;break;case 0:l=1,_=0,F=0,M=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}yt&&(F=-F,M=-M);let I,q,G,ot;l===0?(I=Math.abs(h-B[1])*$+st,q=Math.abs(O-B[0])*$+bt,G=Math.abs(B[3]-B[1])*$,ot=Math.abs(B[2]-B[0])*$):(I=Math.abs(O-B[0])*$+st,q=Math.abs(h-B[1])*$+bt,G=Math.abs(B[2]-B[0])*$,ot=Math.abs(B[3]-B[1])*$),this.transform=[l*$,_*$,F*$,M*$,I-l*$*O-F*$*h,q-_*$*O-M*$*h],this.width=G,this.height=ot}clone({scale:B=this.scale,rotation:$=this.rotation,offsetX:Z=this.offsetX,offsetY:st=this.offsetY,dontFlip:bt=!1}={}){return new y({viewBox:this.viewBox.slice(),scale:B,rotation:$,offsetX:Z,offsetY:st,dontFlip:bt})}convertToViewportPoint(B,$){return k.Util.applyTransform([B,$],this.transform)}convertToViewportRectangle(B){const $=k.Util.applyTransform([B[0],B[1]],this.transform),Z=k.Util.applyTransform([B[2],B[3]],this.transform);return[$[0],$[1],Z[0],Z[1]]}convertToPdfPoint(B,$){return k.Util.applyInverseTransform([B,$],this.transform)}}u.PageViewport=y;class d extends k.BaseException{constructor(B,$){super(B,"RenderingCancelledException"),this.type=$}}u.RenderingCancelledException=d;function o(X){const B=X.length;let $=0;for(;$<B&&X[$].trim()==="";)$++;return X.substring($,$+5).toLowerCase()==="data:"}function n(X){return typeof X=="string"&&/\.pdf$/i.test(X)}function e(X,B=!1){return B||([X]=X.split(/[#?]/,1)),X.substring(X.lastIndexOf("/")+1)}function r(X,B="document.pdf"){if(typeof X!="string")return B;if(o(X))return(0,k.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),B;const $=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Z=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,st=$.exec(X);let bt=Z.exec(st[1])||Z.exec(st[2])||Z.exec(st[3]);if(bt&&(bt=bt[0],bt.includes("%")))try{bt=Z.exec(decodeURIComponent(bt))[0]}catch{}return bt||B}class a{constructor(){It(this,"started",Object.create(null));It(this,"times",[])}time(B){B in this.started&&(0,k.warn)(`Timer is already running for ${B}`),this.started[B]=Date.now()}timeEnd(B){B in this.started||(0,k.warn)(`Timer has not been started for ${B}`),this.times.push({name:B,start:this.started[B],end:Date.now()}),delete this.started[B]}toString(){const B=[];let $=0;for(const{name:Z}of this.times)$=Math.max(Z.length,$);for(const{name:Z,start:st,end:bt}of this.times)B.push(`${Z.padEnd($)} ${bt-st}ms
`);return B.join("")}}u.StatTimer=a;function c(X,B){try{const{protocol:$}=B?new URL(X,B):new URL(X);return $==="http:"||$==="https:"}catch{return!1}}function t(X,B=!1){return new Promise(($,Z)=>{const st=document.createElement("script");st.src=X,st.onload=function(bt){B&&st.remove(),$(bt)},st.onerror=function(){Z(new Error(`Cannot load script at: ${st.src}`))},(document.head||document.documentElement).append(st)})}function s(X){console.log("Deprecated API usage: "+X)}let g;class T{static toDateObject(B){if(!B||typeof B!="string")return null;g||(g=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const $=g.exec(B);if(!$)return null;const Z=parseInt($[1],10);let st=parseInt($[2],10);st=st>=1&&st<=12?st-1:0;let bt=parseInt($[3],10);bt=bt>=1&&bt<=31?bt:1;let yt=parseInt($[4],10);yt=yt>=0&&yt<=23?yt:0;let O=parseInt($[5],10);O=O>=0&&O<=59?O:0;let h=parseInt($[6],10);h=h>=0&&h<=59?h:0;const l=$[7]||"Z";let _=parseInt($[8],10);_=_>=0&&_<=23?_:0;let F=parseInt($[9],10)||0;return F=F>=0&&F<=59?F:0,l==="-"?(yt+=_,O+=F):l==="+"&&(yt-=_,O-=F),new Date(Date.UTC(Z,st,bt,yt,O,h))}}u.PDFDateString=T;function D(X,{scale:B=1,rotation:$=0}){const{width:Z,height:st}=X.attributes.style,bt=[0,0,parseInt(Z),parseInt(st)];return new y({viewBox:bt,scale:B,rotation:$})}function E(X){if(X.startsWith("#")){const B=parseInt(X.slice(1),16);return[(B&16711680)>>16,(B&65280)>>8,B&255]}return X.startsWith("rgb(")?X.slice(4,-1).split(",").map(B=>parseInt(B)):X.startsWith("rgba(")?X.slice(5,-1).split(",").map(B=>parseInt(B)).slice(0,3):((0,k.warn)(`Not a valid color format: "${X}"`),[0,0,0])}function w(X){const B=document.createElement("span");B.style.visibility="hidden",document.body.append(B);for(const $ of X.keys()){B.style.color=$;const Z=window.getComputedStyle(B).color;X.set($,E(Z))}B.remove()}function Q(X){const{a:B,b:$,c:Z,d:st,e:bt,f:yt}=X.getTransform();return[B,$,Z,st,bt,yt]}function ht(X){const{a:B,b:$,c:Z,d:st,e:bt,f:yt}=X.getTransform().invertSelf();return[B,$,Z,st,bt,yt]}},(ct,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.BaseStandardFontDataFactory=u.BaseSVGFactory=u.BaseCanvasFactory=u.BaseCMapReaderFactory=void 0;var f=Y(1);class k{constructor(){this.constructor===k&&(0,f.unreachable)("Cannot initialize BaseCanvasFactory.")}create(m,A){if(m<=0||A<=0)throw new Error("Invalid canvas size");const R=this._createCanvas(m,A);return{canvas:R,context:R.getContext("2d")}}reset(m,A,R){if(!m.canvas)throw new Error("Canvas is not specified");if(A<=0||R<=0)throw new Error("Invalid canvas size");m.canvas.width=A,m.canvas.height=R}destroy(m){if(!m.canvas)throw new Error("Canvas is not specified");m.canvas.width=0,m.canvas.height=0,m.canvas=null,m.context=null}_createCanvas(m,A){(0,f.unreachable)("Abstract method `_createCanvas` called.")}}u.BaseCanvasFactory=k;class z{constructor({baseUrl:m=null,isCompressed:A=!1}){this.constructor===z&&(0,f.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=m,this.isCompressed=A}async fetch({name:m}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!m)throw new Error("CMap name must be specified.");const A=this.baseUrl+m+(this.isCompressed?".bcmap":""),R=this.isCompressed?f.CMapCompressionType.BINARY:f.CMapCompressionType.NONE;return this._fetchData(A,R).catch(v=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${A}`)})}_fetchData(m,A){(0,f.unreachable)("Abstract method `_fetchData` called.")}}u.BaseCMapReaderFactory=z;class U{constructor({baseUrl:m=null}){this.constructor===U&&(0,f.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=m}async fetch({filename:m}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!m)throw new Error("Font filename must be specified.");const A=`${this.baseUrl}${m}`;return this._fetchData(A).catch(R=>{throw new Error(`Unable to load font data at: ${A}`)})}_fetchData(m){(0,f.unreachable)("Abstract method `_fetchData` called.")}}u.BaseStandardFontDataFactory=U;class W{constructor(){this.constructor===W&&(0,f.unreachable)("Cannot initialize BaseSVGFactory.")}create(m,A,R=!1){if(m<=0||A<=0)throw new Error("Invalid SVG dimensions");const v=this._createSVG("svg:svg");return v.setAttribute("version","1.1"),R||(v.setAttribute("width",`${m}px`),v.setAttribute("height",`${A}px`)),v.setAttribute("preserveAspectRatio","none"),v.setAttribute("viewBox",`0 0 ${m} ${A}`),v}createElement(m){if(typeof m!="string")throw new Error("Invalid SVG element type");return this._createSVG(m)}_createSVG(m){(0,f.unreachable)("Abstract method `_createSVG` called.")}}u.BaseSVGFactory=W},(ct,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.MurmurHash3_64=void 0;var f=Y(1);const k=3285377520,z=4294901760,U=65535;class W{constructor(m){this.h1=m?m&4294967295:k,this.h2=m?m&4294967295:k}update(m){let A,R;if(typeof m=="string"){A=new Uint8Array(m.length*2),R=0;for(let g=0,T=m.length;g<T;g++){const D=m.charCodeAt(g);D<=255?A[R++]=D:(A[R++]=D>>>8,A[R++]=D&255)}}else if((0,f.isArrayBuffer)(m))A=m.slice(),R=A.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const v=R>>2,y=R-v*4,d=new Uint32Array(A.buffer,0,v);let o=0,n=0,e=this.h1,r=this.h2;const a=3432918353,c=461845907,t=a&U,s=c&U;for(let g=0;g<v;g++)g&1?(o=d[g],o=o*a&z|o*t&U,o=o<<15|o>>>17,o=o*c&z|o*s&U,e^=o,e=e<<13|e>>>19,e=e*5+3864292196):(n=d[g],n=n*a&z|n*t&U,n=n<<15|n>>>17,n=n*c&z|n*s&U,r^=n,r=r<<13|r>>>19,r=r*5+3864292196);switch(o=0,y){case 3:o^=A[v*4+2]<<16;case 2:o^=A[v*4+1]<<8;case 1:o^=A[v*4],o=o*a&z|o*t&U,o=o<<15|o>>>17,o=o*c&z|o*s&U,v&1?e^=o:r^=o}this.h1=e,this.h2=r}hexdigest(){let m=this.h1,A=this.h2;return m^=A>>>1,m=m*3981806797&z|m*36045&U,A=A*4283543511&z|((A<<16|m>>>16)*2950163797&z)>>>16,m^=A>>>1,m=m*444984403&z|m*60499&U,A=A*3301882366&z|((A<<16|m>>>16)*3120437893&z)>>>16,m^=A>>>1,(m>>>0).toString(16).padStart(8,"0")+(A>>>0).toString(16).padStart(8,"0")}}u.MurmurHash3_64=W},(ct,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.FontLoader=u.FontFaceObject=void 0;var f=Y(1);class k{constructor({onUnsupportedFeature:W,ownerDocument:N=globalThis.document,styleElement:m=null}){this._onUnsupportedFeature=W,this._document=N,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(W){this.nativeFontFaces.push(W),this._document.fonts.add(W)}insertRule(W){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const N=this.styleElement.sheet;N.insertRule(W,N.cssRules.length)}clear(){for(const W of this.nativeFontFaces)this._document.fonts.delete(W);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(W){if(W.attached||W.missingFile)return;if(W.attached=!0,this.isFontLoadingAPISupported){const m=W.createNativeFontFace();if(m){this.addNativeFontFace(m);try{await m.loaded}catch(A){throw this._onUnsupportedFeature({featureId:f.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,f.warn)(`Failed to load font '${m.family}': '${A}'.`),W.disableFontFace=!0,A}}return}const N=W.createFontFaceRule();if(N){if(this.insertRule(N),this.isSyncFontLoadingSupported)return;await new Promise(m=>{const A=this._queueLoadingCallback(m);this._prepareFontLoadEvent(W,A)})}}get isFontLoadingAPISupported(){var N;const W=!!((N=this._document)!=null&&N.fonts);return(0,f.shadow)(this,"isFontLoadingAPISupported",W)}get isSyncFontLoadingSupported(){let W=!1;if(typeof navigator>"u")W=!0;else{const N=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(N==null?void 0:N[1])>=14&&(W=!0)}return(0,f.shadow)(this,"isSyncFontLoadingSupported",W)}_queueLoadingCallback(W){function N(){for((0,f.assert)(!A.done,"completeRequest() cannot be called twice."),A.done=!0;m.length>0&&m[0].done;){const R=m.shift();setTimeout(R.callback,0)}}const{loadingRequests:m}=this,A={done:!1,complete:N,callback:W};return m.push(A),A}get _loadTestFont(){const W=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,f.shadow)(this,"_loadTestFont",W)}_prepareFontLoadEvent(W,N){function m(E,w){return E.charCodeAt(w)<<24|E.charCodeAt(w+1)<<16|E.charCodeAt(w+2)<<8|E.charCodeAt(w+3)&255}function A(E,w,Q,ht){const at=E.substring(0,w),X=E.substring(w+Q);return at+ht+X}let R,v;const y=this._document.createElement("canvas");y.width=1,y.height=1;const d=y.getContext("2d");let o=0;function n(E,w){if(++o>30){(0,f.warn)("Load test font never loaded."),w();return}if(d.font="30px "+E,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){w();return}setTimeout(n.bind(null,E,w))}const e=`lt${Date.now()}${this.loadTestFontId++}`;let r=this._loadTestFont;r=A(r,976,e.length,e);const c=16,t=1482184792;let s=m(r,c);for(R=0,v=e.length-3;R<v;R+=4)s=s-t+m(e,R)|0;R<e.length&&(s=s-t+m(e+"XXX",R)|0),r=A(r,c,4,(0,f.string32)(s));const g=`url(data:font/opentype;base64,${btoa(r)});`,T=`@font-face {font-family:"${e}";src:${g}}`;this.insertRule(T);const D=this._document.createElement("div");D.style.visibility="hidden",D.style.width=D.style.height="10px",D.style.position="absolute",D.style.top=D.style.left="0px";for(const E of[W.loadedName,e]){const w=this._document.createElement("span");w.textContent="Hi",w.style.fontFamily=E,D.append(w)}this._document.body.append(D),n(e,()=>{D.remove(),N.complete()})}}u.FontLoader=k;class z{constructor(W,{isEvalSupported:N=!0,disableFontFace:m=!1,ignoreErrors:A=!1,onUnsupportedFeature:R,fontRegistry:v=null}){this.compiledGlyphs=Object.create(null);for(const y in W)this[y]=W[y];this.isEvalSupported=N!==!1,this.disableFontFace=m===!0,this.ignoreErrors=A===!0,this._onUnsupportedFeature=R,this.fontRegistry=v}createNativeFontFace(){var N;if(!this.data||this.disableFontFace)return null;let W;if(!this.cssFontInfo)W=new FontFace(this.loadedName,this.data,{});else{const m={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(m.style=`oblique ${this.cssFontInfo.italicAngle}deg`),W=new FontFace(this.cssFontInfo.fontFamily,this.data,m)}return(N=this.fontRegistry)==null||N.registerFont(this),W}createFontFaceRule(){var A;if(!this.data||this.disableFontFace)return null;const W=(0,f.bytesToString)(this.data),N=`url(data:${this.mimetype};base64,${btoa(W)});`;let m;if(!this.cssFontInfo)m=`@font-face {font-family:"${this.loadedName}";src:${N}}`;else{let R=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(R+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),m=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${R}src:${N}}`}return(A=this.fontRegistry)==null||A.registerFont(this,N),m}getPathGenerator(W,N){if(this.compiledGlyphs[N]!==void 0)return this.compiledGlyphs[N];let m;try{m=W.get(this.loadedName+"_path_"+N)}catch(A){if(!this.ignoreErrors)throw A;return this._onUnsupportedFeature({featureId:f.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,f.warn)(`getPathGenerator - ignoring character: "${A}".`),this.compiledGlyphs[N]=function(R,v){}}if(this.isEvalSupported&&f.FeatureTest.isEvalSupported){const A=[];for(const R of m){const v=R.args!==void 0?R.args.join(","):"";A.push("c.",R.cmd,"(",v,`);
`)}return this.compiledGlyphs[N]=new Function("c","size",A.join(""))}return this.compiledGlyphs[N]=function(A,R){for(const v of m)v.cmd==="scale"&&(v.args=[R,-R]),A[v.cmd].apply(A,v.args)}}}u.FontFaceObject=z},(ct,u,Y)=>{var st,de;Object.defineProperty(u,"__esModule",{value:!0}),u.CanvasGraphics=void 0;var f=Y(1),k=Y(6),z=Y(11),U=Y(13),W=Y(12);const N=16,m=100,A=4096,R=15,v=10,y=W.isNodeJS&&typeof Path2D>"u"?-1:1e3,d=16;function o(O,h){if(O._removeMirroring)throw new Error("Context is already forwarding operations.");O.__originalSave=O.save,O.__originalRestore=O.restore,O.__originalRotate=O.rotate,O.__originalScale=O.scale,O.__originalTranslate=O.translate,O.__originalTransform=O.transform,O.__originalSetTransform=O.setTransform,O.__originalResetTransform=O.resetTransform,O.__originalClip=O.clip,O.__originalMoveTo=O.moveTo,O.__originalLineTo=O.lineTo,O.__originalBezierCurveTo=O.bezierCurveTo,O.__originalRect=O.rect,O.__originalClosePath=O.closePath,O.__originalBeginPath=O.beginPath,O._removeMirroring=()=>{O.save=O.__originalSave,O.restore=O.__originalRestore,O.rotate=O.__originalRotate,O.scale=O.__originalScale,O.translate=O.__originalTranslate,O.transform=O.__originalTransform,O.setTransform=O.__originalSetTransform,O.resetTransform=O.__originalResetTransform,O.clip=O.__originalClip,O.moveTo=O.__originalMoveTo,O.lineTo=O.__originalLineTo,O.bezierCurveTo=O.__originalBezierCurveTo,O.rect=O.__originalRect,O.closePath=O.__originalClosePath,O.beginPath=O.__originalBeginPath,delete O._removeMirroring},O.save=function(){h.save(),this.__originalSave()},O.restore=function(){h.restore(),this.__originalRestore()},O.translate=function(_,F){h.translate(_,F),this.__originalTranslate(_,F)},O.scale=function(_,F){h.scale(_,F),this.__originalScale(_,F)},O.transform=function(_,F,M,I,q,G){h.transform(_,F,M,I,q,G),this.__originalTransform(_,F,M,I,q,G)},O.setTransform=function(_,F,M,I,q,G){h.setTransform(_,F,M,I,q,G),this.__originalSetTransform(_,F,M,I,q,G)},O.resetTransform=function(){h.resetTransform(),this.__originalResetTransform()},O.rotate=function(_){h.rotate(_),this.__originalRotate(_)},O.clip=function(_){h.clip(_),this.__originalClip(_)},O.moveTo=function(l,_){h.moveTo(l,_),this.__originalMoveTo(l,_)},O.lineTo=function(l,_){h.lineTo(l,_),this.__originalLineTo(l,_)},O.bezierCurveTo=function(l,_,F,M,I,q){h.bezierCurveTo(l,_,F,M,I,q),this.__originalBezierCurveTo(l,_,F,M,I,q)},O.rect=function(l,_,F,M){h.rect(l,_,F,M),this.__originalRect(l,_,F,M)},O.closePath=function(){h.closePath(),this.__originalClosePath()},O.beginPath=function(){h.beginPath(),this.__originalBeginPath()}}class n{constructor(h){this.canvasFactory=h,this.cache=Object.create(null)}getCanvas(h,l,_){let F;return this.cache[h]!==void 0?(F=this.cache[h],this.canvasFactory.reset(F,l,_)):(F=this.canvasFactory.create(l,_),this.cache[h]=F),F}delete(h){delete this.cache[h]}clear(){for(const h in this.cache){const l=this.cache[h];this.canvasFactory.destroy(l),delete this.cache[h]}}}function e(O,h,l,_,F,M,I,q,G,ot){const[V,lt,tt,ut,i,p]=(0,k.getCurrentTransform)(O);if(lt===0&&tt===0){const x=I*V+i,H=Math.round(x),it=q*ut+p,gt=Math.round(it),j=(I+G)*V+i,vt=Math.abs(Math.round(j)-H)||1,nt=(q+ot)*ut+p,mt=Math.abs(Math.round(nt)-gt)||1;return O.setTransform(Math.sign(V),0,0,Math.sign(ut),H,gt),O.drawImage(h,l,_,F,M,0,0,vt,mt),O.setTransform(V,lt,tt,ut,i,p),[vt,mt]}if(V===0&&ut===0){const x=q*tt+i,H=Math.round(x),it=I*lt+p,gt=Math.round(it),j=(q+ot)*tt+i,vt=Math.abs(Math.round(j)-H)||1,nt=(I+G)*lt+p,mt=Math.abs(Math.round(nt)-gt)||1;return O.setTransform(0,Math.sign(lt),Math.sign(tt),0,H,gt),O.drawImage(h,l,_,F,M,0,0,mt,vt),O.setTransform(V,lt,tt,ut,i,p),[mt,vt]}O.drawImage(h,l,_,F,M,I,q,G,ot);const P=Math.hypot(V,lt),C=Math.hypot(tt,ut);return[P*G,C*ot]}function r(O){const{width:h,height:l}=O;if(h>y||l>y)return null;const _=1e3,F=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),M=h+1;let I=new Uint8Array(M*(l+1)),q,G,ot;const V=h+7&-8;let lt=new Uint8Array(V*l),tt=0;for(const C of O.data){let x=128;for(;x>0;)lt[tt++]=C&x?0:255,x>>=1}let ut=0;for(tt=0,lt[tt]!==0&&(I[0]=1,++ut),G=1;G<h;G++)lt[tt]!==lt[tt+1]&&(I[G]=lt[tt]?2:1,++ut),tt++;for(lt[tt]!==0&&(I[G]=2,++ut),q=1;q<l;q++){tt=q*V,ot=q*M,lt[tt-V]!==lt[tt]&&(I[ot]=lt[tt]?1:8,++ut);let C=(lt[tt]?4:0)+(lt[tt-V]?8:0);for(G=1;G<h;G++)C=(C>>2)+(lt[tt+1]?4:0)+(lt[tt-V+1]?8:0),F[C]&&(I[ot+G]=F[C],++ut),tt++;if(lt[tt-V]!==lt[tt]&&(I[ot+G]=lt[tt]?2:4,++ut),ut>_)return null}for(tt=V*(l-1),ot=q*M,lt[tt]!==0&&(I[ot]=8,++ut),G=1;G<h;G++)lt[tt]!==lt[tt+1]&&(I[ot+G]=lt[tt]?4:8,++ut),tt++;if(lt[tt]!==0&&(I[ot+G]=4,++ut),ut>_)return null;const i=new Int32Array([0,M,-1,0,-M,0,0,0,1]),p=new Path2D;for(q=0;ut&&q<=l;q++){let C=q*M;const x=C+h;for(;C<x&&!I[C];)C++;if(C===x)continue;p.moveTo(C%M,q);const H=C;let it=I[C];do{const gt=i[it];do C+=gt;while(!I[C]);const j=I[C];j!==5&&j!==10?(it=j,I[C]=0):(it=j&51*it>>4,I[C]&=it>>2|it<<2),p.lineTo(C%M,C/M|0),I[C]||--ut}while(H!==C);--q}return lt=null,I=null,function(C){C.save(),C.scale(1/h,-1/l),C.translate(0,-l),C.fill(p),C.beginPath(),C.restore()}}class a{constructor(h,l){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=f.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=f.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=f.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,h,l])}clone(){const h=Object.create(this);return h.clipBox=this.clipBox.slice(),h}setCurrentPoint(h,l){this.x=h,this.y=l}updatePathMinMax(h,l,_){[l,_]=f.Util.applyTransform([l,_],h),this.minX=Math.min(this.minX,l),this.minY=Math.min(this.minY,_),this.maxX=Math.max(this.maxX,l),this.maxY=Math.max(this.maxY,_)}updateRectMinMax(h,l){const _=f.Util.applyTransform(l,h),F=f.Util.applyTransform(l.slice(2),h);this.minX=Math.min(this.minX,_[0],F[0]),this.minY=Math.min(this.minY,_[1],F[1]),this.maxX=Math.max(this.maxX,_[0],F[0]),this.maxY=Math.max(this.maxY,_[1],F[1])}updateScalingPathMinMax(h,l){f.Util.scaleMinMax(h,l),this.minX=Math.min(this.minX,l[0]),this.maxX=Math.max(this.maxX,l[1]),this.minY=Math.min(this.minY,l[2]),this.maxY=Math.max(this.maxY,l[3])}updateCurvePathMinMax(h,l,_,F,M,I,q,G,ot,V){const lt=f.Util.bezierBoundingBox(l,_,F,M,I,q,G,ot);if(V){V[0]=Math.min(V[0],lt[0],lt[2]),V[1]=Math.max(V[1],lt[0],lt[2]),V[2]=Math.min(V[2],lt[1],lt[3]),V[3]=Math.max(V[3],lt[1],lt[3]);return}this.updateRectMinMax(h,lt)}getPathBoundingBox(h=z.PathType.FILL,l=null){const _=[this.minX,this.minY,this.maxX,this.maxY];if(h===z.PathType.STROKE){l||(0,f.unreachable)("Stroke bounding box must include transform.");const F=f.Util.singularValueDecompose2dScale(l),M=F[0]*this.lineWidth/2,I=F[1]*this.lineWidth/2;_[0]-=M,_[1]-=I,_[2]+=M,_[3]+=I}return _}updateClipFromPath(){const h=f.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(h||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(h){this.clipBox=h,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(h=z.PathType.FILL,l=null){return f.Util.intersect(this.clipBox,this.getPathBoundingBox(h,l))}}function c(O,h,l=null){if(typeof ImageData<"u"&&h instanceof ImageData){O.putImageData(h,0,0);return}const _=h.height,F=h.width,M=_%d,I=(_-M)/d,q=M===0?I:I+1,G=O.createImageData(F,d);let ot=0,V;const lt=h.data,tt=G.data;let ut,i,p,P,C,x,H,it;if(l)switch(l.length){case 1:C=l[0],x=l[0],H=l[0],it=l[0];break;case 4:C=l[0],x=l[1],H=l[2],it=l[3];break}if(h.kind===f.ImageKind.GRAYSCALE_1BPP){const gt=lt.byteLength,j=new Uint32Array(tt.buffer,0,tt.byteLength>>2),vt=j.length,nt=F+7>>3;let mt=4294967295,L=f.FeatureTest.isLittleEndian?4278190080:255;for(it&&it[0]===255&&it[255]===0&&([mt,L]=[L,mt]),ut=0;ut<q;ut++){for(p=ut<I?d:M,V=0,i=0;i<p;i++){const ft=gt-ot;let At=0;const St=ft>nt?F:ft*8-7,Rt=St&-8;let Ft=0,Ct=0;for(;At<Rt;At+=8)Ct=lt[ot++],j[V++]=Ct&128?mt:L,j[V++]=Ct&64?mt:L,j[V++]=Ct&32?mt:L,j[V++]=Ct&16?mt:L,j[V++]=Ct&8?mt:L,j[V++]=Ct&4?mt:L,j[V++]=Ct&2?mt:L,j[V++]=Ct&1?mt:L;for(;At<St;At++)Ft===0&&(Ct=lt[ot++],Ft=128),j[V++]=Ct&Ft?mt:L,Ft>>=1}for(;V<vt;)j[V++]=0;O.putImageData(G,0,ut*d)}}else if(h.kind===f.ImageKind.RGBA_32BPP){const gt=!!(C||x||H);for(i=0,P=F*d*4,ut=0;ut<I;ut++){if(tt.set(lt.subarray(ot,ot+P)),ot+=P,gt)for(let j=0;j<P;j+=4)C&&(tt[j+0]=C[tt[j+0]]),x&&(tt[j+1]=x[tt[j+1]]),H&&(tt[j+2]=H[tt[j+2]]);O.putImageData(G,0,i),i+=d}if(ut<q){if(P=F*M*4,tt.set(lt.subarray(ot,ot+P)),gt)for(let j=0;j<P;j+=4)C&&(tt[j+0]=C[tt[j+0]]),x&&(tt[j+1]=x[tt[j+1]]),H&&(tt[j+2]=H[tt[j+2]]);O.putImageData(G,0,i)}}else if(h.kind===f.ImageKind.RGB_24BPP){const gt=!!(C||x||H);for(p=d,P=F*p,ut=0;ut<q;ut++){for(ut>=I&&(p=M,P=F*p),V=0,i=P;i--;)tt[V++]=lt[ot++],tt[V++]=lt[ot++],tt[V++]=lt[ot++],tt[V++]=255;if(gt)for(let j=0;j<V;j+=4)C&&(tt[j+0]=C[tt[j+0]]),x&&(tt[j+1]=x[tt[j+1]]),H&&(tt[j+2]=H[tt[j+2]]);O.putImageData(G,0,ut*d)}}else throw new Error(`bad image kind: ${h.kind}`)}function t(O,h){if(h.bitmap){O.drawImage(h.bitmap,0,0);return}const l=h.height,_=h.width,F=l%d,M=(l-F)/d,I=F===0?M:M+1,q=O.createImageData(_,d);let G=0;const ot=h.data,V=q.data;for(let lt=0;lt<I;lt++){const tt=lt<M?d:F;({srcPos:G}=(0,U.applyMaskImageData)({src:ot,srcPos:G,dest:V,width:_,height:tt})),O.putImageData(q,0,lt*d)}}function s(O,h){const l=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(const _ of l)O[_]!==void 0&&(h[_]=O[_]);O.setLineDash!==void 0&&(h.setLineDash(O.getLineDash()),h.lineDashOffset=O.lineDashOffset)}function g(O,h){O.strokeStyle=O.fillStyle=h||"#000000",O.fillRule="nonzero",O.globalAlpha=1,O.lineWidth=1,O.lineCap="butt",O.lineJoin="miter",O.miterLimit=10,O.globalCompositeOperation="source-over",O.font="10px sans-serif",O.setLineDash!==void 0&&(O.setLineDash([]),O.lineDashOffset=0)}function T(O,h,l,_){const F=O.length;for(let M=3;M<F;M+=4){const I=O[M];if(I===0)O[M-3]=h,O[M-2]=l,O[M-1]=_;else if(I<255){const q=255-I;O[M-3]=O[M-3]*I+h*q>>8,O[M-2]=O[M-2]*I+l*q>>8,O[M-1]=O[M-1]*I+_*q>>8}}}function D(O,h,l){const _=O.length,F=1/255;for(let M=3;M<_;M+=4){const I=l?l[O[M]]:O[M];h[M]=h[M]*I*F|0}}function E(O,h,l){const _=O.length;for(let F=3;F<_;F+=4){const M=O[F-3]*77+O[F-2]*152+O[F-1]*28;h[F]=l?h[F]*l[M>>8]>>8:h[F]*M>>16}}function w(O,h,l,_,F,M,I,q,G,ot,V){const lt=!!M,tt=lt?M[0]:0,ut=lt?M[1]:0,i=lt?M[2]:0;let p;F==="Luminosity"?p=E:p=D;const C=Math.min(_,Math.ceil(1048576/l));for(let x=0;x<_;x+=C){const H=Math.min(C,_-x),it=O.getImageData(q-ot,x+(G-V),l,H),gt=h.getImageData(q,x+G,l,H);lt&&T(it.data,tt,ut,i),p(it.data,gt.data,I),h.putImageData(gt,q,x+G)}}function Q(O,h,l,_){const F=_[0],M=_[1],I=_[2]-F,q=_[3]-M;I===0||q===0||(w(h.context,l,I,q,h.subtype,h.backdrop,h.transferMap,F,M,h.offsetX,h.offsetY),O.save(),O.globalAlpha=1,O.globalCompositeOperation="source-over",O.setTransform(1,0,0,1,0,0),O.drawImage(l.canvas,0,0),O.restore())}function ht(O,h){const l=f.Util.singularValueDecompose2dScale(O);l[0]=Math.fround(l[0]),l[1]=Math.fround(l[1]);const _=Math.fround((globalThis.devicePixelRatio||1)*k.PixelsPerInch.PDF_TO_CSS_UNITS);return h!==void 0?h:l[0]<=_||l[1]<=_}const at=["butt","round","square"],X=["miter","round","bevel"],B={},$={},yt=class{constructor(h,l,_,F,{optionalContentConfig:M,markedContentStack:I=null},q,G){et(this,st);this.ctx=h,this.current=new a(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=l,this.objs=_,this.canvasFactory=F,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=I||[],this.optionalContentConfig=M,this.cachedCanvases=new n(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=q,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(G==null?void 0:G.background)||null,this.foregroundColor=(G==null?void 0:G.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(h,l=null){return typeof h=="string"?h.startsWith("g_")?this.commonObjs.get(h):this.objs.get(h):l}beginDrawing({transform:h,viewport:l,transparency:_=!1,background:F=null}){const M=this.ctx.canvas.width,I=this.ctx.canvas.height,q=F||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const G=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const ot=this.backgroundColor=this.ctx.fillStyle;let V=!0,lt=q;if(this.ctx.fillStyle=q,lt=this.ctx.fillStyle,V=typeof lt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(lt),G==="#000000"&&ot==="#ffffff"||G===ot||!V)this.foregroundColor=this.backgroundColor=null;else{const[tt,ut,i]=(0,k.getRGB)(lt),p=C=>(C/=255,C<=.03928?C/12.92:((C+.055)/1.055)**2.4),P=Math.round(.2126*p(tt)+.7152*p(ut)+.0722*p(i));this.selectColor=(C,x,H)=>{const it=.2126*p(C)+.7152*p(x)+.0722*p(H);return Math.round(it)===P?ot:G}}}if(this.ctx.fillStyle=this.backgroundColor||q,this.ctx.fillRect(0,0,M,I),this.ctx.restore(),_){const G=this.cachedCanvases.getCanvas("transparent",M,I);this.compositeCtx=this.ctx,this.transparentCanvas=G.canvas,this.ctx=G.context,this.ctx.save(),this.ctx.transform(...(0,k.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),g(this.ctx,this.foregroundColor),h&&(this.ctx.transform(...h),this.outputScaleX=h[0],this.outputScaleY=h[0]),this.ctx.transform(...l.transform),this.viewportScale=l.scale,this.baseTransform=(0,k.getCurrentTransform)(this.ctx)}executeOperatorList(h,l,_,F){const M=h.argsArray,I=h.fnArray;let q=l||0;const G=M.length;if(G===q)return q;const ot=G-q>v&&typeof _=="function",V=ot?Date.now()+R:0;let lt=0;const tt=this.commonObjs,ut=this.objs;let i;for(;;){if(F!==void 0&&q===F.nextBreakPoint)return F.breakIt(q,_),q;if(i=I[q],i!==f.OPS.dependency)this[i].apply(this,M[q]);else for(const p of M[q]){const P=p.startsWith("g_")?tt:ut;if(!P.has(p))return P.get(p,_),q}if(q++,q===G)return q;if(ot&&++lt>v){if(Date.now()>V)return _(),q;lt=0}}}endDrawing(){dt(this,st,de).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const h of this._cachedBitmapsMap.values()){for(const l of h.values())typeof HTMLCanvasElement<"u"&&l instanceof HTMLCanvasElement&&(l.width=l.height=0);h.clear()}this._cachedBitmapsMap.clear()}_scaleImage(h,l){const _=h.width,F=h.height;let M=Math.max(Math.hypot(l[0],l[1]),1),I=Math.max(Math.hypot(l[2],l[3]),1),q=_,G=F,ot="prescale1",V,lt;for(;M>2&&q>1||I>2&&G>1;){let tt=q,ut=G;M>2&&q>1&&(tt=Math.ceil(q/2),M/=q/tt),I>2&&G>1&&(ut=Math.ceil(G/2),I/=G/ut),V=this.cachedCanvases.getCanvas(ot,tt,ut),lt=V.context,lt.clearRect(0,0,tt,ut),lt.drawImage(h,0,0,q,G,0,0,tt,ut),h=V.canvas,q=tt,G=ut,ot=ot==="prescale1"?"prescale2":"prescale1"}return{img:h,paintWidth:q,paintHeight:G}}_createMaskCanvas(h){const l=this.ctx,{width:_,height:F}=h,M=this.current.fillColor,I=this.current.patternFill,q=(0,k.getCurrentTransform)(l);let G,ot,V,lt;if((h.bitmap||h.data)&&h.count>1){const vt=h.bitmap||h.data.buffer;ot=JSON.stringify(I?q:[q.slice(0,4),M]),G=this._cachedBitmapsMap.get(vt),G||(G=new Map,this._cachedBitmapsMap.set(vt,G));const nt=G.get(ot);if(nt&&!I){const mt=Math.round(Math.min(q[0],q[2])+q[4]),L=Math.round(Math.min(q[1],q[3])+q[5]);return{canvas:nt,offsetX:mt,offsetY:L}}V=nt}V||(lt=this.cachedCanvases.getCanvas("maskCanvas",_,F),t(lt.context,h));let tt=f.Util.transform(q,[1/_,0,0,-1/F,0,0]);tt=f.Util.transform(tt,[1,0,0,1,0,-F]);const ut=f.Util.applyTransform([0,0],tt),i=f.Util.applyTransform([_,F],tt),p=f.Util.normalizeRect([ut[0],ut[1],i[0],i[1]]),P=Math.round(p[2]-p[0])||1,C=Math.round(p[3]-p[1])||1,x=this.cachedCanvases.getCanvas("fillCanvas",P,C),H=x.context,it=Math.min(ut[0],i[0]),gt=Math.min(ut[1],i[1]);H.translate(-it,-gt),H.transform(...tt),V||(V=this._scaleImage(lt.canvas,(0,k.getCurrentTransformInverse)(H)),V=V.img,G&&I&&G.set(ot,V)),H.imageSmoothingEnabled=ht((0,k.getCurrentTransform)(H),h.interpolate),e(H,V,0,0,V.width,V.height,0,0,_,F),H.globalCompositeOperation="source-in";const j=f.Util.transform((0,k.getCurrentTransformInverse)(H),[1,0,0,1,-it,-gt]);return H.fillStyle=I?M.getPattern(l,this,j,z.PathType.FILL):M,H.fillRect(0,0,_,F),G&&!I&&(this.cachedCanvases.delete("fillCanvas"),G.set(ot,x.canvas)),{canvas:x.canvas,offsetX:Math.round(it),offsetY:Math.round(gt)}}setLineWidth(h){h!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=h,this.ctx.lineWidth=h}setLineCap(h){this.ctx.lineCap=at[h]}setLineJoin(h){this.ctx.lineJoin=X[h]}setMiterLimit(h){this.ctx.miterLimit=h}setDash(h,l){const _=this.ctx;_.setLineDash!==void 0&&(_.setLineDash(h),_.lineDashOffset=l)}setRenderingIntent(h){}setFlatness(h){}setGState(h){for(const[l,_]of h)switch(l){case"LW":this.setLineWidth(_);break;case"LC":this.setLineCap(_);break;case"LJ":this.setLineJoin(_);break;case"ML":this.setMiterLimit(_);break;case"D":this.setDash(_[0],_[1]);break;case"RI":this.setRenderingIntent(_);break;case"FL":this.setFlatness(_);break;case"Font":this.setFont(_[0],_[1]);break;case"CA":this.current.strokeAlpha=_;break;case"ca":this.current.fillAlpha=_,this.ctx.globalAlpha=_;break;case"BM":this.ctx.globalCompositeOperation=_;break;case"SMask":this.current.activeSMask=_?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=_}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const h=this.inSMaskMode;this.current.activeSMask&&!h?this.beginSMaskMode():!this.current.activeSMask&&h&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const h=this.ctx.canvas.width,l=this.ctx.canvas.height,_="smaskGroupAt"+this.groupLevel,F=this.cachedCanvases.getCanvas(_,h,l);this.suspendedCtx=this.ctx,this.ctx=F.context;const M=this.ctx;M.setTransform(...(0,k.getCurrentTransform)(this.suspendedCtx)),s(this.suspendedCtx,M),o(M,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),s(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(h){if(!this.current.activeSMask)return;h?(h[0]=Math.floor(h[0]),h[1]=Math.floor(h[1]),h[2]=Math.ceil(h[2]),h[3]=Math.ceil(h[3])):h=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const l=this.current.activeSMask,_=this.suspendedCtx;Q(_,l,this.ctx,h),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(s(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const h=this.current;this.stateStack.push(h),this.current=h.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),s(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(h,l,_,F,M,I){this.ctx.transform(h,l,_,F,M,I),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(h,l,_){const F=this.ctx,M=this.current;let I=M.x,q=M.y,G,ot;const V=(0,k.getCurrentTransform)(F),lt=V[0]===0&&V[3]===0||V[1]===0&&V[2]===0,tt=lt?_.slice(0):null;for(let ut=0,i=0,p=h.length;ut<p;ut++)switch(h[ut]|0){case f.OPS.rectangle:I=l[i++],q=l[i++];const P=l[i++],C=l[i++],x=I+P,H=q+C;F.moveTo(I,q),P===0||C===0?F.lineTo(x,H):(F.lineTo(x,q),F.lineTo(x,H),F.lineTo(I,H)),lt||M.updateRectMinMax(V,[I,q,x,H]),F.closePath();break;case f.OPS.moveTo:I=l[i++],q=l[i++],F.moveTo(I,q),lt||M.updatePathMinMax(V,I,q);break;case f.OPS.lineTo:I=l[i++],q=l[i++],F.lineTo(I,q),lt||M.updatePathMinMax(V,I,q);break;case f.OPS.curveTo:G=I,ot=q,I=l[i+4],q=l[i+5],F.bezierCurveTo(l[i],l[i+1],l[i+2],l[i+3],I,q),M.updateCurvePathMinMax(V,G,ot,l[i],l[i+1],l[i+2],l[i+3],I,q,tt),i+=6;break;case f.OPS.curveTo2:G=I,ot=q,F.bezierCurveTo(I,q,l[i],l[i+1],l[i+2],l[i+3]),M.updateCurvePathMinMax(V,G,ot,I,q,l[i],l[i+1],l[i+2],l[i+3],tt),I=l[i+2],q=l[i+3],i+=4;break;case f.OPS.curveTo3:G=I,ot=q,I=l[i+2],q=l[i+3],F.bezierCurveTo(l[i],l[i+1],I,q,I,q),M.updateCurvePathMinMax(V,G,ot,l[i],l[i+1],I,q,I,q,tt),i+=4;break;case f.OPS.closePath:F.closePath();break}lt&&M.updateScalingPathMinMax(V,tt),M.setCurrentPoint(I,q)}closePath(){this.ctx.closePath()}stroke(h){h=typeof h<"u"?h:!0;const l=this.ctx,_=this.current.strokeColor;l.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof _=="object"&&(_!=null&&_.getPattern)?(l.save(),l.strokeStyle=_.getPattern(l,this,(0,k.getCurrentTransformInverse)(l),z.PathType.STROKE),this.rescaleAndStroke(!1),l.restore()):this.rescaleAndStroke(!0)),h&&this.consumePath(this.current.getClippedPathBoundingBox()),l.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(h){h=typeof h<"u"?h:!0;const l=this.ctx,_=this.current.fillColor,F=this.current.patternFill;let M=!1;F&&(l.save(),l.fillStyle=_.getPattern(l,this,(0,k.getCurrentTransformInverse)(l),z.PathType.FILL),M=!0);const I=this.current.getClippedPathBoundingBox();this.contentVisible&&I!==null&&(this.pendingEOFill?(l.fill("evenodd"),this.pendingEOFill=!1):l.fill()),M&&l.restore(),h&&this.consumePath(I)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=B}eoClip(){this.pendingClip=$}beginText(){this.current.textMatrix=f.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const h=this.pendingTextPaths,l=this.ctx;if(h===void 0){l.beginPath();return}l.save(),l.beginPath();for(const _ of h)l.setTransform(..._.transform),l.translate(_.x,_.y),_.addToPath(l,_.fontSize);l.restore(),l.clip(),l.beginPath(),delete this.pendingTextPaths}setCharSpacing(h){this.current.charSpacing=h}setWordSpacing(h){this.current.wordSpacing=h}setHScale(h){this.current.textHScale=h/100}setLeading(h){this.current.leading=-h}setFont(h,l){const _=this.commonObjs.get(h),F=this.current;if(!_)throw new Error(`Can't find font for ${h}`);if(F.fontMatrix=_.fontMatrix||f.FONT_IDENTITY_MATRIX,(F.fontMatrix[0]===0||F.fontMatrix[3]===0)&&(0,f.warn)("Invalid font matrix for font "+h),l<0?(l=-l,F.fontDirection=-1):F.fontDirection=1,this.current.font=_,this.current.fontSize=l,_.isType3Font)return;const M=_.loadedName||"sans-serif";let I="normal";_.black?I="900":_.bold&&(I="bold");const q=_.italic?"italic":"normal",G=`"${M}", ${_.fallbackName}`;let ot=l;l<N?ot=N:l>m&&(ot=m),this.current.fontSizeScale=l/ot,this.ctx.font=`${q} ${I} ${ot}px ${G}`}setTextRenderingMode(h){this.current.textRenderingMode=h}setTextRise(h){this.current.textRise=h}moveText(h,l){this.current.x=this.current.lineX+=h,this.current.y=this.current.lineY+=l}setLeadingMoveText(h,l){this.setLeading(-l),this.moveText(h,l)}setTextMatrix(h,l,_,F,M,I){this.current.textMatrix=[h,l,_,F,M,I],this.current.textMatrixScale=Math.hypot(h,l),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(h,l,_,F){const M=this.ctx,I=this.current,q=I.font,G=I.textRenderingMode,ot=I.fontSize/I.fontSizeScale,V=G&f.TextRenderingMode.FILL_STROKE_MASK,lt=!!(G&f.TextRenderingMode.ADD_TO_PATH_FLAG),tt=I.patternFill&&!q.missingFile;let ut;(q.disableFontFace||lt||tt)&&(ut=q.getPathGenerator(this.commonObjs,h)),q.disableFontFace||tt?(M.save(),M.translate(l,_),M.beginPath(),ut(M,ot),F&&M.setTransform(...F),(V===f.TextRenderingMode.FILL||V===f.TextRenderingMode.FILL_STROKE)&&M.fill(),(V===f.TextRenderingMode.STROKE||V===f.TextRenderingMode.FILL_STROKE)&&M.stroke(),M.restore()):((V===f.TextRenderingMode.FILL||V===f.TextRenderingMode.FILL_STROKE)&&M.fillText(h,l,_),(V===f.TextRenderingMode.STROKE||V===f.TextRenderingMode.FILL_STROKE)&&M.strokeText(h,l,_)),lt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,k.getCurrentTransform)(M),x:l,y:_,fontSize:ot,addToPath:ut})}get isFontSubpixelAAEnabled(){const{context:h}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);h.scale(1.5,1),h.fillText("I",0,10);const l=h.getImageData(0,0,10,10).data;let _=!1;for(let F=3;F<l.length;F+=4)if(l[F]>0&&l[F]<255){_=!0;break}return(0,f.shadow)(this,"isFontSubpixelAAEnabled",_)}showText(h){const l=this.current,_=l.font;if(_.isType3Font)return this.showType3Text(h);const F=l.fontSize;if(F===0)return;const M=this.ctx,I=l.fontSizeScale,q=l.charSpacing,G=l.wordSpacing,ot=l.fontDirection,V=l.textHScale*ot,lt=h.length,tt=_.vertical,ut=tt?1:-1,i=_.defaultVMetrics,p=F*l.fontMatrix[0],P=l.textRenderingMode===f.TextRenderingMode.FILL&&!_.disableFontFace&&!l.patternFill;M.save(),M.transform(...l.textMatrix),M.translate(l.x,l.y+l.textRise),ot>0?M.scale(V,-1):M.scale(V,1);let C;if(l.patternFill){M.save();const j=l.fillColor.getPattern(M,this,(0,k.getCurrentTransformInverse)(M),z.PathType.FILL);C=(0,k.getCurrentTransform)(M),M.restore(),M.fillStyle=j}let x=l.lineWidth;const H=l.textMatrixScale;if(H===0||x===0){const j=l.textRenderingMode&f.TextRenderingMode.FILL_STROKE_MASK;(j===f.TextRenderingMode.STROKE||j===f.TextRenderingMode.FILL_STROKE)&&(x=this.getSinglePixelWidth())}else x/=H;if(I!==1&&(M.scale(I,I),x/=I),M.lineWidth=x,_.isInvalidPDFjsFont){const j=[];let vt=0;for(const nt of h)j.push(nt.unicode),vt+=nt.width;M.fillText(j.join(""),0,0),l.x+=vt*p*V,M.restore(),this.compose();return}let it=0,gt;for(gt=0;gt<lt;++gt){const j=h[gt];if(typeof j=="number"){it+=ut*j*F/1e3;continue}let vt=!1;const nt=(j.isSpace?G:0)+q,mt=j.fontChar,L=j.accent;let ft,At,St=j.width;if(tt){const Ft=j.vmetric||i,Ct=-(j.vmetric?Ft[1]:St*.5)*p,rt=Ft[2]*p;St=Ft?-Ft[0]:St,ft=Ct/I,At=(it+rt)/I}else ft=it/I,At=0;if(_.remeasure&&St>0){const Ft=M.measureText(mt).width*1e3/F*I;if(St<Ft&&this.isFontSubpixelAAEnabled){const Ct=St/Ft;vt=!0,M.save(),M.scale(Ct,1),ft/=Ct}else St!==Ft&&(ft+=(St-Ft)/2e3*F/I)}if(this.contentVisible&&(j.isInFont||_.missingFile)){if(P&&!L)M.fillText(mt,ft,At);else if(this.paintChar(mt,ft,At,C),L){const Ft=ft+F*L.offset.x/I,Ct=At-F*L.offset.y/I;this.paintChar(L.fontChar,Ft,Ct,C)}}let Rt;tt?Rt=St*p-nt*ot:Rt=St*p+nt*ot,it+=Rt,vt&&M.restore()}tt?l.y-=it:l.x+=it*V,M.restore(),this.compose()}showType3Text(h){const l=this.ctx,_=this.current,F=_.font,M=_.fontSize,I=_.fontDirection,q=F.vertical?1:-1,G=_.charSpacing,ot=_.wordSpacing,V=_.textHScale*I,lt=_.fontMatrix||f.FONT_IDENTITY_MATRIX,tt=h.length,ut=_.textRenderingMode===f.TextRenderingMode.INVISIBLE;let i,p,P,C;if(!(ut||M===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,l.save(),l.transform(..._.textMatrix),l.translate(_.x,_.y),l.scale(V,I),i=0;i<tt;++i){if(p=h[i],typeof p=="number"){C=q*p*M/1e3,this.ctx.translate(C,0),_.x+=C*V;continue}const x=(p.isSpace?ot:0)+G,H=F.charProcOperatorList[p.operatorListId];if(!H){(0,f.warn)(`Type3 character "${p.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=p,this.save(),l.scale(M,M),l.transform(...lt),this.executeOperatorList(H),this.restore()),P=f.Util.applyTransform([p.width,0],lt)[0]*M+x,l.translate(P,0),_.x+=P*V}l.restore(),this.processingType3=null}}setCharWidth(h,l){}setCharWidthAndBounds(h,l,_,F,M,I){this.ctx.rect(_,F,M-_,I-F),this.ctx.clip(),this.endPath()}getColorN_Pattern(h){let l;if(h[0]==="TilingPattern"){const _=h[1],F=this.baseTransform||(0,k.getCurrentTransform)(this.ctx),M={createCanvasGraphics:I=>new yt(I,this.commonObjs,this.objs,this.canvasFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};l=new z.TilingPattern(h,_,this.ctx,M,F)}else l=this._getPattern(h[1],h[2]);return l}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(h,l,_){var M;const F=((M=this.selectColor)==null?void 0:M.call(this,h,l,_))||f.Util.makeHexColor(h,l,_);this.ctx.strokeStyle=F,this.current.strokeColor=F}setFillRGBColor(h,l,_){var M;const F=((M=this.selectColor)==null?void 0:M.call(this,h,l,_))||f.Util.makeHexColor(h,l,_);this.ctx.fillStyle=F,this.current.fillColor=F,this.current.patternFill=!1}_getPattern(h,l=null){let _;return this.cachedPatterns.has(h)?_=this.cachedPatterns.get(h):(_=(0,z.getShadingPattern)(this.objs.get(h)),this.cachedPatterns.set(h,_)),l&&(_.matrix=l),_}shadingFill(h){if(!this.contentVisible)return;const l=this.ctx;this.save();const _=this._getPattern(h);l.fillStyle=_.getPattern(l,this,(0,k.getCurrentTransformInverse)(l),z.PathType.SHADING);const F=(0,k.getCurrentTransformInverse)(l);if(F){const M=l.canvas,I=M.width,q=M.height,G=f.Util.applyTransform([0,0],F),ot=f.Util.applyTransform([0,q],F),V=f.Util.applyTransform([I,0],F),lt=f.Util.applyTransform([I,q],F),tt=Math.min(G[0],ot[0],V[0],lt[0]),ut=Math.min(G[1],ot[1],V[1],lt[1]),i=Math.max(G[0],ot[0],V[0],lt[0]),p=Math.max(G[1],ot[1],V[1],lt[1]);this.ctx.fillRect(tt,ut,i-tt,p-ut)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,f.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,f.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(h,l){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(h)&&h.length===6&&this.transform(...h),this.baseTransform=(0,k.getCurrentTransform)(this.ctx),l)){const _=l[2]-l[0],F=l[3]-l[1];this.ctx.rect(l[0],l[1],_,F),this.current.updateRectMinMax((0,k.getCurrentTransform)(this.ctx),l),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(h){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const l=this.ctx;h.isolated||(0,f.info)("TODO: Support non-isolated groups."),h.knockout&&(0,f.warn)("Knockout groups not supported.");const _=(0,k.getCurrentTransform)(l);if(h.matrix&&l.transform(...h.matrix),!h.bbox)throw new Error("Bounding box is required.");let F=f.Util.getAxialAlignedBoundingBox(h.bbox,(0,k.getCurrentTransform)(l));const M=[0,0,l.canvas.width,l.canvas.height];F=f.Util.intersect(F,M)||[0,0,0,0];const I=Math.floor(F[0]),q=Math.floor(F[1]);let G=Math.max(Math.ceil(F[2])-I,1),ot=Math.max(Math.ceil(F[3])-q,1),V=1,lt=1;G>A&&(V=G/A,G=A),ot>A&&(lt=ot/A,ot=A),this.current.startNewPathAndClipBox([0,0,G,ot]);let tt="groupAt"+this.groupLevel;h.smask&&(tt+="_smask_"+this.smaskCounter++%2);const ut=this.cachedCanvases.getCanvas(tt,G,ot),i=ut.context;i.scale(1/V,1/lt),i.translate(-I,-q),i.transform(..._),h.smask?this.smaskStack.push({canvas:ut.canvas,context:i,offsetX:I,offsetY:q,scaleX:V,scaleY:lt,subtype:h.smask.subtype,backdrop:h.smask.backdrop,transferMap:h.smask.transferMap||null,startTransformInverse:null}):(l.setTransform(1,0,0,1,0,0),l.translate(I,q),l.scale(V,lt),l.save()),s(l,i),this.ctx=i,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(l),this.groupLevel++}endGroup(h){if(!this.contentVisible)return;this.groupLevel--;const l=this.ctx,_=this.groupStack.pop();if(this.ctx=_,this.ctx.imageSmoothingEnabled=!1,h.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const F=(0,k.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...F);const M=f.Util.getAxialAlignedBoundingBox([0,0,l.canvas.width,l.canvas.height],F);this.ctx.drawImage(l.canvas,0,0),this.ctx.restore(),this.compose(M)}}beginAnnotation(h,l,_,F,M){if(dt(this,st,de).call(this),g(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(l)&&l.length===4){const I=l[2]-l[0],q=l[3]-l[1];if(M&&this.annotationCanvasMap){_=_.slice(),_[4]-=l[0],_[5]-=l[1],l=l.slice(),l[0]=l[1]=0,l[2]=I,l[3]=q;const[G,ot]=f.Util.singularValueDecompose2dScale((0,k.getCurrentTransform)(this.ctx)),{viewportScale:V}=this,lt=Math.ceil(I*this.outputScaleX*V),tt=Math.ceil(q*this.outputScaleY*V);this.annotationCanvas=this.canvasFactory.create(lt,tt);const{canvas:ut,context:i}=this.annotationCanvas;this.annotationCanvasMap.set(h,ut),this.annotationCanvas.savedCtx=this.ctx,this.ctx=i,this.ctx.setTransform(G,0,0,-ot,0,q*ot),g(this.ctx,this.foregroundColor)}else g(this.ctx,this.foregroundColor),this.ctx.rect(l[0],l[1],I,q),this.ctx.clip(),this.endPath()}this.current=new a(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(..._),this.transform(...F)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(h){if(!this.contentVisible)return;const l=h.count;h=this.getObject(h.data,h),h.count=l;const _=this.ctx,F=this.processingType3;if(F&&(F.compiled===void 0&&(F.compiled=r(h)),F.compiled)){F.compiled(_);return}const M=this._createMaskCanvas(h),I=M.canvas;_.save(),_.setTransform(1,0,0,1,0,0),_.drawImage(I,M.offsetX,M.offsetY),_.restore(),this.compose()}paintImageMaskXObjectRepeat(h,l,_=0,F=0,M,I){if(!this.contentVisible)return;h=this.getObject(h.data,h);const q=this.ctx;q.save();const G=(0,k.getCurrentTransform)(q);q.transform(l,_,F,M,0,0);const ot=this._createMaskCanvas(h);q.setTransform(1,0,0,1,ot.offsetX-G[4],ot.offsetY-G[5]);for(let V=0,lt=I.length;V<lt;V+=2){const tt=f.Util.transform(G,[l,_,F,M,I[V],I[V+1]]),[ut,i]=f.Util.applyTransform([0,0],tt);q.drawImage(ot.canvas,ut,i)}q.restore(),this.compose()}paintImageMaskXObjectGroup(h){if(!this.contentVisible)return;const l=this.ctx,_=this.current.fillColor,F=this.current.patternFill;for(const M of h){const{data:I,width:q,height:G,transform:ot}=M,V=this.cachedCanvases.getCanvas("maskCanvas",q,G),lt=V.context;lt.save();const tt=this.getObject(I,M);t(lt,tt),lt.globalCompositeOperation="source-in",lt.fillStyle=F?_.getPattern(lt,this,(0,k.getCurrentTransformInverse)(l),z.PathType.FILL):_,lt.fillRect(0,0,q,G),lt.restore(),l.save(),l.transform(...ot),l.scale(1,-1),e(l,V.canvas,0,0,q,G,0,-1,1,1),l.restore()}this.compose()}paintImageXObject(h){if(!this.contentVisible)return;const l=this.getObject(h);if(!l){(0,f.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(l)}paintImageXObjectRepeat(h,l,_,F){if(!this.contentVisible)return;const M=this.getObject(h);if(!M){(0,f.warn)("Dependent image isn't ready yet");return}const I=M.width,q=M.height,G=[];for(let ot=0,V=F.length;ot<V;ot+=2)G.push({transform:[l,0,0,_,F[ot],F[ot+1]],x:0,y:0,w:I,h:q});this.paintInlineImageXObjectGroup(M,G)}paintInlineImageXObject(h){if(!this.contentVisible)return;const l=h.width,_=h.height,F=this.ctx;this.save(),F.scale(1/l,-1/_);let M;if(typeof HTMLElement=="function"&&h instanceof HTMLElement||!h.data)M=h;else{const q=this.cachedCanvases.getCanvas("inlineImage",l,_),G=q.context;c(G,h,this.current.transferMaps),M=q.canvas}const I=this._scaleImage(M,(0,k.getCurrentTransformInverse)(F));F.imageSmoothingEnabled=ht((0,k.getCurrentTransform)(F),h.interpolate),e(F,I.img,0,0,I.paintWidth,I.paintHeight,0,-_,l,_),this.compose(),this.restore()}paintInlineImageXObjectGroup(h,l){if(!this.contentVisible)return;const _=this.ctx,F=h.width,M=h.height,I=this.cachedCanvases.getCanvas("inlineImage",F,M),q=I.context;c(q,h,this.current.transferMaps);for(const G of l)_.save(),_.transform(...G.transform),_.scale(1,-1),e(_,I.canvas,G.x,G.y,G.w,G.h,0,-1,1,1),_.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(h){}markPointProps(h,l){}beginMarkedContent(h){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(h,l){h==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(l)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(h){const l=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(h);const _=this.ctx;this.pendingClip&&(l||(this.pendingClip===$?_.clip("evenodd"):_.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),_.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const h=(0,k.getCurrentTransform)(this.ctx);if(h[1]===0&&h[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(h[0]),Math.abs(h[3]));else{const l=Math.abs(h[0]*h[3]-h[2]*h[1]),_=Math.hypot(h[0],h[2]),F=Math.hypot(h[1],h[3]);this._cachedGetSinglePixelWidth=Math.max(_,F)/l}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:h}=this.current,l=(0,k.getCurrentTransform)(this.ctx);let _,F;if(l[1]===0&&l[2]===0){const M=Math.abs(l[0]),I=Math.abs(l[3]);if(h===0)_=1/M,F=1/I;else{const q=M*h,G=I*h;_=q<1?1/q:1,F=G<1?1/G:1}}else{const M=Math.abs(l[0]*l[3]-l[2]*l[1]),I=Math.hypot(l[0],l[1]),q=Math.hypot(l[2],l[3]);if(h===0)_=q/M,F=I/M;else{const G=h*M;_=q>G?q/G:1,F=I>G?I/G:1}}this._cachedScaleForStroking=[_,F]}return this._cachedScaleForStroking}rescaleAndStroke(h){const{ctx:l}=this,{lineWidth:_}=this.current,[F,M]=this.getScaleForStroking();if(l.lineWidth=_||1,F===1&&M===1){l.stroke();return}let I,q,G;h&&(I=(0,k.getCurrentTransform)(l),q=l.getLineDash().slice(),G=l.lineDashOffset),l.scale(F,M);const ot=Math.max(F,M);l.setLineDash(l.getLineDash().map(V=>V/ot)),l.lineDashOffset/=ot,l.stroke(),h&&(l.setTransform(...I),l.setLineDash(q),l.lineDashOffset=G)}isContentVisible(){for(let h=this.markedContentStack.length-1;h>=0;h--)if(!this.markedContentStack[h].visible)return!1;return!0}};let Z=yt;st=new WeakSet,de=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},u.CanvasGraphics=Z;for(const O in f.OPS)Z.prototype[O]!==void 0&&(Z.prototype[f.OPS[O]]=Z.prototype[O])},(ct,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TilingPattern=u.PathType=void 0,u.getShadingPattern=d;var f=Y(1),k=Y(6),z=Y(12);const U={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};u.PathType=U;function W(e,r){if(!r||z.isNodeJS)return;const a=r[2]-r[0],c=r[3]-r[1],t=new Path2D;t.rect(r[0],r[1],a,c),e.clip(t)}class N{constructor(){this.constructor===N&&(0,f.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,f.unreachable)("Abstract method `getPattern` called.")}}class m extends N{constructor(r){super(),this._type=r[1],this._bbox=r[2],this._colorStops=r[3],this._p0=r[4],this._p1=r[5],this._r0=r[6],this._r1=r[7],this.matrix=null}_createGradient(r){let a;this._type==="axial"?a=r.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(a=r.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const c of this._colorStops)a.addColorStop(c[0],c[1]);return a}getPattern(r,a,c,t){let s;if(t===U.STROKE||t===U.FILL){const g=a.current.getClippedPathBoundingBox(t,(0,k.getCurrentTransform)(r))||[0,0,0,0],T=Math.ceil(g[2]-g[0])||1,D=Math.ceil(g[3]-g[1])||1,E=a.cachedCanvases.getCanvas("pattern",T,D,!0),w=E.context;w.clearRect(0,0,w.canvas.width,w.canvas.height),w.beginPath(),w.rect(0,0,w.canvas.width,w.canvas.height),w.translate(-g[0],-g[1]),c=f.Util.transform(c,[1,0,0,1,g[0],g[1]]),w.transform(...a.baseTransform),this.matrix&&w.transform(...this.matrix),W(w,this._bbox),w.fillStyle=this._createGradient(w),w.fill(),s=r.createPattern(E.canvas,"no-repeat");const Q=new DOMMatrix(c);s.setTransform(Q)}else W(r,this._bbox),s=this._createGradient(r);return s}}function A(e,r,a,c,t,s,g,T){const D=r.coords,E=r.colors,w=e.data,Q=e.width*4;let ht;D[a+1]>D[c+1]&&(ht=a,a=c,c=ht,ht=s,s=g,g=ht),D[c+1]>D[t+1]&&(ht=c,c=t,t=ht,ht=g,g=T,T=ht),D[a+1]>D[c+1]&&(ht=a,a=c,c=ht,ht=s,s=g,g=ht);const at=(D[a]+r.offsetX)*r.scaleX,X=(D[a+1]+r.offsetY)*r.scaleY,B=(D[c]+r.offsetX)*r.scaleX,$=(D[c+1]+r.offsetY)*r.scaleY,Z=(D[t]+r.offsetX)*r.scaleX,st=(D[t+1]+r.offsetY)*r.scaleY;if(X>=st)return;const bt=E[s],yt=E[s+1],O=E[s+2],h=E[g],l=E[g+1],_=E[g+2],F=E[T],M=E[T+1],I=E[T+2],q=Math.round(X),G=Math.round(st);let ot,V,lt,tt,ut,i,p,P;for(let C=q;C<=G;C++){if(C<$){let j;C<X?j=0:j=(X-C)/(X-$),ot=at-(at-B)*j,V=bt-(bt-h)*j,lt=yt-(yt-l)*j,tt=O-(O-_)*j}else{let j;C>st?j=1:$===st?j=0:j=($-C)/($-st),ot=B-(B-Z)*j,V=h-(h-F)*j,lt=l-(l-M)*j,tt=_-(_-I)*j}let x;C<X?x=0:C>st?x=1:x=(X-C)/(X-st),ut=at-(at-Z)*x,i=bt-(bt-F)*x,p=yt-(yt-M)*x,P=O-(O-I)*x;const H=Math.round(Math.min(ot,ut)),it=Math.round(Math.max(ot,ut));let gt=Q*C+H*4;for(let j=H;j<=it;j++)x=(ot-j)/(ot-ut),x<0?x=0:x>1&&(x=1),w[gt++]=V-(V-i)*x|0,w[gt++]=lt-(lt-p)*x|0,w[gt++]=tt-(tt-P)*x|0,w[gt++]=255}}function R(e,r,a){const c=r.coords,t=r.colors;let s,g;switch(r.type){case"lattice":const T=r.verticesPerRow,D=Math.floor(c.length/T)-1,E=T-1;for(s=0;s<D;s++){let w=s*T;for(let Q=0;Q<E;Q++,w++)A(e,a,c[w],c[w+1],c[w+T],t[w],t[w+1],t[w+T]),A(e,a,c[w+T+1],c[w+1],c[w+T],t[w+T+1],t[w+1],t[w+T])}break;case"triangles":for(s=0,g=c.length;s<g;s+=3)A(e,a,c[s],c[s+1],c[s+2],t[s],t[s+1],t[s+2]);break;default:throw new Error("illegal figure")}}class v extends N{constructor(r){super(),this._coords=r[2],this._colors=r[3],this._figures=r[4],this._bounds=r[5],this._bbox=r[7],this._background=r[8],this.matrix=null}_createMeshCanvas(r,a,c){const T=Math.floor(this._bounds[0]),D=Math.floor(this._bounds[1]),E=Math.ceil(this._bounds[2])-T,w=Math.ceil(this._bounds[3])-D,Q=Math.min(Math.ceil(Math.abs(E*r[0]*1.1)),3e3),ht=Math.min(Math.ceil(Math.abs(w*r[1]*1.1)),3e3),at=E/Q,X=w/ht,B={coords:this._coords,colors:this._colors,offsetX:-T,offsetY:-D,scaleX:1/at,scaleY:1/X},$=Q+2*2,Z=ht+2*2,st=c.getCanvas("mesh",$,Z,!1),bt=st.context,yt=bt.createImageData(Q,ht);if(a){const h=yt.data;for(let l=0,_=h.length;l<_;l+=4)h[l]=a[0],h[l+1]=a[1],h[l+2]=a[2],h[l+3]=255}for(const h of this._figures)R(yt,h,B);return bt.putImageData(yt,2,2),{canvas:st.canvas,offsetX:T-2*at,offsetY:D-2*X,scaleX:at,scaleY:X}}getPattern(r,a,c,t){W(r,this._bbox);let s;if(t===U.SHADING)s=f.Util.singularValueDecompose2dScale((0,k.getCurrentTransform)(r));else if(s=f.Util.singularValueDecompose2dScale(a.baseTransform),this.matrix){const T=f.Util.singularValueDecompose2dScale(this.matrix);s=[s[0]*T[0],s[1]*T[1]]}const g=this._createMeshCanvas(s,t===U.SHADING?null:this._background,a.cachedCanvases);return t!==U.SHADING&&(r.setTransform(...a.baseTransform),this.matrix&&r.transform(...this.matrix)),r.translate(g.offsetX,g.offsetY),r.scale(g.scaleX,g.scaleY),r.createPattern(g.canvas,"no-repeat")}}class y extends N{getPattern(){return"hotpink"}}function d(e){switch(e[0]){case"RadialAxial":return new m(e);case"Mesh":return new v(e);case"Dummy":return new y}throw new Error(`Unknown IR type: ${e[0]}`)}const o={COLORED:1,UNCOLORED:2};class n{static get MAX_PATTERN_SIZE(){return(0,f.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(r,a,c,t,s){this.operatorList=r[2],this.matrix=r[3]||[1,0,0,1,0,0],this.bbox=r[4],this.xstep=r[5],this.ystep=r[6],this.paintType=r[7],this.tilingType=r[8],this.color=a,this.ctx=c,this.canvasGraphicsFactory=t,this.baseTransform=s}createPatternCanvas(r){const a=this.operatorList,c=this.bbox,t=this.xstep,s=this.ystep,g=this.paintType,T=this.tilingType,D=this.color,E=this.canvasGraphicsFactory;(0,f.info)("TilingType: "+T);const w=c[0],Q=c[1],ht=c[2],at=c[3],X=f.Util.singularValueDecompose2dScale(this.matrix),B=f.Util.singularValueDecompose2dScale(this.baseTransform),$=[X[0]*B[0],X[1]*B[1]],Z=this.getSizeAndScale(t,this.ctx.canvas.width,$[0]),st=this.getSizeAndScale(s,this.ctx.canvas.height,$[1]),bt=r.cachedCanvases.getCanvas("pattern",Z.size,st.size,!0),yt=bt.context,O=E.createCanvasGraphics(yt);O.groupLevel=r.groupLevel,this.setFillAndStrokeStyleToContext(O,g,D);let h=w,l=Q,_=ht,F=at;return w<0&&(h=0,_+=Math.abs(w)),Q<0&&(l=0,F+=Math.abs(Q)),yt.translate(-(Z.scale*h),-(st.scale*l)),O.transform(Z.scale,0,0,st.scale,0,0),yt.save(),this.clipBbox(O,h,l,_,F),O.baseTransform=(0,k.getCurrentTransform)(O.ctx),O.executeOperatorList(a),O.endDrawing(),{canvas:bt.canvas,scaleX:Z.scale,scaleY:st.scale,offsetX:h,offsetY:l}}getSizeAndScale(r,a,c){r=Math.abs(r);const t=Math.max(n.MAX_PATTERN_SIZE,a);let s=Math.ceil(r*c);return s>=t?s=t:c=s/r,{scale:c,size:s}}clipBbox(r,a,c,t,s){const g=t-a,T=s-c;r.ctx.rect(a,c,g,T),r.current.updateRectMinMax((0,k.getCurrentTransform)(r.ctx),[a,c,t,s]),r.clip(),r.endPath()}setFillAndStrokeStyleToContext(r,a,c){const t=r.ctx,s=r.current;switch(a){case o.COLORED:const g=this.ctx;t.fillStyle=g.fillStyle,t.strokeStyle=g.strokeStyle,s.fillColor=g.fillStyle,s.strokeColor=g.strokeStyle;break;case o.UNCOLORED:const T=f.Util.makeHexColor(c[0],c[1],c[2]);t.fillStyle=T,t.strokeStyle=T,s.fillColor=T,s.strokeColor=T;break;default:throw new f.FormatError(`Unsupported paint type: ${a}`)}}getPattern(r,a,c,t){let s=c;t!==U.SHADING&&(s=f.Util.transform(s,a.baseTransform),this.matrix&&(s=f.Util.transform(s,this.matrix)));const g=this.createPatternCanvas(a);let T=new DOMMatrix(s);T=T.translate(g.offsetX,g.offsetY),T=T.scale(1/g.scaleX,1/g.scaleY);const D=r.createPattern(g.canvas,"repeat");return D.setTransform(T),D}}u.TilingPattern=n},(ct,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.isNodeJS=void 0;const Y=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");u.isNodeJS=Y},(ct,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.applyMaskImageData=k;var f=Y(1);function k({src:z,srcPos:U=0,dest:W,destPos:N=0,width:m,height:A,inverseDecode:R=!1}){const v=f.FeatureTest.isLittleEndian?4278190080:255,[y,d]=R?[0,v]:[v,0],o=m>>3,n=m&7,e=z.length;W=new Uint32Array(W.buffer);for(let r=0;r<A;r++){for(const c=U+o;U<c;U++){const t=U<e?z[U]:255;W[N++]=t&128?d:y,W[N++]=t&64?d:y,W[N++]=t&32?d:y,W[N++]=t&16?d:y,W[N++]=t&8?d:y,W[N++]=t&4?d:y,W[N++]=t&2?d:y,W[N++]=t&1?d:y}if(n===0)continue;const a=U<e?z[U++]:255;for(let c=0;c<n;c++)W[N++]=a&1<<7-c?d:y}return{srcPos:U,destPos:N}}},(ct,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.GlobalWorkerOptions=void 0;const Y=Object.create(null);u.GlobalWorkerOptions=Y,Y.workerPort=Y.workerPort===void 0?null:Y.workerPort,Y.workerSrc=Y.workerSrc===void 0?"":Y.workerSrc},(ct,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.MessageHandler=void 0;var f=Y(1);const k={UNKNOWN:0,DATA:1,ERROR:2},z={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function U(N){switch(N instanceof Error||typeof N=="object"&&N!==null||(0,f.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),N.name){case"AbortException":return new f.AbortException(N.message);case"MissingPDFException":return new f.MissingPDFException(N.message);case"PasswordException":return new f.PasswordException(N.message,N.code);case"UnexpectedResponseException":return new f.UnexpectedResponseException(N.message,N.status);case"UnknownErrorException":return new f.UnknownErrorException(N.message,N.details);default:return new f.UnknownErrorException(N.message,N.toString())}}class W{constructor(m,A,R){this.sourceName=m,this.targetName=A,this.comObj=R,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=v=>{const y=v.data;if(y.targetName!==this.sourceName)return;if(y.stream){this._processStreamMessage(y);return}if(y.callback){const o=y.callbackId,n=this.callbackCapabilities[o];if(!n)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],y.callback===k.DATA)n.resolve(y.data);else if(y.callback===k.ERROR)n.reject(U(y.reason));else throw new Error("Unexpected callback case");return}const d=this.actionHandler[y.action];if(!d)throw new Error(`Unknown action from worker: ${y.action}`);if(y.callbackId){const o=this.sourceName,n=y.sourceName;new Promise(function(e){e(d(y.data))}).then(function(e){R.postMessage({sourceName:o,targetName:n,callback:k.DATA,callbackId:y.callbackId,data:e})},function(e){R.postMessage({sourceName:o,targetName:n,callback:k.ERROR,callbackId:y.callbackId,reason:U(e)})});return}if(y.streamId){this._createStreamSink(y);return}d(y.data)},R.addEventListener("message",this._onComObjOnMessage)}on(m,A){const R=this.actionHandler;if(R[m])throw new Error(`There is already an actionName called "${m}"`);R[m]=A}send(m,A,R){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:m,data:A},R)}sendWithPromise(m,A,R){const v=this.callbackId++,y=(0,f.createPromiseCapability)();this.callbackCapabilities[v]=y;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:m,callbackId:v,data:A},R)}catch(d){y.reject(d)}return y.promise}sendWithStream(m,A,R,v){const y=this.streamId++,d=this.sourceName,o=this.targetName,n=this.comObj;return new ReadableStream({start:e=>{const r=(0,f.createPromiseCapability)();return this.streamControllers[y]={controller:e,startCall:r,pullCall:null,cancelCall:null,isClosed:!1},n.postMessage({sourceName:d,targetName:o,action:m,streamId:y,data:A,desiredSize:e.desiredSize},v),r.promise},pull:e=>{const r=(0,f.createPromiseCapability)();return this.streamControllers[y].pullCall=r,n.postMessage({sourceName:d,targetName:o,stream:z.PULL,streamId:y,desiredSize:e.desiredSize}),r.promise},cancel:e=>{(0,f.assert)(e instanceof Error,"cancel must have a valid reason");const r=(0,f.createPromiseCapability)();return this.streamControllers[y].cancelCall=r,this.streamControllers[y].isClosed=!0,n.postMessage({sourceName:d,targetName:o,stream:z.CANCEL,streamId:y,reason:U(e)}),r.promise}},R)}_createStreamSink(m){const A=m.streamId,R=this.sourceName,v=m.sourceName,y=this.comObj,d=this,o=this.actionHandler[m.action],n={enqueue(e,r=1,a){if(this.isCancelled)return;const c=this.desiredSize;this.desiredSize-=r,c>0&&this.desiredSize<=0&&(this.sinkCapability=(0,f.createPromiseCapability)(),this.ready=this.sinkCapability.promise),y.postMessage({sourceName:R,targetName:v,stream:z.ENQUEUE,streamId:A,chunk:e},a)},close(){this.isCancelled||(this.isCancelled=!0,y.postMessage({sourceName:R,targetName:v,stream:z.CLOSE,streamId:A}),delete d.streamSinks[A])},error(e){(0,f.assert)(e instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,y.postMessage({sourceName:R,targetName:v,stream:z.ERROR,streamId:A,reason:U(e)}))},sinkCapability:(0,f.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:m.desiredSize,ready:null};n.sinkCapability.resolve(),n.ready=n.sinkCapability.promise,this.streamSinks[A]=n,new Promise(function(e){e(o(m.data,n))}).then(function(){y.postMessage({sourceName:R,targetName:v,stream:z.START_COMPLETE,streamId:A,success:!0})},function(e){y.postMessage({sourceName:R,targetName:v,stream:z.START_COMPLETE,streamId:A,reason:U(e)})})}_processStreamMessage(m){const A=m.streamId,R=this.sourceName,v=m.sourceName,y=this.comObj,d=this.streamControllers[A],o=this.streamSinks[A];switch(m.stream){case z.START_COMPLETE:m.success?d.startCall.resolve():d.startCall.reject(U(m.reason));break;case z.PULL_COMPLETE:m.success?d.pullCall.resolve():d.pullCall.reject(U(m.reason));break;case z.PULL:if(!o){y.postMessage({sourceName:R,targetName:v,stream:z.PULL_COMPLETE,streamId:A,success:!0});break}o.desiredSize<=0&&m.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=m.desiredSize,new Promise(function(n){n(o.onPull&&o.onPull())}).then(function(){y.postMessage({sourceName:R,targetName:v,stream:z.PULL_COMPLETE,streamId:A,success:!0})},function(n){y.postMessage({sourceName:R,targetName:v,stream:z.PULL_COMPLETE,streamId:A,reason:U(n)})});break;case z.ENQUEUE:if((0,f.assert)(d,"enqueue should have stream controller"),d.isClosed)break;d.controller.enqueue(m.chunk);break;case z.CLOSE:if((0,f.assert)(d,"close should have stream controller"),d.isClosed)break;d.isClosed=!0,d.controller.close(),this._deleteStreamController(d,A);break;case z.ERROR:(0,f.assert)(d,"error should have stream controller"),d.controller.error(U(m.reason)),this._deleteStreamController(d,A);break;case z.CANCEL_COMPLETE:m.success?d.cancelCall.resolve():d.cancelCall.reject(U(m.reason)),this._deleteStreamController(d,A);break;case z.CANCEL:if(!o)break;new Promise(function(n){n(o.onCancel&&o.onCancel(U(m.reason)))}).then(function(){y.postMessage({sourceName:R,targetName:v,stream:z.CANCEL_COMPLETE,streamId:A,success:!0})},function(n){y.postMessage({sourceName:R,targetName:v,stream:z.CANCEL_COMPLETE,streamId:A,reason:U(n)})}),o.sinkCapability.reject(U(m.reason)),o.isCancelled=!0,delete this.streamSinks[A];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(m,A){await Promise.allSettled([m.startCall&&m.startCall.promise,m.pullCall&&m.pullCall.promise,m.cancelCall&&m.cancelCall.promise]),delete this.streamControllers[A]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}u.MessageHandler=W},(ct,u,Y)=>{var z,U;Object.defineProperty(u,"__esModule",{value:!0}),u.Metadata=void 0;var f=Y(1);class k{constructor({parsedData:N,rawData:m}){et(this,z,void 0);et(this,U,void 0);_t(this,z,N),_t(this,U,m)}getRaw(){return b(this,U)}get(N){return b(this,z).get(N)??null}getAll(){return(0,f.objectFromMap)(b(this,z))}has(N){return b(this,z).has(N)}}z=new WeakMap,U=new WeakMap,u.Metadata=k},(ct,u,Y)=>{var N,m,A,R,v,y,ue;Object.defineProperty(u,"__esModule",{value:!0}),u.OptionalContentConfig=void 0;var f=Y(1),k=Y(8);const z=Symbol("INTERNAL");class U{constructor(n,e){et(this,N,!0);this.name=n,this.intent=e}get visible(){return b(this,N)}_setVisible(n,e){n!==z&&(0,f.unreachable)("Internal method `_setVisible` called."),_t(this,N,e)}}N=new WeakMap;class W{constructor(n){et(this,y);et(this,m,null);et(this,A,new Map);et(this,R,null);et(this,v,null);if(this.name=null,this.creator=null,n!==null){this.name=n.name,this.creator=n.creator,_t(this,v,n.order);for(const e of n.groups)b(this,A).set(e.id,new U(e.name,e.intent));if(n.baseState==="OFF")for(const e of b(this,A).values())e._setVisible(z,!1);for(const e of n.on)b(this,A).get(e)._setVisible(z,!0);for(const e of n.off)b(this,A).get(e)._setVisible(z,!1);_t(this,R,this.getHash())}}isVisible(n){if(b(this,A).size===0)return!0;if(!n)return(0,f.warn)("Optional content group not defined."),!0;if(n.type==="OCG")return b(this,A).has(n.id)?b(this,A).get(n.id).visible:((0,f.warn)(`Optional content group not found: ${n.id}`),!0);if(n.type==="OCMD"){if(n.expression)return dt(this,y,ue).call(this,n.expression);if(!n.policy||n.policy==="AnyOn"){for(const e of n.ids){if(!b(this,A).has(e))return(0,f.warn)(`Optional content group not found: ${e}`),!0;if(b(this,A).get(e).visible)return!0}return!1}else if(n.policy==="AllOn"){for(const e of n.ids){if(!b(this,A).has(e))return(0,f.warn)(`Optional content group not found: ${e}`),!0;if(!b(this,A).get(e).visible)return!1}return!0}else if(n.policy==="AnyOff"){for(const e of n.ids){if(!b(this,A).has(e))return(0,f.warn)(`Optional content group not found: ${e}`),!0;if(!b(this,A).get(e).visible)return!0}return!1}else if(n.policy==="AllOff"){for(const e of n.ids){if(!b(this,A).has(e))return(0,f.warn)(`Optional content group not found: ${e}`),!0;if(b(this,A).get(e).visible)return!1}return!0}return(0,f.warn)(`Unknown optional content policy ${n.policy}.`),!0}return(0,f.warn)(`Unknown group type ${n.type}.`),!0}setVisibility(n,e=!0){if(!b(this,A).has(n)){(0,f.warn)(`Optional content group not found: ${n}`);return}b(this,A).get(n)._setVisible(z,!!e),_t(this,m,null)}get hasInitialVisibility(){return this.getHash()===b(this,R)}getOrder(){return b(this,A).size?b(this,v)?b(this,v).slice():[...b(this,A).keys()]:null}getGroups(){return b(this,A).size>0?(0,f.objectFromMap)(b(this,A)):null}getGroup(n){return b(this,A).get(n)||null}getHash(){if(b(this,m)!==null)return b(this,m);const n=new k.MurmurHash3_64;for(const[e,r]of b(this,A))n.update(`${e}:${r.visible}`);return _t(this,m,n.hexdigest())}}m=new WeakMap,A=new WeakMap,R=new WeakMap,v=new WeakMap,y=new WeakSet,ue=function(n){const e=n.length;if(e<2)return!0;const r=n[0];for(let a=1;a<e;a++){const c=n[a];let t;if(Array.isArray(c))t=dt(this,y,ue).call(this,c);else if(b(this,A).has(c))t=b(this,A).get(c).visible;else return(0,f.warn)(`Optional content group not found: ${c}`),!0;switch(r){case"And":if(!t)return!1;break;case"Or":if(t)return!0;break;case"Not":return!t;default:return!0}}return r==="And"},u.OptionalContentConfig=W},(ct,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFDataTransportStream=void 0;var f=Y(1),k=Y(6);class z{constructor(m,A){(0,f.assert)(A,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=m.progressiveDone||!1,this._contentDispositionFilename=m.contentDispositionFilename||null;const R=m.initialData;if((R==null?void 0:R.length)>0){const v=new Uint8Array(R).buffer;this._queuedChunks.push(v)}this._pdfDataRangeTransport=A,this._isStreamingSupported=!m.disableStream,this._isRangeSupported=!m.disableRange,this._contentLength=m.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((v,y)=>{this._onReceiveData({begin:v,chunk:y})}),this._pdfDataRangeTransport.addProgressListener((v,y)=>{this._onProgress({loaded:v,total:y})}),this._pdfDataRangeTransport.addProgressiveReadListener(v=>{this._onReceiveData({chunk:v})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(m){const A=new Uint8Array(m.chunk).buffer;if(m.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(A):this._queuedChunks.push(A);else{const R=this._rangeReaders.some(function(v){return v._begin!==m.begin?!1:(v._enqueue(A),!0)});(0,f.assert)(R,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var m;return((m=this._fullRequestReader)==null?void 0:m._loaded)??0}_onProgress(m){var A,R,v,y;m.total===void 0?(R=(A=this._rangeReaders[0])==null?void 0:A.onProgress)==null||R.call(A,{loaded:m.loaded}):(y=(v=this._fullRequestReader)==null?void 0:v.onProgress)==null||y.call(v,{loaded:m.loaded,total:m.total})}_onProgressiveDone(){var m;(m=this._fullRequestReader)==null||m.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(m){const A=this._rangeReaders.indexOf(m);A>=0&&this._rangeReaders.splice(A,1)}getFullReader(){(0,f.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const m=this._queuedChunks;return this._queuedChunks=null,new U(this,m,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(m,A){if(A<=this._progressiveDataLength)return null;const R=new W(this,m,A);return this._pdfDataRangeTransport.requestDataRange(m,A),this._rangeReaders.push(R),R}cancelAllRequests(m){var A;(A=this._fullRequestReader)==null||A.cancel(m);for(const R of this._rangeReaders.slice(0))R.cancel(m);this._pdfDataRangeTransport.abort()}}u.PDFDataTransportStream=z;class U{constructor(m,A,R=!1,v=null){this._stream=m,this._done=R||!1,this._filename=(0,k.isPdfFile)(v)?v:null,this._queuedChunks=A||[],this._loaded=0;for(const y of this._queuedChunks)this._loaded+=y.byteLength;this._requests=[],this._headersReady=Promise.resolve(),m._fullRequestReader=this,this.onProgress=null}_enqueue(m){this._done||(this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunks.push(m),this._loaded+=m.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const m=(0,f.createPromiseCapability)();return this._requests.push(m),m.promise}cancel(m){this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class W{constructor(m,A,R){this._stream=m,this._begin=A,this._end=R,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(m){if(!this._done){if(this._requests.length===0)this._queuedChunk=m;else{this._requests.shift().resolve({value:m,done:!1});for(const R of this._requests)R.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const A=this._queuedChunk;return this._queuedChunk=null,{value:A,done:!1}}if(this._done)return{value:void 0,done:!0};const m=(0,f.createPromiseCapability)();return this._requests.push(m),m.promise}cancel(m){this._done=!0;for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(ct,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.XfaText=void 0;class Y{static textContent(k){const z=[],U={items:z,styles:Object.create(null)};function W(N){var R;if(!N)return;let m=null;const A=N.name;if(A==="#text")m=N.value;else if(Y.shouldBuildText(A))(R=N==null?void 0:N.attributes)!=null&&R.textContent?m=N.attributes.textContent:N.value&&(m=N.value);else return;if(m!==null&&z.push({str:m}),!!N.children)for(const v of N.children)W(v)}return W(k),U}static shouldBuildText(k){return!(k==="textarea"||k==="input"||k==="option"||k==="select")}}u.XfaText=Y},(ct,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.NodeStandardFontDataFactory=u.NodeCanvasFactory=u.NodeCMapReaderFactory=void 0;var f=Y(7);const k=function(N){return new Promise((m,A)=>{require$$5.readFile(N,(v,y)=>{if(v||!y){A(new Error(v));return}m(new Uint8Array(y))})})};class z extends f.BaseCanvasFactory{_createCanvas(m,A){return require$$5.createCanvas(m,A)}}u.NodeCanvasFactory=z;class U extends f.BaseCMapReaderFactory{_fetchData(m,A){return k(m).then(R=>({cMapData:R,compressionType:A}))}}u.NodeCMapReaderFactory=U;class W extends f.BaseStandardFontDataFactory{_fetchData(m){return k(m)}}u.NodeStandardFontDataFactory=W},(ct,u,Y)=>{var N,m,A,R,v,y,d,o,n,fe,r,Oe,c,pe,s,De;Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationEditorLayer=void 0;var f=Y(5),k=Y(1),z=Y(22),U=Y(23);const T=class{constructor(E){et(this,n);et(this,r);et(this,c);et(this,s);et(this,N,void 0);et(this,m,!1);et(this,A,this.pointerup.bind(this));et(this,R,this.pointerdown.bind(this));et(this,v,new Map);et(this,y,!1);et(this,d,!1);et(this,o,void 0);T._initialized||(T._initialized=!0,z.FreeTextEditor.initialize(E.l10n),U.InkEditor.initialize(E.l10n)),E.uiManager.registerEditorTypes([z.FreeTextEditor,U.InkEditor]),_t(this,o,E.uiManager),this.annotationStorage=E.annotationStorage,this.pageIndex=E.pageIndex,this.div=E.div,_t(this,N,E.accessibilityManager),b(this,o).addLayer(this)}updateToolbar(E){b(this,o).updateToolbar(E)}updateMode(E=b(this,o).getMode()){dt(this,s,De).call(this),E===k.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),b(this,o).unselectAll(),this.div.classList.toggle("freeTextEditing",E===k.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",E===k.AnnotationEditorType.INK)}addInkEditorIfNeeded(E){if(!E&&b(this,o).getMode()!==k.AnnotationEditorType.INK)return;if(!E){for(const Q of b(this,v).values())if(Q.isEmpty()){Q.setInBackground();return}}dt(this,c,pe).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(E){b(this,o).setEditingState(E)}addCommands(E){b(this,o).addCommands(E)}enable(){this.div.style.pointerEvents="auto";for(const E of b(this,v).values())E.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const E of b(this,v).values())E.disableEditing()}setActiveEditor(E){b(this,o).getActive()!==E&&b(this,o).setActiveEditor(E)}enableClick(){this.div.addEventListener("pointerdown",b(this,R)),this.div.addEventListener("pointerup",b(this,A))}disableClick(){this.div.removeEventListener("pointerdown",b(this,R)),this.div.removeEventListener("pointerup",b(this,A))}attach(E){b(this,v).set(E.id,E)}detach(E){var w;b(this,v).delete(E.id),(w=b(this,N))==null||w.removePointerInTextLayer(E.contentDiv)}remove(E){b(this,o).removeEditor(E),this.detach(E),this.annotationStorage.remove(E.id),E.div.style.display="none",setTimeout(()=>{E.div.style.display="",E.div.remove(),E.isAttachedToDOM=!1,document.activeElement===document.body&&b(this,o).focusMainContainer()},0),b(this,d)||this.addInkEditorIfNeeded(!1)}add(E){if(dt(this,n,fe).call(this,E),b(this,o).addEditor(E),this.attach(E),!E.isAttachedToDOM){const w=E.render();this.div.append(w),E.isAttachedToDOM=!0}this.moveEditorInDOM(E),E.onceAdded(),this.addToAnnotationStorage(E)}moveEditorInDOM(E){var w;(w=b(this,N))==null||w.moveElementInDOM(this.div,E.div,E.contentDiv,!0)}addToAnnotationStorage(E){!E.isEmpty()&&!this.annotationStorage.has(E.id)&&this.annotationStorage.setValue(E.id,E)}addOrRebuild(E){E.needsToBeRebuilt()?E.rebuild():this.add(E)}addANewEditor(E){const w=()=>{this.addOrRebuild(E)},Q=()=>{E.remove()};this.addCommands({cmd:w,undo:Q,mustExec:!0})}addUndoableEditor(E){const w=()=>{this.addOrRebuild(E)},Q=()=>{E.remove()};this.addCommands({cmd:w,undo:Q,mustExec:!1})}getNextId(){return b(this,o).getId()}deserialize(E){switch(E.annotationType){case k.AnnotationEditorType.FREETEXT:return z.FreeTextEditor.deserialize(E,this);case k.AnnotationEditorType.INK:return U.InkEditor.deserialize(E,this)}return null}setSelected(E){b(this,o).setSelected(E)}toggleSelected(E){b(this,o).toggleSelected(E)}isSelected(E){return b(this,o).isSelected(E)}unselect(E){b(this,o).unselect(E)}pointerup(E){const w=f.KeyboardManager.platform.isMac;if(!(E.button!==0||E.ctrlKey&&w)&&E.target===this.div&&b(this,y)){if(_t(this,y,!1),!b(this,m)){_t(this,m,!0);return}dt(this,c,pe).call(this,E)}}pointerdown(E){const w=f.KeyboardManager.platform.isMac;if(E.button!==0||E.ctrlKey&&w||E.target!==this.div)return;_t(this,y,!0);const Q=b(this,o).getActive();_t(this,m,!Q||Q.isEmpty())}drop(E){const w=E.dataTransfer.getData("text/plain"),Q=b(this,o).getEditor(w);if(!Q)return;E.preventDefault(),E.dataTransfer.dropEffect="move",dt(this,n,fe).call(this,Q);const ht=this.div.getBoundingClientRect(),at=E.clientX-ht.x,X=E.clientY-ht.y;Q.translate(at-Q.startX,X-Q.startY),this.moveEditorInDOM(Q),Q.div.focus()}dragover(E){E.preventDefault()}destroy(){var E,w;((E=b(this,o).getActive())==null?void 0:E.parent)===this&&b(this,o).setActiveEditor(null);for(const Q of b(this,v).values())(w=b(this,N))==null||w.removePointerInTextLayer(Q.contentDiv),Q.isAttachedToDOM=!1,Q.div.remove(),Q.parent=null;this.div=null,b(this,v).clear(),b(this,o).removeLayer(this)}render(E){this.viewport=E.viewport,(0,f.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const w of b(this,o).getEditors(this.pageIndex))this.add(w);this.updateMode()}update(E){b(this,o).commitOrRemove(),this.viewport=E.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[E,w,Q,ht]=this.viewport.viewBox,at=Q-E,X=ht-w;return[at,X]}get viewportBaseDimensions(){const{width:E,height:w,rotation:Q}=this.viewport;return Q%180===0?[E,w]:[w,E]}setDimensions(){const{width:E,height:w,rotation:Q}=this.viewport,ht=Q%180!==0,at=Math.floor(E)+"px",X=Math.floor(w)+"px";this.div.style.width=ht?X:at,this.div.style.height=ht?at:X,this.div.setAttribute("data-main-rotation",Q)}};let W=T;N=new WeakMap,m=new WeakMap,A=new WeakMap,R=new WeakMap,v=new WeakMap,y=new WeakMap,d=new WeakMap,o=new WeakMap,n=new WeakSet,fe=function(E){var w;E.parent!==this&&(this.attach(E),E.pageIndex=this.pageIndex,(w=E.parent)==null||w.detach(E),E.parent=this,E.div&&E.isAttachedToDOM&&(E.div.remove(),this.div.append(E.div)))},r=new WeakSet,Oe=function(E){switch(b(this,o).getMode()){case k.AnnotationEditorType.FREETEXT:return new z.FreeTextEditor(E);case k.AnnotationEditorType.INK:return new U.InkEditor(E)}return null},c=new WeakSet,pe=function(E){const w=this.getNextId(),Q=dt(this,r,Oe).call(this,{parent:this,id:w,x:E.offsetX,y:E.offsetY});return Q&&this.add(Q),Q},s=new WeakSet,De=function(){_t(this,d,!0);for(const E of b(this,v).values())E.isEmpty()&&E.remove();_t(this,d,!1)},It(W,"_initialized",!1),u.AnnotationEditorLayer=W},(ct,u,Y)=>{var W,N,m,A,R,v,y,d,o,n,Ie,r,Le,c,Ne,s,ge;Object.defineProperty(u,"__esModule",{value:!0}),u.FreeTextEditor=void 0;var f=Y(1),k=Y(5),z=Y(4);const T=class extends z.AnnotationEditor{constructor(w){super({...w,name:"freeTextEditor"});et(this,n);et(this,r);et(this,c);et(this,s);et(this,W,this.editorDivBlur.bind(this));et(this,N,this.editorDivFocus.bind(this));et(this,m,this.editorDivInput.bind(this));et(this,A,this.editorDivKeydown.bind(this));et(this,R,void 0);et(this,v,"");et(this,y,`${this.id}-editor`);et(this,d,!1);et(this,o,void 0);_t(this,R,w.color||T._defaultColor||z.AnnotationEditor._defaultLineColor),_t(this,o,w.fontSize||T._defaultFontSize)}static initialize(w){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(ht=>[ht,w.get(ht)]));const Q=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Q.getPropertyValue("--freetext-padding"))}static updateDefaultParams(w,Q){switch(w){case f.AnnotationEditorParamsType.FREETEXT_SIZE:T._defaultFontSize=Q;break;case f.AnnotationEditorParamsType.FREETEXT_COLOR:T._defaultColor=Q;break}}updateParams(w,Q){switch(w){case f.AnnotationEditorParamsType.FREETEXT_SIZE:dt(this,n,Ie).call(this,Q);break;case f.AnnotationEditorParamsType.FREETEXT_COLOR:dt(this,r,Le).call(this,Q);break}}static get defaultPropertiesToUpdate(){return[[f.AnnotationEditorParamsType.FREETEXT_SIZE,T._defaultFontSize],[f.AnnotationEditorParamsType.FREETEXT_COLOR,T._defaultColor||z.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[f.AnnotationEditorParamsType.FREETEXT_SIZE,b(this,o)],[f.AnnotationEditorParamsType.FREETEXT_COLOR,b(this,R)]]}getInitialTranslation(){return[-T._internalPadding*this.parent.scaleFactor,-(T._internalPadding+b(this,o))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(f.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",b(this,A)),this.editorDiv.addEventListener("focus",b(this,N)),this.editorDiv.addEventListener("blur",b(this,W)),this.editorDiv.addEventListener("input",b(this,m)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",b(this,y)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",b(this,A)),this.editorDiv.removeEventListener("focus",b(this,N)),this.editorDiv.removeEventListener("blur",b(this,W)),this.editorDiv.removeEventListener("input",b(this,m)),this.div.focus(),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(w){super.focusin(w),w.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){super.commit(),b(this,d)||(_t(this,d,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),_t(this,v,dt(this,c,Ne).call(this).trimEnd()),dt(this,s,ge).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(w){this.enableEditMode(),this.editorDiv.focus()}keydown(w){w.target===this.div&&w.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(w){T._keyboardManager.exec(this,w)}editorDivFocus(w){this.isEditing=!0}editorDivBlur(w){this.isEditing=!1}editorDivInput(w){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let w,Q;this.width&&(w=this.x,Q=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",b(this,y)),this.enableEditing(),T._l10nPromise.get("editor_free_text2_aria_label").then(at=>{var X;return(X=this.editorDiv)==null?void 0:X.setAttribute("aria-label",at)}),T._l10nPromise.get("free_text2_default_content").then(at=>{var X;return(X=this.editorDiv)==null?void 0:X.setAttribute("default-content",at)}),this.editorDiv.contentEditable=!0;const{style:ht}=this.editorDiv;if(ht.fontSize=`calc(${b(this,o)}px * var(--scale-factor))`,ht.color=b(this,R),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,k.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[at,X]=this.parent.viewportBaseDimensions;this.setAt(w*at,Q*X,this.width*at,this.height*X);for(const B of b(this,v).split(`
`)){const $=document.createElement("div");$.append(B?document.createTextNode(B):document.createElement("br")),this.editorDiv.append($)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(w,Q){const ht=super.deserialize(w,Q);return _t(ht,o,w.fontSize),_t(ht,R,f.Util.makeHexColor(...w.color)),_t(ht,v,w.value),ht}serialize(){if(this.isEmpty())return null;const w=T._internalPadding*this.parent.scaleFactor,Q=this.getRect(w,w),ht=z.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:f.AnnotationEditorType.FREETEXT,color:ht,fontSize:b(this,o),value:b(this,v),pageIndex:this.parent.pageIndex,rect:Q,rotation:this.rotation}}};let U=T;W=new WeakMap,N=new WeakMap,m=new WeakMap,A=new WeakMap,R=new WeakMap,v=new WeakMap,y=new WeakMap,d=new WeakMap,o=new WeakMap,n=new WeakSet,Ie=function(w){const Q=at=>{this.editorDiv.style.fontSize=`calc(${at}px * var(--scale-factor))`,this.translate(0,-(at-b(this,o))*this.parent.scaleFactor),_t(this,o,at),dt(this,s,ge).call(this)},ht=b(this,o);this.parent.addCommands({cmd:()=>{Q(w)},undo:()=>{Q(ht)},mustExec:!0,type:f.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},r=new WeakSet,Le=function(w){const Q=b(this,R);this.parent.addCommands({cmd:()=>{_t(this,R,w),this.editorDiv.style.color=w},undo:()=>{_t(this,R,Q),this.editorDiv.style.color=Q},mustExec:!0,type:f.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},c=new WeakSet,Ne=function(){const w=this.editorDiv.getElementsByTagName("div");if(w.length===0)return this.editorDiv.innerText;const Q=[];for(const ht of w)Q.push(ht.innerText.replace(/\r\n?|\n/,""));return Q.join(`
`)},s=new WeakSet,ge=function(){const[w,Q]=this.parent.viewportBaseDimensions,ht=this.div.getBoundingClientRect();this.width=ht.width/w,this.height=ht.height/Q},It(U,"_freeTextDefaultContent",""),It(U,"_l10nPromise"),It(U,"_internalPadding",0),It(U,"_defaultColor",null),It(U,"_defaultFontSize",10),It(U,"_keyboardManager",new k.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],T.prototype.commitOrRemove]])),It(U,"_type","freetext"),u.FreeTextEditor=U},(ct,u,Y)=>{var A,R,v,y,d,o,n,e,r,a,c,t,s,g,T,Ue,E,je,Q,Be,at,We,B,me,Z,qe,bt,He,O,Ge,l,Xt,F,be,I,ee,G,se,V,$t,tt,_e,i,ne,P,Ae,x,Xe,it,ze,j,Ve,nt,ye,L,ie,At,Yt,Rt,ve;Object.defineProperty(u,"__esModule",{value:!0}),u.InkEditor=void 0,Object.defineProperty(u,"fitCurve",{enumerable:!0,get:function(){return z.fitCurve}});var f=Y(1),k=Y(4),z=Y(24),U=Y(5);const W=16,N=100,Ct=class extends k.AnnotationEditor{constructor(S){super({...S,name:"inkEditor"});et(this,T);et(this,E);et(this,Q);et(this,at);et(this,B);et(this,Z);et(this,bt);et(this,O);et(this,l);et(this,F);et(this,I);et(this,G);et(this,V);et(this,tt);et(this,i);et(this,x);et(this,it);et(this,j);et(this,nt);et(this,L);et(this,At);et(this,Rt);et(this,A,0);et(this,R,0);et(this,v,0);et(this,y,this.canvasPointermove.bind(this));et(this,d,this.canvasPointerleave.bind(this));et(this,o,this.canvasPointerup.bind(this));et(this,n,this.canvasPointerdown.bind(this));et(this,e,!1);et(this,r,!1);et(this,a,null);et(this,c,null);et(this,t,0);et(this,s,0);et(this,g,null);this.color=S.color||null,this.thickness=S.thickness||null,this.opacity=S.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(S){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(J=>[J,S.get(J)]))}static updateDefaultParams(S,J){switch(S){case f.AnnotationEditorParamsType.INK_THICKNESS:Ct._defaultThickness=J;break;case f.AnnotationEditorParamsType.INK_COLOR:Ct._defaultColor=J;break;case f.AnnotationEditorParamsType.INK_OPACITY:Ct._defaultOpacity=J/100;break}}updateParams(S,J){switch(S){case f.AnnotationEditorParamsType.INK_THICKNESS:dt(this,T,Ue).call(this,J);break;case f.AnnotationEditorParamsType.INK_COLOR:dt(this,E,je).call(this,J);break;case f.AnnotationEditorParamsType.INK_OPACITY:dt(this,Q,Be).call(this,J);break}}static get defaultPropertiesToUpdate(){return[[f.AnnotationEditorParamsType.INK_THICKNESS,Ct._defaultThickness],[f.AnnotationEditorParamsType.INK_COLOR,Ct._defaultColor||k.AnnotationEditor._defaultLineColor],[f.AnnotationEditorParamsType.INK_OPACITY,Math.round(Ct._defaultOpacity*100)]]}get propertiesToUpdate(){return[[f.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Ct._defaultThickness],[f.AnnotationEditorParamsType.INK_COLOR,this.color||Ct._defaultColor||k.AnnotationEditor._defaultLineColor],[f.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Ct._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(dt(this,I,ee).call(this),dt(this,G,se).call(this)),this.isAttachedToDOM||(this.parent.add(this),dt(this,V,$t).call(this)),dt(this,At,Yt).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,b(this,c).disconnect(),_t(this,c,null),super.remove())}enableEditMode(){b(this,e)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",b(this,n)),this.canvas.addEventListener("pointerup",b(this,o)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",b(this,n)),this.canvas.removeEventListener("pointerup",b(this,o)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){b(this,e)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),_t(this,e,!0),this.div.classList.add("disabled"),dt(this,At,Yt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(S){super.focusin(S),this.enableEditMode()}canvasPointerdown(S){S.button!==0||!this.isInEditMode()||b(this,e)||(this.setInForeground(),S.type!=="mouse"&&this.div.focus(),S.stopPropagation(),this.canvas.addEventListener("pointerleave",b(this,d)),this.canvas.addEventListener("pointermove",b(this,y)),dt(this,Z,qe).call(this,S.offsetX,S.offsetY))}canvasPointermove(S){S.stopPropagation(),dt(this,bt,He).call(this,S.offsetX,S.offsetY)}canvasPointerup(S){S.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(S.stopPropagation(),dt(this,F,be).call(this,S),this.setInBackground())}canvasPointerleave(S){dt(this,F,be).call(this,S),this.setInBackground()}render(){if(this.div)return this.div;let S,J;this.width&&(S=this.x,J=this.y),super.render(),Ct._l10nPromise.get("editor_ink2_aria_label").then(Pt=>{var wt;return(wt=this.div)==null?void 0:wt.setAttribute("aria-label",Pt)});const[pt,Et,Tt,Mt]=dt(this,at,We).call(this);if(this.setAt(pt,Et,0,0),this.setDims(Tt,Mt),dt(this,I,ee).call(this),this.width){const[Pt,wt]=this.parent.viewportBaseDimensions;this.setAt(S*Pt,J*wt,this.width*Pt,this.height*wt),_t(this,r,!0),dt(this,V,$t).call(this),this.setDims(this.width*Pt,this.height*wt),dt(this,l,Xt).call(this),dt(this,Rt,ve).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return dt(this,G,se).call(this),this.div}setDimensions(S,J){const pt=Math.round(S),Et=Math.round(J);if(b(this,t)===pt&&b(this,s)===Et)return;_t(this,t,pt),_t(this,s,Et),this.canvas.style.visibility="hidden",b(this,A)&&Math.abs(b(this,A)-S/J)>.01&&(J=Math.ceil(S/b(this,A)),this.setDims(S,J));const[Tt,Mt]=this.parent.viewportBaseDimensions;this.width=S/Tt,this.height=J/Mt,b(this,e)&&dt(this,tt,_e).call(this,S,J),dt(this,V,$t).call(this),dt(this,l,Xt).call(this),this.canvas.style.visibility="visible"}static deserialize(S,J){var Lt,Dt;const pt=super.deserialize(S,J);pt.thickness=S.thickness,pt.color=f.Util.makeHexColor(...S.color),pt.opacity=S.opacity;const[Et,Tt]=J.pageDimensions,Mt=pt.width*Et,Pt=pt.height*Tt,wt=J.scaleFactor,kt=S.thickness/2;_t(pt,A,Mt/Pt),_t(pt,e,!0),_t(pt,t,Math.round(Mt)),_t(pt,s,Math.round(Pt));for(const{bezier:xt}of S.paths){const jt=[];pt.paths.push(jt);let Bt=wt*(xt[0]-kt),Wt=wt*(Pt-xt[1]-kt);for(let Nt=2,Ut=xt.length;Nt<Ut;Nt+=6){const Gt=wt*(xt[Nt]-kt),zt=wt*(Pt-xt[Nt+1]-kt),Zt=wt*(xt[Nt+2]-kt),te=wt*(Pt-xt[Nt+3]-kt),Kt=wt*(xt[Nt+4]-kt),Te=wt*(Pt-xt[Nt+5]-kt);jt.push([[Bt,Wt],[Gt,zt],[Zt,te],[Kt,Te]]),Bt=Kt,Wt=Te}const qt=dt(this,P,Ae).call(this,jt);pt.bezierPath2D.push(qt)}const Ot=dt(Lt=pt,nt,ye).call(Lt);return _t(pt,v,Math.max(W,Ot[2]-Ot[0])),_t(pt,R,Math.max(W,Ot[3]-Ot[1])),dt(Dt=pt,tt,_e).call(Dt,Mt,Pt),pt}serialize(){if(this.isEmpty())return null;const S=this.getRect(0,0),J=this.rotation%180===0?S[3]-S[1]:S[2]-S[0],pt=k.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:f.AnnotationEditorType.INK,color:pt,thickness:this.thickness,opacity:this.opacity,paths:dt(this,x,Xe).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,J),pageIndex:this.parent.pageIndex,rect:S,rotation:this.rotation}}};let m=Ct;A=new WeakMap,R=new WeakMap,v=new WeakMap,y=new WeakMap,d=new WeakMap,o=new WeakMap,n=new WeakMap,e=new WeakMap,r=new WeakMap,a=new WeakMap,c=new WeakMap,t=new WeakMap,s=new WeakMap,g=new WeakMap,T=new WeakSet,Ue=function(S){const J=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=S,dt(this,At,Yt).call(this)},undo:()=>{this.thickness=J,dt(this,At,Yt).call(this)},mustExec:!0,type:f.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},E=new WeakSet,je=function(S){const J=this.color;this.parent.addCommands({cmd:()=>{this.color=S,dt(this,l,Xt).call(this)},undo:()=>{this.color=J,dt(this,l,Xt).call(this)},mustExec:!0,type:f.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Q=new WeakSet,Be=function(S){S/=100;const J=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=S,dt(this,l,Xt).call(this)},undo:()=>{this.opacity=J,dt(this,l,Xt).call(this)},mustExec:!0,type:f.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},at=new WeakSet,We=function(){const{width:S,height:J,rotation:pt}=this.parent.viewport;switch(pt){case 90:return[0,S,S,J];case 180:return[S,J,S,J];case 270:return[J,0,S,J];default:return[0,0,S,J]}},B=new WeakSet,me=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,U.opacityToHex)(this.opacity)}`},Z=new WeakSet,qe=function(S,J){this.isEditing=!0,b(this,r)||(_t(this,r,!0),dt(this,V,$t).call(this),this.thickness||(this.thickness=Ct._defaultThickness),this.color||(this.color=Ct._defaultColor||k.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Ct._defaultOpacity)),this.currentPath.push([S,J]),_t(this,a,null),dt(this,B,me).call(this),this.ctx.beginPath(),this.ctx.moveTo(S,J),_t(this,g,()=>{b(this,g)&&(b(this,a)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):dt(this,l,Xt).call(this),this.ctx.lineTo(...b(this,a)),_t(this,a,null),this.ctx.stroke()),window.requestAnimationFrame(b(this,g)))}),window.requestAnimationFrame(b(this,g))},bt=new WeakSet,He=function(S,J){const[pt,Et]=this.currentPath.at(-1);S===pt&&J===Et||(this.currentPath.push([S,J]),_t(this,a,[S,J]))},O=new WeakSet,Ge=function(S,J){var kt;this.ctx.closePath(),_t(this,g,null),S=Math.min(Math.max(S,0),this.canvas.width),J=Math.min(Math.max(J,0),this.canvas.height);const[pt,Et]=this.currentPath.at(-1);(S!==pt||J!==Et)&&this.currentPath.push([S,J]);let Tt;if(this.currentPath.length!==1)Tt=(0,z.fitCurve)(this.currentPath,30,null);else{const Ot=[S,J];Tt=[[Ot,Ot.slice(),Ot.slice(),Ot]]}const Mt=dt(kt=Ct,P,Ae).call(kt,Tt);this.currentPath.length=0;const Pt=()=>{this.paths.push(Tt),this.bezierPath2D.push(Mt),this.rebuild()},wt=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(dt(this,I,ee).call(this),dt(this,G,se).call(this)),dt(this,At,Yt).call(this))};this.parent.addCommands({cmd:Pt,undo:wt,mustExec:!0})},l=new WeakSet,Xt=function(){if(this.isEmpty()){dt(this,i,ne).call(this);return}dt(this,B,me).call(this);const{canvas:S,ctx:J}=this;J.setTransform(1,0,0,1,0,0),J.clearRect(0,0,S.width,S.height),dt(this,i,ne).call(this);for(const pt of this.bezierPath2D)J.stroke(pt)},F=new WeakSet,be=function(S){dt(this,O,Ge).call(this,S.offsetX,S.offsetY),this.canvas.removeEventListener("pointerleave",b(this,d)),this.canvas.removeEventListener("pointermove",b(this,y)),this.parent.addToAnnotationStorage(this)},I=new WeakSet,ee=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Ct._l10nPromise.get("editor_ink_canvas_aria_label").then(S=>{var J;return(J=this.canvas)==null?void 0:J.setAttribute("aria-label",S)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},G=new WeakSet,se=function(){let S=null;_t(this,c,new ResizeObserver(J=>{const pt=J[0].contentRect;pt.width&&pt.height&&(S!==null&&clearTimeout(S),S=setTimeout(()=>{this.fixDims(),S=null},N),this.setDimensions(pt.width,pt.height))})),b(this,c).observe(this.div)},V=new WeakSet,$t=function(){if(!b(this,r))return;const[S,J]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*S),this.canvas.height=Math.ceil(this.height*J),dt(this,i,ne).call(this)},tt=new WeakSet,_e=function(S,J){const pt=dt(this,L,ie).call(this),Et=(S-pt)/b(this,v),Tt=(J-pt)/b(this,R);this.scaleFactor=Math.min(Et,Tt)},i=new WeakSet,ne=function(){const S=dt(this,L,ie).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+S,this.translationY*this.scaleFactor+S)},P=new WeakSet,Ae=function(S){const J=new Path2D;for(let pt=0,Et=S.length;pt<Et;pt++){const[Tt,Mt,Pt,wt]=S[pt];pt===0&&J.moveTo(...Tt),J.bezierCurveTo(Mt[0],Mt[1],Pt[0],Pt[1],wt[0],wt[1])}return J},x=new WeakSet,Xe=function(S,J,pt,Et){const Mt=[],Pt=this.thickness/2;let wt,kt;for(const Ot of this.paths){wt=[],kt=[];for(let Lt=0,Dt=Ot.length;Lt<Dt;Lt++){const[xt,jt,Bt,Wt]=Ot[Lt],qt=S*(xt[0]+J)+Pt,Nt=Et-S*(xt[1]+pt)-Pt,Ut=S*(jt[0]+J)+Pt,Gt=Et-S*(jt[1]+pt)-Pt,zt=S*(Bt[0]+J)+Pt,Zt=Et-S*(Bt[1]+pt)-Pt,te=S*(Wt[0]+J)+Pt,Kt=Et-S*(Wt[1]+pt)-Pt;Lt===0&&(wt.push(qt,Nt),kt.push(qt,Nt)),wt.push(Ut,Gt,zt,Zt,te,Kt),dt(this,it,ze).call(this,qt,Nt,Ut,Gt,zt,Zt,te,Kt,4,kt)}Mt.push({bezier:wt,points:kt})}return Mt},it=new WeakSet,ze=function(S,J,pt,Et,Tt,Mt,Pt,wt,kt,Ot){if(dt(this,j,Ve).call(this,S,J,pt,Et,Tt,Mt,Pt,wt)){Ot.push(Pt,wt);return}for(let Lt=1;Lt<kt-1;Lt++){const Dt=Lt/kt,xt=1-Dt;let jt=Dt*S+xt*pt,Bt=Dt*J+xt*Et,Wt=Dt*pt+xt*Tt,qt=Dt*Et+xt*Mt;const Nt=Dt*Tt+xt*Pt,Ut=Dt*Mt+xt*wt;jt=Dt*jt+xt*Wt,Bt=Dt*Bt+xt*qt,Wt=Dt*Wt+xt*Nt,qt=Dt*qt+xt*Ut,jt=Dt*jt+xt*Wt,Bt=Dt*Bt+xt*qt,Ot.push(jt,Bt)}Ot.push(Pt,wt)},j=new WeakSet,Ve=function(S,J,pt,Et,Tt,Mt,Pt,wt){const Ot=(3*pt-2*S-Pt)**2,Lt=(3*Et-2*J-wt)**2,Dt=(3*Tt-S-2*Pt)**2,xt=(3*Mt-J-2*wt)**2;return Math.max(Ot,Dt)+Math.max(Lt,xt)<=10},nt=new WeakSet,ye=function(){let S=1/0,J=-1/0,pt=1/0,Et=-1/0;for(const Tt of this.paths)for(const[Mt,Pt,wt,kt]of Tt){const Ot=f.Util.bezierBoundingBox(...Mt,...Pt,...wt,...kt);S=Math.min(S,Ot[0]),pt=Math.min(pt,Ot[1]),J=Math.max(J,Ot[2]),Et=Math.max(Et,Ot[3])}return[S,pt,J,Et]},L=new WeakSet,ie=function(){return b(this,e)?Math.ceil(this.thickness*this.parent.scaleFactor):0},At=new WeakSet,Yt=function(S=!1){if(this.isEmpty())return;if(!b(this,e)){dt(this,l,Xt).call(this);return}const J=dt(this,nt,ye).call(this),pt=dt(this,L,ie).call(this);_t(this,v,Math.max(W,J[2]-J[0])),_t(this,R,Math.max(W,J[3]-J[1]));const Et=Math.ceil(pt+b(this,v)*this.scaleFactor),Tt=Math.ceil(pt+b(this,R)*this.scaleFactor),[Mt,Pt]=this.parent.viewportBaseDimensions;this.width=Et/Mt,this.height=Tt/Pt,_t(this,A,Et/Tt),dt(this,Rt,ve).call(this);const wt=this.translationX,kt=this.translationY;this.translationX=-J[0],this.translationY=-J[1],dt(this,V,$t).call(this),dt(this,l,Xt).call(this),_t(this,t,Et),_t(this,s,Tt),this.setDims(Et,Tt);const Ot=S?pt/this.scaleFactor/2:0;this.translate(wt-this.translationX-Ot,kt-this.translationY-Ot)},Rt=new WeakSet,ve=function(){const{style:S}=this.div;b(this,A)>=1?(S.minHeight=`${W}px`,S.minWidth=`${Math.round(b(this,A)*W)}px`):(S.minWidth=`${W}px`,S.minHeight=`${Math.round(W/b(this,A))}px`)},et(m,P),It(m,"_defaultColor",null),It(m,"_defaultOpacity",1),It(m,"_defaultThickness",1),It(m,"_l10nPromise"),It(m,"_type","ink"),u.InkEditor=m},(ct,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.fitCurve=void 0;const f=Y(25);u.fitCurve=f},ct=>{function u(d,o,n){if(!Array.isArray(d))throw new TypeError("First argument should be an array");if(d.forEach(c=>{if(!Array.isArray(c)||c.some(t=>typeof t!="number")||c.length!==d[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),d=d.filter((c,t)=>t===0||!c.every((s,g)=>s===d[t-1][g])),d.length<2)return[];const e=d.length,r=R(d[1],d[0]),a=R(d[e-2],d[e-1]);return Y(d,r,a,o,n)}function Y(d,o,n,e,r){var c,t,s,g,T,D,E,w,Q,ht,at,X,B;if(d.length===2)return X=v.vectorLen(v.subtract(d[0],d[1]))/3,c=[d[0],v.addArrays(d[0],v.mulItems(o,X)),v.addArrays(d[1],v.mulItems(n,X)),d[1]],[c];if(t=W(d),[c,g,D]=f(d,t,t,o,n,r),g===0||g<e)return[c];if(g<e*e)for(s=t,T=g,E=D,B=0;B<20;B++){if(s=z(c,d,s),[c,g,D]=f(d,t,s,o,n,r),g<e)return[c];if(D===E){let $=g/T;if($>.9999&&$<1.0001)break}T=g,E=D}return at=[],w=v.subtract(d[D-1],d[D+1]),w.every($=>$===0)&&(w=v.subtract(d[D-1],d[D]),[w[0],w[1]]=[-w[1],w[0]]),Q=v.normalize(w),ht=v.mulItems(Q,-1),at=at.concat(Y(d.slice(0,D+1),o,Q,e,r)),at=at.concat(Y(d.slice(D),ht,n,e,r)),at}function f(d,o,n,e,r,a){var c,t,s;return c=k(d,n,e,r),[t,s]=N(d,c,o),a&&a({bez:c,points:d,params:o,maxErr:t,maxPoint:s}),[c,t,s]}function k(d,o,n,e){var r,a,c,t,s,g,T,D,E,w,Q,ht,at,X,B,$,Z,st=d[0],bt=d[d.length-1];for(r=[st,null,null,bt],a=v.zeros_Xx2x2(o.length),at=0,X=o.length;at<X;at++)$=o[at],Z=1-$,c=a[at],c[0]=v.mulItems(n,3*$*(Z*Z)),c[1]=v.mulItems(e,3*Z*($*$));for(t=[[0,0],[0,0]],s=[0,0],at=0,X=d.length;at<X;at++)$=o[at],c=a[at],t[0][0]+=v.dot(c[0],c[0]),t[0][1]+=v.dot(c[0],c[1]),t[1][0]+=v.dot(c[0],c[1]),t[1][1]+=v.dot(c[1],c[1]),B=v.subtract(d[at],y.q([st,st,bt,bt],$)),s[0]+=v.dot(c[0],B),s[1]+=v.dot(c[1],B);return g=t[0][0]*t[1][1]-t[1][0]*t[0][1],T=t[0][0]*s[1]-t[1][0]*s[0],D=s[0]*t[1][1]-s[1]*t[0][1],E=g===0?0:D/g,w=g===0?0:T/g,ht=v.vectorLen(v.subtract(st,bt)),Q=1e-6*ht,E<Q||w<Q?(r[1]=v.addArrays(st,v.mulItems(n,ht/3)),r[2]=v.addArrays(bt,v.mulItems(e,ht/3))):(r[1]=v.addArrays(st,v.mulItems(n,E)),r[2]=v.addArrays(bt,v.mulItems(e,w))),r}function z(d,o,n){return n.map((e,r)=>U(d,o[r],e))}function U(d,o,n){var e=v.subtract(y.q(d,n),o),r=y.qprime(d,n),a=v.mulMatrix(e,r),c=v.sum(v.squareItems(r))+2*v.mulMatrix(e,y.qprimeprime(d,n));return c===0?n:n-a/c}function W(d){var o=[],n,e,r;return d.forEach((a,c)=>{n=c?e+v.vectorLen(v.subtract(a,r)):0,o.push(n),e=n,r=a}),o=o.map(a=>a/e),o}function N(d,o,n){var e,r,a,c,t,s,g,T;r=0,a=Math.floor(d.length/2);const D=m(o,10);for(t=0,s=d.length;t<s;t++)g=d[t],T=A(o,n[t],D,10),c=v.subtract(y.q(o,T),g),e=c[0]*c[0]+c[1]*c[1],e>r&&(r=e,a=t);return[r,a]}var m=function(d,o){for(var n,e=[0],r=d[0],a=0,c=1;c<=o;c++)n=y.q(d,c/o),a+=v.vectorLen(v.subtract(n,r)),e.push(a),r=n;return e=e.map(t=>t/a),e};function A(d,o,n,e){if(o<0)return 0;if(o>1)return 1;for(var r,a,c,t,s,g=1;g<=e;g++)if(o<=n[g]){t=(g-1)/e,c=g/e,a=n[g-1],r=n[g],s=(o-a)/(r-a)*(c-t)+t;break}return s}function R(d,o){return v.normalize(v.subtract(d,o))}class v{static zeros_Xx2x2(o){for(var n=[];o--;)n.push([0,0]);return n}static mulItems(o,n){return o.map(e=>e*n)}static mulMatrix(o,n){return o.reduce((e,r,a)=>e+r*n[a],0)}static subtract(o,n){return o.map((e,r)=>e-n[r])}static addArrays(o,n){return o.map((e,r)=>e+n[r])}static addItems(o,n){return o.map(e=>e+n)}static sum(o){return o.reduce((n,e)=>n+e)}static dot(o,n){return v.mulMatrix(o,n)}static vectorLen(o){return Math.hypot(...o)}static divItems(o,n){return o.map(e=>e/n)}static squareItems(o){return o.map(n=>n*n)}static normalize(o){return this.divItems(o,this.vectorLen(o))}}class y{static q(o,n){var e=1-n,r=v.mulItems(o[0],e*e*e),a=v.mulItems(o[1],3*e*e*n),c=v.mulItems(o[2],3*e*n*n),t=v.mulItems(o[3],n*n*n);return v.addArrays(v.addArrays(r,a),v.addArrays(c,t))}static qprime(o,n){var e=1-n,r=v.mulItems(v.subtract(o[1],o[0]),3*e*e),a=v.mulItems(v.subtract(o[2],o[1]),6*e*n),c=v.mulItems(v.subtract(o[3],o[2]),3*n*n);return v.addArrays(v.addArrays(r,a),c)}static qprimeprime(o,n){return v.addArrays(v.mulItems(v.addArrays(v.subtract(o[2],v.mulItems(o[1],2)),o[0]),6*(1-n)),v.mulItems(v.addArrays(v.subtract(o[3],v.mulItems(o[2],2)),o[1]),6*n))}}ct.exports=u,ct.exports.fitCubic=Y,ct.exports.createTangent=R},(ct,u,Y)=>{var h,Vt,_,$e,I,Se,G,Ee,V,Ce;Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationLayer=void 0;var f=Y(1),k=Y(6),z=Y(3),U=Y(27),W=Y(28);const N=1e3,m=9,A=new WeakSet;function R(ut){return{width:ut[2]-ut[0],height:ut[3]-ut[1]}}class v{static create(i){switch(i.data.annotationType){case f.AnnotationType.LINK:return new d(i);case f.AnnotationType.TEXT:return new o(i);case f.AnnotationType.WIDGET:switch(i.data.fieldType){case"Tx":return new e(i);case"Btn":return i.data.radioButton?new a(i):i.data.checkBox?new r(i):new c(i);case"Ch":return new t(i)}return new n(i);case f.AnnotationType.POPUP:return new s(i);case f.AnnotationType.FREETEXT:return new T(i);case f.AnnotationType.LINE:return new D(i);case f.AnnotationType.SQUARE:return new E(i);case f.AnnotationType.CIRCLE:return new w(i);case f.AnnotationType.POLYLINE:return new Q(i);case f.AnnotationType.CARET:return new at(i);case f.AnnotationType.INK:return new X(i);case f.AnnotationType.POLYGON:return new ht(i);case f.AnnotationType.HIGHLIGHT:return new B(i);case f.AnnotationType.UNDERLINE:return new $(i);case f.AnnotationType.SQUIGGLY:return new Z(i);case f.AnnotationType.STRIKEOUT:return new st(i);case f.AnnotationType.STAMP:return new bt(i);case f.AnnotationType.FILEATTACHMENT:return new yt(i);default:return new y(i)}}}class y{constructor(i,{isRenderable:p=!1,ignoreBorder:P=!1,createQuadrilaterals:C=!1}={}){this.isRenderable=p,this.data=i.data,this.layer=i.layer,this.page=i.page,this.viewport=i.viewport,this.linkService=i.linkService,this.downloadManager=i.downloadManager,this.imageResourcesPath=i.imageResourcesPath,this.renderForms=i.renderForms,this.svgFactory=i.svgFactory,this.annotationStorage=i.annotationStorage,this.enableScripting=i.enableScripting,this.hasJSActions=i.hasJSActions,this._fieldObjects=i.fieldObjects,this._mouseState=i.mouseState,p&&(this.container=this._createContainer(P)),C&&(this.quadrilaterals=this._createQuadrilaterals(P))}_createContainer(i=!1){const p=this.data,P=this.page,C=this.viewport,x=document.createElement("section"),{width:H,height:it}=R(p.rect),[gt,j,vt,nt]=C.viewBox,mt=vt-gt,L=nt-j;x.setAttribute("data-annotation-id",p.id);const ft=f.Util.normalizeRect([p.rect[0],P.view[3]-p.rect[1]+P.view[1],p.rect[2],P.view[3]-p.rect[3]+P.view[1]]);if(!i&&p.borderStyle.width>0){x.style.borderWidth=`${p.borderStyle.width}px`;const St=p.borderStyle.horizontalCornerRadius,Rt=p.borderStyle.verticalCornerRadius;if(St>0||Rt>0){const Ct=`calc(${St}px * var(--scale-factor)) / calc(${Rt}px * var(--scale-factor))`;x.style.borderRadius=Ct}else if(this instanceof a){const Ct=`calc(${H}px * var(--scale-factor)) / calc(${it}px * var(--scale-factor))`;x.style.borderRadius=Ct}switch(p.borderStyle.style){case f.AnnotationBorderStyleType.SOLID:x.style.borderStyle="solid";break;case f.AnnotationBorderStyleType.DASHED:x.style.borderStyle="dashed";break;case f.AnnotationBorderStyleType.BEVELED:(0,f.warn)("Unimplemented border style: beveled");break;case f.AnnotationBorderStyleType.INSET:(0,f.warn)("Unimplemented border style: inset");break;case f.AnnotationBorderStyleType.UNDERLINE:x.style.borderBottomStyle="solid";break}const Ft=p.borderColor||null;Ft?x.style.borderColor=f.Util.makeHexColor(Ft[0]|0,Ft[1]|0,Ft[2]|0):x.style.borderWidth=0}x.style.left=`${100*(ft[0]-gt)/mt}%`,x.style.top=`${100*(ft[1]-j)/L}%`;const{rotation:At}=p;return p.hasOwnCanvas||At===0?(x.style.width=`${100*H/mt}%`,x.style.height=`${100*it/L}%`):this.setRotation(At,x),x}setRotation(i,p=this.container){const[P,C,x,H]=this.viewport.viewBox,it=x-P,gt=H-C,{width:j,height:vt}=R(this.data.rect);let nt,mt;i%180===0?(nt=100*j/it,mt=100*vt/gt):(nt=100*vt/it,mt=100*j/gt),p.style.width=`${nt}%`,p.style.height=`${mt}%`,p.setAttribute("data-main-rotation",(360-i)%360)}get _commonActions(){const i=(p,P,C)=>{const x=C.detail[p];C.target.style[P]=U.ColorConverters[`${x[0]}_HTML`](x.slice(1))};return(0,f.shadow)(this,"_commonActions",{display:p=>{const P=p.detail.display%2===1;this.container.style.visibility=P?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:P,print:p.detail.display===0||p.detail.display===3})},print:p=>{this.annotationStorage.setValue(this.data.id,{print:p.detail.print})},hidden:p=>{this.container.style.visibility=p.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:p.detail.hidden})},focus:p=>{setTimeout(()=>p.target.focus({preventScroll:!1}),0)},userName:p=>{p.target.title=p.detail.userName},readonly:p=>{p.detail.readonly?p.target.setAttribute("readonly",""):p.target.removeAttribute("readonly")},required:p=>{this._setRequired(p.target,p.detail.required)},bgColor:p=>{i("bgColor","backgroundColor",p)},fillColor:p=>{i("fillColor","backgroundColor",p)},fgColor:p=>{i("fgColor","color",p)},textColor:p=>{i("textColor","color",p)},borderColor:p=>{i("borderColor","borderColor",p)},strokeColor:p=>{i("strokeColor","borderColor",p)},rotation:p=>{const P=p.detail.rotation;this.setRotation(P),this.annotationStorage.setValue(this.data.id,{rotation:P})}})}_dispatchEventFromSandbox(i,p){const P=this._commonActions;for(const C of Object.keys(p.detail)){const x=i[C]||P[C];x==null||x(p)}}_setDefaultPropertiesFromJS(i){if(!this.enableScripting)return;const p=this.annotationStorage.getRawValue(this.data.id);if(!p)return;const P=this._commonActions;for(const[C,x]of Object.entries(p)){const H=P[C];if(H){const it={detail:{[C]:x},target:i};H(it),delete p[C]}}}_createQuadrilaterals(i=!1){if(!this.data.quadPoints)return null;const p=[],P=this.data.rect;for(const C of this.data.quadPoints)this.data.rect=[C[2].x,C[2].y,C[1].x,C[1].y],p.push(this._createContainer(i));return this.data.rect=P,p}_createPopup(i,p){let P=this.container;this.quadrilaterals&&(i=i||this.quadrilaterals,P=this.quadrilaterals[0]),i||(i=document.createElement("div"),i.className="popupTriggerArea",P.append(i));const x=new g({container:P,trigger:i,color:p.color,titleObj:p.titleObj,modificationDate:p.modificationDate,contentsObj:p.contentsObj,richText:p.richText,hideWrapper:!0}).render();x.style.left="100%",P.append(x)}_renderQuadrilaterals(i){for(const p of this.quadrilaterals)p.className=i;return this.quadrilaterals}render(){(0,f.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(i,p=null){const P=[];if(this._fieldObjects){const C=this._fieldObjects[i];if(C)for(const{page:x,id:H,exportValues:it}of C){if(x===-1||H===p)continue;const gt=typeof it=="string"?it:null,j=document.querySelector(`[data-element-id="${H}"]`);if(j&&!A.has(j)){(0,f.warn)(`_getElementsByName - element not allowed: ${H}`);continue}P.push({id:H,exportValue:gt,domElement:j})}return P}for(const C of document.getElementsByName(i)){const{exportValue:x}=C,H=C.getAttribute("data-element-id");H!==p&&A.has(C)&&P.push({id:H,exportValue:x,domElement:C})}return P}static get platform(){const i=typeof navigator<"u"?navigator.platform:"";return(0,f.shadow)(this,"platform",{isWin:i.includes("Win"),isMac:i.includes("Mac")})}}class d extends y{constructor(p,P=null){super(p,{isRenderable:!0,ignoreBorder:!!(P!=null&&P.ignoreBorder),createQuadrilaterals:!0});et(this,h);et(this,_);this.isTooltipOnly=p.data.isTooltipOnly}render(){const{data:p,linkService:P}=this,C=document.createElement("a");C.setAttribute("data-element-id",p.id);let x=!1;return p.url?(P.addLinkAttributes(C,p.url,p.newWindow),x=!0):p.action?(this._bindNamedAction(C,p.action),x=!0):p.attachment?(this._bindAttachment(C,p.attachment),x=!0):p.setOCGState?(dt(this,_,$e).call(this,C,p.setOCGState),x=!0):p.dest?(this._bindLink(C,p.dest),x=!0):(p.actions&&(p.actions.Action||p.actions["Mouse Up"]||p.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(C,p),x=!0),p.resetForm?(this._bindResetFormAction(C,p.resetForm),x=!0):this.isTooltipOnly&&!x&&(this._bindLink(C,""),x=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((H,it)=>{const gt=it===0?C:C.cloneNode();return H.append(gt),H}):(this.container.className="linkAnnotation",x&&this.container.append(C),this.container)}_bindLink(p,P){p.href=this.linkService.getDestinationHash(P),p.onclick=()=>(P&&this.linkService.goToDestination(P),!1),(P||P==="")&&dt(this,h,Vt).call(this)}_bindNamedAction(p,P){p.href=this.linkService.getAnchorUrl(""),p.onclick=()=>(this.linkService.executeNamedAction(P),!1),dt(this,h,Vt).call(this)}_bindAttachment(p,P){p.href=this.linkService.getAnchorUrl(""),p.onclick=()=>{var C;return(C=this.downloadManager)==null||C.openOrDownloadData(this.container,P.content,P.filename),!1},dt(this,h,Vt).call(this)}_bindJSAction(p,P){p.href=this.linkService.getAnchorUrl("");const C=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const x of Object.keys(P.actions)){const H=C.get(x);H&&(p[H]=()=>{var it;return(it=this.linkService.eventBus)==null||it.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P.id,name:x}}),!1})}p.onclick||(p.onclick=()=>!1),dt(this,h,Vt).call(this)}_bindResetFormAction(p,P){const C=p.onclick;if(C||(p.href=this.linkService.getAnchorUrl("")),dt(this,h,Vt).call(this),!this._fieldObjects){(0,f.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),C||(p.onclick=()=>!1);return}p.onclick=()=>{var nt;C==null||C();const{fields:x,refs:H,include:it}=P,gt=[];if(x.length!==0||H.length!==0){const mt=new Set(H);for(const L of x){const ft=this._fieldObjects[L]||[];for(const{id:At}of ft)mt.add(At)}for(const L of Object.values(this._fieldObjects))for(const ft of L)mt.has(ft.id)===it&&gt.push(ft)}else for(const mt of Object.values(this._fieldObjects))gt.push(...mt);const j=this.annotationStorage,vt=[];for(const mt of gt){const{id:L}=mt;switch(vt.push(L),mt.type){case"text":{const At=mt.defaultValue||"";j.setValue(L,{value:At});break}case"checkbox":case"radiobutton":{const At=mt.defaultValue===mt.exportValues;j.setValue(L,{value:At});break}case"combobox":case"listbox":{const At=mt.defaultValue||"";j.setValue(L,{value:At});break}default:continue}const ft=document.querySelector(`[data-element-id="${L}"]`);if(ft){if(!A.has(ft)){(0,f.warn)(`_bindResetFormAction - element not allowed: ${L}`);continue}}else continue;ft.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((nt=this.linkService.eventBus)==null||nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:vt,name:"ResetForm"}})),!1}}}h=new WeakSet,Vt=function(){this.container.setAttribute("data-internal-link","")},_=new WeakSet,$e=function(p,P){p.href=this.linkService.getAnchorUrl(""),p.onclick=()=>(this.linkService.executeSetOCGState(P),!1),dt(this,h,Vt).call(this)};class o extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p})}render(){this.container.className="textAnnotation";const i=document.createElement("img");return i.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",i.alt="[{{type}} Annotation]",i.dataset.l10nId="text_annotation_type",i.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(i,this.data),this.container.append(i),this.container}}class n extends y{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(i){const{isWin:p,isMac:P}=y.platform;return p&&i.ctrlKey||P&&i.metaKey}_setEventListener(i,p,P,C){p.includes("mouse")?i.addEventListener(p,x=>{var H;(H=this.linkService.eventBus)==null||H.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:P,value:C(x),shift:x.shiftKey,modifier:this._getKeyModifier(x)}})}):i.addEventListener(p,x=>{var H;(H=this.linkService.eventBus)==null||H.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:P,value:C(x)}})})}_setEventListeners(i,p,P){var C;for(const[x,H]of p)(H==="Action"||(C=this.data.actions)!=null&&C[H])&&this._setEventListener(i,x,H,P)}_setBackgroundColor(i){const p=this.data.backgroundColor||null;i.style.backgroundColor=p===null?"transparent":f.Util.makeHexColor(p[0],p[1],p[2])}_setTextStyle(i){const p=["left","center","right"],{fontColor:P}=this.data.defaultAppearanceData,C=this.data.defaultAppearanceData.fontSize||m,x=i.style;let H;const it=2,gt=j=>Math.round(10*j)/10;if(this.data.multiLine){const j=Math.abs(this.data.rect[3]-this.data.rect[1]-it),vt=Math.round(j/(f.LINE_FACTOR*C))||1,nt=j/vt;H=Math.min(C,gt(nt/f.LINE_FACTOR))}else{const j=Math.abs(this.data.rect[3]-this.data.rect[1]-it);H=Math.min(C,gt(j/f.LINE_FACTOR))}x.fontSize=`calc(${H}px * var(--scale-factor))`,x.color=f.Util.makeHexColor(P[0],P[1],P[2]),this.data.textAlignment!==null&&(x.textAlign=p[this.data.textAlignment])}_setRequired(i,p){p?i.setAttribute("required",!0):i.removeAttribute("required"),i.setAttribute("aria-required",p)}}class e extends n{constructor(i){const p=i.renderForms||!i.data.hasAppearance&&!!i.data.fieldValue;super(i,{isRenderable:p})}setPropertyOnSiblings(i,p,P,C){const x=this.annotationStorage;for(const H of this._getElementsByName(i.name,i.id))H.domElement&&(H.domElement[p]=P),x.setValue(H.id,{[C]:P})}render(){var C;const i=this.annotationStorage,p=this.data.id;this.container.className="textWidgetAnnotation";let P=null;if(this.renderForms){const x=i.getValue(p,{value:this.data.fieldValue});let H=x.formattedValue||x.value||"";const it=i.getValue(p,{charLimit:this.data.maxLen}).charLimit;it&&H.length>it&&(H=H.slice(0,it));const gt={userValue:H,formattedValue:null,valueOnFocus:""};this.data.multiLine?(P=document.createElement("textarea"),P.textContent=H,this.data.doNotScroll&&(P.style.overflowY="hidden")):(P=document.createElement("input"),P.type="text",P.setAttribute("value",H),this.data.doNotScroll&&(P.style.overflowX="hidden")),A.add(P),P.setAttribute("data-element-id",p),P.disabled=this.data.readOnly,P.name=this.data.fieldName,P.tabIndex=N,this._setRequired(P,this.data.required),it&&(P.maxLength=it),P.addEventListener("input",vt=>{i.setValue(p,{value:vt.target.value}),this.setPropertyOnSiblings(P,"value",vt.target.value,"value")}),P.addEventListener("resetform",vt=>{const nt=this.data.defaultFieldValue??"";P.value=gt.userValue=nt,gt.formattedValue=null});let j=vt=>{const{formattedValue:nt}=gt;nt!=null&&(vt.target.value=nt),vt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){P.addEventListener("focus",nt=>{gt.userValue&&(nt.target.value=gt.userValue),gt.valueOnFocus=nt.target.value}),P.addEventListener("updatefromsandbox",nt=>{const mt={value(L){gt.userValue=L.detail.value??"",i.setValue(p,{value:gt.userValue.toString()}),L.target.value=gt.userValue},formattedValue(L){const{formattedValue:ft}=L.detail;gt.formattedValue=ft,ft!=null&&L.target!==document.activeElement&&(L.target.value=ft),i.setValue(p,{formattedValue:ft})},selRange(L){L.target.setSelectionRange(...L.detail.selRange)},charLimit:L=>{var Rt;const{charLimit:ft}=L.detail,{target:At}=L;if(ft===0){At.removeAttribute("maxLength");return}At.setAttribute("maxLength",ft);let St=gt.userValue;!St||St.length<=ft||(St=St.slice(0,ft),At.value=gt.userValue=St,i.setValue(p,{value:St}),(Rt=this.linkService.eventBus)==null||Rt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:St,willCommit:!0,commitKey:1,selStart:At.selectionStart,selEnd:At.selectionEnd}}))}};this._dispatchEventFromSandbox(mt,nt)}),P.addEventListener("keydown",nt=>{var ft;let mt=-1;if(nt.key==="Escape"?mt=0:nt.key==="Enter"&&!this.data.multiLine?mt=2:nt.key==="Tab"&&(mt=3),mt===-1)return;const{value:L}=nt.target;gt.valueOnFocus!==L&&(gt.userValue=L,(ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:L,willCommit:!0,commitKey:mt,selStart:nt.target.selectionStart,selEnd:nt.target.selectionEnd}}))});const vt=j;j=null,P.addEventListener("blur",nt=>{var L;const{value:mt}=nt.target;gt.userValue=mt,this._mouseState.isDown&&gt.valueOnFocus!==mt&&((L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:mt,willCommit:!0,commitKey:1,selStart:nt.target.selectionStart,selEnd:nt.target.selectionEnd}})),vt(nt)}),(C=this.data.actions)!=null&&C.Keystroke&&P.addEventListener("beforeinput",nt=>{var Ct;const{data:mt,target:L}=nt,{value:ft,selectionStart:At,selectionEnd:St}=L;let Rt=At,Ft=St;switch(nt.inputType){case"deleteWordBackward":{const rt=ft.substring(0,At).match(/\w*[^\w]*$/);rt&&(Rt-=rt[0].length);break}case"deleteWordForward":{const rt=ft.substring(At).match(/^[^\w]*\w*/);rt&&(Ft+=rt[0].length);break}case"deleteContentBackward":At===St&&(Rt-=1);break;case"deleteContentForward":At===St&&(Ft+=1);break}nt.preventDefault(),(Ct=this.linkService.eventBus)==null||Ct.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:ft,change:mt||"",willCommit:!1,selStart:Rt,selEnd:Ft}})}),this._setEventListeners(P,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],nt=>nt.target.value)}if(j&&P.addEventListener("blur",j),this.data.comb){const nt=(this.data.rect[2]-this.data.rect[0])/it;P.classList.add("comb"),P.style.letterSpacing=`calc(${nt}px * var(--scale-factor) - 1ch)`}}else P=document.createElement("div"),P.textContent=this.data.fieldValue,P.style.verticalAlign="middle",P.style.display="table-cell";return this._setTextStyle(P),this._setBackgroundColor(P),this._setDefaultPropertiesFromJS(P),this.container.append(P),this.container}}class r extends n{constructor(i){super(i,{isRenderable:i.renderForms})}render(){const i=this.annotationStorage,p=this.data,P=p.id;let C=i.getValue(P,{value:p.exportValue===p.fieldValue}).value;typeof C=="string"&&(C=C!=="Off",i.setValue(P,{value:C})),this.container.className="buttonWidgetAnnotation checkBox";const x=document.createElement("input");return A.add(x),x.setAttribute("data-element-id",P),x.disabled=p.readOnly,this._setRequired(x,this.data.required),x.type="checkbox",x.name=p.fieldName,C&&x.setAttribute("checked",!0),x.setAttribute("exportValue",p.exportValue),x.tabIndex=N,x.addEventListener("change",H=>{const{name:it,checked:gt}=H.target;for(const j of this._getElementsByName(it,P)){const vt=gt&&j.exportValue===p.exportValue;j.domElement&&(j.domElement.checked=vt),i.setValue(j.id,{value:vt})}i.setValue(P,{value:gt})}),x.addEventListener("resetform",H=>{const it=p.defaultFieldValue||"Off";H.target.checked=it===p.exportValue}),this.enableScripting&&this.hasJSActions&&(x.addEventListener("updatefromsandbox",H=>{const it={value(gt){gt.target.checked=gt.detail.value!=="Off",i.setValue(P,{value:gt.target.checked})}};this._dispatchEventFromSandbox(it,H)}),this._setEventListeners(x,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],H=>H.target.checked)),this._setBackgroundColor(x),this._setDefaultPropertiesFromJS(x),this.container.append(x),this.container}}class a extends n{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const i=this.annotationStorage,p=this.data,P=p.id;let C=i.getValue(P,{value:p.fieldValue===p.buttonValue}).value;typeof C=="string"&&(C=C!==p.buttonValue,i.setValue(P,{value:C}));const x=document.createElement("input");if(A.add(x),x.setAttribute("data-element-id",P),x.disabled=p.readOnly,this._setRequired(x,this.data.required),x.type="radio",x.name=p.fieldName,C&&x.setAttribute("checked",!0),x.tabIndex=N,x.addEventListener("change",H=>{const{name:it,checked:gt}=H.target;for(const j of this._getElementsByName(it,P))i.setValue(j.id,{value:!1});i.setValue(P,{value:gt})}),x.addEventListener("resetform",H=>{const it=p.defaultFieldValue;H.target.checked=it!=null&&it===p.buttonValue}),this.enableScripting&&this.hasJSActions){const H=p.buttonValue;x.addEventListener("updatefromsandbox",it=>{const gt={value:j=>{const vt=H===j.detail.value;for(const nt of this._getElementsByName(j.target.name)){const mt=vt&&nt.id===P;nt.domElement&&(nt.domElement.checked=mt),i.setValue(nt.id,{value:mt})}}};this._dispatchEventFromSandbox(gt,it)}),this._setEventListeners(x,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],it=>it.target.checked)}return this._setBackgroundColor(x),this._setDefaultPropertiesFromJS(x),this.container.append(x),this.container}}class c extends d{constructor(i){super(i,{ignoreBorder:i.data.hasAppearance})}render(){const i=super.render();i.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(i.title=this.data.alternativeText);const p=i.lastChild;return this.enableScripting&&this.hasJSActions&&p&&(this._setDefaultPropertiesFromJS(p),p.addEventListener("updatefromsandbox",P=>{this._dispatchEventFromSandbox({},P)})),i}}class t extends n{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const i=this.annotationStorage,p=this.data.id,P=i.getValue(p,{value:this.data.fieldValue}),C=document.createElement("select");A.add(C),C.setAttribute("data-element-id",p),C.disabled=this.data.readOnly,this._setRequired(C,this.data.required),C.name=this.data.fieldName,C.tabIndex=N;let x=this.data.combo&&this.data.options.length>0;this.data.combo||(C.size=this.data.options.length,this.data.multiSelect&&(C.multiple=!0)),C.addEventListener("resetform",j=>{const vt=this.data.defaultFieldValue;for(const nt of C.options)nt.selected=nt.value===vt});for(const j of this.data.options){const vt=document.createElement("option");vt.textContent=j.displayValue,vt.value=j.exportValue,P.value.includes(j.exportValue)&&(vt.setAttribute("selected",!0),x=!1),C.append(vt)}let H=null;if(x){const j=document.createElement("option");j.value=" ",j.setAttribute("hidden",!0),j.setAttribute("selected",!0),C.prepend(j),H=()=>{j.remove(),C.removeEventListener("input",H),H=null},C.addEventListener("input",H)}const it=(j,vt)=>{const nt=vt?"value":"textContent",mt=j.target.options;return j.target.multiple?Array.prototype.filter.call(mt,L=>L.selected).map(L=>L[nt]):mt.selectedIndex===-1?null:mt[mt.selectedIndex][nt]},gt=j=>{const vt=j.target.options;return Array.prototype.map.call(vt,nt=>({displayValue:nt.textContent,exportValue:nt.value}))};return this.enableScripting&&this.hasJSActions?(C.addEventListener("updatefromsandbox",j=>{const vt={value(nt){H==null||H();const mt=nt.detail.value,L=new Set(Array.isArray(mt)?mt:[mt]);for(const ft of C.options)ft.selected=L.has(ft.value);i.setValue(p,{value:it(nt,!0)})},multipleSelection(nt){C.multiple=!0},remove(nt){const mt=C.options,L=nt.detail.remove;mt[L].selected=!1,C.remove(L),mt.length>0&&Array.prototype.findIndex.call(mt,At=>At.selected)===-1&&(mt[0].selected=!0),i.setValue(p,{value:it(nt,!0),items:gt(nt)})},clear(nt){for(;C.length!==0;)C.remove(0);i.setValue(p,{value:null,items:[]})},insert(nt){const{index:mt,displayValue:L,exportValue:ft}=nt.detail.insert,At=C.children[mt],St=document.createElement("option");St.textContent=L,St.value=ft,At?At.before(St):C.append(St),i.setValue(p,{value:it(nt,!0),items:gt(nt)})},items(nt){const{items:mt}=nt.detail;for(;C.length!==0;)C.remove(0);for(const L of mt){const{displayValue:ft,exportValue:At}=L,St=document.createElement("option");St.textContent=ft,St.value=At,C.append(St)}C.options.length>0&&(C.options[0].selected=!0),i.setValue(p,{value:it(nt,!0),items:gt(nt)})},indices(nt){const mt=new Set(nt.detail.indices);for(const L of nt.target.options)L.selected=mt.has(L.index);i.setValue(p,{value:it(nt,!0)})},editable(nt){nt.target.disabled=!nt.detail.editable}};this._dispatchEventFromSandbox(vt,j)}),C.addEventListener("input",j=>{var mt;const vt=it(j,!0),nt=it(j,!1);i.setValue(p,{value:vt}),(mt=this.linkService.eventBus)==null||mt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:nt,changeEx:vt,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(C,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],j=>j.target.checked)):C.addEventListener("input",function(j){i.setValue(p,{value:it(j,!0)})}),this.data.combo&&this._setTextStyle(C),this._setBackgroundColor(C),this._setDefaultPropertiesFromJS(C),this.container.append(C),this.container}}const M=class extends y{constructor(i){var C,x,H;const{data:p}=i,P=!M.IGNORE_TYPES.has(p.parentType)&&!!((C=p.titleObj)!=null&&C.str||(x=p.contentsObj)!=null&&x.str||(H=p.richText)!=null&&H.str);super(i,{isRenderable:P})}render(){this.container.className="popupAnnotation";const i=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(i.length===0)return this.container;const p=new g({container:this.container,trigger:Array.from(i),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),P=this.page,C=f.Util.normalizeRect([this.data.parentRect[0],P.view[3]-this.data.parentRect[1]+P.view[1],this.data.parentRect[2],P.view[3]-this.data.parentRect[3]+P.view[1]]),x=C[0]+this.data.parentRect[2]-this.data.parentRect[0],H=C[1],[it,gt,j,vt]=this.viewport.viewBox,nt=j-it,mt=vt-gt;return this.container.style.left=`${100*(x-it)/nt}%`,this.container.style.top=`${100*(H-gt)/mt}%`,this.container.append(p.render()),this.container}};let s=M;It(s,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class g{constructor(i){this.container=i.container,this.trigger=i.trigger,this.color=i.color,this.titleObj=i.titleObj,this.modificationDate=i.modificationDate,this.contentsObj=i.contentsObj,this.richText=i.richText,this.hideWrapper=i.hideWrapper||!1,this.pinned=!1}render(){var it,gt;const p=document.createElement("div");p.className="popupWrapper",this.hideElement=this.hideWrapper?p:this.container,this.hideElement.hidden=!0;const P=document.createElement("div");P.className="popup";const C=this.color;if(C){const j=.7*(255-C[0])+C[0],vt=.7*(255-C[1])+C[1],nt=.7*(255-C[2])+C[2];P.style.backgroundColor=f.Util.makeHexColor(j|0,vt|0,nt|0)}const x=document.createElement("h1");x.dir=this.titleObj.dir,x.textContent=this.titleObj.str,P.append(x);const H=k.PDFDateString.toDateObject(this.modificationDate);if(H){const j=document.createElement("span");j.className="popupDate",j.textContent="{{date}}, {{time}}",j.dataset.l10nId="annotation_date_string",j.dataset.l10nArgs=JSON.stringify({date:H.toLocaleDateString(),time:H.toLocaleTimeString()}),P.append(j)}if((it=this.richText)!=null&&it.str&&(!((gt=this.contentsObj)!=null&&gt.str)||this.contentsObj.str===this.richText.str))W.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:P}),P.lastChild.className="richText popupContent";else{const j=this._formatContents(this.contentsObj);P.append(j)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const j of this.trigger)j.addEventListener("click",this._toggle.bind(this)),j.addEventListener("mouseover",this._show.bind(this,!1)),j.addEventListener("mouseout",this._hide.bind(this,!1));return P.addEventListener("click",this._hide.bind(this,!0)),p.append(P),p}_formatContents({str:i,dir:p}){const P=document.createElement("p");P.className="popupContent",P.dir=p;const C=i.split(/(?:\r\n?|\n)/);for(let x=0,H=C.length;x<H;++x){const it=C[x];P.append(document.createTextNode(it)),x<H-1&&P.append(document.createElement("br"))}return P}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(i=!1){i&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(i=!0){i&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class T extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0}),this.textContent=i.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const i=document.createElement("div");i.className="annotationTextContent",i.setAttribute("role","comment");for(const p of this.textContent){const P=document.createElement("span");P.textContent=p,i.append(P)}this.container.append(i)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class D extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const i=this.data,{width:p,height:P}=R(i.rect),C=this.svgFactory.create(p,P,!0),x=this.svgFactory.createElement("svg:line");return x.setAttribute("x1",i.rect[2]-i.lineCoordinates[0]),x.setAttribute("y1",i.rect[3]-i.lineCoordinates[1]),x.setAttribute("x2",i.rect[2]-i.lineCoordinates[2]),x.setAttribute("y2",i.rect[3]-i.lineCoordinates[3]),x.setAttribute("stroke-width",i.borderStyle.width||1),x.setAttribute("stroke","transparent"),x.setAttribute("fill","transparent"),C.append(x),this.container.append(C),this._createPopup(x,i),this.container}}class E extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const i=this.data,{width:p,height:P}=R(i.rect),C=this.svgFactory.create(p,P,!0),x=i.borderStyle.width,H=this.svgFactory.createElement("svg:rect");return H.setAttribute("x",x/2),H.setAttribute("y",x/2),H.setAttribute("width",p-x),H.setAttribute("height",P-x),H.setAttribute("stroke-width",x||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),C.append(H),this.container.append(C),this._createPopup(H,i),this.container}}class w extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const i=this.data,{width:p,height:P}=R(i.rect),C=this.svgFactory.create(p,P,!0),x=i.borderStyle.width,H=this.svgFactory.createElement("svg:ellipse");return H.setAttribute("cx",p/2),H.setAttribute("cy",P/2),H.setAttribute("rx",p/2-x/2),H.setAttribute("ry",P/2-x/2),H.setAttribute("stroke-width",x||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),C.append(H),this.container.append(C),this._createPopup(H,i),this.container}}class Q extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const i=this.data,{width:p,height:P}=R(i.rect),C=this.svgFactory.create(p,P,!0);let x=[];for(const it of i.vertices){const gt=it.x-i.rect[0],j=i.rect[3]-it.y;x.push(gt+","+j)}x=x.join(" ");const H=this.svgFactory.createElement(this.svgElementName);return H.setAttribute("points",x),H.setAttribute("stroke-width",i.borderStyle.width||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),C.append(H),this.container.append(C),this._createPopup(H,i),this.container}}class ht extends Q{constructor(i){super(i),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class at extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class X extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const i=this.data,{width:p,height:P}=R(i.rect),C=this.svgFactory.create(p,P,!0);for(const x of i.inkLists){let H=[];for(const gt of x){const j=gt.x-i.rect[0],vt=i.rect[3]-gt.y;H.push(`${j},${vt}`)}H=H.join(" ");const it=this.svgFactory.createElement(this.svgElementName);it.setAttribute("points",H),it.setAttribute("stroke-width",i.borderStyle.width||1),it.setAttribute("stroke","transparent"),it.setAttribute("fill","transparent"),this._createPopup(it,i),C.append(it)}return this.container.append(C),this.container}}class B extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class $ extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class Z extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class st extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class bt extends y{constructor(i){var P,C,x;const p=!!(i.data.hasPopup||(P=i.data.titleObj)!=null&&P.str||(C=i.data.contentsObj)!=null&&C.str||(x=i.data.richText)!=null&&x.str);super(i,{isRenderable:p,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class yt extends y{constructor(i){var C;super(i,{isRenderable:!0});const{filename:p,content:P}=this.data.file;this.filename=(0,k.getFilenameFromUrl)(p,!0),this.content=P,(C=this.linkService.eventBus)==null||C.dispatch("fileattachmentannotation",{source:this,filename:p,content:P})}render(){var p,P;this.container.className="fileAttachmentAnnotation";const i=document.createElement("div");return i.className="popupTriggerArea",i.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((p=this.data.titleObj)!=null&&p.str||(P=this.data.contentsObj)!=null&&P.str||this.data.richText)&&this._createPopup(i,this.data),this.container.append(i),this.container}_download(){var i;(i=this.downloadManager)==null||i.openOrDownloadData(this.container,this.content,this.filename)}}const tt=class{static render(i){var it,gt;const{annotations:p,div:P,viewport:C,accessibilityManager:x}=i;dt(this,G,Ee).call(this,P,C);let H=0;for(const j of p){if(j.annotationType!==f.AnnotationType.POPUP){const{width:nt,height:mt}=R(j.rect);if(nt<=0||mt<=0)continue}const vt=v.create({data:j,layer:P,page:i.page,viewport:C,linkService:i.linkService,downloadManager:i.downloadManager,imageResourcesPath:i.imageResourcesPath||"",renderForms:i.renderForms!==!1,svgFactory:new k.DOMSVGFactory,annotationStorage:i.annotationStorage||new z.AnnotationStorage,enableScripting:i.enableScripting,hasJSActions:i.hasJSActions,fieldObjects:i.fieldObjects,mouseState:i.mouseState||{isDown:!1}});if(vt.isRenderable){const nt=vt.render();if(j.hidden&&(nt.style.visibility="hidden"),Array.isArray(nt))for(const mt of nt)mt.style.zIndex=H++,dt(it=tt,I,Se).call(it,mt,j.id,P,x);else nt.style.zIndex=H++,vt instanceof s?P.prepend(nt):dt(gt=tt,I,Se).call(gt,nt,j.id,P,x)}}dt(this,V,Ce).call(this,P,i.annotationCanvasMap)}static update(i){const{annotationCanvasMap:p,div:P,viewport:C}=i;dt(this,G,Ee).call(this,P,C),dt(this,V,Ce).call(this,P,p),P.hidden=!1}};let O=tt;I=new WeakSet,Se=function(i,p,P,C){const x=i.firstChild||i;x.id=`${k.AnnotationPrefix}${p}`,P.append(i),C==null||C.moveElementInDOM(P,i,x,!1)},G=new WeakSet,Ee=function(i,{width:p,height:P,rotation:C}){const{style:x}=i,H=C%180!==0,it=Math.floor(p)+"px",gt=Math.floor(P)+"px";x.width=H?gt:it,x.height=H?it:gt,i.setAttribute("data-main-rotation",C)},V=new WeakSet,Ce=function(i,p){if(p){for(const[P,C]of p){const x=i.querySelector(`[data-annotation-id="${P}"]`);if(!x)continue;const{firstChild:H}=x;H?H.nodeName==="CANVAS"?H.replaceWith(C):H.before(C):x.append(C)}p.clear()}},et(O,I),et(O,G),et(O,V),u.AnnotationLayer=O},(ct,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.ColorConverters=void 0;function Y(k){return Math.floor(Math.max(0,Math.min(1,k))*255).toString(16).padStart(2,"0")}class f{static CMYK_G([z,U,W,N]){return["G",1-Math.min(1,.3*z+.59*W+.11*U+N)]}static G_CMYK([z]){return["CMYK",0,0,0,1-z]}static G_RGB([z]){return["RGB",z,z,z]}static G_HTML([z]){const U=Y(z);return`#${U}${U}${U}`}static RGB_G([z,U,W]){return["G",.3*z+.59*U+.11*W]}static RGB_HTML([z,U,W]){const N=Y(z),m=Y(U),A=Y(W);return`#${N}${m}${A}`}static T_HTML(){return"#00000000"}static CMYK_RGB([z,U,W,N]){return["RGB",1-Math.min(1,z+N),1-Math.min(1,W+N),1-Math.min(1,U+N)]}static CMYK_HTML(z){const U=this.CMYK_RGB(z).slice(1);return this.RGB_HTML(U)}static RGB_CMYK([z,U,W]){const N=1-z,m=1-U,A=1-W,R=Math.min(N,m,A);return["CMYK",N,m,A,R]}}u.ColorConverters=f},(ct,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.XfaLayer=void 0;var f=Y(19);class k{static setupStorage(U,W,N,m,A){const R=m.getValue(W,{value:null});switch(N.name){case"textarea":if(R.value!==null&&(U.textContent=R.value),A==="print")break;U.addEventListener("input",v=>{m.setValue(W,{value:v.target.value})});break;case"input":if(N.attributes.type==="radio"||N.attributes.type==="checkbox"){if(R.value===N.attributes.xfaOn?U.setAttribute("checked",!0):R.value===N.attributes.xfaOff&&U.removeAttribute("checked"),A==="print")break;U.addEventListener("change",v=>{m.setValue(W,{value:v.target.checked?v.target.getAttribute("xfaOn"):v.target.getAttribute("xfaOff")})})}else{if(R.value!==null&&U.setAttribute("value",R.value),A==="print")break;U.addEventListener("input",v=>{m.setValue(W,{value:v.target.value})})}break;case"select":if(R.value!==null)for(const v of N.children)v.attributes.value===R.value&&(v.attributes.selected=!0);U.addEventListener("input",v=>{const y=v.target.options,d=y.selectedIndex===-1?"":y[y.selectedIndex].value;m.setValue(W,{value:d})});break}}static setAttributes({html:U,element:W,storage:N=null,intent:m,linkService:A}){const{attributes:R}=W,v=U instanceof HTMLAnchorElement;R.type==="radio"&&(R.name=`${R.name}-${m}`);for(const[y,d]of Object.entries(R))if(d!=null)switch(y){case"class":d.length&&U.setAttribute(y,d.join(" "));break;case"dataId":break;case"id":U.setAttribute("data-element-id",d);break;case"style":Object.assign(U.style,d);break;case"textContent":U.textContent=d;break;default:(!v||y!=="href"&&y!=="newWindow")&&U.setAttribute(y,d)}v&&A.addLinkAttributes(U,R.href,R.newWindow),N&&R.dataId&&this.setupStorage(U,R.dataId,W,N)}static render(U){var o;const W=U.annotationStorage,N=U.linkService,m=U.xfaHtml,A=U.intent||"display",R=document.createElement(m.name);m.attributes&&this.setAttributes({html:R,element:m,intent:A,linkService:N});const v=[[m,-1,R]],y=U.div;if(y.append(R),U.viewport){const n=`matrix(${U.viewport.transform.join(",")})`;y.style.transform=n}A!=="richText"&&y.setAttribute("class","xfaLayer xfaFont");const d=[];for(;v.length>0;){const[n,e,r]=v.at(-1);if(e+1===n.children.length){v.pop();continue}const a=n.children[++v.at(-1)[1]];if(a===null)continue;const{name:c}=a;if(c==="#text"){const s=document.createTextNode(a.value);d.push(s),r.append(s);continue}let t;if((o=a==null?void 0:a.attributes)!=null&&o.xmlns?t=document.createElementNS(a.attributes.xmlns,c):t=document.createElement(c),r.append(t),a.attributes&&this.setAttributes({html:t,element:a,storage:W,intent:A,linkService:N}),a.children&&a.children.length>0)v.push([a,-1,t]);else if(a.value){const s=document.createTextNode(a.value);f.XfaText.shouldBuildText(c)&&d.push(s),t.append(s)}}for(const n of y.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))n.setAttribute("readOnly",!0);return{textDivs:d}}static update(U){const W=`matrix(${U.viewport.transform.join(",")})`;U.div.style.transform=W,U.div.hidden=!1}}u.XfaLayer=k},(ct,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TextLayerRenderTask=void 0,u.renderTextLayer=y;var f=Y(1),k=Y(6);const z=1e5,U=30,W=.8,N=new Map;function m(d,o){const n=N.get(d);if(n)return n;o.save(),o.font=`${U}px ${d}`;const e=o.measureText("");let r=e.fontBoundingBoxAscent,a=Math.abs(e.fontBoundingBoxDescent);if(r){o.restore();const t=r/(r+a);return N.set(d,t),t}o.strokeStyle="red",o.clearRect(0,0,U,U),o.strokeText("g",0,0);let c=o.getImageData(0,0,U,U).data;a=0;for(let t=c.length-1-3;t>=0;t-=4)if(c[t]>0){a=Math.ceil(t/4/U);break}o.clearRect(0,0,U,U),o.strokeText("A",0,U),c=o.getImageData(0,0,U,U).data,r=0;for(let t=0,s=c.length;t<s;t+=4)if(c[t]>0){r=U-Math.floor(t/4/U);break}if(o.restore(),r){const t=r/(r+a);return N.set(d,t),t}return N.set(d,W),W}function A(d,o,n,e){const r=document.createElement("span"),a={angle:0,canvasWidth:0,hasText:o.str!=="",hasEOL:o.hasEOL,fontSize:0};d._textDivs.push(r);const c=f.Util.transform(d._viewport.transform,o.transform);let t=Math.atan2(c[1],c[0]);const s=n[o.fontName];s.vertical&&(t+=Math.PI/2);const g=Math.hypot(c[2],c[3]),T=g*m(s.fontFamily,e);let D,E;t===0?(D=c[4],E=c[5]-T):(D=c[4]+T*Math.sin(t),E=c[5]-T*Math.cos(t)),r.style.left=`${D}px`,r.style.top=`${E}px`,r.style.fontSize=`${g}px`,r.style.fontFamily=s.fontFamily,a.fontSize=g,r.setAttribute("role","presentation"),r.textContent=o.str,r.dir=o.dir,d._fontInspectorEnabled&&(r.dataset.fontName=o.fontName),t!==0&&(a.angle=t*(180/Math.PI));let w=!1;if(o.str.length>1)w=!0;else if(o.str!==" "&&o.transform[0]!==o.transform[3]){const Q=Math.abs(o.transform[0]),ht=Math.abs(o.transform[3]);Q!==ht&&Math.max(Q,ht)/Math.min(Q,ht)>1.5&&(w=!0)}w&&(s.vertical?a.canvasWidth=o.height*d._viewport.scale:a.canvasWidth=o.width*d._viewport.scale),d._textDivProperties.set(r,a),d._textContentStream&&d._layoutText(r)}function R(d){if(d._canceled)return;const o=d._textDivs,n=d._capability;if(o.length>z){d._renderingDone=!0,n.resolve();return}if(!d._textContentStream)for(const r of o)d._layoutText(r);d._renderingDone=!0,n.resolve()}class v{constructor({textContent:o,textContentStream:n,container:e,viewport:r,textDivs:a,textContentItemsStr:c}){var t;this._textContent=o,this._textContentStream=n,this._container=e,this._document=e.ownerDocument,this._viewport=r,this._textDivs=a||[],this._textContentItemsStr=c||[],this._fontInspectorEnabled=!!((t=globalThis.FontInspector)!=null&&t.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,f.createPromiseCapability)(),this._renderTimer=null,this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._textDivProperties=null,this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new f.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(o,n){for(const e of o){if(e.str===void 0){if(e.type==="beginMarkedContentProps"||e.type==="beginMarkedContent"){const r=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),e.id!==null&&this._container.setAttribute("id",`${e.id}`),r.append(this._container)}else e.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(e.str),A(this,e,n,this._layoutTextCtx)}}_layoutText(o){const n=this._textDivProperties.get(o);let e="";if(n.canvasWidth!==0&&n.hasText){const{fontFamily:r}=o.style,{fontSize:a}=n;(a!==this._layoutTextLastFontSize||r!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${a*this._devicePixelRatio}px ${r}`,this._layoutTextLastFontSize=a,this._layoutTextLastFontFamily=r);const{width:c}=this._layoutTextCtx.measureText(o.textContent);c>0&&(e=`scaleX(${this._devicePixelRatio*n.canvasWidth/c})`)}if(n.angle!==0&&(e=`rotate(${n.angle}deg) ${e}`),e.length>0&&(o.style.transform=e),n.hasText&&this._container.append(o),n.hasEOL){const r=document.createElement("br");r.setAttribute("role","presentation"),this._container.append(r)}}_render(o=0){const n=(0,f.createPromiseCapability)();let e=Object.create(null);const r=this._document.createElement("canvas");if(r.height=r.width=U,this._layoutTextCtx=r.getContext("2d",{alpha:!1}),this._textContent){const a=this._textContent.items,c=this._textContent.styles;this._processItems(a,c),n.resolve()}else if(this._textContentStream){const a=()=>{this._reader.read().then(({value:c,done:t})=>{if(t){n.resolve();return}Object.assign(e,c.styles),this._processItems(c.items,e),a()},n.reject)};this._reader=this._textContentStream.getReader(),a()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');n.promise.then(()=>{e=null,o?((0,k.deprecated)("The TextLayerRender `timeout` parameter will be removed in the future, since streaming of textContent has made it obsolete."),this._renderTimer=setTimeout(()=>{R(this),this._renderTimer=null},o)):R(this)},this._capability.reject)}}u.TextLayerRenderTask=v;function y(d){const o=new v({textContent:d.textContent,textContentStream:d.textContentStream,container:d.container,viewport:d.viewport,textDivs:d.textDivs,textContentItemsStr:d.textContentItemsStr});return o._render(d.timeout),o}},(ct,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.SVGGraphics=void 0;var f=Y(6),k=Y(1),z=Y(12);let U=class{constructor(){(0,k.unreachable)("Not implemented: SVGGraphics")}};u.SVGGraphics=U;{let o=function(t){let s=[];const g=[];for(const T of t){if(T.fn==="save"){s.push({fnId:92,fn:"group",items:[]}),g.push(s),s=s.at(-1).items;continue}T.fn==="restore"?s=g.pop():s.push(T)}return s},n=function(t){if(Number.isInteger(t))return t.toString();const s=t.toFixed(10);let g=s.length-1;if(s[g]!=="0")return s;do g--;while(s[g]==="0");return s.substring(0,s[g]==="."?g:g+1)},e=function(t){if(t[4]===0&&t[5]===0){if(t[1]===0&&t[2]===0)return t[0]===1&&t[3]===1?"":`scale(${n(t[0])} ${n(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2]){const s=Math.acos(t[0])*180/Math.PI;return`rotate(${n(s)})`}}else if(t[0]===1&&t[1]===0&&t[2]===0&&t[3]===1)return`translate(${n(t[4])} ${n(t[5])})`;return`matrix(${n(t[0])} ${n(t[1])} ${n(t[2])} ${n(t[3])} ${n(t[4])} ${n(t[5])})`};const W={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},N="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/1999/xlink",A=["butt","round","square"],R=["miter","round","bevel"],v=function(t,s="",g=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!g)return URL.createObjectURL(new Blob([t],{type:s}));const T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let D=`data:${s};base64,`;for(let E=0,w=t.length;E<w;E+=3){const Q=t[E]&255,ht=t[E+1]&255,at=t[E+2]&255,X=Q>>2,B=(Q&3)<<4|ht>>4,$=E+1<w?(ht&15)<<2|at>>6:64,Z=E+2<w?at&63:64;D+=T[X]+T[B]+T[$]+T[Z]}return D},y=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),s=12,g=new Int32Array(256);for(let at=0;at<256;at++){let X=at;for(let B=0;B<8;B++)X&1?X=3988292384^X>>1&2147483647:X=X>>1&2147483647;g[at]=X}function T(at,X,B){let $=-1;for(let Z=X;Z<B;Z++){const st=($^at[Z])&255,bt=g[st];$=$>>>8^bt}return $^-1}function D(at,X,B,$){let Z=$;const st=X.length;B[Z]=st>>24&255,B[Z+1]=st>>16&255,B[Z+2]=st>>8&255,B[Z+3]=st&255,Z+=4,B[Z]=at.charCodeAt(0)&255,B[Z+1]=at.charCodeAt(1)&255,B[Z+2]=at.charCodeAt(2)&255,B[Z+3]=at.charCodeAt(3)&255,Z+=4,B.set(X,Z),Z+=X.length;const bt=T(B,$+4,Z);B[Z]=bt>>24&255,B[Z+1]=bt>>16&255,B[Z+2]=bt>>8&255,B[Z+3]=bt&255}function E(at,X,B){let $=1,Z=0;for(let st=X;st<B;++st)$=($+(at[st]&255))%65521,Z=(Z+$)%65521;return Z<<16|$}function w(at){if(!z.isNodeJS)return Q(at);try{let X;parseInt(process.versions.node)>=8?X=at:X=Buffer.from(at);const B=require$$5.deflateSync(X,{level:9});return B instanceof Uint8Array?B:new Uint8Array(B)}catch(X){(0,k.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+X)}return Q(at)}function Q(at){let X=at.length;const B=65535,$=Math.ceil(X/B),Z=new Uint8Array(2+X+$*5+4);let st=0;Z[st++]=120,Z[st++]=156;let bt=0;for(;X>B;)Z[st++]=0,Z[st++]=255,Z[st++]=255,Z[st++]=0,Z[st++]=0,Z.set(at.subarray(bt,bt+B),st),st+=B,bt+=B,X-=B;Z[st++]=1,Z[st++]=X&255,Z[st++]=X>>8&255,Z[st++]=~X&65535&255,Z[st++]=(~X&65535)>>8&255,Z.set(at.subarray(bt),st),st+=at.length-bt;const yt=E(at,0,at.length);return Z[st++]=yt>>24&255,Z[st++]=yt>>16&255,Z[st++]=yt>>8&255,Z[st++]=yt&255,Z}function ht(at,X,B,$){const Z=at.width,st=at.height;let bt,yt,O;const h=at.data;switch(X){case k.ImageKind.GRAYSCALE_1BPP:yt=0,bt=1,O=Z+7>>3;break;case k.ImageKind.RGB_24BPP:yt=2,bt=8,O=Z*3;break;case k.ImageKind.RGBA_32BPP:yt=6,bt=8,O=Z*4;break;default:throw new Error("invalid format")}const l=new Uint8Array((1+O)*st);let _=0,F=0;for(let V=0;V<st;++V)l[_++]=0,l.set(h.subarray(F,F+O),_),F+=O,_+=O;if(X===k.ImageKind.GRAYSCALE_1BPP&&$){_=0;for(let V=0;V<st;V++){_++;for(let lt=0;lt<O;lt++)l[_++]^=255}}const M=new Uint8Array([Z>>24&255,Z>>16&255,Z>>8&255,Z&255,st>>24&255,st>>16&255,st>>8&255,st&255,bt,yt,0,0,0]),I=w(l),q=t.length+s*3+M.length+I.length,G=new Uint8Array(q);let ot=0;return G.set(t,ot),ot+=t.length,D("IHDR",M,G,ot),ot+=s+M.length,D("IDATA",I,G,ot),ot+=s+I.length,D("IEND",new Uint8Array(0),G,ot),v(G,"image/png",B)}return function(X,B,$){const Z=X.kind===void 0?k.ImageKind.GRAYSCALE_1BPP:X.kind;return ht(X,Z,B,$)}}();class d{constructor(){this.fontSizeScale=1,this.fontWeight=W.fontWeight,this.fontSize=0,this.textMatrix=k.IDENTITY_MATRIX,this.fontMatrix=k.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=k.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=W.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(s,g){this.x=s,this.y=g}}let r=0,a=0,c=0;u.SVGGraphics=U=class{constructor(t,s,g=!1){(0,f.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new f.DOMSVGFactory,this.current=new d,this.transformMatrix=k.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=s,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!g,this._operatorIdMapping=[];for(const T in k.OPS)this._operatorIdMapping[k.OPS[T]]=T}getObject(t,s=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):s}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const s=t.fnArray,g=t.argsArray;for(let T=0,D=s.length;T<D;T++)if(s[T]===k.OPS.dependency)for(const E of g[T]){const w=E.startsWith("g_")?this.commonObjs:this.objs,Q=new Promise(ht=>{w.get(E,ht)});this.current.dependencies.push(Q)}return Promise.all(this.current.dependencies)}transform(t,s,g,T,D,E){const w=[t,s,g,T,D,E];this.transformMatrix=k.Util.transform(this.transformMatrix,w),this.tgrp=null}getSVG(t,s){this.viewport=s;const g=this._initialize(s);return this.loadDependencies(t).then(()=>(this.transformMatrix=k.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),g))}convertOpList(t){const s=this._operatorIdMapping,g=t.argsArray,T=t.fnArray,D=[];for(let E=0,w=T.length;E<w;E++){const Q=T[E];D.push({fnId:Q,fn:s[Q],args:g[E]})}return o(D)}executeOpTree(t){for(const s of t){const g=s.fn,T=s.fnId,D=s.args;switch(T|0){case k.OPS.beginText:this.beginText();break;case k.OPS.dependency:break;case k.OPS.setLeading:this.setLeading(D);break;case k.OPS.setLeadingMoveText:this.setLeadingMoveText(D[0],D[1]);break;case k.OPS.setFont:this.setFont(D);break;case k.OPS.showText:this.showText(D[0]);break;case k.OPS.showSpacedText:this.showText(D[0]);break;case k.OPS.endText:this.endText();break;case k.OPS.moveText:this.moveText(D[0],D[1]);break;case k.OPS.setCharSpacing:this.setCharSpacing(D[0]);break;case k.OPS.setWordSpacing:this.setWordSpacing(D[0]);break;case k.OPS.setHScale:this.setHScale(D[0]);break;case k.OPS.setTextMatrix:this.setTextMatrix(D[0],D[1],D[2],D[3],D[4],D[5]);break;case k.OPS.setTextRise:this.setTextRise(D[0]);break;case k.OPS.setTextRenderingMode:this.setTextRenderingMode(D[0]);break;case k.OPS.setLineWidth:this.setLineWidth(D[0]);break;case k.OPS.setLineJoin:this.setLineJoin(D[0]);break;case k.OPS.setLineCap:this.setLineCap(D[0]);break;case k.OPS.setMiterLimit:this.setMiterLimit(D[0]);break;case k.OPS.setFillRGBColor:this.setFillRGBColor(D[0],D[1],D[2]);break;case k.OPS.setStrokeRGBColor:this.setStrokeRGBColor(D[0],D[1],D[2]);break;case k.OPS.setStrokeColorN:this.setStrokeColorN(D);break;case k.OPS.setFillColorN:this.setFillColorN(D);break;case k.OPS.shadingFill:this.shadingFill(D[0]);break;case k.OPS.setDash:this.setDash(D[0],D[1]);break;case k.OPS.setRenderingIntent:this.setRenderingIntent(D[0]);break;case k.OPS.setFlatness:this.setFlatness(D[0]);break;case k.OPS.setGState:this.setGState(D[0]);break;case k.OPS.fill:this.fill();break;case k.OPS.eoFill:this.eoFill();break;case k.OPS.stroke:this.stroke();break;case k.OPS.fillStroke:this.fillStroke();break;case k.OPS.eoFillStroke:this.eoFillStroke();break;case k.OPS.clip:this.clip("nonzero");break;case k.OPS.eoClip:this.clip("evenodd");break;case k.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case k.OPS.paintImageXObject:this.paintImageXObject(D[0]);break;case k.OPS.paintInlineImageXObject:this.paintInlineImageXObject(D[0]);break;case k.OPS.paintImageMaskXObject:this.paintImageMaskXObject(D[0]);break;case k.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(D[0],D[1]);break;case k.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case k.OPS.closePath:this.closePath();break;case k.OPS.closeStroke:this.closeStroke();break;case k.OPS.closeFillStroke:this.closeFillStroke();break;case k.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case k.OPS.nextLine:this.nextLine();break;case k.OPS.transform:this.transform(D[0],D[1],D[2],D[3],D[4],D[5]);break;case k.OPS.constructPath:this.constructPath(D[0],D[1]);break;case k.OPS.endPath:this.endPath();break;case 92:this.group(s.items);break;default:(0,k.warn)(`Unimplemented operator ${g}`);break}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,s,g,T,D,E){const w=this.current;w.textMatrix=w.lineMatrix=[t,s,g,T,D,E],w.textMatrixScale=Math.hypot(t,s),w.x=w.lineX=0,w.y=w.lineY=0,w.xcoords=[],w.ycoords=[],w.tspan=this.svgFactory.createElement("svg:tspan"),w.tspan.setAttributeNS(null,"font-family",w.fontFamily),w.tspan.setAttributeNS(null,"font-size",`${n(w.fontSize)}px`),w.tspan.setAttributeNS(null,"y",n(-w.y)),w.txtElement=this.svgFactory.createElement("svg:text"),w.txtElement.append(w.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=k.IDENTITY_MATRIX,t.lineMatrix=k.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,s){const g=this.current;g.x=g.lineX+=t,g.y=g.lineY+=s,g.xcoords=[],g.ycoords=[],g.tspan=this.svgFactory.createElement("svg:tspan"),g.tspan.setAttributeNS(null,"font-family",g.fontFamily),g.tspan.setAttributeNS(null,"font-size",`${n(g.fontSize)}px`),g.tspan.setAttributeNS(null,"y",n(-g.y))}showText(t){const s=this.current,g=s.font,T=s.fontSize;if(T===0)return;const D=s.fontSizeScale,E=s.charSpacing,w=s.wordSpacing,Q=s.fontDirection,ht=s.textHScale*Q,at=g.vertical,X=at?1:-1,B=g.defaultVMetrics,$=T*s.fontMatrix[0];let Z=0;for(const yt of t){if(yt===null){Z+=Q*w;continue}else if(typeof yt=="number"){Z+=X*yt*T/1e3;continue}const O=(yt.isSpace?w:0)+E,h=yt.fontChar;let l,_,F=yt.width;if(at){let I;const q=yt.vmetric||B;I=yt.vmetric?q[1]:F*.5,I=-I*$;const G=q[2]*$;F=q?-q[0]:F,l=I/D,_=(Z+G)/D}else l=Z/D,_=0;(yt.isInFont||g.missingFile)&&(s.xcoords.push(s.x+l),at&&s.ycoords.push(-s.y+_),s.tspan.textContent+=h);let M;at?M=F*$-O*Q:M=F*$+O*Q,Z+=M}s.tspan.setAttributeNS(null,"x",s.xcoords.map(n).join(" ")),at?s.tspan.setAttributeNS(null,"y",s.ycoords.map(n).join(" ")):s.tspan.setAttributeNS(null,"y",n(-s.y)),at?s.y-=Z:s.x+=Z*ht,s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${n(s.fontSize)}px`),s.fontStyle!==W.fontStyle&&s.tspan.setAttributeNS(null,"font-style",s.fontStyle),s.fontWeight!==W.fontWeight&&s.tspan.setAttributeNS(null,"font-weight",s.fontWeight);const st=s.textRenderingMode&k.TextRenderingMode.FILL_STROKE_MASK;if(st===k.TextRenderingMode.FILL||st===k.TextRenderingMode.FILL_STROKE?(s.fillColor!==W.fillColor&&s.tspan.setAttributeNS(null,"fill",s.fillColor),s.fillAlpha<1&&s.tspan.setAttributeNS(null,"fill-opacity",s.fillAlpha)):s.textRenderingMode===k.TextRenderingMode.ADD_TO_PATH?s.tspan.setAttributeNS(null,"fill","transparent"):s.tspan.setAttributeNS(null,"fill","none"),st===k.TextRenderingMode.STROKE||st===k.TextRenderingMode.FILL_STROKE){const yt=1/(s.textMatrixScale||1);this._setStrokeAttributes(s.tspan,yt)}let bt=s.textMatrix;s.textRise!==0&&(bt=bt.slice(),bt[5]+=s.textRise),s.txtElement.setAttributeNS(null,"transform",`${e(bt)} scale(${n(ht)}, -1)`),s.txtElement.setAttributeNS(N,"xml:space","preserve"),s.txtElement.append(s.tspan),s.txtgrp.append(s.txtElement),this._ensureTransformGroup().append(s.txtElement)}setLeadingMoveText(t,s){this.setLeading(-s),this.moveText(t,s)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const s=v(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${s}); }
`}setFont(t){const s=this.current,g=this.commonObjs.get(t[0]);let T=t[1];s.font=g,this.embedFonts&&!g.missingFile&&!this.embeddedFonts[g.loadedName]&&(this.addFontStyle(g),this.embeddedFonts[g.loadedName]=g),s.fontMatrix=g.fontMatrix||k.FONT_IDENTITY_MATRIX;let D="normal";g.black?D="900":g.bold&&(D="bold");const E=g.italic?"italic":"normal";T<0?(T=-T,s.fontDirection=-1):s.fontDirection=1,s.fontSize=T,s.fontFamily=g.loadedName,s.fontWeight=D,s.fontStyle=E,s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"y",n(-s.y)),s.xcoords=[],s.ycoords=[]}endText(){var s;const t=this.current;t.textRenderingMode&k.TextRenderingMode.ADD_TO_PATH_FLAG&&((s=t.txtElement)!=null&&s.hasChildNodes())&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=A[t]}setLineJoin(t){this.current.lineJoin=R[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,s,g){this.current.strokeColor=k.Util.makeHexColor(t,s,g)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,s,g){this.current.fillColor=k.Util.makeHexColor(t,s,g),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const s=this.viewport.width,g=this.viewport.height,T=k.Util.inverseTransform(this.transformMatrix),D=k.Util.applyTransform([0,0],T),E=k.Util.applyTransform([0,g],T),w=k.Util.applyTransform([s,0],T),Q=k.Util.applyTransform([s,g],T),ht=Math.min(D[0],E[0],w[0],Q[0]),at=Math.min(D[1],E[1],w[1],Q[1]),X=Math.max(D[0],E[0],w[0],Q[0]),B=Math.max(D[1],E[1],w[1],Q[1]),$=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x",ht),$.setAttributeNS(null,"y",at),$.setAttributeNS(null,"width",X-ht),$.setAttributeNS(null,"height",B-at),$.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&$.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append($)}_makeColorN_Pattern(t){return t[0]==="TilingPattern"?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const s=t[1],g=t[2],T=t[3]||k.IDENTITY_MATRIX,[D,E,w,Q]=t[4],ht=t[5],at=t[6],X=t[7],B=`shading${c++}`,[$,Z,st,bt]=k.Util.normalizeRect([...k.Util.applyTransform([D,E],T),...k.Util.applyTransform([w,Q],T)]),[yt,O]=k.Util.singularValueDecompose2dScale(T),h=ht*yt,l=at*O,_=this.svgFactory.createElement("svg:pattern");_.setAttributeNS(null,"id",B),_.setAttributeNS(null,"patternUnits","userSpaceOnUse"),_.setAttributeNS(null,"width",h),_.setAttributeNS(null,"height",l),_.setAttributeNS(null,"x",`${$}`),_.setAttributeNS(null,"y",`${Z}`);const F=this.svg,M=this.transformMatrix,I=this.current.fillColor,q=this.current.strokeColor,G=this.svgFactory.create(st-$,bt-Z);if(this.svg=G,this.transformMatrix=T,X===2){const ot=k.Util.makeHexColor(...s);this.current.fillColor=ot,this.current.strokeColor=ot}return this.executeOpTree(this.convertOpList(g)),this.svg=F,this.transformMatrix=M,this.current.fillColor=I,this.current.strokeColor=q,_.append(G.childNodes[0]),this.defs.append(_),`url(#${B})`}_makeShadingPattern(t){switch(typeof t=="string"&&(t=this.objs.get(t)),t[0]){case"RadialAxial":const s=`shading${c++}`,g=t[3];let T;switch(t[1]){case"axial":const D=t[4],E=t[5];T=this.svgFactory.createElement("svg:linearGradient"),T.setAttributeNS(null,"id",s),T.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),T.setAttributeNS(null,"x1",D[0]),T.setAttributeNS(null,"y1",D[1]),T.setAttributeNS(null,"x2",E[0]),T.setAttributeNS(null,"y2",E[1]);break;case"radial":const w=t[4],Q=t[5],ht=t[6],at=t[7];T=this.svgFactory.createElement("svg:radialGradient"),T.setAttributeNS(null,"id",s),T.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),T.setAttributeNS(null,"cx",Q[0]),T.setAttributeNS(null,"cy",Q[1]),T.setAttributeNS(null,"r",at),T.setAttributeNS(null,"fx",w[0]),T.setAttributeNS(null,"fy",w[1]),T.setAttributeNS(null,"fr",ht);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const D of g){const E=this.svgFactory.createElement("svg:stop");E.setAttributeNS(null,"offset",D[0]),E.setAttributeNS(null,"stop-color",D[1]),T.append(E)}return this.defs.append(T),`url(#${s})`;case"Mesh":return(0,k.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,s){this.current.dashArray=t,this.current.dashPhase=s}constructPath(t,s){const g=this.current;let T=g.x,D=g.y,E=[],w=0;for(const Q of t)switch(Q|0){case k.OPS.rectangle:T=s[w++],D=s[w++];const ht=s[w++],at=s[w++],X=T+ht,B=D+at;E.push("M",n(T),n(D),"L",n(X),n(D),"L",n(X),n(B),"L",n(T),n(B),"Z");break;case k.OPS.moveTo:T=s[w++],D=s[w++],E.push("M",n(T),n(D));break;case k.OPS.lineTo:T=s[w++],D=s[w++],E.push("L",n(T),n(D));break;case k.OPS.curveTo:T=s[w+4],D=s[w+5],E.push("C",n(s[w]),n(s[w+1]),n(s[w+2]),n(s[w+3]),n(T),n(D)),w+=6;break;case k.OPS.curveTo2:E.push("C",n(T),n(D),n(s[w]),n(s[w+1]),n(s[w+2]),n(s[w+3])),T=s[w+2],D=s[w+3],w+=4;break;case k.OPS.curveTo3:T=s[w+2],D=s[w+3],E.push("C",n(s[w]),n(s[w+1]),n(T),n(D),n(T),n(D)),w+=4;break;case k.OPS.closePath:E.push("Z");break}E=E.join(" "),g.path&&t.length>0&&t[0]!==k.OPS.rectangle&&t[0]!==k.OPS.moveTo?E=g.path.getAttributeNS(null,"d")+E:(g.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(g.path)),g.path.setAttributeNS(null,"d",E),g.path.setAttributeNS(null,"fill","none"),g.element=g.path,g.setCurrentPoint(T,D)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element){this.pendingClip=null;return}const s=`clippath${r++}`,g=this.svgFactory.createElement("svg:clipPath");g.setAttributeNS(null,"id",s),g.setAttributeNS(null,"transform",e(this.transformMatrix));const T=t.element.cloneNode(!0);if(this.pendingClip==="evenodd"?T.setAttributeNS(null,"clip-rule","evenodd"):T.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,g.append(T),this.defs.append(g),t.activeClipUrl){t.clipGroup=null;for(const D of this.extraStack)D.clipGroup=null;g.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${s})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const s=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",s)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[s,g]of t)switch(s){case"LW":this.setLineWidth(g);break;case"LC":this.setLineCap(g);break;case"LJ":this.setLineJoin(g);break;case"ML":this.setMiterLimit(g);break;case"D":this.setDash(g[0],g[1]);break;case"RI":this.setRenderingIntent(g);break;case"FL":this.setFlatness(g);break;case"Font":this.setFont(g);break;case"CA":this.setStrokeAlpha(g);break;case"ca":this.setFillAlpha(g);break;default:(0,k.warn)(`Unimplemented graphic state operator ${s}`);break}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,s=1){const g=this.current;let T=g.dashArray;s!==1&&T.length>0&&(T=T.map(function(D){return s*D})),t.setAttributeNS(null,"stroke",g.strokeColor),t.setAttributeNS(null,"stroke-opacity",g.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",n(g.miterLimit)),t.setAttributeNS(null,"stroke-linecap",g.lineCap),t.setAttributeNS(null,"stroke-linejoin",g.lineJoin),t.setAttributeNS(null,"stroke-width",n(s*g.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",T.map(n).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",n(s*g.dashPhase)+"px")}eoFill(){var t;(t=this.current.element)==null||t.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var t;(t=this.current.element)==null||t.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(t)}paintImageXObject(t){const s=this.getObject(t);if(!s){(0,k.warn)(`Dependent image with object ID ${t} is not ready yet`);return}this.paintInlineImageXObject(s)}paintInlineImageXObject(t,s){const g=t.width,T=t.height,D=y(t,this.forceDataSchema,!!s),E=this.svgFactory.createElement("svg:rect");E.setAttributeNS(null,"x","0"),E.setAttributeNS(null,"y","0"),E.setAttributeNS(null,"width",n(g)),E.setAttributeNS(null,"height",n(T)),this.current.element=E,this.clip("nonzero");const w=this.svgFactory.createElement("svg:image");w.setAttributeNS(m,"xlink:href",D),w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y",n(-T)),w.setAttributeNS(null,"width",n(g)+"px"),w.setAttributeNS(null,"height",n(T)+"px"),w.setAttributeNS(null,"transform",`scale(${n(1/g)} ${n(-1/T)})`),s?s.append(w):this._ensureTransformGroup().append(w)}paintImageMaskXObject(t){const s=this.getObject(t.data,t);if(s.bitmap){(0,k.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const g=this.current,T=s.width,D=s.height,E=g.fillColor;g.maskId=`mask${a++}`;const w=this.svgFactory.createElement("svg:mask");w.setAttributeNS(null,"id",g.maskId);const Q=this.svgFactory.createElement("svg:rect");Q.setAttributeNS(null,"x","0"),Q.setAttributeNS(null,"y","0"),Q.setAttributeNS(null,"width",n(T)),Q.setAttributeNS(null,"height",n(D)),Q.setAttributeNS(null,"fill",E),Q.setAttributeNS(null,"mask",`url(#${g.maskId})`),this.defs.append(w),this._ensureTransformGroup().append(Q),this.paintInlineImageXObject(s,w)}paintFormXObjectBegin(t,s){if(Array.isArray(t)&&t.length===6&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),s){const g=s[2]-s[0],T=s[3]-s[1],D=this.svgFactory.createElement("svg:rect");D.setAttributeNS(null,"x",s[0]),D.setAttributeNS(null,"y",s[1]),D.setAttributeNS(null,"width",n(g)),D.setAttributeNS(null,"height",n(T)),this.current.element=D,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const s=this.svgFactory.create(t.width,t.height),g=this.svgFactory.createElement("svg:defs");s.append(g),this.defs=g;const T=this.svgFactory.createElement("svg:g");return T.setAttributeNS(null,"transform",e(t.transform)),s.append(T),this.svg=T,s}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",e(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(ct,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFNodeStream=void 0;var f=Y(1),k=Y(32);const z=require$$5,U=require$$5,W=require$$5,N=require$$5,m=/^file:\/\/\/[a-zA-Z]:\//;function A(a){const c=N.parse(a);return c.protocol==="file:"||c.host?c:/^[a-z]:[/\\]/i.test(a)?N.parse(`file:///${a}`):(c.host||(c.protocol="file:"),c)}class R{constructor(c){this.source=c,this.url=A(c.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&c.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var c;return((c=this._fullRequestReader)==null?void 0:c._loaded)??0}getFullReader(){return(0,f.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new e(this):new o(this),this._fullRequestReader}getRangeReader(c,t){if(t<=this._progressiveDataLength)return null;const s=this.isFsUrl?new r(this,c,t):new n(this,c,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(c){var t;(t=this._fullRequestReader)==null||t.cancel(c);for(const s of this._rangeRequestReaders.slice(0))s.cancel(c)}}u.PDFNodeStream=R;class v{constructor(c){this._url=c.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=c.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=(0,f.createPromiseCapability)(),this._headersCapability=(0,f.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const c=this._readableStream.read();return c===null?(this._readCapability=(0,f.createPromiseCapability)(),this.read()):(this._loaded+=c.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(c).buffer,done:!1})}cancel(c){if(!this._readableStream){this._error(c);return}this._readableStream.destroy(c)}_error(c){this._storedError=c,this._readCapability.resolve()}_setReadableStream(c){this._readableStream=c,c.on("readable",()=>{this._readCapability.resolve()}),c.on("end",()=>{c.destroy(),this._done=!0,this._readCapability.resolve()}),c.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new f.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class y{constructor(c){this._url=c.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,f.createPromiseCapability)();const t=c.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const c=this._readableStream.read();return c===null?(this._readCapability=(0,f.createPromiseCapability)(),this.read()):(this._loaded+=c.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(c).buffer,done:!1})}cancel(c){if(!this._readableStream){this._error(c);return}this._readableStream.destroy(c)}_error(c){this._storedError=c,this._readCapability.resolve()}_setReadableStream(c){this._readableStream=c,c.on("readable",()=>{this._readCapability.resolve()}),c.on("end",()=>{c.destroy(),this._done=!0,this._readCapability.resolve()}),c.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function d(a,c){return{protocol:a.protocol,auth:a.auth,host:a.hostname,port:a.port,path:a.path,method:"GET",headers:c}}class o extends v{constructor(c){super(c);const t=s=>{if(s.statusCode===404){const E=new f.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=E,this._headersCapability.reject(E);return}this._headersCapability.resolve(),this._setReadableStream(s);const g=E=>this._readableStream.headers[E.toLowerCase()],{allowRangeRequests:T,suggestedLength:D}=(0,k.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:c.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=T,this._contentLength=D||this._contentLength,this._filename=(0,k.extractFilenameFromHeader)(g)};this._request=null,this._url.protocol==="http:"?this._request=U.request(d(this._url,c.httpHeaders),t):this._request=W.request(d(this._url,c.httpHeaders),t),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class n extends y{constructor(c,t,s){super(c),this._httpHeaders={};for(const T in c.httpHeaders){const D=c.httpHeaders[T];typeof D>"u"||(this._httpHeaders[T]=D)}this._httpHeaders.Range=`bytes=${t}-${s-1}`;const g=T=>{if(T.statusCode===404){const D=new f.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=D;return}this._setReadableStream(T)};this._request=null,this._url.protocol==="http:"?this._request=U.request(d(this._url,this._httpHeaders),g):this._request=W.request(d(this._url,this._httpHeaders),g),this._request.on("error",T=>{this._storedError=T}),this._request.end()}}class e extends v{constructor(c){super(c);let t=decodeURIComponent(this._url.path);m.test(this._url.href)&&(t=t.replace(/^\//,"")),z.lstat(t,(s,g)=>{if(s){s.code==="ENOENT"&&(s=new f.MissingPDFException(`Missing PDF "${t}".`)),this._storedError=s,this._headersCapability.reject(s);return}this._contentLength=g.size,this._setReadableStream(z.createReadStream(t)),this._headersCapability.resolve()})}}class r extends y{constructor(c,t,s){super(c);let g=decodeURIComponent(this._url.path);m.test(this._url.href)&&(g=g.replace(/^\//,"")),this._setReadableStream(z.createReadStream(g,{start:t,end:s-1}))}}},(ct,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.createResponseStatusError=N,u.extractFilenameFromHeader=W,u.validateRangeRequestCapabilities=U,u.validateResponseStatus=m;var f=Y(1),k=Y(33),z=Y(6);function U({getResponseHeader:A,isHttp:R,rangeChunkSize:v,disableRange:y}){const d={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(A("Content-Length"),10);return!Number.isInteger(o)||(d.suggestedLength=o,o<=2*v)||y||!R||A("Accept-Ranges")!=="bytes"||(A("Content-Encoding")||"identity")!=="identity"||(d.allowRangeRequests=!0),d}function W(A){const R=A("Content-Disposition");if(R){let v=(0,k.getFilenameFromContentDispositionHeader)(R);if(v.includes("%"))try{v=decodeURIComponent(v)}catch{}if((0,z.isPdfFile)(v))return v}return null}function N(A,R){return A===404||A===0&&R.startsWith("file:")?new f.MissingPDFException('Missing PDF "'+R+'".'):new f.UnexpectedResponseException(`Unexpected server response (${A}) while retrieving PDF "${R}".`,A)}function m(A){return A===200||A===206}},(ct,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.getFilenameFromContentDispositionHeader=k;var f=Y(1);function k(z){let U=!0,W=N("filename\\*","i").exec(z);if(W){W=W[1];let o=v(W);return o=unescape(o),o=y(o),o=d(o),A(o)}if(W=R(z),W){const o=d(W);return A(o)}if(W=N("filename","i").exec(z),W){W=W[1];let o=v(W);return o=d(o),A(o)}function N(o,n){return new RegExp("(?:^|;)\\s*"+o+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',n)}function m(o,n){if(o){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const e=new TextDecoder(o,{fatal:!0}),r=(0,f.stringToBytes)(n);n=e.decode(r),U=!1}catch{}}return n}function A(o){return U&&/[\x80-\xff]/.test(o)&&(o=m("utf-8",o),U&&(o=m("iso-8859-1",o))),o}function R(o){const n=[];let e;const r=N("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(e=r.exec(o))!==null;){let[,c,t,s]=e;if(c=parseInt(c,10),c in n){if(c===0)break;continue}n[c]=[t,s]}const a=[];for(let c=0;c<n.length&&c in n;++c){let[t,s]=n[c];s=v(s),t&&(s=unescape(s),c===0&&(s=y(s))),a.push(s)}return a.join("")}function v(o){if(o.startsWith('"')){const n=o.slice(1).split('\\"');for(let e=0;e<n.length;++e){const r=n[e].indexOf('"');r!==-1&&(n[e]=n[e].slice(0,r),n.length=e+1),n[e]=n[e].replace(/\\(.)/g,"$1")}o=n.join('"')}return o}function y(o){const n=o.indexOf("'");if(n===-1)return o;const e=o.slice(0,n),a=o.slice(n+1).replace(/^[^']*'/,"");return m(e,a)}function d(o){return!o.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(o)?o:o.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(n,e,r,a){if(r==="q"||r==="Q")return a=a.replace(/_/g," "),a=a.replace(/=([0-9a-fA-F]{2})/g,function(c,t){return String.fromCharCode(parseInt(t,16))}),m(e,a);try{a=atob(a)}catch{}return m(e,a)})}return""}},(ct,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFNetworkStream=void 0;var f=Y(1),k=Y(32);const z=200,U=206;function W(v){const y=v.response;return typeof y!="string"?y:(0,f.stringToBytes)(y).buffer}class N{constructor(y,d={}){this.url=y,this.isHttp=/^https?:/i.test(y),this.httpHeaders=this.isHttp&&d.httpHeaders||Object.create(null),this.withCredentials=d.withCredentials||!1,this.getXhr=d.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(y,d,o){const n={begin:y,end:d};for(const e in o)n[e]=o[e];return this.request(n)}requestFull(y){return this.request(y)}request(y){const d=this.getXhr(),o=this.currXhrId++,n=this.pendingRequests[o]={xhr:d};d.open("GET",this.url),d.withCredentials=this.withCredentials;for(const e in this.httpHeaders){const r=this.httpHeaders[e];typeof r>"u"||d.setRequestHeader(e,r)}return this.isHttp&&"begin"in y&&"end"in y?(d.setRequestHeader("Range",`bytes=${y.begin}-${y.end-1}`),n.expectedStatus=U):n.expectedStatus=z,d.responseType="arraybuffer",y.onError&&(d.onerror=function(e){y.onError(d.status)}),d.onreadystatechange=this.onStateChange.bind(this,o),d.onprogress=this.onProgress.bind(this,o),n.onHeadersReceived=y.onHeadersReceived,n.onDone=y.onDone,n.onError=y.onError,n.onProgress=y.onProgress,d.send(null),o}onProgress(y,d){var n;const o=this.pendingRequests[y];o&&((n=o.onProgress)==null||n.call(o,d))}onStateChange(y,d){var c,t,s;const o=this.pendingRequests[y];if(!o)return;const n=o.xhr;if(n.readyState>=2&&o.onHeadersReceived&&(o.onHeadersReceived(),delete o.onHeadersReceived),n.readyState!==4||!(y in this.pendingRequests))return;if(delete this.pendingRequests[y],n.status===0&&this.isHttp){(c=o.onError)==null||c.call(o,n.status);return}const e=n.status||z;if(!(e===z&&o.expectedStatus===U)&&e!==o.expectedStatus){(t=o.onError)==null||t.call(o,n.status);return}const a=W(n);if(e===U){const g=n.getResponseHeader("Content-Range"),T=/bytes (\d+)-(\d+)\/(\d+)/.exec(g);o.onDone({begin:parseInt(T[1],10),chunk:a})}else a?o.onDone({begin:0,chunk:a}):(s=o.onError)==null||s.call(o,n.status)}getRequestXhr(y){return this.pendingRequests[y].xhr}isPendingRequest(y){return y in this.pendingRequests}abortRequest(y){const d=this.pendingRequests[y].xhr;delete this.pendingRequests[y],d.abort()}}class m{constructor(y){this._source=y,this._manager=new N(y.url,{httpHeaders:y.httpHeaders,withCredentials:y.withCredentials}),this._rangeChunkSize=y.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(y){const d=this._rangeRequestReaders.indexOf(y);d>=0&&this._rangeRequestReaders.splice(d,1)}getFullReader(){return(0,f.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new A(this._manager,this._source),this._fullRequestReader}getRangeReader(y,d){const o=new R(this._manager,y,d);return o.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(o),o}cancelAllRequests(y){var d;(d=this._fullRequestReader)==null||d.cancel(y);for(const o of this._rangeRequestReaders.slice(0))o.cancel(y)}}u.PDFNetworkStream=m;class A{constructor(y,d){this._manager=y;const o={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=d.url,this._fullRequestId=y.requestFull(o),this._headersReceivedCapability=(0,f.createPromiseCapability)(),this._disableRange=d.disableRange||!1,this._contentLength=d.length,this._rangeChunkSize=d.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const y=this._fullRequestId,d=this._manager.getRequestXhr(y),o=r=>d.getResponseHeader(r),{allowRangeRequests:n,suggestedLength:e}=(0,k.validateRangeRequestCapabilities)({getResponseHeader:o,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=e||this._contentLength,this._filename=(0,k.extractFilenameFromHeader)(o),this._isRangeSupported&&this._manager.abortRequest(y),this._headersReceivedCapability.resolve()}_onDone(y){if(y&&(this._requests.length>0?this._requests.shift().resolve({value:y.chunk,done:!1}):this._cachedChunks.push(y.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(y){this._storedError=(0,k.createResponseStatusError)(y,this._url),this._headersReceivedCapability.reject(this._storedError);for(const d of this._requests)d.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(y){var d;(d=this.onProgress)==null||d.call(this,{loaded:y.loaded,total:y.lengthComputable?y.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const y=(0,f.createPromiseCapability)();return this._requests.push(y),y.promise}cancel(y){this._done=!0,this._headersReceivedCapability.reject(y);for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class R{constructor(y,d,o){this._manager=y;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._requestId=y.requestRange(d,o,n),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var y;(y=this.onClosed)==null||y.call(this,this)}_onDone(y){const d=y.chunk;this._requests.length>0?this._requests.shift().resolve({value:d,done:!1}):this._queuedChunk=d,this._done=!0;for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(y){this._storedError=(0,k.createResponseStatusError)(y,this._url);for(const d of this._requests)d.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(y){var d;this.isStreamingSupported||(d=this.onProgress)==null||d.call(this,{loaded:y.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const d=this._queuedChunk;return this._queuedChunk=null,{value:d,done:!1}}if(this._done)return{value:void 0,done:!0};const y=(0,f.createPromiseCapability)();return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(ct,u,Y)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFFetchStream=void 0;var f=Y(1),k=Y(32);function z(A,R,v){return{method:"GET",headers:A,signal:v.signal,mode:"cors",credentials:R?"include":"same-origin",redirect:"follow"}}function U(A){const R=new Headers;for(const v in A){const y=A[v];typeof y>"u"||R.append(v,y)}return R}class W{constructor(R){this.source=R,this.isHttp=/^https?:/i.test(R.url),this.httpHeaders=this.isHttp&&R.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var R;return((R=this._fullRequestReader)==null?void 0:R._loaded)??0}getFullReader(){return(0,f.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new N(this),this._fullRequestReader}getRangeReader(R,v){if(v<=this._progressiveDataLength)return null;const y=new m(this,R,v);return this._rangeRequestReaders.push(y),y}cancelAllRequests(R){var v;(v=this._fullRequestReader)==null||v.cancel(R);for(const y of this._rangeRequestReaders.slice(0))y.cancel(R)}}u.PDFFetchStream=W;class N{constructor(R){this._stream=R,this._reader=null,this._loaded=0,this._filename=null;const v=R.source;this._withCredentials=v.withCredentials||!1,this._contentLength=v.length,this._headersCapability=(0,f.createPromiseCapability)(),this._disableRange=v.disableRange||!1,this._rangeChunkSize=v.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!v.disableStream,this._isRangeSupported=!v.disableRange,this._headers=U(this._stream.httpHeaders);const y=v.url;fetch(y,z(this._headers,this._withCredentials,this._abortController)).then(d=>{if(!(0,k.validateResponseStatus)(d.status))throw(0,k.createResponseStatusError)(d.status,y);this._reader=d.body.getReader(),this._headersCapability.resolve();const o=r=>d.headers.get(r),{allowRangeRequests:n,suggestedLength:e}=(0,k.validateRangeRequestCapabilities)({getResponseHeader:o,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=n,this._contentLength=e||this._contentLength,this._filename=(0,k.extractFilenameFromHeader)(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new f.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var d;await this._headersCapability.promise;const{value:R,done:v}=await this._reader.read();return v?{value:R,done:v}:(this._loaded+=R.byteLength,(d=this.onProgress)==null||d.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(R).buffer,done:!1})}cancel(R){var v;(v=this._reader)==null||v.cancel(R),this._abortController.abort()}}class m{constructor(R,v,y){this._stream=R,this._reader=null,this._loaded=0;const d=R.source;this._withCredentials=d.withCredentials||!1,this._readCapability=(0,f.createPromiseCapability)(),this._isStreamingSupported=!d.disableStream,this._abortController=new AbortController,this._headers=U(this._stream.httpHeaders),this._headers.append("Range",`bytes=${v}-${y-1}`);const o=d.url;fetch(o,z(this._headers,this._withCredentials,this._abortController)).then(n=>{if(!(0,k.validateResponseStatus)(n.status))throw(0,k.createResponseStatusError)(n.status,o);this._readCapability.resolve(),this._reader=n.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var d;await this._readCapability.promise;const{value:R,done:v}=await this._reader.read();return v?{value:R,done:v}:(this._loaded+=R.byteLength,(d=this.onProgress)==null||d.call(this,{loaded:this._loaded}),{value:new Uint8Array(R).buffer,done:!1})}cancel(R){var v;(v=this._reader)==null||v.cancel(R),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(ct){var u=__webpack_module_cache__[ct];if(u!==void 0)return u.exports;var Y=__webpack_module_cache__[ct]={exports:{}};return __webpack_modules__[ct](Y,Y.exports,__w_pdfjs_require__),Y.exports}var __webpack_exports__={};return(()=>{var ct=__webpack_exports__;Object.defineProperty(ct,"__esModule",{value:!0}),Object.defineProperty(ct,"AnnotationEditorLayer",{enumerable:!0,get:function(){return k.AnnotationEditorLayer}}),Object.defineProperty(ct,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return u.AnnotationEditorParamsType}}),Object.defineProperty(ct,"AnnotationEditorType",{enumerable:!0,get:function(){return u.AnnotationEditorType}}),Object.defineProperty(ct,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return z.AnnotationEditorUIManager}}),Object.defineProperty(ct,"AnnotationLayer",{enumerable:!0,get:function(){return U.AnnotationLayer}}),Object.defineProperty(ct,"AnnotationMode",{enumerable:!0,get:function(){return u.AnnotationMode}}),Object.defineProperty(ct,"CMapCompressionType",{enumerable:!0,get:function(){return u.CMapCompressionType}}),Object.defineProperty(ct,"GlobalWorkerOptions",{enumerable:!0,get:function(){return W.GlobalWorkerOptions}}),Object.defineProperty(ct,"InvalidPDFException",{enumerable:!0,get:function(){return u.InvalidPDFException}}),Object.defineProperty(ct,"MissingPDFException",{enumerable:!0,get:function(){return u.MissingPDFException}}),Object.defineProperty(ct,"OPS",{enumerable:!0,get:function(){return u.OPS}}),Object.defineProperty(ct,"PDFDataRangeTransport",{enumerable:!0,get:function(){return Y.PDFDataRangeTransport}}),Object.defineProperty(ct,"PDFDateString",{enumerable:!0,get:function(){return f.PDFDateString}}),Object.defineProperty(ct,"PDFWorker",{enumerable:!0,get:function(){return Y.PDFWorker}}),Object.defineProperty(ct,"PasswordResponses",{enumerable:!0,get:function(){return u.PasswordResponses}}),Object.defineProperty(ct,"PermissionFlag",{enumerable:!0,get:function(){return u.PermissionFlag}}),Object.defineProperty(ct,"PixelsPerInch",{enumerable:!0,get:function(){return f.PixelsPerInch}}),Object.defineProperty(ct,"RenderingCancelledException",{enumerable:!0,get:function(){return f.RenderingCancelledException}}),Object.defineProperty(ct,"SVGGraphics",{enumerable:!0,get:function(){return A.SVGGraphics}}),Object.defineProperty(ct,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return u.UNSUPPORTED_FEATURES}}),Object.defineProperty(ct,"UnexpectedResponseException",{enumerable:!0,get:function(){return u.UnexpectedResponseException}}),Object.defineProperty(ct,"Util",{enumerable:!0,get:function(){return u.Util}}),Object.defineProperty(ct,"VerbosityLevel",{enumerable:!0,get:function(){return u.VerbosityLevel}}),Object.defineProperty(ct,"XfaLayer",{enumerable:!0,get:function(){return R.XfaLayer}}),Object.defineProperty(ct,"build",{enumerable:!0,get:function(){return Y.build}}),Object.defineProperty(ct,"createPromiseCapability",{enumerable:!0,get:function(){return u.createPromiseCapability}}),Object.defineProperty(ct,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return u.createValidAbsoluteUrl}}),Object.defineProperty(ct,"getDocument",{enumerable:!0,get:function(){return Y.getDocument}}),Object.defineProperty(ct,"getFilenameFromUrl",{enumerable:!0,get:function(){return f.getFilenameFromUrl}}),Object.defineProperty(ct,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return f.getPdfFilenameFromUrl}}),Object.defineProperty(ct,"getXfaPageViewport",{enumerable:!0,get:function(){return f.getXfaPageViewport}}),Object.defineProperty(ct,"isPdfFile",{enumerable:!0,get:function(){return f.isPdfFile}}),Object.defineProperty(ct,"loadScript",{enumerable:!0,get:function(){return f.loadScript}}),Object.defineProperty(ct,"renderTextLayer",{enumerable:!0,get:function(){return m.renderTextLayer}}),Object.defineProperty(ct,"shadow",{enumerable:!0,get:function(){return u.shadow}}),Object.defineProperty(ct,"version",{enumerable:!0,get:function(){return Y.version}});var u=__w_pdfjs_require__(1),Y=__w_pdfjs_require__(2),f=__w_pdfjs_require__(6),k=__w_pdfjs_require__(21),z=__w_pdfjs_require__(5),U=__w_pdfjs_require__(26),W=__w_pdfjs_require__(14),N=__w_pdfjs_require__(12),m=__w_pdfjs_require__(29),A=__w_pdfjs_require__(30),R=__w_pdfjs_require__(28);if(N.isNodeJS){const{PDFNodeStream:v}=__w_pdfjs_require__(31);(0,Y.setPDFNetworkStreamFactory)(y=>new v(y))}else{const{PDFNetworkStream:v}=__w_pdfjs_require__(34),{PDFFetchStream:y}=__w_pdfjs_require__(35);(0,Y.setPDFNetworkStreamFactory)(d=>(0,f.isValidFetchUrl)(d.url)?new y(d):new v(d))}})(),__webpack_exports__})())})(pdf$2);const pdf=getDefaultExportFromCjs(pdfExports),pdf$1=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]);export{pdfExports as a,pdf$1 as p};
