function V(t){return t.split("-")[0]}function F(t){return t.split("-")[1]}function M(t){return["top","bottom"].includes(V(t))?"x":"y"}function nt(t){return t==="y"?"height":"width"}function lt(t,e,n){let{reference:o,floating:r}=t;const l=o.x+o.width/2-r.width/2,c=o.y+o.height/2-r.height/2,i=M(e),s=nt(i),d=o[s]/2-r[s]/2,u=i==="x";let a;switch(V(e)){case"top":a={x:l,y:o.y-r.height};break;case"bottom":a={x:l,y:o.y+o.height};break;case"right":a={x:o.x+o.width,y:c};break;case"left":a={x:o.x-r.width,y:c};break;default:a={x:o.x,y:o.y}}switch(F(e)){case"start":a[i]-=d*(n&&u?-1:1);break;case"end":a[i]+=d*(n&&u?-1:1)}return a}const Tt=async(t,e,n)=>{const{placement:o="bottom",strategy:r="absolute",middleware:l=[],platform:c}=n,i=await(c.isRTL==null?void 0:c.isRTL(e));let s=await c.getElementRects({reference:t,floating:e,strategy:r}),{x:d,y:u}=lt(s,o,i),a=o,f={},h=0;for(let m=0;m<l.length;m++){const{name:p,fn:g}=l[m],{x,y:w,data:v,reset:y}=await g({x:d,y:u,initialPlacement:o,placement:a,strategy:r,middlewareData:f,rects:s,platform:c,elements:{reference:t,floating:e}});d=x!=null?x:d,u=w!=null?w:u,f={...f,[p]:{...f[p],...v}},y&&h<=50&&(h++,typeof y=="object"&&(y.placement&&(a=y.placement),y.rects&&(s=y.rects===!0?await c.getElementRects({reference:t,floating:e,strategy:r}):y.rects),{x:d,y:u}=lt(s,a,i)),m=-1)}return{x:d,y:u,placement:a,strategy:r,middlewareData:f}};function ot(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function I(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function G(t,e){var n;e===void 0&&(e={});const{x:o,y:r,platform:l,rects:c,elements:i,strategy:s}=t,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:a="floating",altBoundary:f=!1,padding:h=0}=e,m=ot(h),p=i[f?a==="floating"?"reference":"floating":a],g=I(await l.getClippingRect({element:(n=await(l.isElement==null?void 0:l.isElement(p)))==null||n?p:p.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(i.floating)),boundary:d,rootBoundary:u,strategy:s})),x=I(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({rect:a==="floating"?{...c.floating,x:o,y:r}:c.reference,offsetParent:await(l.getOffsetParent==null?void 0:l.getOffsetParent(i.floating)),strategy:s}):c[a]);return{top:g.top-x.top+m.top,bottom:x.bottom-g.bottom+m.bottom,left:g.left-x.left+m.left,right:x.right-g.right+m.right}}const mt=Math.min,gt=Math.max;function _(t,e,n){return gt(t,mt(e,n))}const Dt=t=>({name:"arrow",options:t,async fn(e){const{element:n,padding:o=0}=t!=null?t:{},{x:r,y:l,placement:c,rects:i,platform:s}=e;if(n==null)return{};const d=ot(o),u={x:r,y:l},a=M(c),f=F(c),h=nt(a),m=await s.getDimensions(n),p=a==="y"?"top":"left",g=a==="y"?"bottom":"right",x=i.reference[h]+i.reference[a]-u[a]-i.floating[h],w=u[a]-i.reference[a],v=await(s.getOffsetParent==null?void 0:s.getOffsetParent(n));let y=v?a==="y"?v.clientHeight||0:v.clientWidth||0:0;y===0&&(y=i.floating[h]);const L=x/2-w/2,R=d[p],P=y-m[h]-d[g],b=y/2-m[h]/2+L,T=_(R,b,P),E=(f==="start"?d[p]:d[g])>0&&b!==T&&i.reference[h]<=i.floating[h];return{[a]:u[a]-(E?b<R?R-b:P-b:0),data:{[a]:T,centerOffset:b-T}}}}),Lt={left:"right",right:"left",bottom:"top",top:"bottom"};function Q(t){return t.replace(/left|right|bottom|top/g,e=>Lt[e])}function pt(t,e,n){n===void 0&&(n=!1);const o=F(t),r=M(t),l=nt(r);let c=r==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[l]>e.floating[l]&&(c=Q(c)),{main:c,cross:Q(c)}}const Et={start:"end",end:"start"};function tt(t){return t.replace(/start|end/g,e=>Et[e])}const yt=["top","right","bottom","left"],Pt=yt.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]),Wt=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,o,r,l,c;const{x:i,y:s,rects:d,middlewareData:u,placement:a,platform:f,elements:h}=e,{alignment:m=null,allowedPlacements:p=Pt,autoAlignment:g=!0,...x}=t,w=function(A,j,X){return(A?[...X.filter(H=>F(H)===A),...X.filter(H=>F(H)!==A)]:X.filter(H=>V(H)===H)).filter(H=>!A||F(H)===A||!!j&&tt(H)!==H)}(m,g,p),v=await G(e,x),y=(n=(o=u.autoPlacement)==null?void 0:o.index)!=null?n:0,L=w[y];if(L==null)return{};const{main:R,cross:P}=pt(L,d,await(f.isRTL==null?void 0:f.isRTL(h.floating)));if(a!==L)return{x:i,y:s,reset:{placement:w[0]}};const b=[v[V(L)],v[R],v[P]],T=[...(r=(l=u.autoPlacement)==null?void 0:l.overflows)!=null?r:[],{placement:L,overflows:b}],E=w[y+1];if(E)return{data:{index:y+1,overflows:T},reset:{placement:E}};const D=T.slice().sort((A,j)=>A.overflows[0]-j.overflows[0]),O=(c=D.find(A=>{let{overflows:j}=A;return j.every(X=>X<=0)}))==null?void 0:c.placement,B=O!=null?O:D[0].placement;return B!==a?{data:{index:y+1,overflows:T},reset:{placement:B}}:{}}}},Vt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:o,middlewareData:r,rects:l,initialPlacement:c,platform:i,elements:s}=e,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:a,fallbackStrategy:f="bestFit",flipAlignment:h=!0,...m}=t,p=V(o),g=a||(p===c||!h?[Q(c)]:function(b){const T=Q(b);return[tt(b),T,tt(T)]}(c)),x=[c,...g],w=await G(e,m),v=[];let y=((n=r.flip)==null?void 0:n.overflows)||[];if(d&&v.push(w[p]),u){const{main:b,cross:T}=pt(o,l,await(i.isRTL==null?void 0:i.isRTL(s.floating)));v.push(w[b],w[T])}if(y=[...y,{placement:o,overflows:v}],!v.every(b=>b<=0)){var L,R;const b=((L=(R=r.flip)==null?void 0:R.index)!=null?L:0)+1,T=x[b];if(T)return{data:{index:b,overflows:y},reset:{placement:T}};let E="bottom";switch(f){case"bestFit":{var P;const D=(P=y.map(O=>[O,O.overflows.filter(B=>B>0).reduce((B,A)=>B+A,0)]).sort((O,B)=>O[1]-B[1])[0])==null?void 0:P[0].placement;D&&(E=D);break}case"initialPlacement":E=c}if(o!==E)return{reset:{placement:E}}}return{}}}};function ct(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function st(t){return yt.some(e=>t[e]>=0)}const kt=function(t){let{strategy:e="referenceHidden",...n}=t===void 0?{}:t;return{name:"hide",async fn(o){const{rects:r}=o;switch(e){case"referenceHidden":{const l=ct(await G(o,{...n,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:st(l)}}}case"escaped":{const l=ct(await G(o,{...n,altBoundary:!0}),r.floating);return{data:{escapedOffsets:l,escaped:st(l)}}}default:return{}}}}},Bt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:o}=e,r=await async function(l,c){const{placement:i,platform:s,elements:d}=l,u=await(s.isRTL==null?void 0:s.isRTL(d.floating)),a=V(i),f=F(i),h=M(i)==="x",m=["left","top"].includes(a)?-1:1,p=u&&h?-1:1,g=typeof c=="function"?c(l):c;let{mainAxis:x,crossAxis:w,alignmentAxis:v}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...g};return f&&typeof v=="number"&&(w=f==="end"?-1*v:v),h?{x:w*p,y:x*m}:{x:x*m,y:w*p}}(e,t);return{x:n+r.x,y:o+r.y,data:r}}}};function At(t){return t==="x"?"y":"x"}const Nt=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:o,placement:r}=e,{mainAxis:l=!0,crossAxis:c=!1,limiter:i={fn:g=>{let{x,y:w}=g;return{x,y:w}}},...s}=t,d={x:n,y:o},u=await G(e,s),a=M(V(r)),f=At(a);let h=d[a],m=d[f];if(l){const g=a==="y"?"bottom":"right";h=_(h+u[a==="y"?"top":"left"],h,h-u[g])}if(c){const g=f==="y"?"bottom":"right";m=_(m+u[f==="y"?"top":"left"],m,m-u[g])}const p=i.fn({...e,[a]:h,[f]:m});return{...p,data:{x:p.x-n,y:p.y-o}}}}},St=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){var n;const{placement:o,elements:r,rects:l,platform:c,strategy:i}=e,{padding:s=2,x:d,y:u}=t,a=I(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({rect:l.reference,offsetParent:await(c.getOffsetParent==null?void 0:c.getOffsetParent(r.floating)),strategy:i}):l.reference),f=(n=await(c.getClientRects==null?void 0:c.getClientRects(r.reference)))!=null?n:[],h=ot(s),m=await c.getElementRects({reference:{getBoundingClientRect:function(){var p;if(f.length===2&&f[0].left>f[1].right&&d!=null&&u!=null)return(p=f.find(g=>d>g.left-h.left&&d<g.right+h.right&&u>g.top-h.top&&u<g.bottom+h.bottom))!=null?p:a;if(f.length>=2){if(M(o)==="x"){const R=f[0],P=f[f.length-1],b=V(o)==="top",T=R.top,E=P.bottom,D=b?R.left:P.left,O=b?R.right:P.right;return{top:T,bottom:E,left:D,right:O,width:O-D,height:E-T,x:D,y:T}}const g=V(o)==="left",x=gt(...f.map(R=>R.right)),w=mt(...f.map(R=>R.left)),v=f.filter(R=>g?R.left===w:R.right===x),y=v[0].top,L=v[v.length-1].bottom;return{top:y,bottom:L,left:w,right:x,width:x-w,height:L-y,x:w,y}}return a}},floating:r.floating,strategy:i});return l.reference.x!==m.reference.x||l.reference.y!==m.reference.y||l.reference.width!==m.reference.width||l.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};function wt(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function k(t){if(t==null)return window;if(!wt(t)){const e=t.ownerDocument;return e&&e.defaultView||window}return t}function S(t){return k(t).getComputedStyle(t)}function z(t){return wt(t)?"":t?(t.nodeName||"").toLowerCase():""}function xt(){const t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function $(t){return t instanceof k(t).HTMLElement}function C(t){return t instanceof k(t).Element}function J(t){return typeof ShadowRoot>"u"?!1:t instanceof k(t).ShadowRoot||t instanceof ShadowRoot}function K(t){const{overflow:e,overflowX:n,overflowY:o,display:r}=S(t);return/auto|scroll|overlay|hidden/.test(e+o+n)&&!["inline","contents"].includes(r)}function $t(t){return["table","td","th"].includes(z(t))}function at(t){const e=/firefox/i.test(xt()),n=S(t);return n.transform!=="none"||n.perspective!=="none"||e&&n.willChange==="filter"||e&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(o=>n.willChange.includes(o))||["paint","layout","strict","content"].some(o=>{const r=n.contain;return r!=null&&r.includes(o)})}function vt(){return!/^((?!chrome|android).)*safari/i.test(xt())}function it(t){return["html","body","#document"].includes(z(t))}const ft=Math.min,Y=Math.max,U=Math.round;function W(t,e,n){var o,r,l,c;e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect();let s=1,d=1;e&&$(t)&&(s=t.offsetWidth>0&&U(i.width)/t.offsetWidth||1,d=t.offsetHeight>0&&U(i.height)/t.offsetHeight||1);const u=C(t)?k(t):window,a=!vt()&&n,f=(i.left+(a&&(o=(r=u.visualViewport)==null?void 0:r.offsetLeft)!=null?o:0))/s,h=(i.top+(a&&(l=(c=u.visualViewport)==null?void 0:c.offsetTop)!=null?l:0))/d,m=i.width/s,p=i.height/d;return{width:m,height:p,top:h,right:f+m,bottom:h+p,left:f,x:f,y:h}}function N(t){return(e=t,(e instanceof k(e).Node?t.ownerDocument:t.document)||window.document).documentElement;var e}function Z(t){return C(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function bt(t){return W(N(t)).left+Z(t).scrollLeft}function Ot(t,e,n){const o=$(e),r=N(e),l=W(t,o&&function(s){const d=W(s);return U(d.width)!==s.offsetWidth||U(d.height)!==s.offsetHeight}(e),n==="fixed");let c={scrollLeft:0,scrollTop:0};const i={x:0,y:0};if(o||!o&&n!=="fixed")if((z(e)!=="body"||K(r))&&(c=Z(e)),$(e)){const s=W(e,!0);i.x=s.x+e.clientLeft,i.y=s.y+e.clientTop}else r&&(i.x=bt(r));return{x:l.left+c.scrollLeft-i.x,y:l.top+c.scrollTop-i.y,width:l.width,height:l.height}}function rt(t){return z(t)==="html"?t:t.assignedSlot||t.parentNode||(J(t)?t.host:null)||N(t)}function ut(t){return $(t)&&S(t).position!=="fixed"?t.offsetParent:null}function et(t){const e=k(t);let n=ut(t);for(;n&&$t(n)&&S(n).position==="static";)n=ut(n);return n&&(z(n)==="html"||z(n)==="body"&&S(n).position==="static"&&!at(n))?e:n||function(o){let r=rt(o);for(J(r)&&(r=r.host);$(r)&&!it(r);){if(at(r))return r;{const l=r.parentNode;r=J(l)?l.host:l}}return null}(t)||e}function dt(t){if($(t))return{width:t.offsetWidth,height:t.offsetHeight};const e=W(t);return{width:e.width,height:e.height}}function Rt(t){const e=rt(t);return it(e)?t.ownerDocument.body:$(e)&&K(e)?e:Rt(e)}function q(t,e){var n;e===void 0&&(e=[]);const o=Rt(t),r=o===((n=t.ownerDocument)==null?void 0:n.body),l=k(o),c=r?[l].concat(l.visualViewport||[],K(o)?o:[]):o,i=e.concat(c);return r?i:i.concat(q(c))}function ht(t,e,n){return e==="viewport"?I(function(o,r){const l=k(o),c=N(o),i=l.visualViewport;let s=c.clientWidth,d=c.clientHeight,u=0,a=0;if(i){s=i.width,d=i.height;const f=vt();(f||!f&&r==="fixed")&&(u=i.offsetLeft,a=i.offsetTop)}return{width:s,height:d,x:u,y:a}}(t,n)):C(e)?function(o,r){const l=W(o,!1,r==="fixed"),c=l.top+o.clientTop,i=l.left+o.clientLeft;return{top:c,left:i,x:i,y:c,right:i+o.clientWidth,bottom:c+o.clientHeight,width:o.clientWidth,height:o.clientHeight}}(e,n):I(function(o){var r;const l=N(o),c=Z(o),i=(r=o.ownerDocument)==null?void 0:r.body,s=Y(l.scrollWidth,l.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),d=Y(l.scrollHeight,l.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0);let u=-c.scrollLeft+bt(o);const a=-c.scrollTop;return S(i||l).direction==="rtl"&&(u+=Y(l.clientWidth,i?i.clientWidth:0)-s),{width:s,height:d,x:u,y:a}}(N(t)))}function Ht(t){const e=q(t),n=function(r,l){let c=r;for(;c&&!it(c)&&!l.includes(c)&&(!C(c)||!["absolute","fixed"].includes(S(c).position));){const i=rt(c);c=J(i)?i.host:i}return c}(t,e);let o=null;if(n&&$(n)){const r=et(n);K(n)?o=n:$(r)&&(o=r)}return C(o)?e.filter(r=>o&&C(r)&&function(l,c){const i=c.getRootNode==null?void 0:c.getRootNode();if(l.contains(c))return!0;if(i&&J(i)){let s=c;do{if(s&&l===s)return!0;s=s.parentNode||s.host}while(s)}return!1}(r,o)&&z(r)!=="body"):[]}const Ct={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:o,strategy:r}=t;const l=[...n==="clippingAncestors"?Ht(e):[].concat(n),o],c=l[0],i=l.reduce((s,d)=>{const u=ht(e,d,r);return s.top=Y(u.top,s.top),s.right=ft(u.right,s.right),s.bottom=ft(u.bottom,s.bottom),s.left=Y(u.left,s.left),s},ht(e,c,r));return{width:i.right-i.left,height:i.bottom-i.top,x:i.left,y:i.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:o}=t;const r=$(n),l=N(n);if(n===l)return e;let c={scrollLeft:0,scrollTop:0};const i={x:0,y:0};if((r||!r&&o!=="fixed")&&((z(n)!=="body"||K(l))&&(c=Z(n)),$(n))){const s=W(n,!0);i.x=s.x+n.clientLeft,i.y=s.y+n.clientTop}return{...e,x:e.x-c.scrollLeft+i.x,y:e.y-c.scrollTop+i.y}},isElement:C,getDimensions:dt,getOffsetParent:et,getDocumentElement:N,getElementRects:t=>{let{reference:e,floating:n,strategy:o}=t;return{reference:Ot(e,et(n),o),floating:{...dt(n),x:0,y:0}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>S(t).direction==="rtl"};function zt(t,e,n,o){o===void 0&&(o={});const{ancestorScroll:r=!0,ancestorResize:l=!0,elementResize:c=!0,animationFrame:i=!1}=o,s=r&&!i,d=s||l?[...C(t)?q(t):t.contextElement?q(t.contextElement):[],...q(e)]:[];d.forEach(h=>{s&&h.addEventListener("scroll",n,{passive:!0}),l&&h.addEventListener("resize",n)});let u,a=null;if(c){let h=!0;a=new ResizeObserver(()=>{h||n(),h=!1}),C(t)&&!i&&a.observe(t),C(t)||!t.contextElement||i||a.observe(t.contextElement),a.observe(e)}let f=i?W(t):null;return i&&function h(){const m=W(t);!f||m.x===f.x&&m.y===f.y&&m.width===f.width&&m.height===f.height||n(),f=m,u=requestAnimationFrame(h)}(),n(),()=>{var h;d.forEach(m=>{s&&m.removeEventListener("scroll",n),l&&m.removeEventListener("resize",n)}),(h=a)==null||h.disconnect(),a=null,i&&cancelAnimationFrame(u)}}const Ft=(t,e,n)=>Tt(t,e,{platform:Ct,...n});export{Ft as A,St as E,Nt as L,kt as P,Bt as T,Vt as b,Dt as m,Wt as v,zt as z};
