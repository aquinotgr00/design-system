import{p as D}from"./Subheading.9137ce8b.js";import{p as z}from"./Caption.aca032fb.js";import{p as N}from"./Button.d4222e6c.js";import{p as H}from"./index.b1ae150f.js";import{I as V}from"./16.37cd8fda.js";import{i as C,f as w,r as _,V as I,o as i,c as p,a as h,t as m,h as c,q as y,w as d,d as T,y as g,Q as P,e as b,n as R,C as j,D as S,a6 as L,j as E,z as k,k as F,ah as q}from"../app.daa127db.js";import{a as B,c as A,d as G,s as M,i as O,h as Q,o as U}from"./floating-ui.dom.esm.42b422b6.js";import{t as x}from"./index.2c42bbf0.js";import"./browser.cfe7468e.js";import"./utils-6ba05f5b.281f2023.js";import"./index.e671d653.js";const J=C({components:{pSubheading:D,pCaption:z,pButton:N,IconClose:V},directives:{pMd:H},props:{title:{type:String,default:void 0},text:{type:String,default:""},image:{type:String,default:void 0},highlight:{type:Boolean,default:!0},step:{type:Number,default:0},totalStep:{type:Number,default:0},dismissable:{type:Boolean,default:!0},prevLabel:{type:String,default:"Previous"},nextLabel:{type:String,default:"Next"},dismissLabel:{type:String,default:"Dismiss"},finishLabel:{type:String,default:"Finish"}},emits:["prev","next","dismiss"],setup(){return{}}});const K=["src"],W={class:"tour__body"},X={"data-testid":"tour-title"},Y={"data-testid":"tour-text"},Z={class:"tour__footer"},tt={key:0,class:"tour__meta","data-testid":"tour-meta"},et={class:"tour__controls"},st=c("span",{class:"tour__divider"},"\u2022",-1);function ot(t,e,s,u,a,l){const r=_("IconClose"),o=_("p-subheading"),v=_("p-caption"),f=_("p-button"),$=I("p-md");return i(),p("div",{class:R(["tour__dialog",{"tour--image":!!t.image}]),"data-testid":"tour-dialog"},[t.dismissable?(i(),p("span",{key:0,"data-testid":"tour-dismiss",class:"tour__dismiss",onClick:e[0]||(e[0]=n=>t.$emit("dismiss",n))},[h(r)])):m("",!0),t.image?(i(),p("img",{key:1,class:"tour__image","data-testid":"tour-image",src:t.image,alt:"tour-image",width:"400",height:"225"},null,8,K)):m("",!0),c("div",W,[t.title?(i(),y(o,{key:0,size:"sm"},{default:d(()=>[T(c("span",X,null,512),[[$,t.title,void 0,{inline:!0}]])]),_:1})):m("",!0),h(v,null,{default:d(()=>[T(c("span",Y,null,512),[[$,t.text,void 0,{inline:!0}]])]),_:1})]),c("div",Z,[t.totalStep>2?(i(),p("div",tt,g(t.step)+" / "+g(t.totalStep),1)):m("",!0),c("div",et,[t.dismissable&&t.step<t.totalStep?(i(),p(P,{key:0},[h(f,{"data-testid":"tour-control-dismiss",size:"xs",variant:"ghost",color:"primary",onClick:e[1]||(e[1]=n=>t.$emit("dismiss",n))},{default:d(()=>[b(g(t.dismissLabel),1)]),_:1}),st],64)):m("",!0),h(f,{"data-testid":"tour-control-prev",size:"xs",variant:"ghost",disabled:t.step<2,onClick:e[2]||(e[2]=n=>t.$emit("prev",n))},{default:d(()=>[b(g(t.prevLabel),1)]),_:1},8,["disabled"]),t.step===t.totalStep?(i(),y(f,{key:1,"data-testid":"tour-control-finish",size:"xs",variant:"solid",onClick:e[3]||(e[3]=n=>t.$emit("next",n))},{default:d(()=>[b(g(t.finishLabel),1)]),_:1})):(i(),y(f,{key:2,"data-testid":"tour-control-next",size:"xs",variant:"solid",onClick:e[4]||(e[4]=n=>t.$emit("next",n))},{default:d(()=>[b(g(t.nextLabel),1)]),_:1}))])])],2)}const it=w(J,[["render",ot]]),at=C({inheritAttrs:!1,props:{target:{type:Object,default:void 0}},setup(t){const e=j(t,"target"),s=x("highlight");return S(u=>{if(s.value&&e.value){const a=B(e.value,s.value,()=>{const l=e.value.getBoundingClientRect(),r=16;s.value.style.width=`${l.width+r}px`,s.value.style.height=`${l.height+r}px`,s.value.style.left=`${l.left-r/2}px`,s.value.style.top=`${l.top-r/2}px`});u(a)}}),{}}});const nt={class:"tour__backdrop"};function rt(t,e,s,u,a,l){return i(),p("div",nt,[c("div",L({ref:"highlight",class:"tour__highlight"},t.$attrs),null,16)])}const lt=w(at,[["render",rt]]),ut=C({components:{TourDialog:it,TourHighlight:lt},setup(){const t=E(!1),e=k(),s=k(),u=k(),a=F(()=>{var o;return(o=e.value)==null?void 0:o.$el});S(o=>{if(s.value&&a.value){const v=B(s.value,a.value,async()=>{A(s.value,a.value,{strategy:"absolute",middleware:[G({altBoundary:!0}),M({padding:16}),O(),Q(),U(16)]}).then(({x:f,y:$,middlewareData:n})=>{a.value&&(a.value.style.transform=`translate3d(${f||0}px, ${$||0}px, 0)`,a.value.style.visibility=n.hide.referenceHidden?"hidden":"visible")})});o(v)}}),S(o=>{t.value&&document.body.classList.add("tour--active"),o(()=>{document.body.classList.remove("tour--active")})});function l(o,v){s.value=o,u.value=v,t.value=!0}function r(){t.value=!1}return{isShow:t,dialog:e,target:s,show:l,hide:r,config:u}}});const dt={class:"tour"};function pt(t,e,s,u,a,l){const r=_("TourHighlight"),o=_("TourDialog");return i(),p("div",dt,[h(q,{name:"fade"},{default:d(()=>[t.isShow?(i(),y(r,{key:0,target:t.target},null,8,["target"])):m("",!0),t.isShow?(i(),y(o,L({key:1,ref:"dialog"},t.config),null,16)):m("",!0)]),_:1})])}const St=w(ut,[["render",pt]]);export{St as default};
