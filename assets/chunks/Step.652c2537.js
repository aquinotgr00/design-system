import{i as k,j as u,l as w,W as f,T,a8 as A,x as C,k as d,A as F,f as S,r as b,o as x,c as N,a as V,w as g,g as _}from"../app.a178b28d.js";import{f as P}from"./vnode.586aa03b.js";import{u as E}from"./index.dea32100.js";import{m as O,g as j,s as X}from"./index.96d9a654.js";function p(){}const K=k({props:{active:{type:Number,default:0},keepAlive:{type:Boolean,default:!1}},setup(e,{slots:s}){const n=u("slide-left");return w(()=>e.active,(o,t)=>{n.value=o>t?"slide-left":"slide-right"}),()=>{const o=P(s.default(),"Step").at(e.active),t=()=>e.keepAlive?f(A,()=>f(o,{key:e.active})):f(o,{key:e.active});return f(T,{name:n.value,mode:"out-in"},t)}}});async function M(e,...s){try{return await e.call(e,...s)!==!1}catch{return!1}}async function m(e,...s){let n=!0;for(const o of e)if(n=await M(o,...s),!n)break;return n}const h=Symbol("STEPS_CONTEXT");function R(){const e=C(h,()=>(console.warn("<p-step> must be placed inside <p-steps>"),{next:p,prev:p,toStep:p,step:u(1),canPrev:u(!1),canNext:u(!1),onPrevHooks:u([]),onNextHooks:u([])}),!0),s=u([]),n=u([]);function o(a){s.value.unshift(a)}function t(a){n.value.unshift(a)}const r=async(...a)=>await m(s.value,...a),l=async(...a)=>await m(n.value,...a);return e.onPrevHooks.value.unshift(r),e.onNextHooks.value.unshift(l),O(()=>{const a=e.onPrevHooks.value.indexOf(r),i=e.onNextHooks.value.indexOf(l);a>-1&&e.onPrevHooks.value.splice(a,1),i>-1&&e.onNextHooks.value.splice(i,1)}),{...e,onBeforePrev:o,onBeforeNext:t}}const U=k({components:{StepSlider:K},props:{modelValue:{type:Number,default:1},keepAlive:{type:Boolean,default:!1},onBeforePrev:{type:Function,default:()=>!0},onBeforeNext:{type:Function,default:()=>!0},onFinished:{type:Function,default:p}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e,{slots:s}){const n=u([e.onBeforeNext]),o=u([e.onBeforePrev]),t=E(e),r=d(()=>P(s.default(),"Step").length),l=j(t,1,r),a=d(()=>t.value<=r.value),i=d(()=>t.value>1);async function B(){a.value&&await v(t.value+1)}async function H(){i.value&&await v(t.value-1)}async function v(c){const y=t.value,$=c>y?n.value:o.value;await m($,c,y)&&(c<=r.value?l.value=c:await e.onFinished())}return X(l,t),F(h,{step:l,next:B,prev:H,canNext:a,canPrev:i,toStep:v,onPrevHooks:o,onNextHooks:n}),{model:t}}});const W={class:"steps","data-testid":"steps"};function q(e,s,n,o,t,r){const l=b("StepSlider");return x(),N("div",W,[V(l,{active:e.model-1,"keep-alive":e.keepAlive},{default:g(()=>[_(e.$slots,"default")]),_:3},8,["active","keep-alive"])])}const Y=S(U,[["render",q]]),z=k({name:"Step",props:{onBeforePrev:{type:Function,default:()=>!0},onBeforeNext:{type:Function,default:()=>!0}},setup(e){const{canNext:s,canPrev:n,toStep:o,step:t,next:r,prev:l,onBeforeNext:a,onBeforePrev:i}=R();return a(e.onBeforeNext),i(e.onBeforePrev),{canNext:s,canPrev:n,toStep:o,prev:l,next:r,step:t}}}),D={class:"step","data-testid":"step"};function G(e,s,n,o,t,r){return x(),N("div",D,[_(e.$slots,"default",{step:e.step,next:e.next,prev:e.prev,canPrev:e.canPrev,canNext:e.canNext,toStep:e.toStep})])}const Z=S(z,[["render",G]]);export{Y as S,Z as a};
