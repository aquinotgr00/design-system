import{u as b}from"./use-singleton.8ee8c440.js";import{p as S}from"./Modal.c17f90c0.js";import{B as $}from"./Button.934e96eb.js";import{f as g,h as B,_ as y,b as m,o as i,c as w,l as u,w as d,k as C,t as v,n as s,p,g as f,G as T,d as N}from"../app.005ed0ba.js";import{d as k}from"./defu.087119af.js";const h=g({components:{Button:$},props:{align:{type:String,default:"start"},cancelClass:{type:String,default:void 0},cancelVisible:{type:Boolean,default:!0},cancelColor:{type:String,default:"secondary"},cancelVariant:{type:String,default:"link"},cancelText:{type:String,default:"Cancel"},confirmClass:{type:String,default:void 0},confirmVisible:{type:Boolean,default:!0},confirmColor:{type:String,default:"primary"},confirmVariant:{type:String,default:"solid"},confirmText:{type:String,default:"Confirm"}},emits:["cancel","confirm"],setup(o,{emit:n}){const e=B(()=>{const l=["footer"];return o.align&&l.push(`footer--align-${o.align}`),l});function t(){n("cancel")}function a(){n("confirm")}return{footerClassNames:e,cancel:t,confirm:a}}});function D(o,n,e,t,a,l){const c=m("Button");return i(),w("div",{"data-testid":"dialog-footer",class:s(o.footerClassNames)},[o.cancelVisible?(i(),u(c,{key:0,class:s(o.cancelClass),color:o.cancelColor,variant:o.cancelVariant,onClick:o.cancel},{default:d(()=>[C(v(o.cancelText),1)]),_:1},8,["class","color","variant","onClick"])):p("",!0),o.confirmVisible?(i(),u(c,{key:1,class:s(o.confirmClass),color:o.confirmColor,variant:o.confirmVariant,onClick:o.confirm},{default:d(()=>[C(v(o.confirmText),1)]),_:1},8,["class","color","variant","onClick"])):p("",!0)],2)}const x=y(h,[["render",D]]),M=g({components:{Modal:S,DialogFooter:x},setup(){const o=f(),n=f(!1),e=f();function t(r){o.value=Symbol("DialogId"),e.value=r,T(()=>{n.value=!0})}function a(){n.value=!1}function l(){a(),setTimeout(()=>{e.value.onConfirm()},150)}function c(){a(),setTimeout(()=>{e.value.onCancel()},150)}return{id:o,modal:n,context:e,show:t,hide:a,onConfirm:l,onCancel:c}}});function A(o,n,e,t,a,l){const c=m("dialog-footer"),r=m("Modal");return o.context?(i(),u(r,{key:o.id,modelValue:o.modal,"onUpdate:modelValue":n[0]||(n[0]=V=>o.modal=V),title:o.context.title,text:o.context.text,onClose:o.onCancel},{footer:d(()=>[N(c,{align:o.context.footerAlign,"cancel-class":o.context.cancel.className,"cancel-visible":o.context.cancel.visible,"cancel-color":o.context.cancel.color,"cancel-variant":o.context.cancel.variant,"cancel-text":o.context.cancel.text,"confirm-class":o.context.confirm.className,"confirm-visible":o.context.confirm.visible,"confirm-color":o.context.confirm.color,"confirm-variant":o.context.confirm.variant,"confirm-text":o.context.confirm.text,onConfirm:o.onConfirm,onCancel:o.onCancel},null,8,["align","cancel-class","cancel-visible","cancel-color","cancel-variant","cancel-text","confirm-class","confirm-visible","confirm-color","confirm-variant","confirm-text","onConfirm","onCancel"])]),_:1},8,["modelValue","title","text","onClose"])):p("",!0)}const F=y(M,[["render",A]]);async function z(o){const n=await b(F);return await new Promise(t=>{n.show(k({onConfirm:()=>t(!0),onCancel:()=>t(!1)},o,{title:"Confirm",confirm:{},cancel:{}}))})}async function U(o){await z(k({cancel:{visible:!1}},o,{title:"Alert",confirm:{text:"Ok"}}))}export{U as a,z as c};
