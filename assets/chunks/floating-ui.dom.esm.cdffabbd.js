function k(t){return t.split("-")[0]}function M(t){return t.split("-")[1]}function _(t){return["top","bottom"].includes(k(t))?"x":"y"}function et(t){return t==="y"?"height":"width"}function st(t,e,n){let{reference:o,floating:i}=t;const c=o.x+o.width/2-i.width/2,r=o.y+o.height/2-i.height/2,s=_(e),f=et(s),u=o[f]/2-i[f]/2,m=k(e),a=s==="x";let l;switch(m){case"top":l={x:c,y:o.y-i.height};break;case"bottom":l={x:c,y:o.y+o.height};break;case"right":l={x:o.x+o.width,y:r};break;case"left":l={x:o.x-i.width,y:r};break;default:l={x:o.x,y:o.y}}switch(M(e)){case"start":l[s]-=u*(n&&a?-1:1);break;case"end":l[s]+=u*(n&&a?-1:1);break}return l}const At=async(t,e,n)=>{const{placement:o="bottom",strategy:i="absolute",middleware:c=[],platform:r}=n,s=await(r.isRTL==null?void 0:r.isRTL(e));let f=await r.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:m}=st(f,o,s),a=o,l={},g=0;for(let d=0;d<c.length;d++){const{name:h,fn:v}=c[d],{x:p,y:x,data:y,reset:w}=await v({x:u,y:m,initialPlacement:o,placement:a,strategy:i,middlewareData:l,rects:f,platform:r,elements:{reference:t,floating:e}});if(u=p??u,m=x??m,l={...l,[h]:{...l[h],...y}},w&&g<=50){g++,typeof w=="object"&&(w.placement&&(a=w.placement),w.rects&&(f=w.rects===!0?await r.getElementRects({reference:t,floating:e,strategy:i}):w.rects),{x:u,y:m}=st(f,a,s)),d=-1;continue}}return{x:u,y:m,placement:a,strategy:i,middlewareData:l}};function Ct(t){return{top:0,right:0,bottom:0,left:0,...t}}function nt(t){return typeof t!="number"?Ct(t):{top:t,right:t,bottom:t,left:t}}function I(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function Y(t,e){var n;e===void 0&&(e={});const{x:o,y:i,platform:c,rects:r,elements:s,strategy:f}=t,{boundary:u="clippingAncestors",rootBoundary:m="viewport",elementContext:a="floating",altBoundary:l=!1,padding:g=0}=e,d=nt(g),v=s[l?a==="floating"?"reference":"floating":a],p=I(await c.getClippingRect({element:(n=await(c.isElement==null?void 0:c.isElement(v)))==null||n?v:v.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(s.floating)),boundary:u,rootBoundary:m,strategy:f})),x=I(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({rect:a==="floating"?{...r.floating,x:o,y:i}:r.reference,offsetParent:await(c.getOffsetParent==null?void 0:c.getOffsetParent(s.floating)),strategy:f}):r[a]);return{top:p.top-x.top+d.top,bottom:x.bottom-p.bottom+d.bottom,left:p.left-x.left+d.left,right:x.right-p.right+d.right}}const mt=Math.min,gt=Math.max;function Q(t,e,n){return gt(t,mt(e,n))}const qt=t=>({name:"arrow",options:t,async fn(e){const{element:n,padding:o=0}=t??{},{x:i,y:c,placement:r,rects:s,platform:f}=e;if(n==null)return{};const u=nt(o),m={x:i,y:c},a=_(r),l=M(r),g=et(a),d=await f.getDimensions(n),h=a==="y"?"top":"left",v=a==="y"?"bottom":"right",p=s.reference[g]+s.reference[a]-m[a]-s.floating[g],x=m[a]-s.reference[a],y=await(f.getOffsetParent==null?void 0:f.getOffsetParent(n));let w=y?a==="y"?y.clientHeight||0:y.clientWidth||0:0;w===0&&(w=s.floating[g]);const R=p/2-x/2,C=u[h],L=w-d[g]-u[v],O=w/2-d[g]/2+R,P=Q(C,O,L),T=(l==="start"?u[h]:u[v])>0&&O!==P&&s.reference[g]<=s.floating[g]?O<C?C-O:L-O:0;return{[a]:m[a]-T,data:{[a]:P,centerOffset:O-P}}}}),Lt={left:"right",right:"left",bottom:"top",top:"bottom"};function G(t){return t.replace(/left|right|bottom|top/g,e=>Lt[e])}function ht(t,e,n){n===void 0&&(n=!1);const o=M(t),i=_(t),c=et(i);let r=i==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[c]>e.floating[c]&&(r=G(r)),{main:r,cross:G(r)}}const Tt={start:"end",end:"start"};function Z(t){return t.replace(/start|end/g,e=>Tt[e])}const pt=["top","right","bottom","left"],Et=pt.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);function St(t,e,n){return(t?[...n.filter(i=>M(i)===t),...n.filter(i=>M(i)!==t)]:n.filter(i=>k(i)===i)).filter(i=>t?M(i)===t||(e?Z(i)!==i:!1):!0)}const Gt=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,o,i,c,r;const{x:s,y:f,rects:u,middlewareData:m,placement:a,platform:l,elements:g}=e,{alignment:d=null,allowedPlacements:h=Et,autoAlignment:v=!0,...p}=t,x=St(d,v,h),y=await Y(e,p),w=(n=(o=m.autoPlacement)==null?void 0:o.index)!=null?n:0,R=x[w];if(R==null)return{};const{main:C,cross:L}=ht(R,u,await(l.isRTL==null?void 0:l.isRTL(g.floating)));if(a!==R)return{x:s,y:f,reset:{placement:x[0]}};const O=[y[k(R)],y[C],y[L]],P=[...(i=(c=m.autoPlacement)==null?void 0:c.overflows)!=null?i:[],{placement:R,overflows:O}],S=x[w+1];if(S)return{data:{index:w+1,overflows:P},reset:{placement:S}};const b=P.slice().sort((A,H)=>A.overflows[0]-H.overflows[0]),T=(r=b.find(A=>{let{overflows:H}=A;return H.every(j=>j<=0)}))==null?void 0:r.placement,D=T??b[0].placement;return D!==a?{data:{index:w+1,overflows:P},reset:{placement:D}}:{}}}};function Dt(t){const e=G(t);return[Z(t),e,Z(e)]}const Jt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:o,middlewareData:i,rects:c,initialPlacement:r,platform:s,elements:f}=e,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:a,fallbackStrategy:l="bestFit",flipAlignment:g=!0,...d}=t,h=k(o),p=a||(h===r||!g?[G(r)]:Dt(r)),x=[r,...p],y=await Y(e,d),w=[];let R=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&w.push(y[h]),m){const{main:P,cross:S}=ht(o,c,await(s.isRTL==null?void 0:s.isRTL(f.floating)));w.push(y[P],y[S])}if(R=[...R,{placement:o,overflows:w}],!w.every(P=>P<=0)){var C,L;const P=((C=(L=i.flip)==null?void 0:L.index)!=null?C:0)+1,S=x[P];if(S)return{data:{index:P,overflows:R},reset:{placement:S}};let b="bottom";switch(l){case"bestFit":{var O;const T=(O=R.map(D=>[D,D.overflows.filter(A=>A>0).reduce((A,H)=>A+H,0)]).sort((D,A)=>D[1]-A[1])[0])==null?void 0:O[0].placement;T&&(b=T);break}case"initialPlacement":b=r;break}if(o!==b)return{reset:{placement:b}}}return{}}}};function ct(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function lt(t){return pt.some(e=>t[e]>=0)}const Kt=function(t){let{strategy:e="referenceHidden",...n}=t===void 0?{}:t;return{name:"hide",async fn(o){const{rects:i}=o;switch(e){case"referenceHidden":{const c=await Y(o,{...n,elementContext:"reference"}),r=ct(c,i.reference);return{data:{referenceHiddenOffsets:r,referenceHidden:lt(r)}}}case"escaped":{const c=await Y(o,{...n,altBoundary:!0}),r=ct(c,i.floating);return{data:{escapedOffsets:r,escaped:lt(r)}}}default:return{}}}}};async function Vt(t,e){const{placement:n,platform:o,elements:i}=t,c=await(o.isRTL==null?void 0:o.isRTL(i.floating)),r=k(n),s=M(n),f=_(n)==="x",u=["left","top"].includes(r)?-1:1,m=c&&f?-1:1,a=typeof e=="function"?e(t):e;let{mainAxis:l,crossAxis:g,alignmentAxis:d}=typeof a=="number"?{mainAxis:a,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...a};return s&&typeof d=="number"&&(g=s==="end"?d*-1:d),f?{x:g*m,y:l*u}:{x:l*u,y:g*m}}const Qt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:o}=e,i=await Vt(e,t);return{x:n+i.x,y:o+i.y,data:i}}}};function kt(t){return t==="x"?"y":"x"}const Zt=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:o,placement:i}=e,{mainAxis:c=!0,crossAxis:r=!1,limiter:s={fn:v=>{let{x:p,y:x}=v;return{x:p,y:x}}},...f}=t,u={x:n,y:o},m=await Y(e,f),a=_(k(i)),l=kt(a);let g=u[a],d=u[l];if(c){const v=a==="y"?"top":"left",p=a==="y"?"bottom":"right",x=g+m[v],y=g-m[p];g=Q(x,g,y)}if(r){const v=l==="y"?"top":"left",p=l==="y"?"bottom":"right",x=d+m[v],y=d-m[p];d=Q(x,d,y)}const h=s.fn({...e,[a]:g,[l]:d});return{...h,data:{x:h.x-n,y:h.y-o}}}}},te=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){var n;const{placement:o,elements:i,rects:c,platform:r,strategy:s}=e,{padding:f=2,x:u,y:m}=t,a=I(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:c.reference,offsetParent:await(r.getOffsetParent==null?void 0:r.getOffsetParent(i.floating)),strategy:s}):c.reference),l=(n=await(r.getClientRects==null?void 0:r.getClientRects(i.reference)))!=null?n:[],g=nt(f);function d(){if(l.length===2&&l[0].left>l[1].right&&u!=null&&m!=null){var v;return(v=l.find(p=>u>p.left-g.left&&u<p.right+g.right&&m>p.top-g.top&&m<p.bottom+g.bottom))!=null?v:a}if(l.length>=2){if(_(o)==="x"){const b=l[0],T=l[l.length-1],D=k(o)==="top",A=b.top,H=T.bottom,j=D?b.left:T.left,rt=D?b.right:T.right,Pt=rt-j,Ot=H-A;return{top:A,bottom:H,left:j,right:rt,width:Pt,height:Ot,x:j,y:A}}const p=k(o)==="left",x=gt(...l.map(b=>b.right)),y=mt(...l.map(b=>b.left)),w=l.filter(b=>p?b.left===y:b.right===x),R=w[0].top,C=w[w.length-1].bottom,L=y,O=x,P=O-L,S=C-R;return{top:R,bottom:C,left:L,right:O,width:P,height:S,x:L,y:R}}return a}const h=await r.getElementRects({reference:{getBoundingClientRect:d},floating:i.floating,strategy:s});return c.reference.x!==h.reference.x||c.reference.y!==h.reference.y||c.reference.width!==h.reference.width||c.reference.height!==h.reference.height?{reset:{rects:h}}:{}}}};function wt(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function B(t){if(t==null)return window;if(!wt(t)){const e=t.ownerDocument;return e&&e.defaultView||window}return t}function W(t){return B(t).getComputedStyle(t)}function $(t){return wt(t)?"":t?(t.nodeName||"").toLowerCase():""}function xt(){const t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function E(t){return t instanceof B(t).HTMLElement}function V(t){return t instanceof B(t).Element}function Nt(t){return t instanceof B(t).Node}function U(t){if(typeof ShadowRoot>"u")return!1;const e=B(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function q(t){const{overflow:e,overflowX:n,overflowY:o,display:i}=W(t);return/auto|scroll|overlay|hidden/.test(e+o+n)&&!["inline","contents"].includes(i)}function Bt(t){return["table","td","th"].includes($(t))}function vt(t){const e=/firefox/i.test(xt()),n=W(t);return n.transform!=="none"||n.perspective!=="none"||e&&n.willChange==="filter"||e&&(n.filter?n.filter!=="none":!1)||["transform","perspective"].some(o=>n.willChange.includes(o))||["paint","layout","strict","content"].some(o=>{const i=n.contain;return i!=null?i.includes(o):!1})}function yt(){return!/^((?!chrome|android).)*safari/i.test(xt())}function ot(t){return["html","body","#document"].includes($(t))}const at=Math.min,z=Math.max,J=Math.round;function N(t,e,n){var o,i,c,r;e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect();let f=1,u=1;e&&E(t)&&(f=t.offsetWidth>0&&J(s.width)/t.offsetWidth||1,u=t.offsetHeight>0&&J(s.height)/t.offsetHeight||1);const m=V(t)?B(t):window,a=!yt()&&n,l=(s.left+(a&&(o=(i=m.visualViewport)==null?void 0:i.offsetLeft)!=null?o:0))/f,g=(s.top+(a&&(c=(r=m.visualViewport)==null?void 0:r.offsetTop)!=null?c:0))/u,d=s.width/f,h=s.height/u;return{width:d,height:h,top:g,right:l+d,bottom:g+h,left:l,x:l,y:g}}function F(t){return((Nt(t)?t.ownerDocument:t.document)||window.document).documentElement}function K(t){return V(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function bt(t){return N(F(t)).left+K(t).scrollLeft}function Ht(t){const e=N(t);return J(e.width)!==t.offsetWidth||J(e.height)!==t.offsetHeight}function Wt(t,e,n){const o=E(e),i=F(e),c=N(t,o&&Ht(e),n==="fixed");let r={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if(o||!o&&n!=="fixed")if(($(e)!=="body"||q(i))&&(r=K(e)),E(e)){const f=N(e,!0);s.x=f.x+e.clientLeft,s.y=f.y+e.clientTop}else i&&(s.x=bt(i));return{x:c.left+r.scrollLeft-s.x,y:c.top+r.scrollTop-s.y,width:c.width,height:c.height}}function it(t){return $(t)==="html"?t:t.assignedSlot||t.parentNode||(U(t)?t.host:null)||F(t)}function ft(t){return!E(t)||W(t).position==="fixed"?null:t.offsetParent}function $t(t){let e=it(t);for(U(e)&&(e=e.host);E(e)&&!ot(e);){if(vt(e))return e;{const n=e.parentNode;e=U(n)?n.host:n}}return null}function tt(t){const e=B(t);let n=ft(t);for(;n&&Bt(n)&&W(n).position==="static";)n=ft(n);return n&&($(n)==="html"||$(n)==="body"&&W(n).position==="static"&&!vt(n))?e:n||$t(t)||e}function ut(t){if(E(t))return{width:t.offsetWidth,height:t.offsetHeight};const e=N(t);return{width:e.width,height:e.height}}function Ft(t){let{rect:e,offsetParent:n,strategy:o}=t;const i=E(n),c=F(n);if(n===c)return e;let r={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if((i||!i&&o!=="fixed")&&(($(n)!=="body"||q(c))&&(r=K(n)),E(n))){const f=N(n,!0);s.x=f.x+n.clientLeft,s.y=f.y+n.clientTop}return{...e,x:e.x-r.scrollLeft+s.x,y:e.y-r.scrollTop+s.y}}function Mt(t,e){const n=B(t),o=F(t),i=n.visualViewport;let c=o.clientWidth,r=o.clientHeight,s=0,f=0;if(i){c=i.width,r=i.height;const u=yt();(u||!u&&e==="fixed")&&(s=i.offsetLeft,f=i.offsetTop)}return{width:c,height:r,x:s,y:f}}function _t(t){var e;const n=F(t),o=K(t),i=(e=t.ownerDocument)==null?void 0:e.body,c=z(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),r=z(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0);let s=-o.scrollLeft+bt(t);const f=-o.scrollTop;return W(i||n).direction==="rtl"&&(s+=z(n.clientWidth,i?i.clientWidth:0)-c),{width:c,height:r,x:s,y:f}}function Rt(t){const e=it(t);return ot(e)?t.ownerDocument.body:E(e)&&q(e)?e:Rt(e)}function X(t,e){var n;e===void 0&&(e=[]);const o=Rt(t),i=o===((n=t.ownerDocument)==null?void 0:n.body),c=B(o),r=i?[c].concat(c.visualViewport||[],q(o)?o:[]):o,s=e.concat(r);return i?s:s.concat(X(r))}function jt(t,e){const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&U(n)){let o=e;do{if(o&&t===o)return!0;o=o.parentNode||o.host}while(o)}return!1}function zt(t,e){let n=t;for(;n&&!ot(n)&&!e.includes(n)&&!(V(n)&&["absolute","fixed"].includes(W(n).position));){const o=it(n);n=U(o)?o.host:o}return n}function Xt(t,e){const n=N(t,!1,e==="fixed"),o=n.top+t.clientTop,i=n.left+t.clientLeft;return{top:o,left:i,x:i,y:o,right:i+t.clientWidth,bottom:o+t.clientHeight,width:t.clientWidth,height:t.clientHeight}}function dt(t,e,n){return e==="viewport"?I(Mt(t,n)):V(e)?Xt(e,n):I(_t(F(t)))}function It(t){const e=X(t),n=zt(t,e);let o=null;if(n&&E(n)){const i=tt(n);q(n)?o=n:E(i)&&(o=i)}return V(o)?e.filter(i=>o&&V(i)&&jt(i,o)&&$(i)!=="body"):[]}function Yt(t){let{element:e,boundary:n,rootBoundary:o,strategy:i}=t;const r=[...n==="clippingAncestors"?It(e):[].concat(n),o],s=r[0],f=r.reduce((u,m)=>{const a=dt(e,m,i);return u.top=z(a.top,u.top),u.right=at(a.right,u.right),u.bottom=at(a.bottom,u.bottom),u.left=z(a.left,u.left),u},dt(e,s,i));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}const Ut={getClippingRect:Yt,convertOffsetParentRelativeRectToViewportRelativeRect:Ft,isElement:V,getDimensions:ut,getOffsetParent:tt,getDocumentElement:F,getElementRects:t=>{let{reference:e,floating:n,strategy:o}=t;return{reference:Wt(e,tt(n),o),floating:{...ut(n),x:0,y:0}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>W(t).direction==="rtl"};function ee(t,e,n,o){o===void 0&&(o={});const{ancestorScroll:i=!0,ancestorResize:c=!0,elementResize:r=!0,animationFrame:s=!1}=o,f=i&&!s,u=f||c?[...V(t)?X(t):t.contextElement?X(t.contextElement):[],...X(e)]:[];u.forEach(d=>{f&&d.addEventListener("scroll",n,{passive:!0}),c&&d.addEventListener("resize",n)});let m=null;if(r){let d=!0;m=new ResizeObserver(()=>{d||n(),d=!1}),V(t)&&!s&&m.observe(t),!V(t)&&t.contextElement&&!s&&m.observe(t.contextElement),m.observe(e)}let a,l=s?N(t):null;s&&g();function g(){const d=N(t);l&&(d.x!==l.x||d.y!==l.y||d.width!==l.width||d.height!==l.height)&&n(),l=d,a=requestAnimationFrame(g)}return n(),()=>{var d;u.forEach(h=>{f&&h.removeEventListener("scroll",n),c&&h.removeEventListener("resize",n)}),(d=m)==null||d.disconnect(),m=null,s&&cancelAnimationFrame(a)}}const ne=(t,e,n)=>At(t,e,{platform:Ut,...n});export{ee as a,Gt as b,ne as c,qt as d,Jt as f,Kt as h,te as i,Qt as o,Zt as s};
