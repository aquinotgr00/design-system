import{B as ae}from"./Button.a231ba5d.js";import{a as ne,I as re}from"./20.c85888b8.js";import{r as v,t as l,a as T,g as X,f as E}from"./index.e2432ff2.js";import{u as oe}from"./index.dea32100.js";import{i as se,j as S,C as Q,k as D,l as G,f as le,r as $,o as M,c as F,h as ue,a as O,w as b,e as J,y as K,Q as ie,R as de,q as ve,T as ce,n as me}from"../app.a178b28d.js";const p=["date","month","year"];function R(e,t){v(2,arguments);var a=l(e),n=T(t);if(isNaN(n))return new Date(NaN);if(!n)return a;var r=a.getDate(),s=new Date(a.getTime());s.setMonth(a.getMonth()+n+1,0);var o=s.getDate();return r>=o?s:(a.setFullYear(s.getFullYear(),s.getMonth(),r),a)}function fe(e,t){var a,n,r,s,o,u,d,i;v(1,arguments);var g=X(),c=T((a=(n=(r=(s=t==null?void 0:t.weekStartsOn)!==null&&s!==void 0?s:t==null||(o=t.locale)===null||o===void 0||(u=o.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:g.weekStartsOn)!==null&&n!==void 0?n:(d=g.locale)===null||d===void 0||(i=d.options)===null||i===void 0?void 0:i.weekStartsOn)!==null&&a!==void 0?a:0);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=l(e),y=f.getDay(),k=(y<c?7:0)+y-c;return f.setDate(f.getDate()-k),f.setHours(0,0,0,0),f}function U(e){v(1,arguments);var t=l(e);return t.setHours(0,0,0,0),t}function A(e,t){v(2,arguments);var a=T(t);return R(e,a*12)}var N=Math.pow(10,8)*24*60*60*1e3,V=-N;function ge(e,t){v(2,arguments);var a=U(e),n=U(t);return a.getTime()===n.getTime()}function H(e){v(1,arguments);var t=l(e),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(23,59,59,999),t}function he(e,t){var a;v(1,arguments);var n=e||{},r=l(n.start),s=l(n.end),o=s.getTime();if(!(r.getTime()<=o))throw new RangeError("Invalid interval");var u=[],d=r;d.setHours(0,0,0,0);var i=Number((a=t==null?void 0:t.step)!==null&&a!==void 0?a:1);if(i<1||isNaN(i))throw new RangeError("`options.step` must be a number greater than 1");for(;d.getTime()<=o;)u.push(l(d)),d.setDate(d.getDate()+i),d.setHours(0,0,0,0);return u}function ye(e){v(1,arguments);var t=e||{},a=l(t.start),n=l(t.end),r=n.getTime(),s=[];if(!(a.getTime()<=r))throw new RangeError("Invalid interval");var o=a;for(o.setHours(0,0,0,0),o.setDate(1);o.getTime()<=r;)s.push(l(o)),o.setMonth(o.getMonth()+1);return s}function Y(e){v(1,arguments);var t=l(e);return t.setDate(1),t.setHours(0,0,0,0),t}function we(e){v(1,arguments);var t=l(e),a=t.getFullYear();return t.setFullYear(a+1,0,0),t.setHours(23,59,59,999),t}function De(e){v(1,arguments);var t=l(e),a=new Date(0);return a.setFullYear(t.getFullYear(),0,1),a.setHours(0,0,0,0),a}function Oe(e){v(1,arguments);var t=e||{},a=l(t.start),n=l(t.end),r=n.getTime();if(!(a.getTime()<=r))throw new RangeError("Invalid interval");var s=[],o=a;for(o.setHours(0,0,0,0),o.setMonth(0,1);o.getTime()<=r;)s.push(l(o)),o.setFullYear(o.getFullYear()+1);return s}function pe(e){v(1,arguments);var t=l(e),a=t.getFullYear(),n=9+Math.floor(a/10)*10;return t.setFullYear(n,11,31),t.setHours(23,59,59,999),t}function Te(e,t){var a,n,r,s,o,u,d,i;v(1,arguments);var g=X(),c=T((a=(n=(r=(s=t==null?void 0:t.weekStartsOn)!==null&&s!==void 0?s:t==null||(o=t.locale)===null||o===void 0||(u=o.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:g.weekStartsOn)!==null&&n!==void 0?n:(d=g.locale)===null||d===void 0||(i=d.options)===null||i===void 0?void 0:i.weekStartsOn)!==null&&a!==void 0?a:0);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=l(e),y=f.getDay(),k=(y<c?-7:0)+6-(y-c);return f.setDate(f.getDate()+k),f.setHours(23,59,59,999),f}function z(e,t){v(2,arguments);var a=l(e),n=l(t);return a.getTime()>n.getTime()}function L(e,t){v(2,arguments);var a=l(e),n=l(t);return a.getTime()<n.getTime()}function _(e,t){v(2,arguments);var a=l(e),n=l(t);return a.getFullYear()===n.getFullYear()&&a.getMonth()===n.getMonth()}function x(e,t){v(2,arguments);var a=l(e),n=l(t);return a.getFullYear()===n.getFullYear()}function h(e,t){v(2,arguments);var a=l(e).getTime(),n=l(t.start).getTime(),r=l(t.end).getTime();if(!(n<=r))throw new RangeError("Invalid interval");return a>=n&&a<=r}function P(e){v(1,arguments);var t=l(e),a=t.getFullYear(),n=Math.floor(a/10)*10;return t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}function ke(e,t){v(2,arguments);var a=T(t);return R(e,-a)}function Z(e,t){v(2,arguments);var a=T(t);return A(e,-a)}function Ce(e){const t=fe(Y(e),{weekStartsOn:1}),a=Te(H(e),{weekStartsOn:1});return{start:t,end:a}}const be={getItems({cursor:e,model:t,min:a,max:n}){const r=he(Ce(e.value)).map(o=>{var g,c;const u=(g=a.value)!=null?g:V,d=(c=n.value)!=null?c:N,i=!_(e.value,o)||!h(o,{start:u,end:d});return{value:o,text:o.getDate().toString(),disabled:i,active:ge(t.value,o),readonly:!1}});return[...r.slice(0,7).map(o=>({value:o.value,text:E(o.value,"EEEEEE"),disabled:!1,readonly:!0,active:!1})),...r]},getTitle({cursor:e}){return E(e.value,"MMMM yyyy")},getNextCursor({cursor:e}){return R(e.value,1)},getPrevCursor({cursor:e}){return ke(e.value,1)},canNext(e){const t=e.max.value,a=this.getNextCursor(e),n=Y(a),r=H(a);return!t||L(a,t)||h(t,{start:n,end:r})},canPrev(e){const t=e.min.value,a=this.getPrevCursor(e),n=Y(a),r=H(a);return!t||z(a,t)||h(t,{start:n,end:r})}};function B(e){const t=De(e),a=we(e);return{start:t,end:a}}const Me={getItems({cursor:e,model:t,min:a,max:n}){return ye(B(e.value)).map(r=>{var d,i;const s=(d=a.value)!=null?d:V,o=(i=n.value)!=null?i:N,u=!_(s,r)&&!_(o,r)&&!h(r,{start:s,end:o});return{value:r,text:E(r,"MMM"),disabled:u,readonly:!1,active:_(t.value,r)}})},getTitle({cursor:e}){return e.value.getFullYear().toString()},getNextCursor({cursor:e}){return A(e.value,1)},getPrevCursor({cursor:e}){return Z(e.value,1)},canNext(e){const t=e.max.value,a=this.getNextCursor(e);return!t||L(a,t)||h(t,B(a))},canPrev(e){const t=e.min.value,a=this.getPrevCursor(e);return!t||z(a,t)||h(t,B(a))}};function I(e){const t=P(e),a=pe(e);return{start:t,end:a}}const Ie={getItems({cursor:e,model:t,min:a,max:n}){return Oe(I(e.value)).map(r=>{var d,i;const s=(d=a.value)!=null?d:V,o=(i=n.value)!=null?i:N,u=!x(s,r)&&!x(o,r)&&!h(r,{start:s,end:o});return{value:r,text:r.getFullYear().toString(),disabled:u,readonly:!1,active:x(t.value,r)}})},getTitle({cursor:e}){const{start:t,end:a}=I(e.value);return`${t.getFullYear()} - ${a.getFullYear()}`},getNextCursor({cursor:e}){return P(A(e.value,10))},getPrevCursor({cursor:e}){return P(Z(e.value,10))},canNext(e){const t=e.max.value,a=this.getNextCursor(e);return!t||L(a,t)||h(t,I(a))},canPrev(e){const t=e.min.value,a=this.getPrevCursor(e);return!t||z(a,t)||h(t,I(a))}},_e={date:be,month:Me,year:Ie},Ye=se({components:{Button:ae,IconNext:ne,IconBack:re},props:{modelValue:{type:Date,default:void 0},disabled:{type:Boolean,default:void 0},readonly:{type:Boolean,default:void 0},max:{type:Date,default:void 0},min:{type:Date,default:void 0},mode:{type:String,default:"date"}},emits:["update:modelValue","change"],setup(e,{emit:t}){var q;const a=S(e.mode),n=S("slide-left"),r=S(Y((q=e.modelValue)!=null?q:new Date)),s=oe(e),o={cursor:r,model:s,min:Q(e,"min"),max:Q(e,"max")},u=D(()=>_e[a.value]),d=D(()=>u.value.getTitle(o)),i=D(()=>u.value.getItems(o)),g=D(()=>u.value.canNext(o)),c=D(()=>u.value.canPrev(o)),f=D(()=>{const m=[];return e.disabled&&m.push("calendar--disabled"),e.readonly&&m.push("calendar--readonly"),m});function y(){!e.disabled&&!e.readonly&&(r.value=u.value.getNextCursor(o))}function k(){!e.disabled&&!e.readonly&&(r.value=u.value.getPrevCursor(o))}function W(m=1){if(!e.disabled&&!e.readonly){const C=p.indexOf(a.value),w=p[C+m];w&&(a.value=w)}}function ee(m){a.value===e.mode?(s.value=m.value,t("change",m.value)):(r.value=m.value,W(-1))}return G(()=>e.mode,m=>{const C=p.indexOf(m),w=p.indexOf(a.value);C>w&&(a.value=m)}),G([a,r],([m,C],[w,te])=>{const j=p.indexOf(m)-p.indexOf(w);j!==0?n.value=j>0?"zoom-out":"zoom-in":n.value=C>te?"slide-left":"slide-right"}),{transition:n,title:d,items:i,viewmode:a,cursor:r,canNext:g,canPrev:c,classNames:f,next:y,prev:k,changeMode:W,selectItem:ee}}});const Ne=["viewmode"],Se={class:"calendar__nav"},$e=["viewmode"];function Fe(e,t,a,n,r,s){const o=$("IconBack"),u=$("Button"),d=$("IconNext");return M(),F("div",{"data-testid":"calendar",class:me(["calendar",e.classNames]),viewmode:e.viewmode},[ue("div",Se,[O(u,{"data-testid":"calendar-prev",variant:"solid",icon:"",size:"sm",disabled:!e.canPrev,readonly:e.disabled||e.readonly,onClick:e.prev},{default:b(()=>[O(o)]),_:1},8,["disabled","readonly","onClick"]),O(u,{"data-testid":"calendar-title",class:"calendar__nav-title",variant:"solid",size:"sm",readonly:e.disabled||e.readonly,onClick:t[0]||(t[0]=i=>e.changeMode(1))},{default:b(()=>[J(K(e.title),1)]),_:1},8,["readonly"]),O(u,{"data-testid":"calendar-next",variant:"solid",icon:"",size:"sm",readonly:e.disabled||e.readonly,disabled:!e.canNext,onClick:e.next},{default:b(()=>[O(d)]),_:1},8,["readonly","disabled","onClick"])]),O(ce,{name:e.transition,mode:"out-in"},{default:b(()=>[(M(),F("div",{key:`${e.cursor.toISOString()}+${e.viewmode}`,"data-testid":"calendar-items",class:"calendar__items",viewmode:e.viewmode},[(M(!0),F(ie,null,de(e.items,(i,g)=>(M(),ve(u,{key:g,variant:"solid",icon:"","data-testid":"calendar-item",readonly:i.readonly||e.disabled||e.readonly,active:i.active,disabled:i.disabled,onClick:c=>e.selectItem(i)},{default:b(()=>[J(K(i.text),1)]),_:2},1032,["readonly","active","disabled","onClick"]))),128))],8,$e))]),_:1},8,["name"])],10,Ne)}const Re=le(Ye,[["render",Fe]]);export{Re as C};
