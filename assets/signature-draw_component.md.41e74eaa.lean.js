var we=Object.defineProperty;var xe=(e,t,n)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var c=(e,t,n)=>(xe(e,typeof t!="symbol"?t+"":t,n),n);import{t as Se,c as ke,d as Ee}from"./chunks/index.f867504a.js";import{u as xt}from"./chunks/use-input.83c2ad75.js";import{o as jt,Y as Ie,d as St,r as tt,w as qt,_ as kt,b as B,f as M,l as Et,h as P,p as gt,g as w,j as F,a as $,k as zt,t as H,c as Q,K as Te,T as Pe,n as Mt,P as De,m as Ce,u as Me,i as z}from"./app.2d74820a.js";import{B as Gt}from"./chunks/Button.d7fe9b80.js";import{d as Ae}from"./chunks/defu.087119af.js";import{l as Wt}from"./chunks/load-image.ffccb3e8.js";import{l as $e}from"./chunks/lodash.0cf0dca5.js";import{C as Oe}from"./chunks/Caption.d00bc3c9.js";import{u as Re}from"./chunks/utils-6ba05f5b.0e20eecd.js";import"./chunks/index.b8bbdf5d.js";function Le(e){const t=e.slice(1,3),n=e.slice(3,5),s=e.slice(5,7);return{R:Number.parseInt(t,16),G:Number.parseInt(n,16),B:Number.parseInt(s,16)}}function Ve(e,t){const n=e.getContext("2d"),s=n.getImageData(0,0,e.width,e.height),o=s.data,i=Le(t);for(let r=0;r<o.length;r+=4)o[r+3]>0&&(o[r]=i.R,o[r+1]=i.G,o[r+2]=i.B);n.putImageData(s,0,0)}function Ye(e,t,n){const s=e.getContext("2d"),o=Ae(n,{color:"#000000",lineSize:2.5,lineCap:"round",lineJoin:"round"});s.strokeStyle=o.color,s.lineWidth=o.lineSize,s.lineJoin=o.lineJoin,s.lineCap=o.lineCap,s.beginPath(),s.moveTo(t[0],t[1]),s.lineTo(t[2],t[3]),s.stroke()}function Xe(e){e.getContext("2d").clearRect(0,0,e.width,e.height)}async function Ne(e,t){const n=e.getContext("2d"),s=await Wt(t);n.clearRect(0,0,e.width,e.height),n.drawImage(s,0,0)}function At(e){return e.toDataURL()}const I={init:Ue,document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function U(){}var E=I;function Ue(e){const t=e;I.document=t.document,I.DocumentFragment=t.DocumentFragment||U,I.SVGElement=t.SVGElement||U,I.SVGSVGElement=t.SVGSVGElement||U,I.SVGElementInstance=t.SVGElementInstance||U,I.Element=t.Element||U,I.HTMLElement=t.HTMLElement||I.Element,I.Event=t.Event,I.Touch=t.Touch||U,I.PointerEvent=t.PointerEvent||t.MSPointerEvent}var Kt=e=>!!(e&&e.Window)&&e instanceof e.Window;let Ht,Y;function Jt(e){Ht=e;const t=e.document.createTextNode("");t.ownerDocument!==e.document&&typeof e.wrap=="function"&&e.wrap(t)===t&&(e=e.wrap(e)),Y=e}typeof window!="undefined"&&!!window&&Jt(window);function q(e){return Kt(e)?e:(e.ownerDocument||e).defaultView||Y.window}const Be=e=>e===Y||Kt(e),Fe=e=>it(e)&&e.nodeType===11,it=e=>!!e&&typeof e=="object",Qt=e=>typeof e=="function",je=e=>typeof e=="number",qe=e=>typeof e=="boolean",ze=e=>typeof e=="string",Ge=e=>{if(!e||typeof e!="object")return!1;const t=q(e)||Y;return/object|function/.test(typeof Element)?e instanceof Element||e instanceof t.Element:e.nodeType===1&&typeof e.nodeName=="string"},We=e=>it(e)&&!!e.constructor&&/function Object\b/.test(e.constructor.toString()),Ke=e=>it(e)&&typeof e.length!="undefined"&&Qt(e.splice);var l={window:Be,docFrag:Fe,object:it,func:Qt,number:je,bool:qe,string:ze,element:Ge,plainObject:We,array:Ke};const T={init:He,supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null};function He(e){const t=E.Element,n=e.navigator||{};T.supportsTouch="ontouchstart"in e||l.func(e.DocumentTouch)&&E.document instanceof e.DocumentTouch,T.supportsPointerEvent=n.pointerEnabled!==!1&&!!E.PointerEvent,T.isIOS=/iP(hone|od|ad)/.test(n.platform),T.isIOS7=/iP(hone|od|ad)/.test(n.platform)&&/OS 7[^\d]/.test(n.appVersion),T.isIe9=/MSIE 9/.test(n.userAgent),T.isOperaMobile=n.appName==="Opera"&&T.supportsTouch&&/Presto/.test(n.userAgent),T.prefixedMatchesSelector="matches"in t.prototype?"matches":"webkitMatchesSelector"in t.prototype?"webkitMatchesSelector":"mozMatchesSelector"in t.prototype?"mozMatchesSelector":"oMatchesSelector"in t.prototype?"oMatchesSelector":"msMatchesSelector",T.pEventTypes=T.supportsPointerEvent?E.PointerEvent===e.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,T.wheelEvent=E.document&&"onmousewheel"in E.document?"mousewheel":"wheel"}var D=T;const Je=(e,t)=>e.indexOf(t)!==-1,Zt=(e,t)=>{for(const n of t)e.push(n);return e},te=e=>Zt([],e),rt=(e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1},mt=(e,t)=>e[rt(e,t)];function et(e){const t={};for(const n in e){const s=e[n];l.plainObject(s)?t[n]=et(s):l.array(s)?t[n]=te(s):t[n]=s}return t}function x(e,t){for(const s in t)e[s]=t[s];return e}let $t=0,A,R;function Qe(e){if(A=e.requestAnimationFrame,R=e.cancelAnimationFrame,!A){const t=["ms","moz","webkit","o"];for(const n of t)A=e[`${n}RequestAnimationFrame`],R=e[`${n}CancelAnimationFrame`]||e[`${n}CancelRequestAnimationFrame`]}A=A&&A.bind(e),R=R&&R.bind(e),A||(A=t=>{const n=Date.now(),s=Math.max(0,16-(n-$t)),o=e.setTimeout(()=>{t(n+s)},s);return $t=n+s,o},R=t=>clearTimeout(t))}var Ze={request:e=>A(e),cancel:e=>R(e),init:Qe};function j(e,t,n){if(n=n||{},l.string(e)&&e.search(" ")!==-1&&(e=Ot(e)),l.array(e))return e.reduce((s,o)=>x(s,j(o,t,n)),n);if(l.object(e)&&(t=e,e=""),l.func(t))n[e]=n[e]||[],n[e].push(t);else if(l.array(t))for(const s of t)j(e,s,n);else if(l.object(t))for(const s in t){const o=Ot(s).map(i=>`${e}${i}`);j(o,t[s],n)}return n}function Ot(e){return e.trim().split(/ +/)}function Rt(e,t){for(const n of t){if(e.immediatePropagationStopped)break;n(e)}}class ee{constructor(t){c(this,"options");c(this,"types",{});c(this,"propagationStopped",!1);c(this,"immediatePropagationStopped",!1);c(this,"global");this.options=x({},t||{})}fire(t){let n;const s=this.global;(n=this.types[t.type])&&Rt(t,n),!t.propagationStopped&&s&&(n=s[t.type])&&Rt(t,n)}on(t,n){const s=j(t,n);for(t in s)this.types[t]=Zt(this.types[t]||[],s[t])}off(t,n){const s=j(t,n);for(t in s){const o=this.types[t];if(!(!o||!o.length))for(const i of s[t]){const r=o.indexOf(i);r!==-1&&o.splice(r,1)}}}getRect(t){return null}}function L(e,t){if(e.contains)return e.contains(t);for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function ne(e,t){for(;l.element(e);){if(V(e,t))return e;e=X(e)}return null}function X(e){let t=e.parentNode;if(l.docFrag(t)){for(;(t=t.host)&&l.docFrag(t););return t}return t}function V(e,t){return Y!==Ht&&(t=t.replace(/\/deep\//g," ")),e[D.prefixedMatchesSelector](t)}function Lt(e,t,n){for(;l.element(e);){if(V(e,t))return!0;if(e=X(e),e===n)return V(e,t)}return!1}function Vt(e){return e.correspondingUseElement||e}function tn(e){return e=e||Y,{x:e.scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop}}function se(e){const t=e instanceof E.SVGElement?e.getBoundingClientRect():e.getClientRects()[0];return t&&{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||t.right-t.left,height:t.height||t.bottom-t.top}}function It(e){const t=se(e);if(!D.isIOS7&&t){const n=tn(q(e));t.left+=n.x,t.right+=n.x,t.top+=n.y,t.bottom+=n.y}return t}function Yt(e){return l.string(e)?(E.document.querySelector(e),!0):!1}function en(e,t,n){return e==="parent"?X(n):e==="self"?t.getRect(n):ne(n,e)}function nn(e,t,n,s){let o=e;return l.string(o)?o=en(o,t,n):l.func(o)&&(o=o(...s)),l.element(o)&&(o=It(o)),o}function sn(e){return e&&{x:"x"in e?e.x:e.left,y:"y"in e?e.y:e.top}}function on(e,t,n){e.left&&(t.left+=n.x),e.right&&(t.right+=n.x),e.top&&(t.top+=n.y),e.bottom&&(t.bottom+=n.y),t.width=t.right-t.left,t.height=t.bottom-t.top}function rn(e,t,n){const s=e.options[n],i=s&&s.origin||e.options.origin,r=nn(i,e,t,[e&&t]);return sn(r)||{x:0,y:0}}var Tt=(e,t)=>Math.sqrt(e*e+t*t);class oe{constructor(t){c(this,"immediatePropagationStopped",!1);c(this,"propagationStopped",!1);this._interaction=t}preventDefault(){}stopPropagation(){this.propagationStopped=!0}stopImmediatePropagation(){this.immediatePropagationStopped=this.propagationStopped=!0}}Object.defineProperty(oe.prototype,"interaction",{get(){return this._interaction._proxy},set(){}});const ie={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};class Pt extends oe{constructor(t,n,s,o,i,r,a){super(t);c(this,"relatedTarget",null);c(this,"screenX");c(this,"screenY");c(this,"button");c(this,"buttons");c(this,"ctrlKey");c(this,"shiftKey");c(this,"altKey");c(this,"metaKey");c(this,"page");c(this,"client");c(this,"delta");c(this,"rect");c(this,"x0");c(this,"y0");c(this,"t0");c(this,"dt");c(this,"duration");c(this,"clientX0");c(this,"clientY0");c(this,"velocity");c(this,"speed");c(this,"swipe");c(this,"axes");c(this,"preEnd");i=i||t.element;const u=t.interactable,p=(u&&u.options||ie).deltaSource,d=rn(u,i,s),m=o==="start",h=o==="end",f=m?this:t.prevEvent,g=m?t.coords.start:h?{page:f.page,client:f.client,timeStamp:t.coords.cur.timeStamp}:t.coords.cur;this.page=x({},g.page),this.client=x({},g.client),this.rect=x({},t.rect),this.timeStamp=g.timeStamp,h||(this.page.x-=d.x,this.page.y-=d.y,this.client.x-=d.x,this.client.y-=d.y),this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.button=n.button,this.buttons=n.buttons,this.target=i,this.currentTarget=i,this.preEnd=r,this.type=a||s+(o||""),this.interactable=u,this.t0=m?t.pointers[t.pointers.length-1].downTime:f.t0,this.x0=t.coords.start.page.x-d.x,this.y0=t.coords.start.page.y-d.y,this.clientX0=t.coords.start.client.x-d.x,this.clientY0=t.coords.start.client.y-d.y,m||h?this.delta={x:0,y:0}:this.delta={x:this[p].x-f[p].x,y:this[p].y-f[p].y},this.dt=t.coords.delta.timeStamp,this.duration=this.timeStamp-this.t0,this.velocity=x({},t.coords.velocity[p]),this.speed=Tt(this.velocity.x,this.velocity.y),this.swipe=h||o==="inertiastart"?this.getSwipe():null}getSwipe(){const t=this._interaction;if(t.prevEvent.speed<600||this.timeStamp-t.prevEvent.timeStamp>150)return null;let n=180*Math.atan2(t.prevEvent.velocityY,t.prevEvent.velocityX)/Math.PI;const s=22.5;n<0&&(n+=360);const o=135-s<=n&&n<225+s,i=225-s<=n&&n<315+s,r=!o&&(315-s<=n||n<45+s),a=!i&&45-s<=n&&n<135+s;return{up:i,down:a,left:o,right:r,angle:n,speed:t.prevEvent.speed,velocity:{x:t.prevEvent.velocityX,y:t.prevEvent.velocityY}}}preventDefault(){}stopImmediatePropagation(){this.immediatePropagationStopped=this.propagationStopped=!0}stopPropagation(){this.propagationStopped=!0}}Object.defineProperties(Pt.prototype,{pageX:{get(){return this.page.x},set(e){this.page.x=e}},pageY:{get(){return this.page.y},set(e){this.page.y=e}},clientX:{get(){return this.client.x},set(e){this.client.x=e}},clientY:{get(){return this.client.y},set(e){this.client.y=e}},dx:{get(){return this.delta.x},set(e){this.delta.x=e}},dy:{get(){return this.delta.y},set(e){this.delta.y=e}},velocityX:{get(){return this.velocity.x},set(e){this.velocity.x=e}},velocityY:{get(){return this.velocity.y},set(e){this.velocity.y=e}}});function J(e,t){let n=!1;return function(){return n||(Y.console.warn(t),n=!0),e.apply(this,arguments)}}function re(e,t){return e.name=t.name,e.axis=t.axis,e.edges=t.edges,e}function ae(e,t){e.__set||(e.__set={});for(const n in t)typeof e[n]!="function"&&n!=="__set"&&Object.defineProperty(e,n,{get(){return n in e.__set?e.__set[n]:e.__set[n]=t[n]},set(s){e.__set[n]=s},configurable:!0});return e}function pt(e,t){e.page=e.page||{},e.page.x=t.page.x,e.page.y=t.page.y,e.client=e.client||{},e.client.x=t.client.x,e.client.y=t.client.y,e.timeStamp=t.timeStamp}function an(e,t,n){e.page.x=n.page.x-t.page.x,e.page.y=n.page.y-t.page.y,e.client.x=n.client.x-t.client.x,e.client.y=n.client.y-t.client.y,e.timeStamp=n.timeStamp-t.timeStamp}function cn(e,t){const n=Math.max(t.timeStamp/1e3,.001);e.page.x=t.page.x/n,e.page.y=t.page.y/n,e.client.x=t.client.x/n,e.client.y=t.client.y/n,e.timeStamp=n}function ln(e){e.page.x=0,e.page.y=0,e.client.x=0,e.client.y=0}function ce(e){return e instanceof E.Event||e instanceof E.Touch}function nt(e,t,n){return n=n||{},e=e||"page",n.x=t[e+"X"],n.y=t[e+"Y"],n}function un(e,t){return t=t||{x:0,y:0},D.isOperaMobile&&ce(e)?(nt("screen",e,t),t.x+=window.scrollX,t.y+=window.scrollY):nt("page",e,t),t}function pn(e,t){return t=t||{},D.isOperaMobile&&ce(e)?nt("screen",e,t):nt("client",e,t),t}function st(e){return l.number(e.pointerId)?e.pointerId:e.identifier}function dn(e,t,n){const s=t.length>1?le(t):t[0];un(s,e.page),pn(s,e.client),e.timeStamp=n}function Dt(e){const t=[];return l.array(e)?(t[0]=e[0],t[1]=e[1]):e.type==="touchend"?e.touches.length===1?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):e.touches.length===0&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t}function le(e){const t={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0};for(const n of e)for(const s in t)t[s]+=n[s];for(const n in t)t[n]/=e.length;return t}function hn(e){if(!e.length)return null;const t=Dt(e),n=Math.min(t[0].pageX,t[1].pageX),s=Math.min(t[0].pageY,t[1].pageY),o=Math.max(t[0].pageX,t[1].pageX),i=Math.max(t[0].pageY,t[1].pageY);return{x:n,y:s,left:n,top:s,right:o,bottom:i,width:o-n,height:i-s}}function fn(e,t){const n=t+"X",s=t+"Y",o=Dt(e),i=o[0][n]-o[1][n],r=o[0][s]-o[1][s];return Tt(i,r)}function gn(e,t){const n=t+"X",s=t+"Y",o=Dt(e),i=o[1][n]-o[0][n],r=o[1][s]-o[0][s];return 180*Math.atan2(r,i)/Math.PI}function mn(e){return l.string(e.pointerType)?e.pointerType:l.number(e.pointerType)?[void 0,void 0,"touch","pen","mouse"][e.pointerType]:/touch/.test(e.type||"")||e instanceof E.Touch?"touch":"mouse"}function ue(e){const t=l.func(e.composedPath)?e.composedPath():e.path;return[Vt(t?t[0]:e.target),Vt(e.currentTarget)]}function G(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}}function vt(e,t){if(t.phaselessTypes[e])return!0;for(const n in t.map)if(e.indexOf(n)===0&&e.substr(n.length)in t.phases)return!0;return!1}function vn(e){const t=(n,s)=>{let o=e.interactables.get(n,s);return o||(o=e.interactables.new(n,s),o.events.global=t.globalEvents),o};return t.getPointerAverage=le,t.getTouchBBox=hn,t.getTouchDistance=fn,t.getTouchAngle=gn,t.getElementRect=It,t.getElementClientRect=se,t.matchesSelector=V,t.closest=ne,t.globalEvents={},t.version="1.10.17",t.scope=e,t.use=function(n,s){return this.scope.usePlugin(n,s),this},t.isSet=function(n,s){return!!this.scope.interactables.get(n,s&&s.context)},t.on=J(function(s,o,i){if(l.string(s)&&s.search(" ")!==-1&&(s=s.trim().split(/ +/)),l.array(s)){for(const r of s)this.on(r,o,i);return this}if(l.object(s)){for(const r in s)this.on(r,s[r],o);return this}return vt(s,this.scope.actions)?this.globalEvents[s]?this.globalEvents[s].push(o):this.globalEvents[s]=[o]:this.scope.events.add(this.scope.document,s,o,{options:i}),this},"The interact.on() method is being deprecated"),t.off=J(function(s,o,i){if(l.string(s)&&s.search(" ")!==-1&&(s=s.trim().split(/ +/)),l.array(s)){for(const r of s)this.off(r,o,i);return this}if(l.object(s)){for(const r in s)this.off(r,s[r],o);return this}if(vt(s,this.scope.actions)){let r;s in this.globalEvents&&(r=this.globalEvents[s].indexOf(o))!==-1&&this.globalEvents[s].splice(r,1)}else this.scope.events.remove(this.scope.document,s,o,i);return this},"The interact.off() method is being deprecated"),t.debug=function(){return this.scope},t.supportsTouch=function(){return D.supportsTouch},t.supportsPointerEvent=function(){return D.supportsPointerEvent},t.stop=function(){for(const n of this.scope.interactions.list)n.stop();return this},t.pointerMoveTolerance=function(n){return l.number(n)?(this.scope.interactions.pointerMoveTolerance=n,this):this.scope.interactions.pointerMoveTolerance},t.addDocument=function(n,s){this.scope.addDocument(n,s)},t.removeDocument=function(n){this.scope.removeDocument(n)},t}class bn{constructor(t,n,s,o){c(this,"options");c(this,"_actions");c(this,"target");c(this,"events",new ee);c(this,"_context");c(this,"_win");c(this,"_doc");c(this,"_scopeEvents");c(this,"_rectChecker");this._actions=n.actions,this.target=t,this._context=n.context||s,this._win=q(Yt(t)?this._context:t),this._doc=this._win.document,this._scopeEvents=o,this.set(n)}get _defaults(){return{base:{},perAction:{},actions:{}}}setOnEvents(t,n){return l.func(n.onstart)&&this.on(`${t}start`,n.onstart),l.func(n.onmove)&&this.on(`${t}move`,n.onmove),l.func(n.onend)&&this.on(`${t}end`,n.onend),l.func(n.oninertiastart)&&this.on(`${t}inertiastart`,n.oninertiastart),this}updatePerActionListeners(t,n,s){(l.array(n)||l.object(n))&&this.off(t,n),(l.array(s)||l.object(s))&&this.on(t,s)}setPerAction(t,n){const s=this._defaults;for(const o in n){const i=o,r=this.options[t],a=n[i];i==="listeners"&&this.updatePerActionListeners(t,r.listeners,a),l.array(a)?r[i]=te(a):l.plainObject(a)?(r[i]=x(r[i]||{},et(a)),l.object(s.perAction[i])&&"enabled"in s.perAction[i]&&(r[i].enabled=a.enabled!==!1)):l.bool(a)&&l.object(s.perAction[i])?r[i].enabled=a:r[i]=a}}getRect(t){return t=t||(l.element(this.target)?this.target:null),l.string(this.target)&&(t=t||this._context.querySelector(this.target)),It(t)}rectChecker(t){return l.func(t)?(this._rectChecker=t,this.getRect=n=>{const s=x({},this._rectChecker(n));return"width"in s||(s.width=s.right-s.left,s.height=s.bottom-s.top),s},this):t===null?(delete this.getRect,delete this._rectChecker,this):this.getRect}_backCompatOption(t,n){if(Yt(n)||l.object(n)){this.options[t]=n;for(const s in this._actions.map)this.options[s][t]=n;return this}return this.options[t]}origin(t){return this._backCompatOption("origin",t)}deltaSource(t){return t==="page"||t==="client"?(this.options.deltaSource=t,this):this.options.deltaSource}context(){return this._context}inContext(t){return this._context===t.ownerDocument||L(this._context,t)}testIgnoreAllow(t,n,s){return!this.testIgnore(t.ignoreFrom,n,s)&&this.testAllow(t.allowFrom,n,s)}testAllow(t,n,s){return t?l.element(s)?l.string(t)?Lt(s,t,n):l.element(t)?L(t,s):!1:!1:!0}testIgnore(t,n,s){return!t||!l.element(s)?!1:l.string(t)?Lt(s,t,n):l.element(t)?L(t,s):!1}fire(t){return this.events.fire(t),this}_onOff(t,n,s,o){l.object(n)&&!l.array(n)&&(o=s,s=null);const i=t==="on"?"add":"remove",r=j(n,s);for(let a in r){a==="wheel"&&(a=D.wheelEvent);for(const u of r[a])vt(a,this._actions)?this.events[t](a,u):l.string(this.target)?this._scopeEvents[`${i}Delegate`](this.target,this._context,a,u,o):this._scopeEvents[i](this.target,a,u,o)}return this}on(t,n,s){return this._onOff("on",t,n,s)}off(t,n,s){return this._onOff("off",t,n,s)}set(t){const n=this._defaults;l.object(t)||(t={}),this.options=et(n.base);for(const s in this._actions.methodDict){const o=s,i=this._actions.methodDict[o];this.options[o]={},this.setPerAction(o,x(x({},n.perAction),n.actions[o])),this[i](t[o])}for(const s in t)l.func(this[s])&&this[s](t[s]);return this}unset(){if(l.string(this.target))for(const t in this._scopeEvents.delegatedEvents){const n=this._scopeEvents.delegatedEvents[t];for(let s=n.length-1;s>=0;s--){const{selector:o,context:i,listeners:r}=n[s];o===this.target&&i===this._context&&n.splice(s,1);for(let a=r.length-1;a>=0;a--)this._scopeEvents.removeDelegate(this.target,this._context,t,r[a][0],r[a][1])}}else this._scopeEvents.remove(this.target,"all")}}class yn{constructor(t){c(this,"list",[]);c(this,"selectorMap",{});c(this,"scope");this.scope=t,t.addListeners({"interactable:unset":({interactable:n})=>{const{target:s,_context:o}=n,i=l.string(s)?this.selectorMap[s]:s[this.scope.id],r=rt(i,a=>a.context===o);i[r]&&(i[r].context=null,i[r].interactable=null),i.splice(r,1)}})}new(t,n){n=x(n||{},{actions:this.scope.actions});const s=new this.scope.Interactable(t,n,this.scope.document,this.scope.events),o={context:s._context,interactable:s};return this.scope.addDocument(s._doc),this.list.push(s),l.string(t)?(this.selectorMap[t]||(this.selectorMap[t]=[]),this.selectorMap[t].push(o)):(s.target[this.scope.id]||Object.defineProperty(t,this.scope.id,{value:[],configurable:!0}),t[this.scope.id].push(o)),this.scope.fire("interactable:new",{target:t,options:n,interactable:s,win:this.scope._win}),s}get(t,n){const s=n&&n.context||this.scope.document,o=l.string(t),i=o?this.selectorMap[t]:t[this.scope.id];if(!i)return null;const r=mt(i,a=>a.context===s&&(o||a.interactable.inContext(t)));return r&&r.interactable}forEachMatch(t,n){for(const s of this.list){let o;if((l.string(s.target)?l.element(t)&&V(t,s.target):t===s.target)&&s.inContext(t)&&(o=n(s)),o!==void 0)return o}}}function _n(e){var t;const n=[],s={},o=[],i={add:r,remove:a,addDelegate:u,removeDelegate:p,delegateListener:d,delegateUseCapture:m,delegatedEvents:s,documents:o,targets:n,supportsOptions:!1,supportsPassive:!1};(t=e.document)==null||t.createElement("div").addEventListener("test",null,{get capture(){return i.supportsOptions=!0},get passive(){return i.supportsPassive=!0}}),e.events=i;function r(h,f,g,C){const k=W(C);let y=mt(n,v=>v.eventTarget===h);y||(y={eventTarget:h,events:{}},n.push(y)),y.events[f]||(y.events[f]=[]),h.addEventListener&&!Je(y.events[f],g)&&(h.addEventListener(f,g,i.supportsOptions?k:k.capture),y.events[f].push(g))}function a(h,f,g,C){const k=W(C),y=rt(n,_=>_.eventTarget===h),v=n[y];if(!v||!v.events)return;if(f==="all"){for(f in v.events)v.events.hasOwnProperty(f)&&a(h,f,"all");return}let S=!1;const b=v.events[f];if(b){if(g==="all"){for(let _=b.length-1;_>=0;_--)a(h,f,b[_],k);return}else for(let _=0;_<b.length;_++)if(b[_]===g){h.removeEventListener(f,g,i.supportsOptions?k:k.capture),b.splice(_,1),b.length===0&&(delete v.events[f],S=!0);break}}S&&!Object.keys(v.events).length&&n.splice(y,1)}function u(h,f,g,C,k){const y=W(k);if(!s[g]){s[g]=[];for(const b of o)r(b,g,d),r(b,g,m,!0)}const v=s[g];let S=mt(v,b=>b.selector===h&&b.context===f);S||(S={selector:h,context:f,listeners:[]},v.push(S)),S.listeners.push([C,y])}function p(h,f,g,C,k){const y=W(k),v=s[g];let S=!1,b;if(!!v)for(b=v.length-1;b>=0;b--){const _=v[b];if(_.selector===h&&_.context===f){const{listeners:O}=_;for(let N=O.length-1;N>=0;N--){const[ct,{capture:lt,passive:ut}]=O[N];if(ct===C&&lt===y.capture&&ut===y.passive){O.splice(N,1),O.length||(v.splice(b,1),a(f,g,d),a(f,g,m,!0)),S=!0;break}}if(S)break}}}function d(h,f){const g=W(f),C=new wn(h),k=s[h.type],[y]=ue(h);let v=y;for(;l.element(v);){for(let S=0;S<k.length;S++){const b=k[S],{selector:_,context:O}=b;if(V(v,_)&&L(O,y)&&L(O,v)){const{listeners:N}=b;C.currentTarget=v;for(const[ct,{capture:lt,passive:ut}]of N)lt===g.capture&&ut===g.passive&&ct(C)}}v=X(v)}}function m(h){return d.call(this,h,!0)}return i}class wn{constructor(t){c(this,"currentTarget");c(this,"originalEvent");c(this,"type");this.originalEvent=t,ae(this,t)}preventOriginalDefault(){this.originalEvent.preventDefault()}stopPropagation(){this.originalEvent.stopPropagation()}stopImmediatePropagation(){this.originalEvent.stopImmediatePropagation()}}function W(e){if(!l.object(e))return{capture:!!e,passive:!1};const t=x({},e);return t.capture=!!e.capture,t.passive=!!e.passive,t}var xn={id:"events",install:_n};class Sn{constructor(t,n,s,o,i){c(this,"id");c(this,"pointer");c(this,"event");c(this,"downTime");c(this,"downTarget");this.id=t,this.pointer=n,this.event=s,this.downTime=o,this.downTarget=i}}let bt;(function(e){e.interactable="",e.element="",e.prepared="",e.pointerIsDown="",e.pointerWasMoved="",e._proxy=""})(bt||(bt={}));let yt;(function(e){e.start="",e.move="",e.end="",e.stop="",e.interacting=""})(yt||(yt={}));let kn=0;class En{constructor({pointerType:t,scopeFire:n}){c(this,"interactable",null);c(this,"element",null);c(this,"rect",null);c(this,"_rects");c(this,"edges",null);c(this,"_scopeFire");c(this,"prepared",{name:null,axis:null,edges:null});c(this,"pointerType");c(this,"pointers",[]);c(this,"downEvent",null);c(this,"downPointer",{});c(this,"_latestPointer",{pointer:null,event:null,eventTarget:null});c(this,"prevEvent",null);c(this,"pointerIsDown",!1);c(this,"pointerWasMoved",!1);c(this,"_interacting",!1);c(this,"_ending",!1);c(this,"_stopped",!0);c(this,"_proxy",null);c(this,"simulation",null);c(this,"doMove",J(function(t){this.move(t)},"The interaction.doMove() method has been renamed to interaction.move()"));c(this,"coords",{start:G(),prev:G(),cur:G(),delta:G(),velocity:G()});c(this,"_id",kn++);this._scopeFire=n,this.pointerType=t;const s=this;this._proxy={};for(const o in bt)Object.defineProperty(this._proxy,o,{get(){return s[o]}});for(const o in yt)Object.defineProperty(this._proxy,o,{value:(...i)=>s[o](...i)});this._scopeFire("interactions:new",{interaction:this})}get pointerMoveTolerance(){return 1}pointerDown(t,n,s){const o=this.updatePointer(t,n,s,!0),i=this.pointers[o];this._scopeFire("interactions:down",{pointer:t,event:n,eventTarget:s,pointerIndex:o,pointerInfo:i,type:"down",interaction:this})}start(t,n,s){return this.interacting()||!this.pointerIsDown||this.pointers.length<(t.name==="gesture"?2:1)||!n.options[t.name].enabled?!1:(re(this.prepared,t),this.interactable=n,this.element=s,this.rect=n.getRect(s),this.edges=this.prepared.edges?x({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}pointerMove(t,n,s){!this.simulation&&!(this.modification&&this.modification.endResult)&&this.updatePointer(t,n,s,!1);const o=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;let i,r;this.pointerIsDown&&!this.pointerWasMoved&&(i=this.coords.cur.client.x-this.coords.start.client.x,r=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=Tt(i,r)>this.pointerMoveTolerance);const a=this.getPointerIndex(t),u={pointer:t,pointerIndex:a,pointerInfo:this.pointers[a],event:n,type:"move",eventTarget:s,dx:i,dy:r,duplicate:o,interaction:this};o||cn(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",u),!o&&!this.simulation&&(this.interacting()&&(u.type=null,this.move(u)),this.pointerWasMoved&&pt(this.coords.prev,this.coords.cur))}move(t){(!t||!t.event)&&ln(this.coords.delta),t=x({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},t||{}),t.phase="move",this._doPhase(t)}pointerUp(t,n,s,o){let i=this.getPointerIndex(t);i===-1&&(i=this.updatePointer(t,n,s,!1));const r=/cancel$/i.test(n.type)?"cancel":"up";this._scopeFire(`interactions:${r}`,{pointer:t,pointerIndex:i,pointerInfo:this.pointers[i],event:n,eventTarget:s,type:r,curEventTarget:o,interaction:this}),this.simulation||this.end(n),this.removePointer(t,n)}documentBlur(t){this.end(t),this._scopeFire("interactions:blur",{event:t,type:"blur",interaction:this})}end(t){this._ending=!0,t=t||this._latestPointer.event;let n;this.interacting()&&(n=this._doPhase({event:t,interaction:this,phase:"end"})),this._ending=!1,n===!0&&this.stop()}currentAction(){return this._interacting?this.prepared.name:null}interacting(){return this._interacting}stop(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}getPointerIndex(t){const n=st(t);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:rt(this.pointers,s=>s.id===n)}getPointerInfo(t){return this.pointers[this.getPointerIndex(t)]}updatePointer(t,n,s,o){const i=st(t);let r=this.getPointerIndex(t),a=this.pointers[r];return o=o===!1?!1:o||/(down|start)$/i.test(n.type),a?a.pointer=t:(a=new Sn(i,t,n,null,null),r=this.pointers.length,this.pointers.push(a)),dn(this.coords.cur,this.pointers.map(u=>u.pointer),this._now()),an(this.coords.delta,this.coords.prev,this.coords.cur),o&&(this.pointerIsDown=!0,a.downTime=this.coords.cur.timeStamp,a.downTarget=s,ae(this.downPointer,t),this.interacting()||(pt(this.coords.start,this.coords.cur),pt(this.coords.prev,this.coords.cur),this.downEvent=n,this.pointerWasMoved=!1)),this._updateLatestPointer(t,n,s),this._scopeFire("interactions:update-pointer",{pointer:t,event:n,eventTarget:s,down:o,pointerInfo:a,pointerIndex:r,interaction:this}),r}removePointer(t,n){const s=this.getPointerIndex(t);if(s===-1)return;const o=this.pointers[s];this._scopeFire("interactions:remove-pointer",{pointer:t,event:n,eventTarget:null,pointerIndex:s,pointerInfo:o,interaction:this}),this.pointers.splice(s,1),this.pointerIsDown=!1}_updateLatestPointer(t,n,s){this._latestPointer.pointer=t,this._latestPointer.event=n,this._latestPointer.eventTarget=s}destroy(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}_createPreparedEvent(t,n,s,o){return new Pt(this,t,this.prepared.name,n,this.element,s,o)}_fireEvent(t){var n;(n=this.interactable)==null||n.fire(t),(!this.prevEvent||t.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=t)}_doPhase(t){const{event:n,phase:s,preEnd:o,type:i}=t,{rect:r}=this;if(r&&s==="move"&&(on(this.edges,r,this.coords.delta[this.interactable.options.deltaSource]),r.width=r.right-r.left,r.height=r.bottom-r.top),this._scopeFire(`interactions:before-action-${s}`,t)===!1)return!1;const u=t.iEvent=this._createPreparedEvent(n,s,o,i);return this._scopeFire(`interactions:action-${s}`,t),s==="start"&&(this.prevEvent=u),this._fireEvent(u),this._scopeFire(`interactions:after-action-${s}`,t),!0}_now(){return Date.now()}}var In=En;function Tn(e){return/^(always|never|auto)$/.test(e)?(this.options.preventDefault=e,this):l.bool(e)?(this.options.preventDefault=e?"always":"never",this):this.options.preventDefault}function Pn(e,t,n){const s=e.options.preventDefault;if(s!=="never"){if(s==="always"){n.preventDefault();return}if(t.events.supportsPassive&&/^touch(start|move)$/.test(n.type)){const o=q(n.target).document,i=t.getDocOptions(o);if(!(i&&i.events)||i.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(n.type)||l.element(n.target)&&V(n.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||n.preventDefault()}}function Dn({interaction:e,event:t}){e.interactable&&e.interactable.checkAndPreventDefault(t)}function Cn(e){const{Interactable:t}=e;t.prototype.preventDefault=Tn,t.prototype.checkAndPreventDefault=function(n){return Pn(this,e,n)},e.interactions.docEvents.push({type:"dragstart",listener(n){for(const s of e.interactions.list)if(s.element&&(s.element===n.target||L(s.element,n.target))){s.interactable.checkAndPreventDefault(n);return}}})}var Mn={id:"core/interactablePreventDefault",install:Cn,listeners:["down","move","up","cancel"].reduce((e,t)=>(e[`interactions:${t}`]=Dn,e),{})};const _t={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search(e){for(const t of _t.methodOrder){const n=_t[t](e);if(n)return n}return null},simulationResume({pointerType:e,eventType:t,eventTarget:n,scope:s}){if(!/down|start/i.test(t))return null;for(const o of s.interactions.list){let i=n;if(o.simulation&&o.simulation.allowResume&&o.pointerType===e)for(;i;){if(i===o.element)return o;i=X(i)}}return null},mouseOrPen({pointerId:e,pointerType:t,eventType:n,scope:s}){if(t!=="mouse"&&t!=="pen")return null;let o;for(const i of s.interactions.list)if(i.pointerType===t){if(i.simulation&&!Xt(i,e))continue;if(i.interacting())return i;o||(o=i)}if(o)return o;for(const i of s.interactions.list)if(i.pointerType===t&&!(/down/i.test(n)&&i.simulation))return i;return null},hasPointer({pointerId:e,scope:t}){for(const n of t.interactions.list)if(Xt(n,e))return n;return null},idle({pointerType:e,scope:t}){for(const n of t.interactions.list){if(n.pointers.length===1){const s=n.interactable;if(s&&!(s.options.gesture&&s.options.gesture.enabled))continue}else if(n.pointers.length>=2)continue;if(!n.interacting()&&e===n.pointerType)return n}return null}};function Xt(e,t){return e.pointers.some(({id:n})=>n===t)}var An=_t;const pe=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function $n(e){const t={};for(const i of pe)t[i]=de(i,e);const n=D.pEventTypes;let s;E.PointerEvent?s=[{type:n.down,listener:o},{type:n.down,listener:t.pointerDown},{type:n.move,listener:t.pointerMove},{type:n.up,listener:t.pointerUp},{type:n.cancel,listener:t.pointerUp}]:s=[{type:"mousedown",listener:t.pointerDown},{type:"mousemove",listener:t.pointerMove},{type:"mouseup",listener:t.pointerUp},{type:"touchstart",listener:o},{type:"touchstart",listener:t.pointerDown},{type:"touchmove",listener:t.pointerMove},{type:"touchend",listener:t.pointerUp},{type:"touchcancel",listener:t.pointerUp}],s.push({type:"blur",listener(i){for(const r of e.interactions.list)r.documentBlur(i)}}),e.prevTouchTime=0,e.Interaction=class extends In{get pointerMoveTolerance(){return e.interactions.pointerMoveTolerance}set pointerMoveTolerance(i){e.interactions.pointerMoveTolerance=i}_now(){return e.now()}},e.interactions={list:[],new(i){i.scopeFire=(a,u)=>e.fire(a,u);const r=new e.Interaction(i);return e.interactions.list.push(r),r},listeners:t,docEvents:s,pointerMoveTolerance:1};function o(){for(const i of e.interactions.list)if(!(!i.pointerIsDown||i.pointerType!=="touch"||i._interacting))for(const r of i.pointers)e.documents.some(({doc:a})=>L(a,r.downTarget))||i.removePointer(r.pointer,r.event)}e.usePlugin(Mn)}function de(e,t){return function(n){const s=t.interactions.list,o=mn(n),[i,r]=ue(n),a=[];if(/^touch/.test(n.type)){t.prevTouchTime=t.now();for(const u of n.changedTouches){const p=u,d=st(p),m={pointer:p,pointerId:d,pointerType:o,eventType:n.type,eventTarget:i,curEventTarget:r,scope:t},h=Nt(m);a.push([m.pointer,m.eventTarget,m.curEventTarget,h])}}else{let u=!1;if(!D.supportsPointerEvent&&/mouse/.test(n.type)){for(let p=0;p<s.length&&!u;p++)u=s[p].pointerType!=="mouse"&&s[p].pointerIsDown;u=u||t.now()-t.prevTouchTime<500||n.timeStamp===0}if(!u){const p={pointer:n,pointerId:st(n),pointerType:o,eventType:n.type,curEventTarget:r,eventTarget:i,scope:t},d=Nt(p);a.push([p.pointer,p.eventTarget,p.curEventTarget,d])}}for(const[u,p,d,m]of a)m[e](u,n,p,d)}}function Nt(e){const{pointerType:t,scope:n}=e,o={interaction:An.search(e),searchDetails:e};return n.fire("interactions:find",o),o.interaction||n.interactions.new({pointerType:t})}function dt({doc:e,scope:t,options:n},s){const{interactions:{docEvents:o},events:i}=t,r=i[s];t.browser.isIOS&&!n.events&&(n.events={passive:!1});for(const u in i.delegatedEvents)r(e,u,i.delegateListener),r(e,u,i.delegateUseCapture,!0);const a=n&&n.events;for(const{type:u,listener:p}of o)r(e,u,p,a)}const On={id:"core/interactions",install:$n,listeners:{"scope:add-document":e=>dt(e,"add"),"scope:remove-document":e=>dt(e,"remove"),"interactable:unset":({interactable:e},t)=>{for(let n=t.interactions.list.length-1;n>=0;n--){const s=t.interactions.list[n];s.interactable===e&&(s.stop(),t.fire("interactions:destroy",{interaction:s}),s.destroy(),t.interactions.list.length>2&&t.interactions.list.splice(n,1))}}},onDocSignal:dt,doOnInteractions:de,methodNames:pe};var Rn=On;class Ln{constructor(){c(this,"id",`__interact_scope_${Math.floor(Math.random()*100)}`);c(this,"isInitialized",!1);c(this,"listenerMaps",[]);c(this,"browser",D);c(this,"defaults",et(ie));c(this,"Eventable",ee);c(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}});c(this,"interactStatic",vn(this));c(this,"InteractEvent",Pt);c(this,"Interactable");c(this,"interactables",new yn(this));c(this,"_win");c(this,"document");c(this,"window");c(this,"documents",[]);c(this,"_plugins",{list:[],map:{}});c(this,"onWindowUnload",t=>this.removeDocument(t.target));const t=this;this.Interactable=class extends bn{get _defaults(){return t.defaults}set(n){return super.set(n),t.fire("interactable:set",{options:n,interactable:this}),this}unset(){super.unset();const n=t.interactables.list.indexOf(this);n<0||(super.unset(),t.interactables.list.splice(n,1),t.fire("interactable:unset",{interactable:this}))}}}addListeners(t,n){this.listenerMaps.push({id:n,map:t})}fire(t,n){for(const{map:{[t]:s}}of this.listenerMaps)if(!!s&&s(n,this,t)===!1)return!1}init(t){return this.isInitialized?this:Vn(this,t)}pluginIsInstalled(t){return this._plugins.map[t.id]||this._plugins.list.indexOf(t)!==-1}usePlugin(t,n){if(!this.isInitialized)return this;if(this.pluginIsInstalled(t))return this;if(t.id&&(this._plugins.map[t.id]=t),this._plugins.list.push(t),t.install&&t.install(this,n),t.listeners&&t.before){let s=0;const o=this.listenerMaps.length,i=t.before.reduce((r,a)=>(r[a]=!0,r[Ut(a)]=!0,r),{});for(;s<o;s++){const r=this.listenerMaps[s].id;if(i[r]||i[Ut(r)])break}this.listenerMaps.splice(s,0,{id:t.id,map:t.listeners})}else t.listeners&&this.listenerMaps.push({id:t.id,map:t.listeners});return this}addDocument(t,n){if(this.getDocIndex(t)!==-1)return!1;const s=q(t);n=n?x({},n):{},this.documents.push({doc:t,options:n}),this.events.documents.push(t),t!==this.document&&this.events.add(s,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:t,window:s,scope:this,options:n})}removeDocument(t){const n=this.getDocIndex(t),s=q(t),o=this.documents[n].options;this.events.remove(s,"unload",this.onWindowUnload),this.documents.splice(n,1),this.events.documents.splice(n,1),this.fire("scope:remove-document",{doc:t,window:s,scope:this,options:o})}getDocIndex(t){for(let n=0;n<this.documents.length;n++)if(this.documents[n].doc===t)return n;return-1}getDocOptions(t){const n=this.getDocIndex(t);return n===-1?null:this.documents[n].options}now(){return(this.window.Date||Date).now()}}function Vn(e,t){return e.isInitialized=!0,l.window(t)&&Jt(t),E.init(t),D.init(t),Ze.init(t),e.window=t,e.document=t.document,e.usePlugin(Rn),e.usePlugin(xn),e}function Ut(e){return e&&e.replace(/\/.*$/,"")}const he=new Ln,Yn=he.interactStatic;var ot=Yn;const Xn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:globalThis;he.init(Xn);function Nn(e){const{Interactable:t}=e;t.prototype.getAction=function(s,o,i,r){const a=Un(this,o,i,r,e);return this.options.actionChecker?this.options.actionChecker(s,o,a,this,r,i):a},t.prototype.ignoreFrom=J(function(n){return this._backCompatOption("ignoreFrom",n)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),t.prototype.allowFrom=J(function(n){return this._backCompatOption("allowFrom",n)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),t.prototype.actionChecker=Fn,t.prototype.styleCursor=Bn}function Un(e,t,n,s,o){const i=e.getRect(s),r=t.buttons||{0:1,1:4,3:8,4:16}[t.button],a={action:null,interactable:e,interaction:n,element:s,rect:i,buttons:r};return o.fire("auto-start:check",a),a.action}function Bn(e){return l.bool(e)?(this.options.styleCursor=e,this):e===null?(delete this.options.styleCursor,this):this.options.styleCursor}function Fn(e){return l.func(e)?(this.options.actionChecker=e,this):e===null?(delete this.options.actionChecker,this):this.options.actionChecker}var jn={id:"auto-start/interactableMethods",install:Nn};function qn(e){const{interactStatic:t,defaults:n}=e;e.usePlugin(jn),n.base.actionChecker=null,n.base.styleCursor=!0,x(n.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),t.maxInteractions=s=>ve(s,e),e.autoStart={maxInteractions:1/0,withinInteractionLimit:at,cursorElement:null}}function zn({interaction:e,pointer:t,event:n,eventTarget:s},o){if(e.interacting())return;const i=ge(e,t,n,s,o);me(e,i,o)}function Gn({interaction:e,pointer:t,event:n,eventTarget:s},o){if(e.pointerType!=="mouse"||e.pointerIsDown||e.interacting())return;const i=ge(e,t,n,s,o);me(e,i,o)}function Wn(e,t){const{interaction:n}=e;if(!n.pointerIsDown||n.interacting()||!n.pointerWasMoved||!n.prepared.name)return;t.fire("autoStart:before-start",e);const{interactable:s}=n,o=n.prepared.name;o&&s&&(s.options[o].manualStart||!at(s,n.element,n.prepared,t)?n.stop():(n.start(n.prepared,s,n.element),be(n,t)))}function Kn({interaction:e},t){const{interactable:n}=e;n&&n.options.styleCursor&&wt(e.element,"",t)}function fe(e,t,n,s,o){return t.testIgnoreAllow(t.options[e.name],n,s)&&t.options[e.name].enabled&&at(t,n,e,o)?e:null}function Hn(e,t,n,s,o,i,r){for(let a=0,u=s.length;a<u;a++){const p=s[a],d=o[a],m=p.getAction(t,n,e,d);if(!m)continue;const h=fe(m,p,d,i,r);if(h)return{action:h,interactable:p,element:d}}return{action:null,interactable:null,element:null}}function ge(e,t,n,s,o){let i=[],r=[],a=s;function u(p){i.push(p),r.push(a)}for(;l.element(a);){i=[],r=[],o.interactables.forEachMatch(a,u);const p=Hn(e,t,n,i,r,s,o);if(p.action&&!p.interactable.options[p.action.name].manualStart)return p;a=X(a)}return{action:null,interactable:null,element:null}}function me(e,{action:t,interactable:n,element:s},o){t=t||{name:null},e.interactable=n,e.element=s,re(e.prepared,t),e.rect=n&&t.name?n.getRect(s):null,be(e,o),o.fire("autoStart:prepared",{interaction:e})}function at(e,t,n,s){const o=e.options,i=o[n.name].max,r=o[n.name].maxPerElement,a=s.autoStart.maxInteractions;let u=0,p=0,d=0;if(!(i&&r&&a))return!1;for(const m of s.interactions.list){const h=m.prepared.name;if(!!m.interacting()){if(u++,u>=a)return!1;if(m.interactable===e&&(p+=h===n.name?1:0,p>=i||m.element===t&&(d++,h===n.name&&d>=r)))return!1}}return a>0}function ve(e,t){return l.number(e)?(t.autoStart.maxInteractions=e,this):t.autoStart.maxInteractions}function wt(e,t,n){const{cursorElement:s}=n.autoStart;s&&s!==e&&(s.style.cursor=""),e.ownerDocument.documentElement.style.cursor=t,e.style.cursor=t,n.autoStart.cursorElement=t?e:null}function be(e,t){const{interactable:n,element:s,prepared:o}=e;if(!(e.pointerType==="mouse"&&n&&n.options.styleCursor)){t.autoStart.cursorElement&&wt(t.autoStart.cursorElement,"",t);return}let i="";if(o.name){const r=n.options[o.name].cursorChecker;l.func(r)?i=r(o,n,s,e._interacting):i=t.actions.map[o.name].getCursor(o)}wt(e.element,i||"",t)}const Jn={id:"auto-start/base",before:["actions"],install:qn,listeners:{"interactions:down":zn,"interactions:move":(e,t)=>{Gn(e,t),Wn(e,t)},"interactions:stop":Kn},maxInteractions:ve,withinInteractionLimit:at,validateAction:fe};var Ct=Jn;function Qn({interaction:e,eventTarget:t,dx:n,dy:s},o){if(e.prepared.name!=="drag")return;const i=Math.abs(n),r=Math.abs(s),a=e.interactable.options.drag,u=a.startAxis,p=i>r?"x":i<r?"y":"xy";if(e.prepared.axis=a.lockAxis==="start"?p[0]:a.lockAxis,p!=="xy"&&u!=="xy"&&u!==p){e.prepared.name=null;let d=t;const m=function(h){if(h===e.interactable)return;const f=e.interactable.options.drag;if(!f.manualStart&&h.testIgnoreAllow(f,d,t)){const g=h.getAction(e.downPointer,e.downEvent,e,d);if(g&&g.name==="drag"&&Zn(p,h)&&Ct.validateAction(g,h,d,t,o))return h}};for(;l.element(d);){const h=o.interactables.forEachMatch(d,m);if(h){e.prepared.name="drag",e.interactable=h,e.element=d;break}d=X(d)}}}function Zn(e,t){if(!t)return!1;const n=t.options.drag.startAxis;return e==="xy"||n==="xy"||n===e}var ts={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":Qn}};function es(e){const{defaults:t}=e;e.usePlugin(Ct),t.perAction.hold=0,t.perAction.delay=0}function ht(e){const t=e.prepared&&e.prepared.name;if(!t)return null;const n=e.interactable.options;return n[t].hold||n[t].delay}const ns={id:"auto-start/hold",install:es,listeners:{"interactions:new":({interaction:e})=>{e.autoStartHoldTimer=null},"autoStart:prepared":({interaction:e})=>{const t=ht(e);t>0&&(e.autoStartHoldTimer=setTimeout(()=>{e.start(e.prepared,e.interactable,e.element)},t))},"interactions:move":({interaction:e,duplicate:t})=>{e.autoStartHoldTimer&&e.pointerWasMoved&&!t&&(clearTimeout(e.autoStartHoldTimer),e.autoStartHoldTimer=null)},"autoStart:before-start":({interaction:e})=>{ht(e)>0&&(e.prepared.name=null)}},getHoldDuration:ht};var ss=ns,os={id:"auto-start",install(e){e.usePlugin(Ct),e.usePlugin(ss),e.usePlugin(ts)}};ot.use(os);function is(e){const{actions:t,Interactable:n,defaults:s}=e;n.prototype.draggable=Z.draggable,t.map.drag=Z,t.methodDict.drag="draggable",s.actions.drag=Z.defaults}function ft({interaction:e}){if(e.prepared.name!=="drag")return;const t=e.prepared.axis;t==="x"?(e.coords.cur.page.y=e.coords.start.page.y,e.coords.cur.client.y=e.coords.start.client.y,e.coords.velocity.client.y=0,e.coords.velocity.page.y=0):t==="y"&&(e.coords.cur.page.x=e.coords.start.page.x,e.coords.cur.client.x=e.coords.start.client.x,e.coords.velocity.client.x=0,e.coords.velocity.page.x=0)}function Bt({iEvent:e,interaction:t}){if(t.prepared.name!=="drag")return;const n=t.prepared.axis;if(n==="x"||n==="y"){const s=n==="x"?"y":"x";e.page[s]=t.coords.start.page[s],e.client[s]=t.coords.start.client[s],e.delta[s]=0}}const rs=function(t){return l.object(t)?(this.options.drag.enabled=t.enabled!==!1,this.setPerAction("drag",t),this.setOnEvents("drag",t),/^(xy|x|y|start)$/.test(t.lockAxis)&&(this.options.drag.lockAxis=t.lockAxis),/^(xy|x|y)$/.test(t.startAxis)&&(this.options.drag.startAxis=t.startAxis),this):l.bool(t)?(this.options.drag.enabled=t,this):this.options.drag},Z={id:"actions/drag",install:is,listeners:{"interactions:before-action-move":ft,"interactions:action-resume":ft,"interactions:action-move":Bt,"auto-start:check":e=>{const{interaction:t,interactable:n,buttons:s}=e,o=n.options.drag;if(!(!(o&&o.enabled)||t.pointerIsDown&&/mouse|pointer/.test(t.pointerType)&&(s&n.options.drag.mouseButtons)===0))return e.action={name:"drag",axis:o.lockAxis==="start"?o.startAxis:o.lockAxis},!1}},draggable:rs,beforeMove:ft,move:Bt,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor(){return"move"}};var as=Z;ot.use(as);function cs(e,t){jt(()=>{if(e.value){const n=$e.exports.throttle(t.onmove,8.333333333333334);ot(e.value).styleCursor(!1).draggable({origin:"self",inertia:!0,onstart:t.onstart,onmove:n,onend:n})}}),Ie(()=>{ot(e.value).unset()})}class ls{constructor(t){c(this,"lastX");c(this,"lastY");c(this,"movingX");c(this,"movingY");c(this,"smoother");this.lastX=0,this.lastY=0,this.movingX=0,this.movingY=0,this.smoother=t*.05+.7}start(t,n){this.lastX=t,this.lastY=n,this.movingX=0,this.movingY=0}move(t,n){const s=this.lastX,o=this.lastY,i=(this.movingX+(s-t)*.1)*this.smoother,r=(this.movingY+(o-n)*.1)*this.smoother,a=s-i,u=o-r;return this.movingX=i,this.movingY=r,this.lastX=a,this.lastY=u,[s,o,a,u]}}function us(e){return Array.from({length:e}).map((t,n)=>new ls(n/(e*1.25)))}const ps=St({components:{Caption:Oe,Button:Gt},props:{modelValue:{type:String,default:""},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e){const t=xt(e),n=tt(!0),s=Se("canvas"),o=us(15);function i(){Xe(s.value),n.value=!0,t.value=""}function r(a){n.value||(Ve(s.value,a),t.value=At(s.value))}return qt(()=>e.color,r),cs(s,{onstart(a){for(const u of o)u.start(a.pageX,a.pageY)},onmove(a){for(const u of o){const p=u.move(a.pageX,a.pageY),d={color:e.color};Ye(s.value,p,d),n.value=!1,t.value=At(s.value)}}}),jt(()=>{t.value&&t.value.startsWith("data:image/png")&&(Ne(s.value,t.value),n.value=!1)}),{model:t,reset:i,isBlank:n,setColor:r}}}),ds={class:"signature-draw signature-draw--desktop","data-testid":"signature-draw-desktop"},hs=["width","height"],fs={key:1,class:"signature-draw__control"};function gs(e,t,n,s,o,i){const r=F("Caption"),a=F("Button");return $(),B("div",ds,[M("canvas",{ref:"canvas",class:"signature-draw__canvas","data-testid":"signature-draw-canvas",width:e.width,height:e.height},null,8,hs),e.isBlank?($(),Et(r,{key:0,class:"signature-draw__placeholder","data-testid":"signature-draw-placeholder"},{default:P(()=>[zt(H(e.placeholder),1)]),_:1})):gt("",!0),e.isBlank?gt("",!0):($(),B("div",fs,[w(a,{"data-testid":"signature-draw-reset",variant:"link",size:"xs",class:"signature-draw__reset",onClick:t[0]||(t[0]=u=>e.reset())},{default:P(()=>[M("span",null,H(e.resetLabel),1)]),_:1})]))])}var ye=kt(ps,[["render",gs]]);async function Ft(e,t){const n=document.createElement("canvas"),s=n.getContext("2d"),o=await Wt(e);return n.width=t%180===0?o.width:o.height,n.height=t%180===0?o.height:o.width,s.translate(n.width/2,n.height/2),s.rotate(t*Math.PI/180),s.drawImage(o,o.width/-2,o.height/-2),n.toDataURL()}var ms=Re,_e=ms.createSVGComponent(_e,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},[{elem:"path",attrs:{d:"M2 26H30V28H2zM25.4 9c.8-.8.8-2 0-2.8 0 0 0 0 0 0l-3.6-3.6c-.8-.8-2-.8-2.8 0 0 0 0 0 0 0l-15 15V24h6.4L25.4 9zM20.4 4L24 7.6l-3 3L17.4 7 20.4 4zM6 22v-3.6l10-10 3.6 3.6-10 10H6z"}}]),vs=_e,bs=vs;const ys=St({components:{Button:Gt,IconEdit:bs,SignatureDrawDesktop:ye},props:{modelValue:{type:String,default:""},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"},openDrawLabel:{type:String,default:"Click to Draw"},closeDrawLabel:{type:String,default:"Save"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e){const t=xt(e),n=tt(""),s=tt(!1),o=ke(),i=Q(()=>o.width.value<e.width+32?"rotate":"normal"),r=Q(()=>{const d=[];return i.value&&d.push(`signature-draw--${i.value}`),d}),a=Q(()=>({width:`${e.width}px`,aspectRatio:`${e.width/e.height}`}));async function u(){const d=t.value&&i.value==="rotate"?await Ft(t.value,90):t.value;n.value=d,s.value=!0}async function p(){const d=n.value&&i.value==="rotate"?await Ft(n.value,-90):n.value;t.value=d,s.value=!1}return qt(s,d=>{d?document.body.style.setProperty("overflow-y","hidden"):document.body.style.removeProperty("overflow-y")}),{classNames:r,style:a,rawModel:n,model:t,isOpen:s,mode:i,open:u,close:p}}}),_s={class:"signature-draw__preview"},ws=["src"],xs={key:0,class:"signature-draw__modal","data-testid":"signature-draw-modal"};function Ss(e,t,n,s,o,i){const r=F("IconEdit"),a=F("Button"),u=F("SignatureDrawDesktop");return $(),B("div",{class:Mt(["signature-draw signature-draw--mobile",e.classNames]),"data-testid":"signature-draw-mobile",style:De(e.style)},[M("div",_s,[e.model?($(),B(Te,{key:0},[M("img",{src:e.model,alt:"signature-draw-preview","data-testid":"signature-draw-preview",onClick:t[0]||(t[0]=p=>e.open())},null,8,ws),w(a,{variant:"link",size:"xs",class:"signature-draw__reset","data-testid":"signature-draw-edit",icon:"",onClick:t[1]||(t[1]=p=>e.open())},{default:P(()=>[w(r)]),_:1})],64)):($(),Et(a,{key:1,"data-testid":"signature-draw-open",onClick:e.open},{default:P(()=>[zt(H(e.openDrawLabel),1)]),_:1},8,["onClick"]))]),w(Pe,{name:"zoom-in"},{default:P(()=>[e.isOpen?($(),B("div",xs,[w(u,{modelValue:e.rawModel,"onUpdate:modelValue":t[2]||(t[2]=p=>e.rawModel=p),class:Mt(e.classNames),placeholder:e.placeholder,color:e.color,width:e.mode==="rotate"?e.height:e.width,height:e.mode==="rotate"?e.width:e.height,"reset-label":e.resetLabel},null,8,["modelValue","class","placeholder","color","width","height","reset-label"]),w(a,{"data-testid":"signature-draw-close",onClick:e.close},{default:P(()=>[M("span",null,H(e.closeDrawLabel),1)]),_:1},8,["onClick"])])):gt("",!0)]),_:1})],6)}var ks=kt(ys,[["render",Ss]]);const Es=St({props:{modelValue:{type:String,default:""},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"},openDrawLabel:{type:String,default:"Click to Draw"},closeDrawLabel:{type:String,default:"Save"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e){const t=xt(e),n=Ee("(min-width: 768px)");return{view:Q(()=>n.value?ye:ks),model:t}}});function Is(e,t,n,s,o,i){return $(),Et(Ce(e.view),{modelValue:e.model,"onUpdate:modelValue":t[0]||(t[0]=r=>e.model=r),width:e.width,height:e.height,color:e.color,placeholder:e.placeholder,"reset-label":e.resetLabel,"open-draw-label":e.openDrawLabel,"close-draw-label":e.closeDrawLabel},null,8,["modelValue","width","height","color","placeholder","reset-label","open-draw-label","close-draw-label"])}var K=kt(Es,[["render",Is]]),Ts="/design-system/assets/empty-img.110c3d09.png";const Ps=z("",3),Ds=z("",2),Cs=z("",2),Ms=z("",3),As=z("",3),$s=M("p",null,[M("strong",null,"result")],-1),Os={class:"truncate"},Rs=["src"],Ls=z("",8),Ks='{"title":"Signature Draw","description":"","frontmatter":{},"headers":[{"level":2,"title":"Usage","slug":"usage"},{"level":3,"title":"Simple Usage","slug":"simple-usage"},{"level":3,"title":"for Initial","slug":"for-initial"},{"level":2,"title":"Placeholder","slug":"placeholder"},{"level":2,"title":"Color","slug":"color"},{"level":2,"title":"Binding v-model","slug":"binding-v-model"},{"level":2,"title":"API","slug":"api"},{"level":3,"title":"Props","slug":"props"},{"level":3,"title":"Slots","slug":"slots"},{"level":3,"title":"Events","slug":"events"}],"relativePath":"signature-draw/component.md"}',Vs={},Hs=Object.assign(Vs,{setup(e){const t=tt("");return(n,s)=>{const o=F("preview");return $(),B("div",null,[Ps,w(o,null,{default:P(()=>[w(K)]),_:1}),Ds,w(o,{class:"flex-col"},{default:P(()=>[w(K,{width:230})]),_:1}),Cs,w(o,{class:"flex-col"},{default:P(()=>[w(K,{placeholder:"Draw signature here"})]),_:1}),Ms,w(o,{class:"flex-col gap-2"},{default:P(()=>[w(K,{color:"#73185E"})]),_:1}),As,w(o,{class:"flex-col gap-2"},{default:P(()=>[w(K,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=i=>t.value=i)},null,8,["modelValue"])]),_:1}),$s,M("pre",Os,[M("code",null,H(t.value),1)]),M("img",{class:"mt-2 border",src:t.value||Me(Ts),width:"430",height:"230",alt:"Result Image"},null,8,Rs),Ls])}}});export{Ks as __pageData,Hs as default};
