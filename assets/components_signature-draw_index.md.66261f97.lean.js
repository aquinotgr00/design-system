var X=Object.defineProperty;var z=(e,t,a)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var g=(e,t,a)=>(z(e,typeof t!="symbol"?t+"":t,a),a);import{t as O,z as j,g as G}from"./chunks/theme.0ede34c8.js";import{u as k}from"./chunks/index.7ec55cbf.js";import{p as N}from"./chunks/Button.c0b369e2.js";import{d as J,t as q,p as Q,a as W,r as H}from"./chunks/canvas.b003a521.js";import{s as K,o as R,Q as Z,h as ee,m as T,r as b,w as L,_ as V,K as v,x as m,p as f,F as i,H as P,I as c,y as B,z as w,J as S,M as r,c as C,a8 as te,a7 as ae,G as se,v as E,T as oe,N as le,R as ne,u as F,Y as D,i as I}from"./chunks/framework.d1aba3cb.js";import{t as re}from"./chunks/throttle.77eff498.js";import{p as pe}from"./chunks/Caption.7652253e.js";import{u as M}from"./chunks/index.de1b7b71.js";import{f as x}from"./chunks/base64.041d95b4.js";import{l as ie}from"./chunks/load-image.265b152a.js";import{I as de}from"./chunks/20.a625aee2.js";import{p as ce}from"./chunks/index.92d4f4ef.js";import"./chunks/Button.vue_vue_type_style_index_0_lang.4ed993c7.js";import{E as ue}from"./chunks/empty-img.d1245f3d.js";import"./chunks/index.a3ecab28.js";import"./chunks/defu.573334b8.js";import"./chunks/debounce.425ad733.js";import"./chunks/toNumber.09abc7f0.js";import"./chunks/isSymbol.4326927f.js";import"./chunks/isObjectLike.53b0037d.js";import"./chunks/Caption.vue_vue_type_style_index_0_lang.4ed993c7.js";import"./chunks/create-image.28dfb74f.js";import"./chunks/avatar.bd58a373.js";import"./chunks/color-hash.af77277d.js";import"./chunks/commonjsHelpers.042e6b4d.js";import"./chunks/utils-6ba05f5b.bfd05ad6.js";function he(e,t){const a=K();R(async()=>{if(e.value){const{default:o}=await Z(()=>import("./chunks/interact.min.6dc930b6.js").then(n=>n.i),["assets/chunks/interact.min.6dc930b6.js","assets/chunks/commonjsHelpers.042e6b4d.js"]),s=re(t.onmove,1e3/60);a.value=o(e.value).styleCursor(!1).draggable({origin:"self",inertia:{enabled:!0,resistance:10},onstart:t.onstart,onmove:s,onend:s})}}),ee(async()=>{var o;(o=a.value)==null||o.unset()})}class me{constructor(t){g(this,"lastX");g(this,"lastY");g(this,"movingX");g(this,"movingY");g(this,"smoother");this.lastX=0,this.lastY=0,this.movingX=0,this.movingY=0,this.smoother=t*.05+.7}start(t,a){this.lastX=t,this.lastY=a,this.movingX=0,this.movingY=0}move(t,a){const o=this.lastX,s=this.lastY,n=(this.movingX+(o-t)*.1)*this.smoother,l=(this.movingY+(s-a)*.1)*this.smoother,d=o-n,p=s-l;return this.movingX=n,this.movingY=l,this.lastX=d,this.lastY=p,[o,s,d,p]}}function ye(e){return Array.from({length:e}).map((t,a)=>new me(a/(e*1.25)))}const De=T({components:{Caption:pe,Button:N},props:{modelValue:{type:[String,globalThis.File],default:""},modelModifiers:{type:Object,default:()=>({})},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e){const t=k(e),a=M(t,""),o=b(!0),s=O("canvas"),n=ye(15);function l(){W(s.value),o.value=!0,t.value=""}function d(p){o.value||(H(s.value,p),t.value=q(s.value))}return L(()=>e.color,d),he(s,{onstart(p){for(const y of n)y.start(p.pageX,p.pageY)},onmove(p){for(const u of n){const A=u.move(p.pageX,p.pageY),U={color:e.color};J(s.value,A,U)}const y=q(s.value),h=e.modelModifiers.base64?y:x(y);o.value=!1,t.value=h}}),R(()=>{t.value&&a.value&&(Q(s.value,a.value),o.value=!1)}),{model:t,reset:l,isBlank:o,setColor:d}}});const ge={class:"signature-draw signature-draw--desktop","data-testid":"signature-draw-desktop"},Fe=["width","height"],_e={key:1,class:"signature-draw__control"};function ve(e,t,a,o,s,n){const l=v("Caption"),d=v("Button");return m(),f("div",ge,[i("canvas",{ref:"canvas",class:"signature-draw__canvas","data-testid":"signature-draw-canvas",width:e.width,height:e.height},null,8,Fe),e.isBlank?(m(),P(l,{key:0,class:"signature-draw__placeholder","data-testid":"signature-draw-placeholder"},{default:c(()=>[B(w(e.placeholder),1)]),_:1})):S("",!0),e.isBlank?S("",!0):(m(),f("div",_e,[r(d,{"data-testid":"signature-draw-reset",variant:"link",size:"xs",class:"signature-draw__reset",pill:"",onClick:t[0]||(t[0]=p=>e.reset())},{default:c(()=>[i("span",null,w(e.resetLabel),1)]),_:1})]))])}const Y=V(De,[["render",ve]]);async function $(e,t){const a=document.createElement("canvas"),o=a.getContext("2d"),s=await ie(e);return a.width=t%180===0?s.width:s.height,a.height=t%180===0?s.height:s.width,o.translate(a.width/2,a.height/2),o.rotate(t*Math.PI/180),o.drawImage(s,s.width/-2,s.height/-2),a.toDataURL()}const fe=T({components:{Button:N,IconEdit:de,SignatureDrawDesktop:Y},directives:{pAspectRatio:ce},props:{modelValue:{type:[String,globalThis.File],default:""},modelModifiers:{type:Object,default:()=>({})},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"},openDrawLabel:{type:String,default:"Click to Draw"},closeDrawLabel:{type:String,default:"Save"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e){const t=k(e),a=M(t,""),o=b(""),s=b(!1),n=j(),l=C(()=>n.width.value<e.width+32?"rotate":"normal"),d=C(()=>{const u=[];return l.value&&u.push(`signature-draw--${l.value}`),u}),p=C(()=>({width:`${e.width}px`,aspectRatio:`${e.width/e.height}`}));async function y(){const u=a.value&&l.value==="rotate"?await $(a.value,90):a.value;o.value=u,s.value=!0}async function h(){const u=o.value&&l.value==="rotate"?await $(o.value,-90):o.value,A=e.modelModifiers.base64?u:x(u);t.value=A,s.value=!1}return L(s,u=>{u?document.body.style.setProperty("overflow-y","hidden"):document.body.style.removeProperty("overflow-y")}),{classNames:d,style:p,rawModel:o,preview:a,model:t,isOpen:s,mode:l,open:y,close:h}}});const we={class:"signature-draw__preview"},be=["src"],Ce={key:0,class:"signature-draw__modal","data-testid":"signature-draw-modal"};function Ae(e,t,a,o,s,n){const l=v("IconEdit"),d=v("Button"),p=v("SignatureDrawDesktop"),y=te("p-aspect-ratio");return ae((m(),f("div",{class:E(["signature-draw signature-draw--mobile",e.classNames]),"data-testid":"signature-draw-mobile",style:le(e.style)},[i("div",we,[e.model?(m(),f(se,{key:0},[i("img",{src:e.preview,alt:"signature-draw-preview","data-testid":"signature-draw-preview",onClick:t[0]||(t[0]=h=>e.open())},null,8,be),r(d,{variant:"link",size:"xs",class:"signature-draw__reset","data-testid":"signature-draw-edit",icon:"",onClick:t[1]||(t[1]=h=>e.open())},{default:c(()=>[r(l)]),_:1})],64)):(m(),P(d,{key:1,"data-testid":"signature-draw-open",onClick:t[2]||(t[2]=h=>e.open())},{default:c(()=>[B(w(e.openDrawLabel),1)]),_:1}))]),r(oe,{name:"zoom-in"},{default:c(()=>[e.isOpen?(m(),f("div",Ce,[r(p,{modelValue:e.rawModel,"onUpdate:modelValue":t[3]||(t[3]=h=>e.rawModel=h),modelModifiers:{base64:!0},class:E(e.classNames),placeholder:e.placeholder,color:e.color,width:e.mode==="rotate"?e.height:e.width,height:e.mode==="rotate"?e.width:e.height,"reset-label":e.resetLabel},null,8,["modelValue","class","placeholder","color","width","height","reset-label"]),r(d,{class:"signature-draw__close",nganu:"1311","data-testid":"signature-draw-close",onClick:t[4]||(t[4]=h=>e.close())},{default:c(()=>[i("span",null,w(e.closeDrawLabel),1)]),_:1})])):S("",!0)]),_:1})],6)),[[y,e.width/e.height]])}const Se=V(fe,[["render",Ae]]),ke=T({props:{modelValue:{type:[String,globalThis.File],default:""},modelModifiers:{type:Object,default:()=>({})},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"},openDrawLabel:{type:String,default:"Click to Draw"},closeDrawLabel:{type:String,default:"Save"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e){const t=k(e),a=G("(min-width: 768px)");return{view:C(()=>a.value?Y:Se),model:t}}});function Te(e,t,a,o,s,n){return m(),P(ne(e.view),{modelValue:e.model,"onUpdate:modelValue":t[0]||(t[0]=l=>e.model=l),"model-modifiers":e.modelModifiers,width:e.width,height:e.height,color:e.color,placeholder:e.placeholder,"reset-label":e.resetLabel,"open-draw-label":e.openDrawLabel,"close-draw-label":e.closeDrawLabel},null,8,["modelValue","model-modifiers","width","height","color","placeholder","reset-label","open-draw-label","close-draw-label"])}const _=V(ke,[["render",Te]]),Ve=D("",4),Pe=D("",2),qe=D("",2),Ee=D("",3),Ie=D("",3),$e=i("p",null,[i("strong",null,"result")],-1),Ne={class:"truncate"},Re=D("",3),Le=i("p",null,[i("strong",null,"result")],-1),Be={class:"truncate"},Me=["src"],xe=D("",8),yt=JSON.parse('{"title":"Signature Draw · Components","description":"Draw signature like using real pen","frontmatter":{"title":"Signature Draw · Components","description":"Draw signature like using real pen"},"headers":[],"relativePath":"components/signature-draw/index.md","filePath":"components/signature-draw/index.md"}'),Ye={name:"components/signature-draw/index.md"},Dt=Object.assign(Ye,{setup(e){const t=b(),a=b();return(o,s)=>{const n=v("preview");return m(),f("div",null,[Ve,r(n,null,{default:c(()=>[r(_)]),_:1}),Pe,r(n,{class:"flex-col"},{default:c(()=>[r(_,{width:230})]),_:1}),qe,r(n,{class:"flex-col"},{default:c(()=>[r(_,{placeholder:"Draw signature here"})]),_:1}),Ee,r(n,{class:"flex-col space-y-2"},{default:c(()=>[r(_,{color:"#73185E"})]),_:1}),Ie,r(n,{class:"flex-col space-y-2"},{default:c(()=>[r(_,{modelValue:F(t),"onUpdate:modelValue":s[0]||(s[0]=l=>I(t)?t.value=l:null)},null,8,["modelValue"])]),_:1}),$e,i("pre",Ne,[i("code",null,w(F(t)),1)]),Re,r(n,{class:"flex-col space-y-2"},{default:c(()=>[r(_,{modelValue:F(a),"onUpdate:modelValue":s[1]||(s[1]=l=>I(a)?a.value=l:null),modelModifiers:{base64:!0}},null,8,["modelValue"])]),_:1}),Le,i("pre",Be,[i("code",null,w(F(a)),1)]),i("img",{class:"mt-2 border",src:F(a)||F(ue),width:"430",height:"230",alt:"Result Image"},null,8,Me),xe])}}});export{yt as __pageData,Dt as default};
