var B=Object.defineProperty;var x=(e,t,a)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var g=(e,t,a)=>(x(e,typeof t!="symbol"?t+"":t,a),a);import{t as U,k as Y,d as X}from"./chunks/index.1ae21cbc.js";import{u as S}from"./chunks/index.56b84ef6.js";import{p as P}from"./chunks/Button.8a86dc15.js";import{d as q,t as V,p as M,a as z,r as O,E as j}from"./chunks/empty-img.fcd4fc95.js";import{z as J,j as R,_ as W,N as G,f as k,g as b,i as $,k as A,r as m,o as h,c as y,m as u,q as T,w as c,e as N,y as w,t as C,a as r,h as f,V as Q,d as H,R as K,n as I,T as Z,a1 as ee,s as te,u as F,b as D,J as ae}from"./app.2f919c71.js";import{t as se}from"./chunks/throttle.f0db56e4.js";import{p as le}from"./chunks/Caption.97583a8c.js";import{l as ne}from"./chunks/load-image.265b152a.js";import{I as oe}from"./chunks/20.fc1a3d38.js";import{p as re}from"./chunks/index.18493523.js";import"./chunks/Button.vue_vue_type_style_index_0_lang.59c70f38.js";import"./chunks/index.f537dd08.js";import"./chunks/debounce.09764d19.js";import"./chunks/toNumber.685f5789.js";import"./chunks/isSymbol.b765f5ee.js";import"./chunks/isObjectLike.46b91259.js";import"./chunks/Caption.vue_vue_type_style_index_0_lang.f06b8956.js";import"./chunks/utils-6ba05f5b.77c1941a.js";function ie(e,t){const a=J();R(async()=>{if(e.value){const{default:s}=await W(()=>import("./chunks/interact.min.7ffb2901.js").then(o=>o.i),["assets/chunks/interact.min.7ffb2901.js","assets/app.2f919c71.js"]),l=se(t.onmove,1e3/60);a.value=s(e.value).styleCursor(!1).draggable({origin:"self",inertia:{enabled:!0,resistance:10},onstart:t.onstart,onmove:l,onend:l})}}),G(async()=>{var s;(s=a.value)==null||s.unset()})}class de{constructor(t){g(this,"lastX");g(this,"lastY");g(this,"movingX");g(this,"movingY");g(this,"smoother");this.lastX=0,this.lastY=0,this.movingX=0,this.movingY=0,this.smoother=t*.05+.7}start(t,a){this.lastX=t,this.lastY=a,this.movingX=0,this.movingY=0}move(t,a){const s=this.lastX,l=this.lastY,o=(this.movingX+(s-t)*.1)*this.smoother,d=(this.movingY+(l-a)*.1)*this.smoother,n=s-o,p=l-d;return this.movingX=o,this.movingY=d,this.lastX=n,this.lastY=p,[s,l,n,p]}}function pe(e){return Array.from({length:e}).map((t,a)=>new de(a/(e*1.25)))}const ce=k({components:{Caption:le,Button:P},props:{modelValue:{type:String,default:""},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e){const t=S(e),a=b(!0),s=U("canvas"),l=pe(15);function o(){z(s.value),a.value=!0,t.value=""}function d(n){a.value||(O(s.value,n),t.value=V(s.value))}return $(()=>e.color,d),ie(s,{onstart(n){for(const p of l)p.start(n.pageX,n.pageY)},onmove(n){for(const p of l){const _=p.move(n.pageX,n.pageY),i={color:e.color};q(s.value,_,i)}a.value=!1,t.value=V(s.value)}}),R(()=>{t.value&&t.value.startsWith("data:image/png")&&(M(s.value,t.value),a.value=!1)}),{model:t,reset:o,isBlank:a,setColor:d}}});const ue={class:"signature-draw signature-draw--desktop","data-testid":"signature-draw-desktop"},he=["width","height"],ge={key:1,class:"signature-draw__control"};function me(e,t,a,s,l,o){const d=m("Caption"),n=m("Button");return h(),y("div",ue,[u("canvas",{ref:"canvas",class:"signature-draw__canvas","data-testid":"signature-draw-canvas",width:e.width,height:e.height},null,8,he),e.isBlank?(h(),T(d,{key:0,class:"signature-draw__placeholder","data-testid":"signature-draw-placeholder"},{default:c(()=>[N(w(e.placeholder),1)]),_:1})):C("",!0),e.isBlank?C("",!0):(h(),y("div",ge,[r(n,{"data-testid":"signature-draw-reset",variant:"link",size:"xs",class:"signature-draw__reset",pill:"",onClick:t[0]||(t[0]=p=>e.reset())},{default:c(()=>[u("span",null,w(e.resetLabel),1)]),_:1})]))])}const L=A(ce,[["render",me]]);async function E(e,t){const a=document.createElement("canvas"),s=a.getContext("2d"),l=await ne(e);return a.width=t%180===0?l.width:l.height,a.height=t%180===0?l.height:l.width,s.translate(a.width/2,a.height/2),s.rotate(t*Math.PI/180),s.drawImage(l,l.width/-2,l.height/-2),a.toDataURL()}const ye=k({components:{Button:P,IconEdit:oe,SignatureDrawDesktop:L},directives:{pAspectRatio:re},props:{modelValue:{type:String,default:""},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"},openDrawLabel:{type:String,default:"Click to Draw"},closeDrawLabel:{type:String,default:"Save"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e){const t=S(e),a=b(""),s=b(!1),l=Y(),o=f(()=>l.width.value<e.width+32?"rotate":"normal"),d=f(()=>{const i=[];return o.value&&i.push(`signature-draw--${o.value}`),i}),n=f(()=>({width:`${e.width}px`,aspectRatio:`${e.width/e.height}`}));async function p(){const i=t.value&&o.value==="rotate"?await E(t.value,90):t.value;a.value=i,s.value=!0}async function _(){const i=a.value&&o.value==="rotate"?await E(a.value,-90):a.value;t.value=i,s.value=!1}return $(s,i=>{i?document.body.style.setProperty("overflow-y","hidden"):document.body.style.removeProperty("overflow-y")}),{classNames:d,style:n,rawModel:a,model:t,isOpen:s,mode:o,open:p,close:_}}});const De={class:"signature-draw__preview"},_e=["src"],ve={key:0,class:"signature-draw__modal","data-testid":"signature-draw-modal"};function we(e,t,a,s,l,o){const d=m("IconEdit"),n=m("Button"),p=m("SignatureDrawDesktop"),_=Q("p-aspect-ratio");return H((h(),y("div",{class:I(["signature-draw signature-draw--mobile",e.classNames]),"data-testid":"signature-draw-mobile",style:ee(e.style)},[u("div",De,[e.model?(h(),y(K,{key:0},[u("img",{src:e.model,alt:"signature-draw-preview","data-testid":"signature-draw-preview",onClick:t[0]||(t[0]=i=>e.open())},null,8,_e),r(n,{variant:"link",size:"xs",class:"signature-draw__reset","data-testid":"signature-draw-edit",icon:"",onClick:t[1]||(t[1]=i=>e.open())},{default:c(()=>[r(d)]),_:1})],64)):(h(),T(n,{key:1,"data-testid":"signature-draw-open",onClick:e.open},{default:c(()=>[N(w(e.openDrawLabel),1)]),_:1},8,["onClick"]))]),r(Z,{name:"zoom-in"},{default:c(()=>[e.isOpen?(h(),y("div",ve,[r(p,{modelValue:e.rawModel,"onUpdate:modelValue":t[2]||(t[2]=i=>e.rawModel=i),class:I(e.classNames),placeholder:e.placeholder,color:e.color,width:e.mode==="rotate"?e.height:e.width,height:e.mode==="rotate"?e.width:e.height,"reset-label":e.resetLabel},null,8,["modelValue","class","placeholder","color","width","height","reset-label"]),r(n,{class:"signature-draw__close","data-testid":"signature-draw-close",onClick:e.close},{default:c(()=>[u("span",null,w(e.closeDrawLabel),1)]),_:1},8,["onClick"])])):C("",!0)]),_:1})],6)),[[_,e.width/e.height]])}const Fe=A(ye,[["render",we]]),fe=k({props:{modelValue:{type:String,default:""},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"},openDrawLabel:{type:String,default:"Click to Draw"},closeDrawLabel:{type:String,default:"Save"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e){const t=S(e),a=X("(min-width: 768px)");return{view:f(()=>a.value?L:Fe),model:t}}});function be(e,t,a,s,l,o){return h(),T(te(e.view),{modelValue:e.model,"onUpdate:modelValue":t[0]||(t[0]=d=>e.model=d),width:e.width,height:e.height,color:e.color,placeholder:e.placeholder,"reset-label":e.resetLabel,"open-draw-label":e.openDrawLabel,"close-draw-label":e.closeDrawLabel},null,8,["modelValue","width","height","color","placeholder","reset-label","open-draw-label","close-draw-label"])}const v=A(fe,[["render",be]]),Ce=D('<h1 id="signature-draw" tabindex="-1">Signature Draw <a class="header-anchor" href="#signature-draw" aria-hidden="true">#</a></h1><blockquote><p>Draw signature like using real pen</p></blockquote><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-hidden="true">#</a></h2><h3 id="simple-usage" tabindex="-1">Simple Usage <a class="header-anchor" href="#simple-usage" aria-hidden="true">#</a></h3>',4),Se=D(`<div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p-signature-draw</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="for-initial" tabindex="-1">for Initial <a class="header-anchor" href="#for-initial" aria-hidden="true">#</a></h3>`,2),ke=D(`<div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p-signature-draw</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">:width</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">230</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="placeholder" tabindex="-1">Placeholder <a class="header-anchor" href="#placeholder" aria-hidden="true">#</a></h2>`,2),Ae=D(`<div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p-signature-draw</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">placeholder</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Draw signature here</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="color" tabindex="-1">Color <a class="header-anchor" href="#color" aria-hidden="true">#</a></h2><p>Set pen color with prop <code>color</code>, default is <code>#000000</code></p>`,3),Te=D(`<div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p-signature-draw</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">color</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">#73185E</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="binding-v-model" tabindex="-1">Binding v-model <a class="header-anchor" href="#binding-v-model" aria-hidden="true">#</a></h2><p>Result of drawing image is store in <code>v-model</code> value. It&#39;s encoded in <a href="https://en.wikipedia.org/wiki/Data_URI_scheme" target="_blank" rel="noreferrer">base64-dataURI</a> format.</p>`,3),Ve=u("p",null,[u("strong",null,"result")],-1),Ie={class:"truncate"},Ee=["src"],Pe=D(`<div class="language-vue"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p-signature-draw</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">v-model</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">result</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">setup</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> result </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="api" tabindex="-1">API <a class="header-anchor" href="#api" aria-hidden="true">#</a></h2><h3 id="props" tabindex="-1">Props <a class="header-anchor" href="#props" aria-hidden="true">#</a></h3><table><thead><tr><th>Props</th><th style="text-align:center;">Type</th><th style="text-align:center;">Default</th><th>Description</th></tr></thead><tbody><tr><td><code>width</code></td><td style="text-align:center;"><code>Number</code></td><td style="text-align:center;"><code>430</code></td><td>Canvas&#39;s width</td></tr><tr><td><code>height</code></td><td style="text-align:center;"><code>Number</code></td><td style="text-align:center;"><code>230</code></td><td>Canvas&#39;s width</td></tr><tr><td><code>placeholder</code></td><td style="text-align:center;"><code>String</code></td><td style="text-align:center;"><code>-</code></td><td>Canvas&#39;s placeholder</td></tr><tr><td><code>color</code></td><td style="text-align:center;"><code>String</code></td><td style="text-align:center;"><code>#000000</code></td><td>Pencil color</td></tr><tr><td><code>modelValue</code></td><td style="text-align:center;"><code>String</code></td><td style="text-align:center;"><code>-</code></td><td>Result of draw image, in <a href="https://en.wikipedia.org/wiki/Data_URI_scheme" target="_blank" rel="noreferrer">base64-dataURI</a></td></tr><tr><td><code>resetLabel</code></td><td style="text-align:center;"><code>String</code></td><td style="text-align:center;"><code>Reset</code></td><td>Reset button&#39;s label</td></tr><tr><td><code>openDrawLabel</code></td><td style="text-align:center;"><code>String</code></td><td style="text-align:center;"><code>Click to Draw</code></td><td>Start draw button&#39;s label (in mobile-view)</td></tr><tr><td><code>closeDrawLabel</code></td><td style="text-align:center;"><code>String</code></td><td style="text-align:center;"><code>Save</code></td><td>Save draw button&#39;s label (in mobile-view)</td></tr></tbody></table><h3 id="slots" tabindex="-1">Slots <a class="header-anchor" href="#slots" aria-hidden="true">#</a></h3><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td colspan="2" class="text-center">There no slots here</td></tr></tbody></table><h3 id="events" tabindex="-1">Events <a class="header-anchor" href="#events" aria-hidden="true">#</a></h3><table><thead><tr><th>Name</th><th>Arguments</th><th>Description</th></tr></thead><tbody><tr><td colspan="3" class="text-center">There no props here</td></tr></tbody></table>`,8),Ze=JSON.parse('{"title":"Signature Draw · Components","description":"Draw signature like using real pen","frontmatter":{"title":"Signature Draw · Components","description":"Draw signature like using real pen"},"headers":[{"level":2,"title":"Usage","slug":"usage","link":"#usage","children":[{"level":3,"title":"Simple Usage","slug":"simple-usage","link":"#simple-usage","children":[]},{"level":3,"title":"for Initial","slug":"for-initial","link":"#for-initial","children":[]}]},{"level":2,"title":"Placeholder","slug":"placeholder","link":"#placeholder","children":[]},{"level":2,"title":"Color","slug":"color","link":"#color","children":[]},{"level":2,"title":"Binding v-model","slug":"binding-v-model","link":"#binding-v-model","children":[]},{"level":2,"title":"API","slug":"api","link":"#api","children":[{"level":3,"title":"Props","slug":"props","link":"#props","children":[]},{"level":3,"title":"Slots","slug":"slots","link":"#slots","children":[]},{"level":3,"title":"Events","slug":"events","link":"#events","children":[]}]}],"relativePath":"components/signature-draw/index.md"}'),Re={name:"components/signature-draw/index.md"},et=Object.assign(Re,{setup(e){const t=b("");return(a,s)=>{const l=m("preview");return h(),y("div",null,[Ce,r(l,null,{default:c(()=>[r(v)]),_:1}),Se,r(l,{class:"flex-col"},{default:c(()=>[r(v,{width:230})]),_:1}),ke,r(l,{class:"flex-col"},{default:c(()=>[r(v,{placeholder:"Draw signature here"})]),_:1}),Ae,r(l,{class:"flex-col space-y-2"},{default:c(()=>[r(v,{color:"#73185E"})]),_:1}),Te,r(l,{class:"flex-col space-y-2"},{default:c(()=>[r(v,{modelValue:F(t),"onUpdate:modelValue":s[0]||(s[0]=o=>ae(t)?t.value=o:null)},null,8,["modelValue"])]),_:1}),Ve,u("pre",Ie,[u("code",null,w(F(t)),1)]),u("img",{class:"mt-2 border",src:F(t)||F(j),width:"430",height:"230",alt:"Result Image"},null,8,Ee),Pe])}}});export{Ze as __pageData,et as default};
