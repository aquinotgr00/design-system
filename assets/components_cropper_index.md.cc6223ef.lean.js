import{p as K}from"./chunks/Button.3ef77315.js";import{t as P}from"./chunks/index.fd5eec28.js";import{u as ie}from"./chunks/index.703bb01d.js";import{z as de,j as Q,_ as ue,N as X,h as E,f as De,g as w,C as H,i as ye,k as Fe,r as b,V as he,o as L,c as O,m as t,B as V,n as W,a1 as Y,a2 as N,d as ge,t as me,a as o,w as h,e as g,l as ve,y as M,u as d,b as _,J as U}from"./app.ab91a073.js";import{t as Z}from"./chunks/throttle.f0db56e4.js";import{p as _e}from"./chunks/InputRange.87769ff1.js";import{u as ee}from"./chunks/utils-6ba05f5b.6459b4f6.js";import{I as Ce,a as fe}from"./chunks/16.828655ab.js";import{c as Ae,E as G}from"./chunks/empty-img.a6f5704e.js";import{u as be}from"./chunks/index.58c9ecd3.js";import{f as we}from"./chunks/base64.2ecfec5a.js";import{p as Te}from"./chunks/index.c640a1ef.js";import{c as J}from"./chunks/create-image.28dfb74f.js";import{j as Ee}from"./chunks/index.72398e94.js";import"./chunks/Button.vue_vue_type_style_index_0_lang.da1f2c0e.js";import"./chunks/debounce.09764d19.js";import"./chunks/toNumber.685f5789.js";import"./chunks/isSymbol.b765f5ee.js";import"./chunks/isObjectLike.46b91259.js";import"./chunks/load-image.265b152a.js";import"./chunks/avatar.bd58a373.js";import"./chunks/color-hash.af77277d.js";function Ie(e,s){const n=de();Q(async()=>{if(e.value){const{default:p}=await ue(()=>import("./chunks/interact.min.d3eabcee.js").then(F=>F.i),["assets/chunks/interact.min.d3eabcee.js","assets/app.ab91a073.js"]),y=Z(s.onmove,1e3/120),c=Z(s.onpinch,1e3/120);n.value=p(e.value).styleCursor(!0).gesturable({inertia:!0,onstart:s.onstart,onmove:c,onend:c,modifiers:[p.modifiers.restrict({restriction:"parent",endOnly:!0})]}).draggable({inertia:!0,onstart:s.onstart,onmove:y,onend:y,modifiers:[p.modifiers.restrict({restriction:"parent",endOnly:!0})]})}}),X(async()=>{var p;(p=n.value)==null||p.unset()})}var Se=ee,se=Se.createSVGComponent(se,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},[{elem:"path",attrs:{d:"M2 28V16a2.0023 2.0023 0 012-2H16a2.0023 2.0023 0 012 2V28a2.0023 2.0023 0 01-2 2H4A2.0023 2.0023 0 012 28zM4 16L3.9988 28H16V16zM17 2l1.41 1.41L15.83 6H21a7.0078 7.0078 0 017 7v5H26V13a5.0057 5.0057 0 00-5-5H15.83l2.58 2.59L17 12 12 7z"}}]),Re=se;const Ve=Re;var ke=ee,te=ke.createSVGComponent(te,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:16,height:16},[{elem:"path",attrs:{d:"M28 30H16a2.0023 2.0023 0 01-2-2V16a2.0023 2.0023 0 012-2H28a2.0023 2.0023 0 012 2V28A2.0023 2.0023 0 0128 30zM16 16V28H28.0012L28 16zM15 2L13.59 3.41 16.17 6H11a7.0078 7.0078 0 00-7 7v5H6V13a5.0057 5.0057 0 015-5h5.17l-2.58 2.59L15 12l5-5z"}}]),xe=te;const Ne=xe;function Pe(e){const{width:s,height:n,image:p,scale:y,angle:c,x:F,y:l,rounded:u}=e,D=e.canvas??Ae(s,n),i=D.getContext("2d"),T=p.width*y,A=p.height*y;if(D.width=s,D.height=n,i.clearRect(0,0,s,n),i.translate(s/2,n/2),i.rotate(c*Math.PI/180),i.translate(s/-2,n/-2),i.drawImage(p,(s-T)/2+F,(n-A)/2+l,T,A),u){const r=Math.min(s/2,n/2);i.globalCompositeOperation="destination-in",i.beginPath(),i.moveTo(r,0),i.arcTo(s,0,s,n,r),i.arcTo(s,n,0,n,r),i.arcTo(0,n,0,0,r),i.arcTo(0,0,s,0,r),i.closePath(),i.fill()}return D.toDataURL()}function ze(e){return E(()=>e.width&&e.height?Number.parseFloat(`${e.width}`)/Number.parseFloat(`${e.height}`):e.ratio??1)}function qe(e){return E(()=>{if(e.width)return Number.parseFloat(`${e.width}`);if(e.height&&e.ratio)return Number.parseFloat(`${e.height}`)*e.ratio})}function $e(e){return E(()=>{if(e.height)return Number.parseFloat(`${e.height}`);if(e.width&&e.ratio)return Number.parseFloat(`${e.width}`)/e.ratio})}const Me=De({directives:{pAspectRatio:Te},components:{pButton:K,pInputRange:_e,IconRotateLeft:Ve,IconRotateRight:Ne,IconZoomIn:Ce,IconZoomOut:fe},props:{modelValue:{type:[String,globalThis.File],default:""},modelModifiers:{type:Object,default:()=>({})},src:{type:[String,globalThis.File],default:void 0},ratio:{type:Number,default:void 0},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},imgWidth:{type:[String,Number],default:512},imgHeight:{type:[String,Number],default:512},imgClass:{type:[String,Array,Object],default:void 0},rounded:{type:Boolean,default:!1},noCrop:{type:Boolean,default:!1},noAutocrop:{type:Boolean,default:!1}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue","change","result","load"],setup(e,{emit:s}){const n=be(e),p=w(0),y=w(0),c=w(0),F=ie(1,.5,2),l=w(J(512,512)),u=ze(e),D=qe(e),i=$e(e),T=H(e,"rounded"),A=H(e,"src"),r=P("canvas"),I=P("parent"),m=P("target"),ae=E(()=>{const a=[];return e.noCrop&&a.push("cropper--no-crop"),e.rounded&&a.push("cropper--rounded"),a}),oe=E(()=>({transform:`rotate(${c.value}deg) translate(${p.value}px, ${y.value}px) scale(${F.value})`})),ne=E(()=>({aspectRatio:`${u.value}`,width:D.value?`${D.value}px`:"66.666667%"}));function z(){if(I.value&&m.value){const a=c.value%180===0?m.value.width:m.value.height,v=c.value%180===0?m.value.height:m.value.width;F.value=Math.min(I.value.clientWidth/a,I.value.clientHeight/v)}p.value=0,y.value=0}function j(){F.value+=.1}function B(){F.value-=.1}function le(a){c.value=(Math.trunc(c.value/90)*90+a)%360,z()}function q(a,v){const k=Math.cos(c.value*Math.PI/180),x=Math.sin(c.value*Math.PI/180),S=a*k+v*x,R=v*k-a*x;p.value+=S,y.value+=R}function pe(){c.value=0,z()}function $(){if(I.value&&m.value&&r.value){const a=I.value.clientWidth*2/3,v=D.value??a,k=i.value??v/u.value,x=a>0&&v>a?v/a:1,S=Pe({canvas:r.value,image:m.value,width:v,height:k,x:p.value,y:y.value,angle:c.value,scale:F.value*x,rounded:e.rounded}),R=e.modelModifiers.base64?S:we(S);return n.value=R,s("change",R),s("result",R),S}}function re(a){m.value&&m.value.focus(),a.deltaY>0?j():B()}function ce(){s("load"),z(),!e.noCrop&&!e.noAutocrop&&$()}return Ie(m,{onpinch(a){F.value=a.scale,q(a.dx,a.dy)},onmove(a){q(a.dx,a.dy)}}),ye(A,a=>{l.value&&l.value.startsWith("blob")&&window.URL.revokeObjectURL(l.value),l.value=a instanceof globalThis.File?window.URL.createObjectURL(a):a??J(512,512)}),Ee([A,D,i,u,T,p,y,F,c],()=>{!e.noCrop&&!e.noAutocrop&&$()},{debounce:500}),Q(()=>{e.src&&(l.value=e.src instanceof globalThis.File?window.URL.createObjectURL(e.src):e.src)}),X(()=>{l.value&&l.value.startsWith("blob")&&window.URL.revokeObjectURL(l.value)}),{classNames:ae,preview:l,imgStyle:oe,maskStyle:ne,scale:F,angle:c,reset:pe,onMouseWheel:re,onImageLoaded:ce,rotate:le,zoomIn:j,zoomOut:B,move:q,crop:$,model:n,aspectRatio:u}}});const Ue={class:"cropper__preview"},Le={ref:"canvas","data-testid":"cropper-canvas",class:"cropper__canvas"},Oe=["src","width","height"],je={class:"cropper__control"},Be={class:"cropper__control-bar"};function He(e,s,n,p,y,c){const F=b("IconZoomOut"),l=b("p-button"),u=b("p-input-range"),D=b("IconZoomIn"),i=b("IconRotateLeft"),T=b("IconRotateRight"),A=he("p-aspect-ratio");return L(),O("div",{"data-testid":"cropper",class:W(["cropper",e.classNames])},[t("div",Ue,[t("canvas",Le,null,512),t("div",{ref:"parent","data-testid":"cropper-container",class:"cropper__image-container",onWheel:s[5]||(s[5]=V((...r)=>e.onMouseWheel&&e.onMouseWheel(...r),["prevent"]))},[t("img",{ref:"target","data-testid":"cropper-preview",alt:"cropper-preview",tabindex:"0",class:W(["cropper__image",e.imgClass]),src:e.preview,style:Y(e.imgStyle),width:e.imgWidth,height:e.imgHeight,onLoad:s[0]||(s[0]=(...r)=>e.onImageLoaded&&e.onImageLoaded(...r)),onKeydown:[s[1]||(s[1]=N(V(r=>e.move(0,-1),["prevent"]),["up"])),s[2]||(s[2]=N(V(r=>e.move(0,1),["prevent"]),["down"])),s[3]||(s[3]=N(V(r=>e.move(-1,0),["prevent"]),["left"])),s[4]||(s[4]=N(V(r=>e.move(1,0),["prevent"]),["right"]))]},null,46,Oe)],544),e.noCrop?me("",!0):ge((L(),O("div",{key:0,"data-testid":"cropper-mask",class:"cropper__mask",style:Y(e.maskStyle)},null,4)),[[A,e.aspectRatio,void 0,{fixed:!0}]])]),t("div",je,[t("div",Be,[o(l,{"data-testid":"cropper-zoom-out",size:"xs",variant:"link",icon:"",pill:"",onClick:s[6]||(s[6]=r=>e.zoomOut())},{default:h(()=>[o(F)]),_:1}),o(u,{modelValue:e.scale,"onUpdate:modelValue":s[7]||(s[7]=r=>e.scale=r),"data-testid":"cropper-zoom-slider",class:"cropper__slider",min:"0.5",max:"2",step:"0.1"},null,8,["modelValue"]),o(l,{"data-testid":"cropper-zoom-in",size:"xs",variant:"link",icon:"",pill:"",onClick:s[8]||(s[8]=r=>e.zoomIn())},{default:h(()=>[o(D)]),_:1}),o(l,{"data-testid":"cropper-rotate-left",size:"xs",variant:"link",icon:"",pill:"",onClick:s[9]||(s[9]=r=>e.rotate(-90))},{default:h(()=>[o(i)]),_:1}),o(l,{"data-testid":"cropper-rotate-right",size:"xs",variant:"link",icon:"",pill:"",onClick:s[10]||(s[10]=r=>e.rotate(90))},{default:h(()=>[o(T)]),_:1})]),o(l,{"data-testid":"cropper-reset",class:"flex-shrink-0",size:"xs",variant:"link",onClick:s[11]||(s[11]=r=>e.reset())},{default:h(()=>[g(" Reset ")]),_:1}),ve(e.$slots,"control",{scale:e.scale,angle:e.angle,crop:e.crop,zoomIn:e.zoomIn,zoomOut:e.zoomOut,rotate:e.rotate,reset:e.reset})])],2)}const C=Fe(Me,[["render",He]]),f="/design-system/assets/sample-1.f0af279a.jpg",We=_("",4),Ye=_("",4),Ze=_("",2),Ge=_("",3),Je=_("",3),Ke=_("",3),Qe=_("",2),Xe={class:"truncate"},es=t("h3",{id:"encode-to-base64",tabindex:"-1"},[g("Encode to base64 "),t("a",{class:"header-anchor",href:"#encode-to-base64","aria-hidden":"true"},"#")],-1),ss=t("p",null,[g("You can add modifier "),t("code",null,"base64"),g(" to your "),t("code",null,"v-model"),g(", it's enforce result to "),t("a",{href:"https://en.wikipedia.org/wiki/Data_URI_scheme",target:"_blank",rel:"noreferrer"},"base64-dataURI"),g(".")],-1),ts=_("",2),as={class:"truncate"},os=["src"],ns=t("h3",{id:"disabling-autocrop",tabindex:"-1"},[g("Disabling Autocrop "),t("a",{class:"header-anchor",href:"#disabling-autocrop","aria-hidden":"true"},"#")],-1),ls=t("p",null,[g("By default, cropping process was ran every movement (drag, zoom, & rotate). It can be exhausting the resource on some device. You can disabled it using prop "),t("code",null,"no-autocrop"),g(". And to trigger the cropping, you can use "),t("code",null,"templateRef"),g(" on "),t("code",null,"<p-cropper>"),g(" component, and call "),t("code",null,".crop()"),g(" function.")],-1),ps=t("p",null,[t("strong",null,"result:")],-1),rs={class:"truncate"},cs=["src"],is=_("",10),Ns=JSON.parse('{"title":"Cropper · Components","description":"Preview and crop image","frontmatter":{"title":"Cropper · Components","description":"Preview and crop image"},"headers":[{"level":2,"title":"Usage","slug":"usage","link":"#usage","children":[{"level":3,"title":"Simple Usage","slug":"simple-usage","link":"#simple-usage","children":[]}]},{"level":2,"title":"Crop Size","slug":"crop-size","link":"#crop-size","children":[{"level":3,"title":"Using width and height","slug":"using-width-and-height","link":"#using-width-and-height","children":[]},{"level":3,"title":"Using Ratio","slug":"using-ratio","link":"#using-ratio","children":[]}]},{"level":2,"title":"Rounded Crop","slug":"rounded-crop","link":"#rounded-crop","children":[]},{"level":2,"title":"Viewer Mode","slug":"viewer-mode","link":"#viewer-mode","children":[]},{"level":2,"title":"Binding v-model","slug":"binding-v-model","link":"#binding-v-model","children":[{"level":3,"title":"Encode to base64","slug":"encode-to-base64","link":"#encode-to-base64","children":[]},{"level":3,"title":"Disabling Autocrop","slug":"disabling-autocrop","link":"#disabling-autocrop","children":[]}]},{"level":2,"title":"API","slug":"api","link":"#api","children":[{"level":3,"title":"Props","slug":"props","link":"#props","children":[]},{"level":3,"title":"Slots","slug":"slots","link":"#slots","children":[]},{"level":3,"title":"Events","slug":"events","link":"#events","children":[]}]},{"level":2,"title":"See Also","slug":"see-also","link":"#see-also","children":[]}],"relativePath":"components/cropper/index.md"}'),ds={name:"components/cropper/index.md"},Ps=Object.assign(ds,{setup(e){const s=w(),n=w(),p=w(),y=P("cropper");function c(){y.value&&y.value.crop()}return(F,l)=>{const u=b("preview");return L(),O("div",null,[We,o(u,{class:"flex-col"},{default:h(()=>[o(C,{src:d(f)},null,8,["src"])]),_:1}),Ye,o(u,null,{default:h(()=>[o(C,{src:d(f),width:"500",height:"200"},null,8,["src"])]),_:1}),Ze,o(u,null,{default:h(()=>[o(C,{src:d(f),ratio:16/9},null,8,["src"])]),_:1}),Ge,o(u,null,{default:h(()=>[o(C,{src:d(f),rounded:""},null,8,["src"])]),_:1}),Je,o(u,null,{default:h(()=>[o(C,{src:d(f),"no-crop":""},null,8,["src"])]),_:1}),Ke,o(u,null,{default:h(()=>[o(C,{src:d(f),modelValue:d(s),"onUpdate:modelValue":l[0]||(l[0]=D=>U(s)?s.value=D:null)},null,8,["src","modelValue"])]),_:1}),Qe,t("pre",Xe,[t("code",null,M(d(s)),1)]),es,ss,o(u,{class:"flex-col"},{default:h(()=>[o(C,{src:d(f),modelValue:d(n),"onUpdate:modelValue":l[1]||(l[1]=D=>U(n)?n.value=D:null),modelModifiers:{base64:!0}},null,8,["src","modelValue"])]),_:1}),ts,t("pre",as,[t("code",null,M(d(n)),1)]),t("img",{class:"mt-2 border",src:d(n)||d(G),alt:"Result Image"},null,8,os),ns,ls,o(u,{class:"flex-col"},{default:h(()=>[o(C,{ref_key:"cropper",ref:y,src:d(f),modelValue:d(p),"onUpdate:modelValue":l[2]||(l[2]=D=>U(p)?p.value=D:null),modelModifiers:{base64:!0},"no-autocrop":""},null,8,["src","modelValue"]),o(K,{onClick:c},{default:h(()=>[g("Do Crop")]),_:1})]),_:1}),ps,t("pre",rs,[t("code",null,M(d(p)),1)]),t("img",{class:"mt-2 border",src:d(p)||d(G),alt:"Result Image"},null,8,cs),is])}}});export{Ns as __pageData,Ps as default};
