var L=Object.defineProperty;var x=(e,t,a)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var m=(e,t,a)=>(x(e,typeof t!="symbol"?t+"":t,a),a);import{t as B,l as U,e as Y}from"./chunks/index.7eb79c8e.js";import{u as C}from"./chunks/use-input.46134d19.js";import{B as E}from"./chunks/Button.05afbe46.js";import{t as X,d as M,a as T,p as q,b as z,r as O,E as j}from"./chunks/empty-img.18f94702.js";import{s as Q,j as P,Q as W,R as G,f as S,g as f,i as $,_ as A,b as y,o as h,c as D,a as u,l as k,w as p,k as N,t as w,p as b,d as r,h as F,O as J,n as V,T as H,Y as K,m as Z,u as ee,e as v}from"./app.ee7072c2.js";import{C as te}from"./chunks/Caption.6b31982e.js";import{l as ae}from"./chunks/load-image.5a7761ed.js";import{I as se}from"./chunks/20.3fd3348a.js";import"./chunks/toNumber.9376c838.js";import"./chunks/isSymbol.f4a981c1.js";import"./chunks/defu.087119af.js";import"./chunks/utils-6ba05f5b.fea0a609.js";function le(e,t){const a=Q();P(async()=>{if(e.value){const{default:s}=await W(()=>import("./chunks/interact.min.ab5cf4b8.js").then(o=>o.i),["assets/chunks/interact.min.ab5cf4b8.js","assets/chunks/utils-6ba05f5b.fea0a609.js","assets/app.ee7072c2.js"]),l=X(t.onmove,1e3/60);a.value=s(e.value).styleCursor(!1).draggable({origin:"self",inertia:{enabled:!0,resistance:10},onstart:t.onstart,onmove:l,onend:l})}}),G(async()=>{var s;(s=a.value)==null||s.unset()})}class ne{constructor(t){m(this,"lastX");m(this,"lastY");m(this,"movingX");m(this,"movingY");m(this,"smoother");this.lastX=0,this.lastY=0,this.movingX=0,this.movingY=0,this.smoother=t*.05+.7}start(t,a){this.lastX=t,this.lastY=a,this.movingX=0,this.movingY=0}move(t,a){const s=this.lastX,l=this.lastY,o=(this.movingX+(s-t)*.1)*this.smoother,d=(this.movingY+(l-a)*.1)*this.smoother,n=s-o,i=l-d;return this.movingX=o,this.movingY=d,this.lastX=n,this.lastY=i,[s,l,n,i]}}function oe(e){return Array.from({length:e}).map((t,a)=>new ne(a/(e*1.25)))}const re=S({components:{Caption:te,Button:E},props:{modelValue:{type:String,default:""},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e){const t=C(e),a=f(!0),s=B("canvas"),l=oe(15);function o(){z(s.value),a.value=!0,t.value=""}function d(n){a.value||(O(s.value,n),t.value=T(s.value))}return $(()=>e.color,d),le(s,{onstart(n){for(const i of l)i.start(n.pageX,n.pageY)},onmove(n){for(const i of l){const g=i.move(n.pageX,n.pageY),c={color:e.color};M(s.value,g,c)}a.value=!1,t.value=T(s.value)}}),P(()=>{t.value&&t.value.startsWith("data:image/png")&&(q(s.value,t.value),a.value=!1)}),{model:t,reset:o,isBlank:a,setColor:d}}});const de={class:"signature-draw signature-draw--desktop","data-testid":"signature-draw-desktop"},ie=["width","height"],pe={key:1,class:"signature-draw__control"};function ce(e,t,a,s,l,o){const d=y("Caption"),n=y("Button");return h(),D("div",de,[u("canvas",{ref:"canvas",class:"signature-draw__canvas","data-testid":"signature-draw-canvas",width:e.width,height:e.height},null,8,ie),e.isBlank?(h(),k(d,{key:0,class:"signature-draw__placeholder","data-testid":"signature-draw-placeholder"},{default:p(()=>[N(w(e.placeholder),1)]),_:1})):b("",!0),e.isBlank?b("",!0):(h(),D("div",pe,[r(n,{"data-testid":"signature-draw-reset",variant:"link",size:"xs",class:"signature-draw__reset",pill:"",onClick:t[0]||(t[0]=i=>e.reset())},{default:p(()=>[u("span",null,w(e.resetLabel),1)]),_:1})]))])}const R=A(re,[["render",ce]]);async function I(e,t){const a=document.createElement("canvas"),s=a.getContext("2d"),l=await ae(e);return a.width=t%180===0?l.width:l.height,a.height=t%180===0?l.height:l.width,s.translate(a.width/2,a.height/2),s.rotate(t*Math.PI/180),s.drawImage(l,l.width/-2,l.height/-2),a.toDataURL()}const ue=S({components:{Button:E,IconEdit:se,SignatureDrawDesktop:R},props:{modelValue:{type:String,default:""},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"},openDrawLabel:{type:String,default:"Click to Draw"},closeDrawLabel:{type:String,default:"Save"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e){const t=C(e),a=f(""),s=f(!1),l=U(),o=F(()=>l.width.value<e.width+32?"rotate":"normal"),d=F(()=>{const c=[];return o.value&&c.push(`signature-draw--${o.value}`),c}),n=F(()=>({width:`${e.width}px`,aspectRatio:`${e.width/e.height}`}));async function i(){const c=t.value&&o.value==="rotate"?await I(t.value,90):t.value;a.value=c,s.value=!0}async function g(){const c=a.value&&o.value==="rotate"?await I(a.value,-90):a.value;t.value=c,s.value=!1}return $(s,c=>{c?document.body.style.setProperty("overflow-y","hidden"):document.body.style.removeProperty("overflow-y")}),{classNames:d,style:n,rawModel:a,model:t,isOpen:s,mode:o,open:i,close:g}}});const he={class:"signature-draw__preview"},ge=["src"],me={key:0,class:"signature-draw__modal","data-testid":"signature-draw-modal"};function ye(e,t,a,s,l,o){const d=y("IconEdit"),n=y("Button"),i=y("SignatureDrawDesktop");return h(),D("div",{class:V(["signature-draw signature-draw--mobile",e.classNames]),"data-testid":"signature-draw-mobile",style:K(e.style)},[u("div",he,[e.model?(h(),D(J,{key:0},[u("img",{src:e.model,alt:"signature-draw-preview","data-testid":"signature-draw-preview",onClick:t[0]||(t[0]=g=>e.open())},null,8,ge),r(n,{variant:"link",size:"xs",class:"signature-draw__reset","data-testid":"signature-draw-edit",icon:"",onClick:t[1]||(t[1]=g=>e.open())},{default:p(()=>[r(d)]),_:1})],64)):(h(),k(n,{key:1,"data-testid":"signature-draw-open",onClick:e.open},{default:p(()=>[N(w(e.openDrawLabel),1)]),_:1},8,["onClick"]))]),r(H,{name:"zoom-in"},{default:p(()=>[e.isOpen?(h(),D("div",me,[r(i,{modelValue:e.rawModel,"onUpdate:modelValue":t[2]||(t[2]=g=>e.rawModel=g),class:V(e.classNames),placeholder:e.placeholder,color:e.color,width:e.mode==="rotate"?e.height:e.width,height:e.mode==="rotate"?e.width:e.height,"reset-label":e.resetLabel},null,8,["modelValue","class","placeholder","color","width","height","reset-label"]),r(n,{"data-testid":"signature-draw-close",onClick:e.close},{default:p(()=>[u("span",null,w(e.closeDrawLabel),1)]),_:1},8,["onClick"])])):b("",!0)]),_:1})],6)}const De=A(ue,[["render",ye]]),ve=S({props:{modelValue:{type:String,default:""},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"},openDrawLabel:{type:String,default:"Click to Draw"},closeDrawLabel:{type:String,default:"Save"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e){const t=C(e),a=Y("(min-width: 768px)");return{view:F(()=>a.value?R:De),model:t}}});function _e(e,t,a,s,l,o){return h(),k(Z(e.view),{modelValue:e.model,"onUpdate:modelValue":t[0]||(t[0]=d=>e.model=d),width:e.width,height:e.height,color:e.color,placeholder:e.placeholder,"reset-label":e.resetLabel,"open-draw-label":e.openDrawLabel,"close-draw-label":e.closeDrawLabel},null,8,["modelValue","width","height","color","placeholder","reset-label","open-draw-label","close-draw-label"])}const _=A(ve,[["render",_e]]),we=v("",3),Fe=v("",2),fe=v("",2),be=v("",3),Ce=v("",3),Se=u("p",null,[u("strong",null,"result")],-1),Ae={class:"truncate"},ke=["src"],Te=v("",8),qe=JSON.parse('{"title":"Signature Draw","description":"","frontmatter":{},"headers":[{"level":2,"title":"Usage","slug":"usage","link":"#usage","children":[{"level":3,"title":"Simple Usage","slug":"simple-usage","link":"#simple-usage","children":[]},{"level":3,"title":"for Initial","slug":"for-initial","link":"#for-initial","children":[]}]},{"level":2,"title":"Placeholder","slug":"placeholder","link":"#placeholder","children":[]},{"level":2,"title":"Color","slug":"color","link":"#color","children":[]},{"level":2,"title":"Binding v-model","slug":"binding-v-model","link":"#binding-v-model","children":[]},{"level":2,"title":"API","slug":"api","link":"#api","children":[{"level":3,"title":"Props","slug":"props","link":"#props","children":[]},{"level":3,"title":"Slots","slug":"slots","link":"#slots","children":[]},{"level":3,"title":"Events","slug":"events","link":"#events","children":[]}]}],"relativePath":"components/signature-draw/index.md"}'),Ve={name:"components/signature-draw/index.md"},ze=Object.assign(Ve,{setup(e){const t=f("");return(a,s)=>{const l=y("preview");return h(),D("div",null,[we,r(l,null,{default:p(()=>[r(_)]),_:1}),Fe,r(l,{class:"flex-col"},{default:p(()=>[r(_,{width:230})]),_:1}),fe,r(l,{class:"flex-col"},{default:p(()=>[r(_,{placeholder:"Draw signature here"})]),_:1}),be,r(l,{class:"flex-col gap-2"},{default:p(()=>[r(_,{color:"#73185E"})]),_:1}),Ce,r(l,{class:"flex-col gap-2"},{default:p(()=>[r(_,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=o=>t.value=o)},null,8,["modelValue"])]),_:1}),Se,u("pre",Ae,[u("code",null,w(t.value),1)]),u("img",{class:"mt-2 border",src:t.value||ee(j),width:"430",height:"230",alt:"Result Image"},null,8,ke),Te])}}});export{qe as __pageData,ze as default};
