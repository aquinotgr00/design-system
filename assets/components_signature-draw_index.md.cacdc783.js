var te=Object.defineProperty;var ae=(e,t,a)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var f=(e,t,a)=>(ae(e,typeof t!="symbol"?t+"":t,a),a);import{t as se,e as ne,f as le}from"./chunks/index.08d93904.js";import{u as R}from"./chunks/use-input.14dd1c1d.js";import{B as W}from"./chunks/Button.0628ec3d.js";import{d as oe}from"./chunks/defu.087119af.js";import{l as q}from"./chunks/load-image.5a7761ed.js";import{s as re,o as z,S as ie,U as de,d as N,r as A,w as G,_ as $,g as D,a as m,b as v,f as g,l as L,i as h,k as J,t as C,p as x,h as c,c as T,O as ce,n as M,T as pe,a1 as ue,m as he,u as ge,j as _}from"./app.dffd03f1.js";import{t as X,i as j}from"./chunks/toNumber.9376c838.js";import{r as me}from"./chunks/isSymbol.f4a981c1.js";import{C as ye}from"./chunks/Caption.9cf9ce9c.js";import{I as fe}from"./chunks/20.fe869b01.js";import"./chunks/utils-6ba05f5b.cbdc3b02.js";var De=function(){return me.Date.now()};const E=De;var ve="Expected a function",_e=Math.max,we=Math.min;function Fe(e,t,a){var s,n,r,o,l,i,p=0,u=!1,w=!1,k=!0;if(typeof e!="function")throw new TypeError(ve);t=X(t)||0,j(a)&&(u=!!a.leading,w="maxWait"in a,r=w?_e(X(a.maxWait)||0,t):r,k="trailing"in a?!!a.trailing:k);function I(d){var y=s,F=n;return s=n=void 0,p=d,o=e.apply(F,y),o}function H(d){return p=d,l=setTimeout(S,t),u?I(d):o}function K(d){var y=d-i,F=d-p,U=t-y;return w?we(U,r-F):U}function P(d){var y=d-i,F=d-p;return i===void 0||y>=t||y<0||w&&F>=r}function S(){var d=E();if(P(d))return B(d);l=setTimeout(S,K(d))}function B(d){return l=void 0,k&&s?I(d):(s=n=void 0,o)}function Z(){l!==void 0&&clearTimeout(l),p=0,s=i=n=l=void 0}function ee(){return l===void 0?o:B(E())}function V(){var d=E(),y=P(d);if(s=arguments,n=this,i=d,y){if(l===void 0)return H(i);if(w)return clearTimeout(l),l=setTimeout(S,t),I(i)}return l===void 0&&(l=setTimeout(S,t)),o}return V.cancel=Z,V.flush=ee,V}var be="Expected a function";function Ce(e,t,a){var s=!0,n=!0;if(typeof e!="function")throw new TypeError(be);return j(a)&&(s="leading"in a?!!a.leading:s,n="trailing"in a?!!a.trailing:n),Fe(e,t,{leading:s,maxWait:t,trailing:n})}function Se(e){const t=e.slice(1,3),a=e.slice(3,5),s=e.slice(5,7);return{R:Number.parseInt(t,16),G:Number.parseInt(a,16),B:Number.parseInt(s,16)}}function Te(e,t){const a=e.getContext("2d"),s=a.getImageData(0,0,e.width,e.height),n=s.data,r=Se(t);for(let o=0;o<n.length;o+=4)n[o+3]>0&&(n[o]=r.R,n[o+1]=r.G,n[o+2]=r.B);a.putImageData(s,0,0)}function Ae(e,t,a){const s=e.getContext("2d"),n=oe(a,{color:"#000000",lineSize:2.5,lineCap:"round",lineJoin:"round"});s.strokeStyle=n.color,s.lineWidth=n.lineSize,s.lineJoin=n.lineJoin,s.lineCap=n.lineCap,s.beginPath(),s.moveTo(t[0],t[1]),s.lineTo(t[2],t[3]),s.stroke()}function ke(e){e.getContext("2d").clearRect(0,0,e.width,e.height)}async function Ie(e,t){const a=e.getContext("2d"),s=await q(t);a.clearRect(0,0,e.width,e.height),a.drawImage(s,0,0)}function Y(e){return e.toDataURL()}function Ve(e,t){const a=re();z(async()=>{if(e.value){const{default:s}=await ie(()=>import("./chunks/interact.min.8eb89790.js").then(r=>r.i),["assets/chunks/interact.min.8eb89790.js","assets/chunks/utils-6ba05f5b.cbdc3b02.js","assets/app.dffd03f1.js"]),n=Ce(t.onmove,1e3/60);a.value=s(e.value).styleCursor(!1).draggable({origin:"self",inertia:{enabled:!0,resistance:10},onstart:t.onstart,onmove:n,onend:n})}}),de(async()=>{var s;(s=a.value)==null||s.unset()})}class Ee{constructor(t){f(this,"lastX");f(this,"lastY");f(this,"movingX");f(this,"movingY");f(this,"smoother");this.lastX=0,this.lastY=0,this.movingX=0,this.movingY=0,this.smoother=t*.05+.7}start(t,a){this.lastX=t,this.lastY=a,this.movingX=0,this.movingY=0}move(t,a){const s=this.lastX,n=this.lastY,r=(this.movingX+(s-t)*.1)*this.smoother,o=(this.movingY+(n-a)*.1)*this.smoother,l=s-r,i=n-o;return this.movingX=r,this.movingY=o,this.lastX=l,this.lastY=i,[s,n,l,i]}}function xe(e){return Array.from({length:e}).map((t,a)=>new Ee(a/(e*1.25)))}const Re=N({components:{Caption:ye,Button:W},props:{modelValue:{type:String,default:""},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e){const t=R(e),a=A(!0),s=se("canvas"),n=xe(15);function r(){ke(s.value),a.value=!0,t.value=""}function o(l){a.value||(Te(s.value,l),t.value=Y(s.value))}return G(()=>e.color,o),Ve(s,{onstart(l){for(const i of n)i.start(l.pageX,l.pageY)},onmove(l){for(const i of n){const p=i.move(l.pageX,l.pageY),u={color:e.color};Ae(s.value,p,u)}a.value=!1,t.value=Y(s.value)}}),z(()=>{t.value&&t.value.startsWith("data:image/png")&&(Ie(s.value,t.value),a.value=!1)}),{model:t,reset:r,isBlank:a,setColor:o}}});const Ne={class:"signature-draw signature-draw--desktop","data-testid":"signature-draw-desktop"},$e=["width","height"],Le={key:1,class:"signature-draw__control"};function Pe(e,t,a,s,n,r){const o=D("Caption"),l=D("Button");return m(),v("div",Ne,[g("canvas",{ref:"canvas",class:"signature-draw__canvas","data-testid":"signature-draw-canvas",width:e.width,height:e.height},null,8,$e),e.isBlank?(m(),L(o,{key:0,class:"signature-draw__placeholder","data-testid":"signature-draw-placeholder"},{default:h(()=>[J(C(e.placeholder),1)]),_:1})):x("",!0),e.isBlank?x("",!0):(m(),v("div",Le,[c(l,{"data-testid":"signature-draw-reset",variant:"link",size:"xs",class:"signature-draw__reset",pill:"",onClick:t[0]||(t[0]=i=>e.reset())},{default:h(()=>[g("span",null,C(e.resetLabel),1)]),_:1})]))])}const Q=$(Re,[["render",Pe]]);async function O(e,t){const a=document.createElement("canvas"),s=a.getContext("2d"),n=await q(e);return a.width=t%180===0?n.width:n.height,a.height=t%180===0?n.height:n.width,s.translate(a.width/2,a.height/2),s.rotate(t*Math.PI/180),s.drawImage(n,n.width/-2,n.height/-2),a.toDataURL()}const Be=N({components:{Button:W,IconEdit:fe,SignatureDrawDesktop:Q},props:{modelValue:{type:String,default:""},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"},openDrawLabel:{type:String,default:"Click to Draw"},closeDrawLabel:{type:String,default:"Save"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e){const t=R(e),a=A(""),s=A(!1),n=ne(),r=T(()=>n.width.value<e.width+32?"rotate":"normal"),o=T(()=>{const u=[];return r.value&&u.push(`signature-draw--${r.value}`),u}),l=T(()=>({width:`${e.width}px`,aspectRatio:`${e.width/e.height}`}));async function i(){const u=t.value&&r.value==="rotate"?await O(t.value,90):t.value;a.value=u,s.value=!0}async function p(){const u=a.value&&r.value==="rotate"?await O(a.value,-90):a.value;t.value=u,s.value=!1}return G(s,u=>{u?document.body.style.setProperty("overflow-y","hidden"):document.body.style.removeProperty("overflow-y")}),{classNames:o,style:l,rawModel:a,model:t,isOpen:s,mode:r,open:i,close:p}}});const Ue={class:"signature-draw__preview"},Me=["src"],Xe={key:0,class:"signature-draw__modal","data-testid":"signature-draw-modal"};function Ye(e,t,a,s,n,r){const o=D("IconEdit"),l=D("Button"),i=D("SignatureDrawDesktop");return m(),v("div",{class:M(["signature-draw signature-draw--mobile",e.classNames]),"data-testid":"signature-draw-mobile",style:ue(e.style)},[g("div",Ue,[e.model?(m(),v(ce,{key:0},[g("img",{src:e.model,alt:"signature-draw-preview","data-testid":"signature-draw-preview",onClick:t[0]||(t[0]=p=>e.open())},null,8,Me),c(l,{variant:"link",size:"xs",class:"signature-draw__reset","data-testid":"signature-draw-edit",icon:"",onClick:t[1]||(t[1]=p=>e.open())},{default:h(()=>[c(o)]),_:1})],64)):(m(),L(l,{key:1,"data-testid":"signature-draw-open",onClick:e.open},{default:h(()=>[J(C(e.openDrawLabel),1)]),_:1},8,["onClick"]))]),c(pe,{name:"zoom-in"},{default:h(()=>[e.isOpen?(m(),v("div",Xe,[c(i,{modelValue:e.rawModel,"onUpdate:modelValue":t[2]||(t[2]=p=>e.rawModel=p),class:M(e.classNames),placeholder:e.placeholder,color:e.color,width:e.mode==="rotate"?e.height:e.width,height:e.mode==="rotate"?e.width:e.height,"reset-label":e.resetLabel},null,8,["modelValue","class","placeholder","color","width","height","reset-label"]),c(l,{"data-testid":"signature-draw-close",onClick:e.close},{default:h(()=>[g("span",null,C(e.closeDrawLabel),1)]),_:1},8,["onClick"])])):x("",!0)]),_:1})],6)}const Oe=$(Be,[["render",Ye]]),We=N({props:{modelValue:{type:String,default:""},width:{type:Number,default:430},height:{type:Number,default:230},color:{type:String,default:"#000000"},placeholder:{type:String,default:""},resetLabel:{type:String,default:"Reset"},openDrawLabel:{type:String,default:"Click to Draw"},closeDrawLabel:{type:String,default:"Save"}},models:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue"],setup(e){const t=R(e),a=le("(min-width: 768px)");return{view:T(()=>a.value?Q:Oe),model:t}}});function qe(e,t,a,s,n,r){return m(),L(he(e.view),{modelValue:e.model,"onUpdate:modelValue":t[0]||(t[0]=o=>e.model=o),width:e.width,height:e.height,color:e.color,placeholder:e.placeholder,"reset-label":e.resetLabel,"open-draw-label":e.openDrawLabel,"close-draw-label":e.closeDrawLabel},null,8,["modelValue","width","height","color","placeholder","reset-label","open-draw-label","close-draw-label"])}const b=$(We,[["render",qe]]),ze="/design-system/assets/empty-img.9d0c8fe3.png",Ge=_('<h1 id="signature-draw" tabindex="-1">Signature Draw <a class="header-anchor" href="#signature-draw" aria-hidden="true">#</a></h1><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-hidden="true">#</a></h2><h3 id="simple-usage" tabindex="-1">Simple Usage <a class="header-anchor" href="#simple-usage" aria-hidden="true">#</a></h3>',3),Je=_(`<div class="language-vue"><button class="copy"></button><span class="lang">vue</span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p-signature-draw</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h3 id="for-initial" tabindex="-1">for Initial <a class="header-anchor" href="#for-initial" aria-hidden="true">#</a></h3>`,2),je=_(`<div class="language-vue"><button class="copy"></button><span class="lang">vue</span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p-signature-draw</span><span style="color:#89DDFF;"> :</span><span style="color:#C792EA;">width</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">230</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="placeholder" tabindex="-1">Placeholder <a class="header-anchor" href="#placeholder" aria-hidden="true">#</a></h2>`,2),Qe=_(`<div class="language-vue"><button class="copy"></button><span class="lang">vue</span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p-signature-draw</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">placeholder</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Draw signature here</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="color" tabindex="-1">Color <a class="header-anchor" href="#color" aria-hidden="true">#</a></h2><p>Set pen color with prop <code>color</code>, default is <code>#000000</code></p>`,3),He=_(`<div class="language-vue"><button class="copy"></button><span class="lang">vue</span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p-signature-draw</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">color</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">#73185E</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="binding-v-model" tabindex="-1">Binding v-model <a class="header-anchor" href="#binding-v-model" aria-hidden="true">#</a></h2><p>Result of drawing image is store in <code>v-model</code> value. It&#39;s encoded in <a href="https://en.wikipedia.org/wiki/Data_URI_scheme" target="_blank" rel="noreferrer">base64-dataURI</a> format.</p>`,3),Ke=g("p",null,[g("strong",null,"result")],-1),Ze={class:"truncate"},et=["src"],tt=_(`<div class="language-vue"><button class="copy"></button><span class="lang">vue</span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p-signature-draw</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">v-model</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">result</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">template</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">setup</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> result </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ref</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="api" tabindex="-1">API <a class="header-anchor" href="#api" aria-hidden="true">#</a></h2><h3 id="props" tabindex="-1">Props <a class="header-anchor" href="#props" aria-hidden="true">#</a></h3><table><thead><tr><th>Props</th><th style="text-align:center;">Type</th><th style="text-align:center;">Default</th><th>Description</th></tr></thead><tbody><tr><td><code>width</code></td><td style="text-align:center;"><code>Number</code></td><td style="text-align:center;"><code>430</code></td><td>Canvas&#39;s width</td></tr><tr><td><code>height</code></td><td style="text-align:center;"><code>Number</code></td><td style="text-align:center;"><code>230</code></td><td>Canvas&#39;s width</td></tr><tr><td><code>placeholder</code></td><td style="text-align:center;"><code>String</code></td><td style="text-align:center;"><code>-</code></td><td>Canvas&#39;s placeholder</td></tr><tr><td><code>color</code></td><td style="text-align:center;"><code>String</code></td><td style="text-align:center;"><code>#000000</code></td><td>Pencil color</td></tr><tr><td><code>modelValue</code></td><td style="text-align:center;"><code>String</code></td><td style="text-align:center;"><code>-</code></td><td>Result of draw image, in <a href="https://en.wikipedia.org/wiki/Data_URI_scheme" target="_blank" rel="noreferrer">base64-dataURI</a></td></tr><tr><td><code>resetLabel</code></td><td style="text-align:center;"><code>String</code></td><td style="text-align:center;"><code>Reset</code></td><td>Reset button&#39;s label</td></tr><tr><td><code>openDrawLabel</code></td><td style="text-align:center;"><code>String</code></td><td style="text-align:center;"><code>Click to Draw</code></td><td>Start draw button&#39;s label (in mobile-view)</td></tr><tr><td><code>closeDrawLabel</code></td><td style="text-align:center;"><code>String</code></td><td style="text-align:center;"><code>Save</code></td><td>Save draw button&#39;s label (in mobile-view)</td></tr></tbody></table><h3 id="slots" tabindex="-1">Slots <a class="header-anchor" href="#slots" aria-hidden="true">#</a></h3><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td colspan="2" class="text-center">There no slots here</td></tr></tbody></table><h3 id="events" tabindex="-1">Events <a class="header-anchor" href="#events" aria-hidden="true">#</a></h3><table><thead><tr><th>Name</th><th>Arguments</th><th>Description</th></tr></thead><tbody><tr><td colspan="3" class="text-center">There no props here</td></tr></tbody></table>`,8),mt=JSON.parse('{"title":"Signature Draw","description":"","frontmatter":{},"headers":[{"level":2,"title":"Usage","slug":"usage","link":"#usage","children":[{"level":3,"title":"Simple Usage","slug":"simple-usage","link":"#simple-usage","children":[]},{"level":3,"title":"for Initial","slug":"for-initial","link":"#for-initial","children":[]}]},{"level":2,"title":"Placeholder","slug":"placeholder","link":"#placeholder","children":[]},{"level":2,"title":"Color","slug":"color","link":"#color","children":[]},{"level":2,"title":"Binding v-model","slug":"binding-v-model","link":"#binding-v-model","children":[]},{"level":2,"title":"API","slug":"api","link":"#api","children":[{"level":3,"title":"Props","slug":"props","link":"#props","children":[]},{"level":3,"title":"Slots","slug":"slots","link":"#slots","children":[]},{"level":3,"title":"Events","slug":"events","link":"#events","children":[]}]}],"relativePath":"components/signature-draw/index.md"}'),at={name:"components/signature-draw/index.md"},yt=Object.assign(at,{setup(e){const t=A("");return(a,s)=>{const n=D("preview");return m(),v("div",null,[Ge,c(n,null,{default:h(()=>[c(b)]),_:1}),Je,c(n,{class:"flex-col"},{default:h(()=>[c(b,{width:230})]),_:1}),je,c(n,{class:"flex-col"},{default:h(()=>[c(b,{placeholder:"Draw signature here"})]),_:1}),Qe,c(n,{class:"flex-col gap-2"},{default:h(()=>[c(b,{color:"#73185E"})]),_:1}),He,c(n,{class:"flex-col gap-2"},{default:h(()=>[c(b,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=r=>t.value=r)},null,8,["modelValue"])]),_:1}),Ke,g("pre",Ze,[g("code",null,C(t.value),1)]),g("img",{class:"mt-2 border",src:t.value||ge(ze),width:"430",height:"230",alt:"Result Image"},null,8,et),tt])}}});export{mt as __pageData,yt as default};
